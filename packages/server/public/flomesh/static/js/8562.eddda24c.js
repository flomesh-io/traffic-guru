"use strict";(self.webpackChunkflomesh_load_balancer=self.webpackChunkflomesh_load_balancer||[]).push([[8562],{62967:function(e,t,a){a.d(t,{Z:function(){return c}});var i=a(66252),n={icon:function(e,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M911.9 283.9v.5L835.5 865c-1 8-7.9 14-15.9 14H204.5c-8.1 0-14.9-6.1-16-14l-76.4-580.6v-.6 1.6L188.5 866c1.1 7.9 7.9 14 16 14h615.1c8 0 14.9-6 15.9-14l76.4-580.6c.1-.5.1-1 0-1.5z",fill:t}},{tag:"path",attrs:{d:"M773.6 810.6l53.9-409.4-139.8 86.1L512 252.9 336.3 487.3l-139.8-86.1 53.8 409.4h523.3zm-374.2-189c0-62.1 50.5-112.6 112.6-112.6s112.6 50.5 112.6 112.6v1c0 62.1-50.5 112.6-112.6 112.6s-112.6-50.5-112.6-112.6v-1z",fill:t}},{tag:"path",attrs:{d:"M512 734.2c61.9 0 112.3-50.2 112.6-112.1v-.5c0-62.1-50.5-112.6-112.6-112.6s-112.6 50.5-112.6 112.6v.5c.3 61.9 50.7 112.1 112.6 112.1zm0-160.9c26.6 0 48.2 21.6 48.2 48.3 0 26.6-21.6 48.3-48.2 48.3s-48.2-21.6-48.2-48.3c0-26.6 21.6-48.3 48.2-48.3z",fill:e}},{tag:"path",attrs:{d:"M188.5 865c1.1 7.9 7.9 14 16 14h615.1c8 0 14.9-6 15.9-14l76.4-580.6v-.5c.3-6.4-6.7-10.8-12.3-7.4L705 396.4 518.4 147.5a8.06 8.06 0 00-12.9 0L319 396.4 124.3 276.5c-5.5-3.4-12.6.9-12.2 7.3v.6L188.5 865zm147.8-377.7L512 252.9l175.7 234.4 139.8-86.1-53.9 409.4H250.3l-53.8-409.4 139.8 86.1z",fill:e}}]}},name:"crown",theme:"twotone"},s=a(33058);function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?Object(arguments[t]):{},i=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),i.forEach((function(t){l(e,t,a[t])}))}return e}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var r=function(e,t){var a=o({},e,t.attrs);return(0,i.Wm)(s.Z,o({},a,{icon:n}),null)};r.displayName="CrownTwoTone",r.inheritAttrs=!1;var c=r},77682:function(e,t,a){a.d(t,{Z:function(){return c}});var i=a(66252),n={icon:function(e,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 632h128v192H696zm-496 0h128v192H200z",fill:t}},{tag:"path",attrs:{d:"M512 128c-212.1 0-384 171.9-384 384v360c0 13.3 10.7 24 24 24h184c35.3 0 64-28.7 64-64V624c0-35.3-28.7-64-64-64H200v-48c0-172.3 139.7-312 312-312s312 139.7 312 312v48H688c-35.3 0-64 28.7-64 64v208c0 35.3 28.7 64 64 64h184c13.3 0 24-10.7 24-24V512c0-212.1-171.9-384-384-384zM328 632v192H200V632h128zm496 192H696V632h128v192z",fill:e}}]}},name:"customer-service",theme:"twotone"},s=a(33058);function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?Object(arguments[t]):{},i=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),i.forEach((function(t){l(e,t,a[t])}))}return e}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var r=function(e,t){var a=o({},e,t.attrs);return(0,i.Wm)(s.Z,o({},a,{icon:n}),null)};r.displayName="CustomerServiceTwoTone",r.inheritAttrs=!1;var c=r},38046:function(e,t,a){a.d(t,{Z:function(){return c}});var i=a(66252),n={icon:function(e,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 632H136V232h752v560z",fill:e}},{tag:"path",attrs:{d:"M136 792h752V232H136v560zm472-372c0-4.4 1-8 2.3-8h123.4c1.3 0 2.3 3.6 2.3 8v48c0 4.4-1 8-2.3 8H610.3c-1.3 0-2.3-3.6-2.3-8v-48zm0 144c0-4.4 3.2-8 7.1-8h185.7c3.9 0 7.1 3.6 7.1 8v48c0 4.4-3.2 8-7.1 8H615.1c-3.9 0-7.1-3.6-7.1-8v-48zM216.2 664.6c2.8-53.3 31.9-99.6 74.6-126.1-18.1-20-29.1-46.4-29.1-75.5 0-61.9 49.9-112 111.4-112s111.4 50.1 111.4 112c0 29.1-11 55.6-29.1 75.5 42.6 26.4 71.8 72.8 74.6 126.1a8 8 0 01-8 8.4h-43.9c-4.2 0-7.6-3.3-7.9-7.5-3.8-50.5-46-90.5-97.2-90.5s-93.4 40-97.2 90.5c-.3 4.2-3.7 7.5-7.9 7.5H224c-4.6 0-8.2-3.8-7.8-8.4z",fill:t}},{tag:"path",attrs:{d:"M321.3 463a51.7 52 0 10103.4 0 51.7 52 0 10-103.4 0z",fill:t}},{tag:"path",attrs:{d:"M610.3 476h123.4c1.3 0 2.3-3.6 2.3-8v-48c0-4.4-1-8-2.3-8H610.3c-1.3 0-2.3 3.6-2.3 8v48c0 4.4 1 8 2.3 8zm4.8 144h185.7c3.9 0 7.1-3.6 7.1-8v-48c0-4.4-3.2-8-7.1-8H615.1c-3.9 0-7.1 3.6-7.1 8v48c0 4.4 3.2 8 7.1 8zM224 673h43.9c4.2 0 7.6-3.3 7.9-7.5 3.8-50.5 46-90.5 97.2-90.5s93.4 40 97.2 90.5c.3 4.2 3.7 7.5 7.9 7.5H522a8 8 0 008-8.4c-2.8-53.3-32-99.7-74.6-126.1a111.8 111.8 0 0029.1-75.5c0-61.9-49.9-112-111.4-112s-111.4 50.1-111.4 112c0 29.1 11 55.5 29.1 75.5a158.09 158.09 0 00-74.6 126.1c-.4 4.6 3.2 8.4 7.8 8.4zm149-262c28.5 0 51.7 23.3 51.7 52s-23.2 52-51.7 52-51.7-23.3-51.7-52 23.2-52 51.7-52z",fill:e}}]}},name:"idcard",theme:"twotone"},s=a(33058);function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?Object(arguments[t]):{},i=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),i.forEach((function(t){l(e,t,a[t])}))}return e}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var r=function(e,t){var a=o({},e,t.attrs);return(0,i.Wm)(s.Z,o({},a,{icon:n}),null)};r.displayName="IdcardTwoTone",r.inheritAttrs=!1;var c=r},71900:function(e,t,a){a.d(t,{Z:function(){return l}});var i=a(66252),n=a(3577);const s={class:"head-info"};var o={name:"HeadInfo",props:["title","content"]};var l=(0,a(83744).Z)(o,[["render",function(e,t,a,o,l,r){return(0,i.wg)(),(0,i.iD)("div",s,[(0,i._)("span",null,(0,n.zw)(a.title),1),(0,i._)("p",null,[(0,i.Uk)((0,n.zw)(a.content),1),(0,i.WI)(e.$slots,"body",{},void 0,!0)])])}],["__scopeId","data-v-00006846"]])},48562:function(e,t,a){a.r(t),a.d(t,{default:function(){return C}});var i=a(66252),n=a(3577),s=a(49963);const o=(e=>((0,i.dD)("data-v-8e56e4dc"),e=e(),(0,i.Cn)(),e))((()=>(0,i._)("div",null,null,-1))),l={class:"capitalize"},r={class:"capitalize"},c={class:"font-left width-100"};var d=a(99684),u=a(44924),p=a(38046),m=a(62967),h=a(77682),f=a(98110),v=a(61103),y=a(71900),w=a(69596),g=a(79332),b=a(93099),k=a(96486),z=a.n(k),O=a(33907),j={name:"Roles",components:{HeadInfo:y.Z,PageLayout:v.Z,CardList:w.Z,PlusCircleTwoTone:d.Z,UserOutlined:u.Z,IdcardTwoTone:p.Z,CrownTwoTone:m.Z,CustomerServiceTwoTone:h.Z,CustomerServiceOutlined:f.Z,FormItem:g.Z},i18n:a(89234),data(){return{activeKey:"system",tabs:[{type:"system",title:"System Role"},{type:"organization",title:"Organization Role"},{type:"project",title:"Project Role"}],CustomerServiceOutlined:f.Z,isEdit:!1,roles:[],visible:!1,payload:{id:"",name:"",type:"system",permissions:[]},defaultPermissions:{},permissions:{},bindTarget:{},editorIsCreate:!0,workload:[],projects:[],pageSize:10,pageNo:1,total:0,loading:!0,saving:!1,activities:[],config:{},teams:[]}},computed:{...(0,O.rn)("rules",["rules"])},created(){this.$isPro||(this.tabs=[{type:"system",title:"System Role"},{type:"organization",title:"Organization Role"}]),this.loaddata(),this.initResource()},methods:{togglePermissions(e,t){"find"!=e.name&&e.enabled?t.forEach((e=>{"find"==e.name&&(e.enabled=!0)})):"find"!=e.name||e.enabled||t.forEach((e=>{e.enabled=!1}))},add(){this.isEdit=!1,this.payload={name:"",type:"system",permissions:[]},this.permissions=this.defaultPermissions[this.payload.type],this.showModal()},getSample(){this.custom=this.customSample},showModal(){this.visible=!0},renderCallback(){this.permissions=this.defaultPermissions[this.payload.type]},valid(){this.$refs.form.validateFields().then((()=>{this.handleOk()})).catch((()=>{}))},handleOk(){let e=z().cloneDeep(this.permissions);const t={name:this.payload.name,type:this.payload.type,permissions:(0,b.zE)(e)};this.saving=!0,this.isEdit?this.$gql.mutation(`updateRoleResourcePermission(id: ${this.payload.id}, data: $data)`,{data:t},{data:"RolePermissionInput"}).then((()=>{this.saving=!1,this.visible=!1,this.$message.success(this.$t("Save successfully"),3),this.loaddata()})):this.$gql.mutation("createRoleResourcePermission(data: $data)",{data:t},{data:"RolePermissionInput"}).then((()=>{this.saving=!1,this.visible=!1,this.$message.success(this.$t("Created successfully"),3),this.loaddata()}))},remove(e,t,a){this.$gql.mutation(`deleteUsersPermissionsRole(id: ${a.id}){ok}`).then((()=>{this.$message.success(this.$t("Deleted successfully"),3),this.loaddata()}))},setting(e,t,a){this.payload=a,(0,b.Yj)({id:a.id}).then((e=>{this.permissions=e.permissions,this.isEdit=!0,this.showModal()}))},initResource(){this.tabs.forEach((e=>{(0,b.Yj)({type:e.type}).then((t=>{this.defaultPermissions[e.type]=t.permissions}))}))},loaddata(){this.roles=[],this.loading=!0;const e=this.activeKey;this.$gql.query(`usersPermissionsRoles(filters:{type:{eq:"${e}"}}){\n\t\t\t\t\t\tdata{id,attributes{\n\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\ttype,\n\t\t\t\t\t\t\tusers{data{id}},\n\t\t\t\t\t\t\tuserOrganizationRoles{data{id}}\n\t\t\t\t\t\t}}\n\t\t\t\t\t}`).then((e=>{this.roles=e.data,this.loading=!1}))}}};var C=(0,a(83744).Z)(j,[["render",function(e,t,a,d,u,p){const m=(0,i.up)("PlusCircleTwoTone"),h=(0,i.up)("HeadInfo"),f=(0,i.up)("CrownTwoTone"),v=(0,i.up)("CustomerServiceTwoTone"),y=(0,i.up)("IdcardTwoTone"),w=(0,i.up)("UserOutlined"),g=(0,i.up)("a-card-meta"),b=(0,i.up)("CardList"),k=(0,i.up)("a-tab-pane"),z=(0,i.up)("a-tabs"),O=(0,i.up)("a-button"),j=(0,i.up)("a-select-option"),C=(0,i.up)("a-select"),$=(0,i.up)("a-descriptions-item"),_=(0,i.up)("a-input"),P=(0,i.up)("FormItem"),H=(0,i.up)("a-checkbox"),T=(0,i.up)("a-descriptions"),R=(0,i.up)("a-form"),W=(0,i.up)("a-modal"),Z=((0,i.up)("CustomerServiceOutlined"),(0,i.up)("PageLayout")),S=(0,i.Q2)("permission");return(0,i.wg)(),(0,i.j4)(Z,{avatar:u.CustomerServiceOutlined},{headerContent:(0,i.w5)((()=>[o])),extra:(0,i.w5)((()=>[(0,i.wy)(((0,i.wg)(),(0,i.j4)(h,{class:"split-right",title:e.$t("Create role")},{body:(0,i.w5)((()=>[(0,i._)("div",null,[(0,i.Wm)(m,{onClick:p.add,class:"font-primary icon-menu rotate-icon"},null,8,["onClick"])])])),_:1},8,["title"])),[[S,["role:create"]]])])),default:(0,i.w5)((()=>[(0,i.Wm)(z,{type:"card",activeKey:u.activeKey,"onUpdate:activeKey":t[0]||(t[0]=e=>u.activeKey=e),onChange:p.loaddata},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(u.tabs,(t=>((0,i.wg)(),(0,i.j4)(k,{key:t.type},{tab:(0,i.w5)((()=>[(0,i._)("div",l,(0,n.zw)(e.$t(t.title)),1)])),default:(0,i.w5)((()=>[(0,i.Wm)(b,{loading:u.loading,"hide-action-title":!0,"data-source":u.roles,"result-empty":{},type:"component",actions:[{icon:"EditOutlined",text:e.$t("edit"),call:p.setting,permission:["role:update"]},{icon:"CloseOutlined",hide:!0,text:e.$t("delete"),call:p.remove,permission:["role:delete"]}]},{default:(0,i.w5)((({item:t})=>[(0,i.Wm)(g,null,{title:(0,i.w5)((()=>[(0,i._)("div",r,(0,n.zw)(e.$t(t.name)),1)])),avatar:(0,i.w5)((()=>["Authenticated"==t.name?((0,i.wg)(),(0,i.j4)(f,{key:0,"two-tone-color":"#00adef",class:"font-50"})):"Public"==t.name?((0,i.wg)(),(0,i.j4)(v,{key:1,"two-tone-color":"#00adef",class:"font-50"})):((0,i.wg)(),(0,i.j4)(y,{key:2,"two-tone-color":"#00adef",class:"font-50"}))])),description:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(t.users?.length+t.userOrganizationRoles?.length||"0")+" ",1),(0,i.Wm)(w,{class:"font-14 font-primary"})])),_:2},1024)])),_:1},8,["loading","data-source","actions"])])),_:2},1024)))),128))])),_:1},8,["activeKey","onChange"]),(0,i.Wm)(W,{visible:u.visible,"onUpdate:visible":t[3]||(t[3]=e=>u.visible=e),title:e.$t("Role"),width:"70%"},{footer:(0,i.w5)((()=>[u.isEdit?(0,i.wy)(((0,i.wg)(),(0,i.j4)(O,{key:0,loading:u.saving,type:"primary",onClick:p.valid},{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(e.$t("save")),1)])),_:1},8,["loading","onClick"])),[[S,["role:update"]]]):(0,i.wy)(((0,i.wg)(),(0,i.j4)(O,{key:1,loading:u.saving,type:"primary",onClick:p.valid},{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(e.$t("create")),1)])),_:1},8,["loading","onClick"])),[[S,["role:create"]]])])),default:(0,i.w5)((()=>[(0,i.Wm)(R,{model:u.payload,"wrapper-col":{span:24},ref:"form"},{default:(0,i.w5)((()=>[(0,i.Wm)(T,{bordered:""},{default:(0,i.w5)((()=>[(0,i.Wm)($,{label:e.$t("Type"),span:3},{default:(0,i.w5)((()=>[(0,i.Wm)(C,{disabled:u.isEdit,placeholder:e.$t("Unselect"),class:"width-200",value:u.payload.type,"onUpdate:value":t[1]||(t[1]=e=>u.payload.type=e),onChange:p.renderCallback},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(u.tabs,((t,a)=>((0,i.wg)(),(0,i.j4)(j,{key:a,value:t.type},{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(e.$t(t.title)),1)])),_:2},1032,["value"])))),128))])),_:1},8,["disabled","placeholder","value","onChange"])])),_:1},8,["label"]),(0,i.Wm)($,{label:e.$t("Avatar"),span:3},{default:(0,i.w5)((()=>["Authenticated"==u.payload.name?((0,i.wg)(),(0,i.j4)(f,{key:0,"two-tone-color":"#00adef",class:"font-50"})):"Public"==u.payload.name?((0,i.wg)(),(0,i.j4)(v,{key:1,"two-tone-color":"#00adef",class:"font-50"})):((0,i.wg)(),(0,i.j4)(y,{key:2,"two-tone-color":"#00adef",class:"font-50"}))])),_:1},8,["label"]),(0,i.Wm)($,{label:e.$t("Role Name"),span:3},{default:(0,i.w5)((()=>[(0,i.Wm)(P,{name:"name",rules:e.rules.uniqueName("usersPermissionsRoles",{id:u.payload.id,type:u.payload.type})},{default:(0,i.w5)((()=>[(0,i.Wm)(_,{maxlength:10,placeholder:e.$t("unset"),value:u.payload.name,"onUpdate:value":t[2]||(t[2]=e=>u.payload.name=e)},{prefix:(0,i.w5)((()=>[(0,i.Wm)(w,{type:"user"})])),_:1},8,["placeholder","value"])])),_:1},8,["rules"])])),_:1},8,["label"]),u.permissions&&u.permissions.length>0?((0,i.wg)(),(0,i.j4)($,{key:0,label:e.$t("Resources"),span:3},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(u.permissions,((t,a)=>(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",{class:"flex",key:a},[(0,i._)("div",c,(0,n.zw)(e.$t(t.name)),1),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.actions,((a,s)=>((0,i.wg)(),(0,i.iD)("div",{class:"font-center width-100",key:s},[(0,i.Wm)(H,{onChange:e=>p.togglePermissions(a,t.actions),checked:a.enabled,"onUpdate:checked":e=>a.enabled=e},{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(e.$t(a.name)),1)])),_:2},1032,["onChange","checked","onUpdate:checked"])])))),128))])),[[s.F8,t]]))),128))])),_:1},8,["label"])):(0,i.kq)("",!0)])),_:1})])),_:1},8,["model"])])),_:1},8,["visible","title"]),(0,i.kq)("",!0)])),_:1},8,["avatar"])}],["__scopeId","data-v-8e56e4dc"]])}}]);