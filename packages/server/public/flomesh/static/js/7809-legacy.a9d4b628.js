"use strict";(self.webpackChunkflomesh_load_balancer=self.webpackChunkflomesh_load_balancer||[]).push([[7809],{71900:function(t,e,n){n.d(e,{Z:function(){return r}});var a=n(66252),i=n(3577),o={class:"head-info"};var l={name:"HeadInfo",props:["title","content"]};var r=(0,n(83744).Z)(l,[["render",function(t,e,n,l,r,c){return(0,a.wg)(),(0,a.iD)("div",o,[(0,a._)("span",null,(0,i.zw)(n.title),1),(0,a._)("p",null,[(0,a.Uk)((0,i.zw)(n.content),1),(0,a.WI)(t.$slots,"body",{},void 0,!0)])])}],["__scopeId","data-v-00006846"]])},77809:function(t,e,n){n.r(e),n.d(e,{default:function(){return D}});n(74916),n(64765),n(68309);var a=n(66252),i=n(3577),o=n(49963),l={class:"search-input"},r={class:"content flex"},c={class:"flex-item"},s={class:"form-row"},u={class:"label"},p={class:"content"},d={class:"width-200"},f={class:"search-content"},h={class:"project-selection"},g={class:"font-22"},w={class:"font-16"},y={class:"font-20 primary"},v={class:"mb-3"},m={key:0,class:"blockquote"};var _=n(95082),k=(n(57658),n(92222),n(71900)),b=n(92246),j=n(99684),z=n(33907),C=n(69596),$=n(61103),W=n(85263),P={name:"ApiList",i18n:n(89234),components:{BulbOutlined:b.Z,PageLayout:$.Z,CardList:C.Z,PlusCircleTwoTone:j.Z,HeadInfo:k.Z},props:["hideHead"],data:function(){return{pageSize:12,pageNo:1,total:0,key:"",filterApp:"",simpleImage:W.Z.PRESENTED_IMAGE_SIMPLE,visible:!1,visible2:!1,showApp:!1,projects:[],json:"{}",policyType:["Sign Encrypt","Encrypt Attestation","Decrypt","Encrypt","Forward Proxy"],policies:[],viewtypevalue:0,viewtypeproject:null,viewtype:[{value:0,label:"All"},{value:1,label:"Goup By Project"}],loading:!0}},computed:(0,_.Z)((0,_.Z)({},(0,z.rn)("setting",["layout","pageWidth"])),{},{start:function(){return(this.pageNo-1)*this.pageSize}}),mounted:function(){this.search()},methods:{addpolicy:function(){this.$router.push({path:"/openapi/policy/create"})},detail:function(t,e,n){this.$router.push({path:"/openapi/policy/detail/"+n.id})},remove:function(t,e,n){var a=this;this.$gql.mutation("deletePolicy(id:".concat(n.id,"){data{id}}")).then((function(){a.$message.success(a.$t("Deleted successfully"),3),a.search()}))},search:function(t){var e=this;this.pageNo=t||1,this.loading=!0;var n={name:{contains:this.key}};this.$gql.query("policies(filters: $filters, pagination: {start: ".concat(this.start,", limit: ").concat(this.pageSize,"}){\n\t\t\t\t\t\tdata{id,attributes{name,project{data{id,attributes{name}}},content,updatedAt}},\n\t\t\t\t\t\tmeta{pagination{total}}\n\t\t\t\t\t}"),{filters:n},{filters:"PolicyFiltersInput"}).then((function(t){e.policies=t.data,e.total=t.pagination.total,e.loading=!1}))},searchProject:function(t){var e=this;this.pageNo=t||1,this.loading=!0,this.$gql.query("projects(filters: $filters, pagination: {start: ".concat(this.start,", limit: ").concat(this.pageSize,"}){data{id,attributes{\n\t\t\t\t\t\tname,\n\t\t\t\t\t\tapis{data{id,attributes{name}}},\n\t\t\t\t\t\tcontent,\n\t\t\t\t\t\tupdatedAt\n\t\t\t\t\t}}}")).then((function(t){e.projects=t.data,e.loading=!1}))},select:function(t,e,n){this.$emit("selectPolicy",n)},getData:function(){}}};var D=(0,n(83744).Z)(P,[["render",function(t,e,n,_,k,b){var j=(0,a.up)("a-input-search"),z=(0,a.up)("a-radio-button"),C=(0,a.up)("a-radio-group"),$=(0,a.up)("a-tag"),W=(0,a.up)("a-form-item"),P=(0,a.up)("a-form"),D=(0,a.up)("PlusCircleTwoTone"),H=(0,a.up)("HeadInfo"),S=(0,a.up)("a-card"),U=(0,a.up)("a-col"),I=(0,a.up)("a-row"),N=(0,a.up)("BulbOutlined"),Z=(0,a.up)("a-card-meta"),q=(0,a.up)("a-badge"),A=(0,a.up)("CardList"),E=(0,a.up)("a-pagination"),x=(0,a.up)("PageLayout"),F=(0,a.Q2)("permission");return(0,a.wg)(),(0,a.j4)(x,{title:t.$t("Policy"),"hide-head":n.hideHead,style:(0,i.j5)(n.hideHead?"padding-top:0 ;":"")},{headerContent:(0,a.w5)((function(){return[(0,a._)("div",{class:(0,i.C_)(["search-head",t.layout,t.pageWidth])},[(0,a._)("div",l,[(0,a.Wm)(j,{value:k.key,"onUpdate:value":e[0]||(e[0]=function(t){return k.key=t}),class:"search-ipt",onSearch:e[1]||(e[1]=function(t){return b.search()}),placeholder:t.$t("Please input")+"...",size:"large"},null,8,["value","placeholder"])]),(0,a.Wm)(S,{bordered:!1,class:"search-form"},{default:(0,a.w5)((function(){return[(0,a._)("div",r,[(0,a._)("div",c,[(0,a.Wm)(P,null,{default:(0,a.w5)((function(){return[(0,a._)("div",s,[(0,a._)("div",u,[(0,a._)("span",null,(0,i.zw)(t.$t("Card View")),1)]),(0,a._)("div",p,[(0,a.Wm)(W,null,{default:(0,a.w5)((function(){return[(0,a.Wm)(C,{size:"small",onChange:t.changeView,value:k.viewtypevalue,"onUpdate:value":e[2]||(e[2]=function(t){return k.viewtypevalue=t}),"button-style":"solid"},{default:(0,a.w5)((function(){return[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(k.viewtype,(function(e,n){return(0,a.wg)(),(0,a.j4)(z,{value:e.value,key:n},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,i.zw)(t.$t(e.label)),1)]})),_:2},1032,["value"])})),128))]})),_:1},8,["onChange","value"]),k.viewtypeproject?((0,a.wg)(),(0,a.j4)($,{key:0,class:"ml-10",closable:"",onClose:t.removeViewtypeproject},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,i.zw)(k.viewtypeproject.name),1)]})),_:1},8,["onClose"])):(0,a.kq)("",!0)]})),_:1})])])]})),_:1})]),(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",d,[(0,a.Wm)(H,{class:"pd-0 split-right",title:t.$t("Create policy")},{body:(0,a.w5)((function(){return[(0,a._)("div",null,[(0,a.Wm)(D,{onClick:b.addpolicy,class:"font-primary icon-menu rotate-icon"},null,8,["onClick"])])]})),_:1},8,["title"])])),[[F,["policy:create"]]])])]})),_:1})],2)]})),default:(0,a.w5)((function(){return[(0,a._)("div",f,[(0,a.wy)((0,a.Wm)(I,{gutter:[16,8],class:"mb-10"},{default:(0,a.w5)((function(){return[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(k.projects,(function(e,n){return(0,a.wg)(),(0,a.j4)(U,{key:n,span:4,onClick:function(n){return t.filterData(e)}},{default:(0,a.w5)((function(){return[(0,a._)("div",h,[(0,a._)("p",g,(0,i.zw)(e.name),1),(0,a._)("p",w,[(0,a.Uk)(" API "),(0,a._)("span",y,(0,i.zw)(e.policies.length),1),(0,a.Uk)(" "+(0,i.zw)(t.$t("unitge")),1)])])]})),_:2},1032,["onClick"])})),128))]})),_:1},512),[[o.F8,1==k.viewtypevalue&&!k.viewtypeproject]]),(0,a.wy)((0,a.Wm)(A,{"result-empty":{status:404,title:t.$t("No data")},col:n.hideHead?1:null,loading:k.loading,"data-source":k.policies,"hide-action-title":!n.hideHead,type:"component",actions:n.hideHead?[{icon:"SelectOutlined",text:t.$t("Selector"),call:b.select}]:[{icon:"EditOutlined",text:t.$t("edit"),call:b.detail},{icon:"DeleteOutlined",text:t.$t("delete"),call:b.remove,hide:!0}]},{default:(0,a.w5)((function(t){var e=t.item;return[(0,a.Wm)(Z,null,{title:(0,a.w5)((function(){return[(0,a._)("div",v,[(0,a.Uk)((0,i.zw)(e.name)+" ",1),e.project?((0,a.wg)(),(0,a.j4)($,{key:0,color:"pink",class:"result-tag"},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,i.zw)(e.project.name),1)]})),_:2},1024)):(0,a.kq)("",!0)])]})),avatar:(0,a.w5)((function(){return[(0,a.Wm)(N,{class:"primary"})]})),description:(0,a.w5)((function(){return[]})),_:2},1024),e.content&&e.content.plugins?((0,a.wg)(),(0,a.iD)("blockquote",m,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.content.plugins,(function(t,e){return(0,a.wg)(),(0,a.iD)("span",{key:e,class:"mr-20 nowrap"},[(0,a.Wm)(q,{status:t.switch?"processing":"orange"},null,8,["status"]),(0,a.Uk)(" "+(0,i.zw)(t.content.displayName),1)])})),128))])):(0,a.kq)("",!0)]})),_:1},8,["result-empty","col","loading","data-source","hide-action-title","actions"]),[[o.F8,0==k.viewtypevalue||k.viewtypeproject]]),(0,a.wy)((0,a.Wm)(E,{onChange:b.searchProject,current:k.pageNo,"onUpdate:current":e[3]||(e[3]=function(t){return k.pageNo=t}),total:k.total,"page-size":k.pageSize,"show-less-items":""},null,8,["onChange","current","total","page-size"]),[[o.F8,1==k.viewtypevalue&&!k.viewtypeproject]]),(0,a.wy)((0,a.Wm)(E,{onChange:b.search,current:k.pageNo,"onUpdate:current":e[4]||(e[4]=function(t){return k.pageNo=t}),total:k.total,"page-size":k.pageSize,"show-less-items":""},null,8,["onChange","current","total","page-size"]),[[o.F8,0==k.viewtypevalue||k.viewtypeproject]])])]})),_:1},8,["title","hide-head","style"])}],["__scopeId","data-v-ac71bda6"]])}}]);