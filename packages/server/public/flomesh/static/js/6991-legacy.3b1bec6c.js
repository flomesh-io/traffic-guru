"use strict";(self.webpackChunkflomesh_load_balancer=self.webpackChunkflomesh_load_balancer||[]).push([[6991],{36102:function(e,t,a){a.d(t,{Z:function(){return h}});var n=a(66252),i={class:"cpu-body"},r={class:"cpu-body"},o={key:1},s={class:"relative"},u={class:"relative"};a(57658);var l=a(35316),d=a(80927),c=a(48551),m=a(72167),p={name:"CPUMemory",components:{ChartCard:d.Z,MiniArea:c.Z,InfoCircleOutlined:l.Z},i18n:a(89234),props:["metrics","loading","layout"],data:function(){return{cpu:[],memory:[],memortUnit:"Ki",loadingCPU:!1,loadingMemory:!1}},watch:{loading:function(){this.loadingCPU=this.loading,this.loadingMemory=this.loading},metrics:function(e){this.renderData(e)}},mounted:function(){this.renderData(this.metrics),this.loadingCPU=this.loading,this.loadingMemory=this.loading},methods:{renderData:function(e){this.cpu=[],this.memory=[];for(var t=0,a=0;a<e.length;a++)e[a].memory>t&&(t=e[a].memory);this.memortUnit=t>1e6?"Gi":t>1e3?"Mi":"Ki";for(var n={Ki:1,Mi:1e3,Gi:1e6},i=0;i<e.length;i++)this.cpu.push({type:"CPU",value:e[i].cpu/1e9,date:(0,m.Z)(new Date(1e3*e[i].time),"HH:mm")}),this.memory.push({type:"Memory",value:e[i].memory/n[this.memortUnit],date:(0,m.Z)(new Date(1e3*e[i].time),"HH:mm")})}}};var h=(0,a(83744).Z)(p,[["render",function(e,t,a,l,d,c){var m=(0,n.up)("MiniArea"),p=(0,n.up)("a-col"),h=(0,n.up)("a-row"),g=(0,n.up)("InfoCircleOutlined"),y=(0,n.up)("a-tooltip"),f=(0,n.up)("ChartCard");return(0,n.wg)(),(0,n.iD)("div",null,["v"!=a.layout?((0,n.wg)(),(0,n.j4)(h,{key:0,class:"cpu-layout",gutter:[24,0]},{default:(0,n.w5)((function(){return[d.cpu?((0,n.wg)(),(0,n.j4)(p,{key:0,sm:24,md:12,xl:12},{default:(0,n.w5)((function(){return[(0,n._)("div",i,[(0,n.Wm)(m,{colors:["rgba(107,204,255,1)","rgba(127,214,247,0.4)"],height:240,padding:[0,0,0,0],axis:!1,unit:"cores",showy:!1,id:"cpu-area"+Math.ceil(1e3*Math.random()),dv:d.cpu},null,8,["colors","id","dv"])])]})),_:1})):(0,n.kq)("",!0),d.memory?((0,n.wg)(),(0,n.j4)(p,{key:1,sm:24,md:12,xl:12},{default:(0,n.w5)((function(){return[(0,n._)("div",r,[(0,n.Wm)(m,{colors:["rgba(195,158,253,1)","rgba(195,158,253,0.4)"],height:240,padding:[0,0,0,0],unit:d.memortUnit,axis:!1,showy:!1,id:"memory-area"+Math.ceil(1e3*Math.random()),dv:d.memory},null,8,["colors","unit","id","dv"])])]})),_:1})):(0,n.kq)("",!0)]})),_:1})):(0,n.kq)("",!0),"v"==a.layout?((0,n.wg)(),(0,n.iD)("div",o,[d.cpu?((0,n.wg)(),(0,n.j4)(f,{key:0,padding:"20px 24px 28px",height:"120px","not-ft":!0,loading:d.loadingCPU,title:e.$t("CPU Usage"),class:"mb-20"},{default:(0,n.w5)((function(){return[(0,n.Wm)(y,{title:e.$t("introduce")},{action:(0,n.w5)((function(){return[(0,n.Wm)(g)]})),_:1},8,["title"]),(0,n._)("div",s,[(0,n.Wm)(m,{colors:["rgba(107,204,255,1)","rgba(127,214,247,0.4)"],height:230,padding:[55,5,5,15],axis:!0,unit:"cores",id:"cpu-area"+Math.ceil(1e3*Math.random()),dv:d.cpu},null,8,["colors","id","dv"])])]})),_:1},8,["loading","title"])):(0,n.kq)("",!0),d.memory?((0,n.wg)(),(0,n.j4)(f,{key:1,padding:"20px 24px 28px",height:"120px","not-ft":!0,loading:d.loadingMemory,title:e.$t("Memory Usage")},{default:(0,n.w5)((function(){return[(0,n.Wm)(y,{title:e.$t("introduce")},{action:(0,n.w5)((function(){return[(0,n.Wm)(g)]})),_:1},8,["title"]),(0,n._)("div",u,[(0,n.Wm)(m,{colors:["rgba(195,158,253,1)","rgba(195,158,253,0.4)"],height:230,padding:[55,5,5,15],axis:!0,unit:d.memortUnit,id:"memory-area"+Math.ceil(1e3*Math.random()),dv:d.memory},null,8,["colors","unit","id","dv"])])]})),_:1},8,["loading","title"])):(0,n.kq)("",!0)])):(0,n.kq)("",!0)])}],["__scopeId","data-v-ef2e4ec2"]])},96991:function(e,t,a){a.d(t,{Z:function(){return f}});a(74916),a(64765),a(92222),a(68309),a(47941);var n=a(66252),i=a(3577),r={key:0},o=["onClick"],s={key:2},u={key:1},l={key:1},d={key:6},c=["onClick"];a(21249),a(57658),a(56977);var m=a(2692),p=a(36102),h=a(16822),g=[{key:" ",dataIndex:"t"},{key:"as",dataIndex:"name"},{key:"Namespace",width:130,dataIndex:"namespace"},{key:"Labels",dataIndex:"labels"},{key:"node",dataIndex:"node"},{key:"Status",dataIndex:"phase"},{key:"Restart",dataIndex:"restartCount"},{key:"Cpu Usage(cores)",dataIndex:"cpuUsage"},{key:"Memory Usage(cores)",dataIndex:"memoryUsage"},{key:"Creation Timestamp",dataIndex:"creationTimestamp"},{key:"Action",width:130,dataIndex:"action"}],y={name:"PodList",components:{CPUMemory:p.Z,MoreOutlined:m.Z,Status:h.Z},props:["embed","d","url","metric","hasSearch","namespace"],i18n:a(89234),data:function(){return{params:{pageNo:1,pageSize:10,total:0,key:""},columns:g,metrics:[],loading:!1,list:[]}},computed:{dataColumns:function(){var e=this;return this.columns.map((function(t){return t.title=e.$t(t.key),t}))}},created:function(){this.embed?(this.list=this.reset(this.d),this.params.total=this.d.length,this.metrics=null,this.loading=!1):this.search()},methods:{detail:function(e,t){this.$router.push({path:"/workload/pod/detail/".concat(t,"/").concat(e)})},MakeUrl:function(){var e=this.$REST.K8S.append(this.params.pageSize,this.params.pageNo,"d,creationTimestamp",this.params.key);return this.$REST.K8S.encode(this.url,e,this.namespace)},search:function(e,t){var a=this;e&&(this.params.pageNo=e,this.params.pageSize=t),this.loading=!0,this.$request(this.MakeUrl(),this.$METHOD.GET).then((function(e){var t=e.data;a.list=a.reset(t.items),a.params.total=t.count,a.metrics=t.metrics,a.loading=!1}))},reset:function(e){for(var t={Ki:1,Mi:1e3,Gi:1e6},a=0;a<e.length;a++){e[a].uid=e[a].metadata.uid,e[a].name=e[a].metadata.name,e[a].namespace=e[a].metadata.namespace,e[a].labels=e[a].metadata.labels,e[a].node=e[a].spec.nodeName,e[a].restartCount=e[a].status.containerStatuses?e[a].status.containerStatuses[0].restartCount:0,e[a].cpuUsage=e[a].metrics&&e[a].metrics.length>0?(e[a].metrics[e[a].metrics.length-1].cpu/1e9).toFixed(2)+"cores":null;var n=e[a].metrics&&e[a].metrics.length>0?e[a].metrics[e[a].metrics.length-1].memory:null,i="Ki";i=n>1e6?"Gi":n>1e3?"Mi":"Ki",e[a].memoryUsage=n?""+(n/t[i]).toFixed(2)+i:null,e[a].creationTimestamp=new Date(e[a].metadata.creationTimestamp).toLocaleString(),e[a].phase=e[a].status.phase}return e}}};var f=(0,a(83744).Z)(y,[["render",function(e,t,a,m,p,h){var g=(0,n.up)("CPUMemory"),y=(0,n.up)("a-input-search"),f=(0,n.up)("Status"),w=(0,n.up)("a-tag"),k=(0,n.up)("a-badge"),v=(0,n.up)("a-menu-item"),x=((0,n.up)("a-popconfirm"),(0,n.up)("a-menu")),C=(0,n.up)("MoreOutlined"),U=(0,n.up)("a-dropdown"),_=(0,n.up)("a-table"),b=(0,n.up)("a-card");return(0,n.wg)(),(0,n.iD)("div",null,[a.metric?((0,n.wg)(),(0,n.j4)(g,{key:0,loading:p.loading,metrics:p.metrics},null,8,["loading","metrics"])):(0,n.kq)("",!0),(0,n.Wm)(b,{class:"card nopd",title:e.$t("Pods"),loading:p.loading},(0,n.Nv)({default:(0,n.w5)((function(){return[(0,n._)("div",null,[(0,n.Wm)(_,{pagination:{showSizeChanger:!1,showQuickJumper:!1,onShowSizeChange:h.search,onChange:h.search,current:p.params.pageNo,pageSize:p.params.pageSize,showTotal:function(t,a){return"".concat(e.$t("Total")," ").concat(t)},total:p.params.total},columns:h.dataColumns,"data-source":p.list,class:"bg-white"},{bodyCell:(0,n.w5)((function(t){var a=t.column,m=t.record;return["name"===a.dataIndex?((0,n.wg)(),(0,n.iD)("div",r,[(0,n._)("a",{href:"javascript:void(0)",onClick:function(e){return h.detail(m.name,m.namespace)}},(0,i.zw)(m.name),9,o)])):"t"===a.dataIndex?((0,n.wg)(),(0,n.j4)(f,{key:1,d:{status:m.phase}},null,8,["d"])):"labels"===a.dataIndex?((0,n.wg)(),(0,n.iD)("div",s,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(Object.keys(m.labels),(function(e,t){return(0,n.wg)(),(0,n.j4)(w,{key:t,closable:!1},{default:(0,n.w5)((function(){return[(0,n.Uk)((0,i.zw)(e)+":"+(0,i.zw)(m.labels[e]),1)]})),_:2},1024)})),128))])):"restartCount"===a.dataIndex?((0,n.wg)(),(0,n.j4)(k,{key:3,count:m.restartCount,"show-zero":!1},null,8,["count"])):"cpuUsage"===a.dataIndex?((0,n.wg)(),(0,n.iD)(n.HY,{key:4},[m.cpuUsage?((0,n.wg)(),(0,n.j4)(w,{key:0},{default:(0,n.w5)((function(){return[(0,n.Uk)((0,i.zw)(m.cpuUsage),1)]})),_:2},1024)):((0,n.wg)(),(0,n.iD)("span",u,"-"))],64)):"memoryUsage"===a.dataIndex?((0,n.wg)(),(0,n.iD)(n.HY,{key:5},[m.memoryUsage?((0,n.wg)(),(0,n.j4)(w,{key:0},{default:(0,n.w5)((function(){return[(0,n.Uk)((0,i.zw)(m.memoryUsage),1)]})),_:2},1024)):((0,n.wg)(),(0,n.iD)("span",l,"-"))],64)):"action"===a.dataIndex?((0,n.wg)(),(0,n.iD)("div",d,[(0,n.Wm)(U,null,{overlay:(0,n.w5)((function(){return[(0,n.Wm)(x,null,{default:(0,n.w5)((function(){return[(0,n.Wm)(v,null,{default:(0,n.w5)((function(){return[(0,n._)("a",{onClick:function(e){return h.detail(m.name,m.namespace)}},(0,i.zw)(e.$t("view")),9,c)]})),_:2},1024),(0,n.kq)("",!0)]})),_:2},1024)]})),default:(0,n.w5)((function(){return[(0,n._)("a",null,[(0,n.Wm)(C)])]})),_:2},1024)])):(0,n.kq)("",!0)]})),_:1},8,["pagination","columns","data-source"])])]})),_:2},[a.hasSearch?{name:"extra",fn:(0,n.w5)((function(){return[(0,n._)("div",null,[(0,n.Wm)(y,{value:p.params.key,"onUpdate:value":t[0]||(t[0]=function(e){return p.params.key=e}),onSearch:t[1]||(t[1]=function(e){return h.search()}),class:"right-search-input",placeholder:e.$t("search")},null,8,["value","placeholder"])])]})),key:"0"}:void 0]),1032,["title","loading"])])}],["__scopeId","data-v-5709f68f"]])}}]);