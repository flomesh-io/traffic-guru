(self.webpackChunkflomesh_load_balancer=self.webpackChunkflomesh_load_balancer||[]).push([[3374],{79797:function(t,e,a){!function(){"use strict";var e=a(17536).typeOf;t.exports.stringify=function(t){var a,i="";return"---"+(a={undefined:function(){return"null"},null:function(){return"null"},number:function(t){return t},boolean:function(t){return t?"true":"false"},string:function(t){return JSON.stringify(t)},array:function(t){var s="";return 0===t.length?s+="[]":(i=i.replace(/$/,"  "),t.forEach((function(t){var n=a[e(t)];if(!n)throw new Error("what the crap: "+e(t));s+="\n"+i+"- "+n(t)})),i=i.replace(/  /,""),s)},object:function(t){var s="";return 0===Object.keys(t).length?s+="{}":(i=i.replace(/$/,"  "),Object.keys(t).forEach((function(n){var l=t[n],r=a[e(l)];if(void 0!==l){if(!r)throw new Error("what the crap: "+e(l));s+="\n"+i+n+": "+r(l)}})),i=i.replace(/  /,""),s)},function:function(){return"[object Function]"}})[e(t)](t)+"\n"}}()},17536:function(t){!function(){"use strict";var e,a,i=Function("return this")(),s="Boolean Number String Function Array Date RegExp Object".split(" "),n={};for(e in s)s.hasOwnProperty(e)&&(a=s[e],n["[object "+a+"]"]=a.toLowerCase());function l(t){return null==t?String(t):n[Object.prototype.toString.call(t)]||"object"}function r(t){var e,a;if("object"===l(t))for(e in t)if(void 0!==(a=t[e])&&"function"!==l(a))return!1;return!0}String.prototype.entityify||(String.prototype.entityify=function(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}),String.prototype.quote||(String.prototype.quote=function(){var t,e,a=this.length,i='"';for(e=0;e<a;e+=1)if((t=this.charAt(e))>=" ")"\\"!==t&&'"'!==t||(i+="\\"),i+=t;else switch(t){case"\b":i+="\\b";break;case"\f":i+="\\f";break;case"\n":i+="\\n";break;case"\r":i+="\\r";break;case"\t":i+="\\t";break;default:t=t.charCodeAt(),i+="\\u00"+Math.floor(t/16).toString(16)+(t%16).toString(16)}return i+'"'}),String.prototype.supplant||(String.prototype.supplant=function(t){return this.replace(/{([^{}]*)}/g,(function(e,a){var i=t[a];return"string"==typeof i||"number"==typeof i?i:e}))}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s*(\S*(?:\s+\S+)*)\s*$/,"$1")}),t.exports={typeOf:l,isEmpty:r},i.typeOf=i.typeOf||l,i.isEmpty=i.isEmpty||r}()},44107:function(t,e,a){"use strict";a.d(e,{Z:function(){return u}});var i=a(66252),s=a(3577);var n=a(21936),l=a(8333);let r=a(79797),o=a(93320);var d={name:"Json2YamlCard",components:{JsonEditor:n.Z,YamlEditor:l.Z},props:["jsonVal","isCreate","height","isReadonly","url","isPop"],i18n:a(89234),data(){return{configTab:[{key:"YAML",tab:"YAML"},{key:"JSON",tab:"JSON"}],configKey:"YAML",json:"{}",yaml:""}},watch:{json(t,e){t!=e&&this.jsonInput(t)},yaml(t,e){t!=e&&this.yamlInput(t)},jsonVal:{handler(t,e){if("{}"!=t&&""!=t||(t='{"key":"value"}'),t!=e){"object"==typeof JSON.parse(t)&&(this.json=t)}},immediate:!0}},created(){},mounted(){this.init()},methods:{onTabChange(t,e){this[e]=t},jsonInput(t){try{"object"==typeof JSON.parse(t)&&(this.yaml=this.convertToYaml(t),this.$emit("update:jsonVal",this.json),this.$emit("change",this.json))}catch(t){}},yamlInput(t){let e=o.load(t),a=JSON.stringify(e,null,"  ");"object"==typeof JSON.parse(a)&&(this.$emit("update:jsonVal",a),this.$emit("change",a))},getDefaultYamlConfig(){if(!this.url)return this.yaml=this.convertToYaml(this.jsonVal),void this.yamlInput(this.yaml);fetch(this.url).then((t=>t.text())).then((t=>{this.url.indexOf(".yaml");let e=o.load(t),a=JSON.stringify(e,null,"  "),i=JSON.parse(a);i.spec&&i.spec.namespace&&(i.spec.namespace="_all"==localStorage.getItem("NAMESPACE")?"default":localStorage.getItem("NAMESPACE"));let s=JSON.stringify(i);this.yaml=this.convertToYaml(s),setTimeout((()=>{this.yamlInput(this.yaml)}),2e3)})).catch((()=>{}))},convertToYaml(t){if(""==t)return"";let e=JSON.parse(t),a=null;return a=r.stringify(e),a},init(){this.isCreate?this.getDefaultYamlConfig():(this.yaml=this.convertToYaml(this.jsonVal),this.yamlInput(this.yaml))}}};var u=(0,a(83744).Z)(d,[["render",function(t,e,a,n,l,r){const o=(0,i.up)("YamlEditor"),d=(0,i.up)("JsonEditor"),u=(0,i.up)("a-button"),c=(0,i.up)("a-card");return(0,i.wg)(),(0,i.j4)(c,{class:(0,s.C_)(["card nopd",a.isPop?"isPop":""]),"tab-list":l.configTab,"active-tab-key":l.configKey,onTabChange:e[2]||(e[2]=t=>r.onTabChange(t,"configKey")),bordered:!1},{tabBarExtraContent:(0,i.w5)((()=>[a.url?((0,i.wg)(),(0,i.j4)(u,{key:0,type:"dashed",onClick:r.getDefaultYamlConfig},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(t.$t("reset")),1)])),_:1},8,["onClick"])):(0,i.kq)("",!0)])),default:(0,i.w5)((()=>["YAML"==l.configKey?((0,i.wg)(),(0,i.j4)(o,{key:0,height:a.height,"is-readonly":a.isReadonly,value:l.yaml,"onUpdate:value":e[0]||(e[0]=t=>l.yaml=t)},null,8,["height","is-readonly","value"])):(0,i.kq)("",!0),"JSON"==l.configKey?((0,i.wg)(),(0,i.j4)(d,{key:1,height:a.height,"is-readonly":a.isReadonly,"is-json":!0,noreset:!a.isReadonly,value:l.json,"onUpdate:value":e[1]||(e[1]=t=>l.json=t)},null,8,["height","is-readonly","noreset","value"])):(0,i.kq)("",!0)])),_:1},8,["class","tab-list","active-tab-key"])}]])},990:function(t,e,a){"use strict";a.d(e,{Z:function(){return r}});var i=a(66252);const s={class:"DashboardCore"};var n=a(56912),l={name:"Dashboard",i18n:a(89234),components:{DashboardCore:n.Z},props:["pageId","prometheus","apply","params","hideAdd","init","defaultWidget"],data(){return{prometheusVal:null}},computed:{},watch:{prometheus(t){this.prometheusVal=t}},created(){},mounted(){this.prometheusVal=this.prometheus},methods:{prometheusChange(){this.$emit("update:prometheus",this.prometheusVal),this.$emit("prometheusChange",this.prometheusVal)}}};var r=(0,a(83744).Z)(l,[["render",function(t,e,a,n,l,r){const o=(0,i.up)("DashboardCore");return(0,i.wg)(),(0,i.iD)("div",s,[(0,i.Wm)(o,{"hide-add":a.hideAdd,init:a.init,"hide-head":!0,"page-id":a.pageId,params:a.params,kind:a.apply,prometheus:l.prometheusVal,"onUpdate:prometheus":e[0]||(e[0]=t=>l.prometheusVal=t),onPrometheusChange:r.prometheusChange,apply:a.apply+"."+a.pageId,embed:!0,"default-widget":a.defaultWidget},null,8,["hide-add","init","page-id","params","kind","prometheus","onPrometheusChange","apply","default-widget"])])}]])},1299:function(t,e,a){"use strict";a.d(e,{Z:function(){return r}});var i=a(66252),s=a(3577);const n={key:0,class:"title"};var l={name:"DetailList",props:{title:{type:String,required:!1,default:""},col:{type:Number,required:!1,default:3},size:{type:String,required:!1,default:"large"},layout:{type:String,required:!1,default:"horizontal"}}};var r=(0,a(83744).Z)(l,[["render",function(t,e,a,l,r,o){const d=(0,i.up)("a-row");return(0,i.wg)(),(0,i.iD)("div",{class:(0,s.C_)(["detail-list","small"===a.size?"small":"large","vertical"===a.layout?"vertical":"horizontal"]),style:(0,s.j5)("flex-"+a.col)},[a.title?((0,i.wg)(),(0,i.iD)("div",n,(0,s.zw)(a.title),1)):(0,i.kq)("",!0),(0,i.Wm)(d,null,{default:(0,i.w5)((()=>[(0,i.WI)(t.$slots,"default")])),_:3})],6)}]])},13589:function(t,e,a){"use strict";a.d(e,{Z:function(){return o}});var i=a(66252),s=a(3577);const n={class:"detail-content"};const l={1:{xs:24},2:{xs:24,sm:12},3:{xs:24,sm:12,md:8},4:{xs:24,sm:12,md:6}};var r={name:"DetailListItem",i18n:a(39945),props:{name:{type:String,required:!1,default:""},rules:{type:Array,required:!1,default(){return[]}},term:{type:String,required:!1,default:""},termTop:{type:Boolean}},data(){return{col:2,responsive:l}},computed:{getRules(){return this.rules.map((t=>(t.message=this.$t(t.message),t))),this.rules}},created(){this.$parent&&this.$parent.$parent&&this.$parent.$parent.col>0&&(this.col=this.$parent.$parent.col)},methods:{}};var o=(0,a(83744).Z)(r,[["render",function(t,e,a,l,r,o){const d=(0,i.up)("a-form-item"),u=(0,i.up)("a-col");return(0,i.wg)(),(0,i.j4)(u,(0,i.dG)({class:"detail-list-content flex"},r.responsive[r.col]),{default:(0,i.w5)((()=>[(0,i._)("div",{class:(0,s.C_)(a.termTop?"term top":"term")},(0,s.zw)(a.term),3),(0,i._)("div",n,[a.rules?((0,i.wg)(),(0,i.j4)(d,{key:0,name:a.name,rules:o.getRules},{default:(0,i.w5)((()=>[(0,i.WI)(t.$slots,"default")])),_:3},8,["name","rules"])):(0,i.WI)(t.$slots,"default",{key:1})])])),_:3},16)}]])},69384:function(t,e,a){"use strict";a.d(e,{Z:function(){return $}});var i=a(66252),s=a(3577),n=a(49963);const l={key:0,class:"width-180"},r={key:0},o={class:"font-primary",href:"javascript:void(0)"},d={key:1},u={class:"font-primary",href:"javascript:void(0)"},c={key:2};a(57658);var p=a(96486),m=a.n(p),h=a(60459),g=a(21936),w=a(61103),f=a(1299),v=a(13589),y=a(33907),k=a(44218),b={name:"ServicesBaseDetail",i18n:a(89234),components:{JsonEditor:g.Z,DetailListItem:v.Z,DetailList:f.Z,PageLayout:w.Z,PlusOutlined:k.Z,EnvSelector:h.Z},props:["loading","pid","namespace","contentString","detail","registry","extend","hasExport","blacklistServices","whitelistServices","subscribeServices","subscribeServicesTo","subscribeServicesAll"],data(){return{orgs:[],sidecars:[],ns:null,visibleAP:!1,dialTestings:[],whiteAddress:[],blackAddress:[],visible:!1,aclKey:"2",labelVisible:!1,labelValue:"",annotationVisible:!1,creationTimestamp:"-",annotationValue:"",certificates:[],organization:{id:null},sidecar:null,isGateway:null,gatewayPath:null,upstreamVersion:null,isMounted:!1}},computed:{...(0,y.rn)({rules:t=>t.rules.rules,isMobile:t=>t.setting.isMobile})},created(){},mounted(){if(this.isMounted=!0,this.$gql.query("organizations{data{id,attributes{name}}}").then((t=>{this.orgs=t.data})),this.$gql.query('fleets(filters:{type:{eq:"sidecar"}}){data{id,attributes{name}}}').then((t=>{this.sidecars=t.data})),""!=this.pid)this.search();else{let t={certificates:[],identitys:{},log:{level:"None"},plugins:[]},e={endpoints:[],spec:{type:"",clusterIP:"",sessionAffinity:"",ports:[]},metadata:{name:"",namespace:this.namespace,labels:{},annotations:{}},typeMeta:{},podInfo:{},containerImages:[],selector:{},statusInfo:{},conditions:[],rollingUpdateStrategy:{maxUnavailable:"",maxSurge:""}};this.$emit("update:detail",e),this.$emit("update:extend",t),this.$emit("update:loading",!1)}},methods:{envChange(t){let e=this.detail;e.metadata.namespace=t.namespace,this.ns=t.namespaceId,this.$emit("update:registry",{id:t.registerId,name:t.registerName}),this.$emit("update:detail",e)},handleClose(t,e){delete t[e];let a=this.detail;this.$emit("update:detail",a)},labelShowInput(){this.labelVisible=!0,this.$nextTick().then((()=>{this.$refs.labelRef.focus()}))},labelInputConfirm(){if(""==this.labelValue)return void(this.labelVisible=!1);let t=this.labelValue.split(":");if(t.length<2)this.$message.error({content:this.$t("Please enter the format of [key]:[value]")});else{let e=this.detail;e.metadata.labels=e.metadata.labels||{},e.metadata.labels[t.shift()]=t.join(":"),this.labelValue="",this.labelVisible=!1,this.$emit("update:detail",e)}},annotationShowInput(){this.annotationVisible=!0,this.$nextTick().then((()=>{this.$refs.annotationRef.focus()}))},annotationInputConfirm(){if(""==this.annotationValue)return void(this.annotationVisible=!1);let t=this.annotationValue.split(":");if(t.length<2)this.$message.error({content:this.$t("Please enter the format of [key]:[value]")});else{let e=this.detail;e.metadata.annotations=e.metadata.annotations||{},e.metadata.annotations[t.shift()]=t.join(":"),this.annotationValue="",this.annotationVisible=!1,this.$emit("update:detail",e)}},k8sDetail(){this.$router.push({path:"/ops-center/registry/detail/"+this.registry.id})},search(){this.$emit("update:loading",!0),this.$gql.query(`getService(id: ${this.pid}){data{id,attributes{\n\t\t\t\t\t\tserviceExport{data{id}},\n\t\t\t\t\t\tpods,\n\t\t\t\t\t\tcontent,\n\t\t\t\t\t\tns{data{id,attributes{name}}},\n\t\t\t\t\t\tisGateway,\n\t\t\t\t\t\tgatewayPath,\n            upstreamVersion,\n\t\t\t\t\t\torganization{data{id,attributes{\n\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\twhiteOrgs{data{id,attributes{\n\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\tservices{data{id,attributes{\n\t\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\t\tcontent,\n\t\t\t\t\t\t\t\t\torganization{data{id,attributes{name}}},\n\t\t\t\t\t\t\t\t\tregistry{data{id,attributes{type,name,content}}},\n\t\t\t\t\t\t\t\t\tnamespace,\n\t\t\t\t\t\t\t\t\tblacklistServices{data{id}},\n                  updatedAt\n\t\t\t\t\t\t\t\t}}}\n\t\t\t\t\t\t\t}}},\n\t\t\t\t\t\t\twhiteOrgsBack{data{id,attributes{\n\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\tservices{data{id,attributes{\n\t\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\t\tcontent,\n\t\t\t\t\t\t\t\t\torganization{data{id,attributes{name}}},\n\t\t\t\t\t\t\t\t\tregistry{data{id,attributes{type,name,content}}},\n\t\t\t\t\t\t\t\t\tnamespace,\n\t\t\t\t\t\t\t\t\tblacklistServices{data{id}},\n                  updatedAt\n\t\t\t\t\t\t\t\t}}}\n\t\t\t\t\t\t\t}}},\n\t\t\t\t\t\t\tservices{data{id,attributes{\n\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\tcontent,\n\t\t\t\t\t\t\t\torganization{data{id,attributes{name}}},\n\t\t\t\t\t\t\t\tregistry{data{id,attributes{type,name,content}}},\n\t\t\t\t\t\t\t\tnamespace,\n\t\t\t\t\t\t\t\tblacklistServices{data{id}},\n                updatedAt\n\t\t\t\t\t\t\t}}},\n\t\t\t\t\t\t\tsubscribeServices{data{id,attributes{\n\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\tcontent,\n\t\t\t\t\t\t\t\torganization{data{id,attributes{name}}},\n\t\t\t\t\t\t\t\tregistry{data{id,attributes{type,name,content}}},\n\t\t\t\t\t\t\t\tnamespace,\n\t\t\t\t\t\t\t\tblacklistServices{data{id}},\n                updatedAt\n\t\t\t\t\t\t\t}}}\n\t\t\t\t\t\t}}},\n\t\t\t\t\t\textend,\n\t\t\t\t\t\tcertificates{data{id,attributes{name,content}}},\n\t\t\t\t\t\tuid,\n\t\t\t\t\t\tname,\n\t\t\t\t\t\tfleet{data{id,attributes{name}}},\n\t\t\t\t\t\tregistry{data{id,attributes{type,name,content}}},\n\t\t\t\t\t\tcreatedAt, \n\t\t\t\t\t\tsubscribeOrgs{data{id,attributes{\n\t\t\t\t\t\t\tservices{data{id,attributes{\n\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\tcontent,\n\t\t\t\t\t\t\t\torganization{data{id,attributes{name}}},\n\t\t\t\t\t\t\t\tregistry{data{id,attributes{type,name,content}}},\n\t\t\t\t\t\t\t\tnamespace\n\t\t\t\t\t\t\t}}}\n\t\t\t\t\t\t}}},\n\t\t\t\t\t\twhitelistServices{data{id,attributes{name,namespace,registry{data{id,attributes{type,name}}}}}},\n\t\t\t\t\t\tblacklistServices{data{id,attributes{name,namespace,registry{data{id,attributes{type,name}}}}}},\n\t\t\t\t\t\tsidecar{data{id,attributes{name}}}\n\t\t\t\t\t}}}`).then((t=>{let e=t.data,a=[],i=[];if(e.organization&&e.organization.services&&e.organization.services.length>0&&(a=a.concat(e.organization.services.filter((t=>t.id!=this.pid))),i=a.concat(e.organization.services.filter((t=>t.id!=this.pid)))),e.subscribeOrgs&&e.subscribeOrgs.length)for(const t of e.subscribeOrgs)t.services&&t.services.length&&(a=a.concat(t.services));if(e.organization&&e.organization.whiteOrgs&&e.organization.whiteOrgs.length)for(const t of e.organization.whiteOrgs)t.services&&t.services.length&&(a=a.concat(t.services));e.content.whiteExcludedPath||(e.content.whiteExcludedPath={}),e.content.blackExcludedPath||(e.content.blackExcludedPath={});for(const t of a)e.content.whiteExcludedPath[t.id]||(e.content.whiteExcludedPath[t.id]=""),e.content.blackExcludedPath[t.id]||(e.content.blackExcludedPath[t.id]="");let s=new Map,n=e.whitelistServices?e.whitelistServices:[],l=e.blacklistServices?e.blacklistServices:[];a=a.filter((t=>!s.has(t.id)&&s.set(t.id,1)));let r=m().cloneDeep(a);if(a=a.filter((t=>!n.concat(l).find((e=>e.id==t.id)))),e.organization&&e.organization.subscribeServices&&(i=a.concat(e.organization.subscribeServices.filter((t=>t.id!=this.pid)))),e.organization&&e.organization.whiteOrgsBack&&e.organization.whiteOrgsBack.length)for(const t of e.organization.whiteOrgsBack)t.services&&t.services.length&&(i=a.concat(t.services));s=new Map,i=i.filter((t=>!s.has(t.id)&&s.set(t.id,1))),i=i.filter((t=>!(t.blacklistServices&&t.blacklistServices.find((t=>t.id==this.pid))))),this.creationTimestamp=new Date(e.createdAt).toLocaleString();let o=e.extend||{},d=e.content;d.spec||(d.spec={ports:[]}),d.endpoints||(d.endpoints=[]);let u=e.registry,c=e.ns;this.organization=e.organization?e.organization:{id:null},this.sidecar=e.sidecar?e.sidecar.id:null,this.isGateway=e.isGateway,this.gatewayPath=e.gatewayPath,this.upstreamVersion=e.upstreamVersion,d.endpoints&&d.endpoints.forEach((t=>{t.isedit=!1,t.port_val=t.ports?m().reduce(t.ports,(function(t,e){const a=e.name+"/"+e.port+"/"+e.protocol;return t?t+"\n"+a:a}),0):""})),o.identitys||(o.identitys={}),o.plugins||(o.plugins=[]),o.certificates||(o.certificates=[]),e.certificates&&e.certificates.length>0&&o.certificates.forEach((t=>{e.certificates.forEach((e=>{t.id==e.id&&(t.name=e.name,t.content=e.content)}))})),o.log||(o.log={}),o.log.level||(o.log.level="None"),this.$emit("update:contentString",JSON.stringify(d)),this.$emit("update:detail",d),this.$emit("update:extend",o),this.$emit("update:registry",u),this.$emit("update:ns",c),this.$emit("update:pods",e.pods||[]),this.$emit("update:whitelistServices",n),this.$emit("update:blacklistServices",l),this.$emit("update:subscribeServicesAll",r),this.$emit("update:subscribeServicesTo",i),this.$emit("update:subscribeServices",a),this.$emit("update:loading",!1),this.$emit("update:hasExport",!!e.serviceExport)}))},valid(){return""!=this.detail.metadata.name||(this.$message.error(this.$t("The name cannot be empty"),3),!1)},saveLogLevel(t){this.extend.log.level=t.logLevel,this.save(!0)},getSaveData(){let t=m().cloneDeep(this.detail);return t.endpoints&&t.endpoints.forEach((t=>{delete t.isedit,t.ports=[];t.port_val.trim().split("\n").forEach((e=>{const a=e.split("/");t.ports.push({name:a[0],port:a[1],protocol:a[2]})})),delete t.port_val})),t.spec.ports&&t.spec.ports.forEach((t=>{delete t.isedit,t.port=1*t.port})),this.$emit("update:contentString",JSON.stringify(t)),t},setSaveData(){let t=JSON.parse(this.contentString);this.$emit("update:detail",t)},save(t){if(!this.valid())return;let e=this.getSaveData(),a=m().cloneDeep(this.extend),i=[];a.certificates&&a.certificates.length>0&&(i=[],a.certificates.forEach((t=>{i.push(t.id)})));let s={name:this.detail.metadata.name,organization:this.organization?.id,isGateway:this.isGateway,gatewayPath:this.gatewayPath,upstreamVersion:this.upstreamVersion,sidecar:this.sidecar||null,content:e,certificates:i,extend:a,whitelistServices:this.whitelistServices.map((t=>t.id)),blacklistServices:this.blacklistServices.map((t=>t.id))};""!=this.pid?this.$gql.mutation(`updateServiceSync(id: ${this.pid}, data: $data){data{id}}`,{data:s},{data:"ServiceInput!"}).then((()=>{this.$message.success(this.$t("Save successfully"),3),1!=t&&this.$closePage(this.$route)})):(s.namespace=this.detail.metadata.namespace,s.registry=this.registry.id,this.$gql.mutation("createServiceSync(data: $data){data{id}}",{data:s},{data:"ServiceInput!"}).then((t=>{this.$emit("update:pid",t.data.id),this.$message.success(this.$t("Created successfully"),3),this.$closePage(this.$route)})))},validate(){this.$refs.layout.$refs.form.validateFields().then((()=>{this.save()})).catch((()=>{}))}}};var $=(0,a(83744).Z)(b,[["render",function(t,e,a,p,m,h){const g=(0,i.up)("DetailListItem"),w=(0,i.up)("a-input"),f=(0,i.up)("EnvSelector"),v=(0,i.up)("a-tag"),y=(0,i.up)("a-select-option"),k=(0,i.up)("a-select"),b=(0,i.up)("a-switch"),$=(0,i.up)("DetailList"),S=(0,i.up)("PlusOutlined"),_=(0,i.up)("a-tooltip"),x=(0,i.up)("JsonEditor"),C=(0,i.up)("a-popover"),j=(0,i.up)("a-button"),z=(0,i.up)("a-space"),W=(0,i.up)("a-col"),D=(0,i.up)("a-row"),I=(0,i.up)("PageLayout"),U=(0,i.Q2)("permission");return(0,i.wg)(),(0,i.j4)(I,{title:t.$t("Service"),"form-state":a.detail,ref:"layout"},{headerContent:(0,i.w5)((()=>[(0,i.Wm)($,{size:"small",col:1},{default:(0,i.w5)((()=>[""!=a.pid?((0,i.wg)(),(0,i.j4)(g,{key:0,term:t.$t("UID")},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(a.detail.metadata.uid),1)])),_:1},8,["term"])):(0,i.kq)("",!0),""!=a.pid?((0,i.wg)(),(0,i.j4)(g,{key:1,term:t.$t("as")},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(a.detail.metadata.name),1)])),_:1},8,["term"])):((0,i.wg)(),(0,i.j4)(g,{key:2,term:t.$t("as"),rules:t.rules.uniqueName("services",{ns:m.ns,id:a.pid}),name:["metadata","name"]},{default:(0,i.w5)((()=>[(0,i.Wm)(w,{placeholder:t.$t("unset"),value:a.detail.metadata.name,"onUpdate:value":e[0]||(e[0]=t=>a.detail.metadata.name=t),class:"bold width-300"},null,8,["placeholder","value"])])),_:1},8,["term","rules"])),""==a.pid?((0,i.wg)(),(0,i.j4)(g,{key:3,term:t.$t("Registry")+" / "+t.$t("Namespace")},{default:(0,i.w5)((()=>[(0,i.Wm)(f,{"no-all":!0,"is-filter":!0,onEnvChange:h.envChange},null,8,["onEnvChange"])])),_:1},8,["term"])):(0,i.kq)("",!0),""!=a.pid?((0,i.wg)(),(0,i.j4)(g,{key:4,term:t.$t("Registry Center")},{default:(0,i.w5)((()=>[(0,i.Wm)(v,{class:"click-icon",onClick:h.k8sDetail,closable:!1},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(a.registry.name),1)])),_:1},8,["onClick"])])),_:1},8,["term"])):(0,i.kq)("",!0),""!=a.pid?((0,i.wg)(),(0,i.j4)(g,{key:5,term:t.$t("Namespace")},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(a.detail.metadata.namespace||"default"),1)])),_:1},8,["term"])):(0,i.kq)("",!0),t.$isPro?((0,i.wg)(),(0,i.j4)(g,{key:6,term:t.$t("Organization"),name:"organization"},{default:(0,i.w5)((()=>[(0,i.wy)(((0,i.wg)(),(0,i.j4)(k,{placeholder:t.$t("unset"),value:m.organization.id,"onUpdate:value":e[1]||(e[1]=t=>m.organization.id=t),class:"width-180",ref:"select"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(m.orgs,((t,e)=>((0,i.wg)(),(0,i.j4)(y,{value:t.id,key:e},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(t.name),1)])),_:2},1032,["value"])))),128))])),_:1},8,["placeholder","value"])),[[U,a.pid?["admin"]:""]]),a.pid?((0,i.wg)(),(0,i.iD)("div",l,[(0,i.wy)(((0,i.wg)(),(0,i.j4)(v,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(m.organization?.name),1)])),_:1})),[[U,["!admin"]]])])):(0,i.kq)("",!0)])),_:1},8,["term"])):(0,i.kq)("",!0),t.$isPro?((0,i.wg)(),(0,i.j4)(g,{key:7,term:t.$t("Sidecar")},{default:(0,i.w5)((()=>[(0,i.Wm)(k,{placeholder:t.$t("unset"),value:m.sidecar,"onUpdate:value":e[2]||(e[2]=t=>m.sidecar=t),class:"width-180",ref:"select","allow-clear":""},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(m.sidecars,((t,e)=>((0,i.wg)(),(0,i.j4)(y,{value:t.id,key:e},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(t.name),1)])),_:2},1032,["value"])))),128))])),_:1},8,["placeholder","value"])])),_:1},8,["term"])):(0,i.kq)("",!0),t.$isPro?((0,i.wg)(),(0,i.j4)(g,{key:8,term:t.$t("Gateway Path")},{default:(0,i.w5)((()=>[(0,i.Wm)(w,{placeholder:t.$t("unset"),value:m.gatewayPath,"onUpdate:value":e[3]||(e[3]=t=>m.gatewayPath=t),class:"width-300"},null,8,["placeholder","value"])])),_:1},8,["term"])):(0,i.kq)("",!0),t.$isPro?((0,i.wg)(),(0,i.j4)(g,{key:9,term:t.$t("Upstream Version")},{default:(0,i.w5)((()=>[(0,i.Wm)(w,{placeholder:t.$t("unset"),value:m.upstreamVersion,"onUpdate:value":e[4]||(e[4]=t=>m.upstreamVersion=t),class:"width-300"},null,8,["placeholder","value"])])),_:1},8,["term"])):(0,i.kq)("",!0),t.$isPro?((0,i.wg)(),(0,i.j4)(g,{key:10,term:t.$t("Is Gateway")},{default:(0,i.w5)((()=>[(0,i.Wm)(b,{checked:m.isGateway,"onUpdate:checked":e[5]||(e[5]=t=>m.isGateway=t)},null,8,["checked"])])),_:1},8,["term"])):(0,i.kq)("",!0)])),_:1}),(0,i.Wm)($,{size:"small",col:1},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{term:t.$t("Labels")},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(Object.keys(a.detail.metadata.labels||[]),((t,e)=>((0,i.wg)(),(0,i.j4)(v,{key:e,onClose:e=>h.handleClose(a.detail.metadata.labels,t),closable:!0},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(t)+":"+(0,s.zw)(a.detail.metadata.labels[t]),1)])),_:2},1032,["onClose"])))),128)),(0,i.wy)((0,i.Wm)(w,{ref:"labelRef",type:"text",size:"small",class:"width-100",placeholder:"[KEY:VALUE]",value:m.labelValue,"onUpdate:value":e[6]||(e[6]=t=>m.labelValue=t),onBlur:h.labelInputConfirm,onKeyup:(0,n.D2)(h.labelInputConfirm,["enter"])},null,8,["value","onBlur","onKeyup"]),[[n.F8,m.labelVisible]]),m.labelVisible?(0,i.kq)("",!0):(0,i.wy)(((0,i.wg)(),(0,i.j4)(v,{key:0,onClick:h.labelShowInput,class:"dashed-tag"},{default:(0,i.w5)((()=>[(0,i.Wm)(S),(0,i.Uk)(" "+(0,s.zw)(t.$t("add")),1)])),_:1},8,["onClick"])),[[U,["service:update"]]])])),_:1},8,["term"]),(0,i.Wm)(g,{term:t.$t("Annotations")},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(Object.keys(a.detail.metadata.annotations||[]),((t,e)=>((0,i.wg)(),(0,i.j4)(v,{key:e,onClose:e=>h.handleClose(a.detail.metadata.annotations,t),closable:!0,class:"mb-5"},{default:(0,i.w5)((()=>["objectset.rio.cattle.io/applied"==t?((0,i.wg)(),(0,i.iD)("span",r,[(0,i.Wm)(_,{placement:"topLeft",title:a.detail.metadata.annotations[t]},{default:(0,i.w5)((()=>[(0,i._)("a",o,(0,s.zw)(t),1)])),_:2},1032,["title"])])):"kubectl.kubernetes.io/last-applied-configuration"==t?((0,i.wg)(),(0,i.iD)("span",d,[(0,i.Wm)(C,{trigger:"click",title:t},{content:(0,i.w5)((()=>[(0,i.Wm)(x,{"is-json":!0,value:a.detail.metadata.annotations[t]},null,8,["value"])])),default:(0,i.w5)((()=>[(0,i._)("a",u,(0,s.zw)(t),1)])),_:2},1032,["title"])])):((0,i.wg)(),(0,i.iD)("span",c,(0,s.zw)(t)+":"+(0,s.zw)(a.detail.metadata.annotations[t]),1))])),_:2},1032,["onClose"])))),128)),(0,i.wy)((0,i.Wm)(w,{ref:"annotationRef",type:"text",size:"small",class:"width-100",placeholder:"[KEY:VALUE]",value:m.annotationValue,"onUpdate:value":e[7]||(e[7]=t=>m.annotationValue=t),onBlur:h.annotationInputConfirm,onKeyup:(0,n.D2)(h.annotationInputConfirm,["enter"])},null,8,["value","onBlur","onKeyup"]),[[n.F8,m.annotationVisible]]),m.annotationVisible?(0,i.kq)("",!0):(0,i.wy)(((0,i.wg)(),(0,i.j4)(v,{key:0,onClick:h.annotationShowInput,class:"dashed-tag"},{default:(0,i.w5)((()=>[(0,i.Wm)(S),(0,i.Uk)(" "+(0,s.zw)(t.$t("add")),1)])),_:1},8,["onClick"])),[[U,["service:update"]]])])),_:1},8,["term"]),""!=a.pid?((0,i.wg)(),(0,i.j4)(g,{key:0,term:t.$t("Creation Timestamp")},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(m.creationTimestamp),1)])),_:1},8,["term"])):(0,i.kq)("",!0)])),_:1})])),extra:(0,i.w5)((()=>[(0,i.WI)(t.$slots,"extra",{},void 0,!0)])),action:(0,i.w5)((()=>[(0,i.Wm)(z,null,{default:(0,i.w5)((()=>[(0,i.WI)(t.$slots,"action",{},void 0,!0),""!=a.pid?(0,i.wy)(((0,i.wg)(),(0,i.j4)(j,{key:0,type:"primary",onClick:h.validate},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(t.$t("save")),1)])),_:1},8,["onClick"])),[[U,["service:update"]]]):(0,i.wy)(((0,i.wg)(),(0,i.j4)(j,{key:1,type:"primary",onClick:h.validate},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(t.$t("create")),1)])),_:1},8,["onClick"])),[[U,["service:create"]]])])),_:3})])),default:(0,i.w5)((()=>[(0,i.Wm)(D,{class:"row-mg"},{default:(0,i.w5)((()=>[(0,i.Wm)(W,{class:"col-pd",xl:24,lg:24,md:24,sm:24,xs:24},{default:(0,i.w5)((()=>[(0,i.WI)(t.$slots,"tabs",{},void 0,!0)])),_:3})])),_:3})])),_:3},8,["title","form-state"])}],["__scopeId","data-v-0be2eb84"]])},9112:function(t,e,a){"use strict";a.d(e,{Z:function(){return h}});var i=a(66252),s=a(3577);var n=a(96486),l=a.n(n),r=a(16333);var o=a(79332),d=a(33907),u={name:"ServiceExportForm",i18n:a(89234),components:{FormItem:o.Z},props:["d","ports"],data(){return{payload:{content:{portNumber:null,path:""}}}},computed:{...(0,d.rn)("rules",["rules"])},watch:{d:{deep:!0,immediate:!0,handler(t){this.payload=t}}},created(){},methods:{}},c=a(83744);var p=(0,c.Z)(u,[["render",function(t,e,a,n,l,r){const o=(0,i.up)("a-input"),d=(0,i.up)("FormItem"),u=(0,i.up)("a-descriptions-item"),c=(0,i.up)("a-select-option"),p=(0,i.up)("a-select"),m=(0,i.up)("a-descriptions");return a.d?((0,i.wg)(),(0,i.j4)(m,{key:0,bordered:"",class:"bg-white"},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{label:t.$t("path"),span:3},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{name:["content","path"],rules:t.rules.path},{default:(0,i.w5)((()=>[(0,i.Wm)(o,{value:a.d.content.path,"onUpdate:value":e[0]||(e[0]=t=>a.d.content.path=t),placeholder:t.$t("unset")},null,8,["value","placeholder"])])),_:1},8,["rules"])])),_:1},8,["label"]),(0,i.Wm)(u,{label:t.$t("Port"),span:3},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{name:["content","portNumber"],rules:t.rules.numberRequired},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{placeholder:t.$t("unset"),value:a.d.content.portNumber,"onUpdate:value":e[1]||(e[1]=t=>a.d.content.portNumber=t),class:"width-180",ref:"select","allow-clear":""},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.ports,((t,e)=>((0,i.wg)(),(0,i.j4)(c,{value:t.port,key:e},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(t.port),1)])),_:2},1032,["value"])))),128))])),_:1},8,["placeholder","value"])])),_:1},8,["rules"])])),_:1},8,["label"])])),_:1})):(0,i.kq)("",!0)}]]),m={name:"ServiceExportCard",i18n:a(89234),components:{ServiceImportList:r.Z,ServiceExportForm:p},props:["modal","sid","isEdit","ports"],data(){return{visible:!1,loading:!0,saveLoading:!1,pid:null,payload:{content:{portNumber:0,path:""}}}},watch:{modal:{deep:!0,immediate:!0,handler(t){this.visible=t}}},created(){this.visible=this.modal,this.loadData()},methods:{loadData(){this.loading=!0;let t={service:{id:{eq:this.sid}}};this.$gql.query(`serviceExports(filters: $filters, pagination:{ start: 0, limit: ${this.$DFT_LIMIT} }){\n\t\t\t\t\t\tdata{id,attributes{\n\t\t\t\t\t\t  service{data{id,attributes{name}}},\n\t\t\t\t\t\t\tcontent\n\t\t\t\t\t\t}}\n\t\t\t\t\t}`,{filters:t},{filters:"ServiceExportFiltersInput"}).then((t=>{this.loading=!1,t.data&&t.data.length>0?(this.payload=t.data[0],this.pid=t.data[0].id,this.$emit("update:isEdit",!0)):(this.ports.length>0&&(this.payload.content.portNumber=this.ports[0].port),this.$emit("update:isEdit",!1))}))},createValid(){this.$refs.createForm.validateFields().then((()=>{this.save()})).catch((()=>{}))},saveValid(){this.$refs.updateForm.validateFields().then((()=>{this.save()})).catch((()=>{}))},remove(){this.$gql.mutation(`deleteServiceExport(id:${this.pid}){data{id}}`).then((()=>{this.$message.success(this.$t("Deleted successfully"),3),this.$emit("update:isEdit",!1),this.pid=null,this.loadData()}))},save(){this.$emit("start"),this.$emit("update:modal",!1),this.saveLoading=!0;let t=l().cloneDeep(this.payload);delete t.id,t.service=this.sid,this.pid?this.$gql.mutation(`updateServiceExport(id:${this.pid}, data: $data){data{id}}`,{data:t},{data:"ServiceExportInput!"}).then((()=>{this.$emit("save"),this.saveLoading=!1,this.$message.success(this.$t("Save successfully"),3)})):this.$gql.mutation("createServiceExport(data: $data){data{id}}",{data:t},{data:"ServiceExportInput!"}).then((()=>{this.$emit("save"),this.saveLoading=!1,this.$message.success(this.$t("Created successfully"),3),this.loadData()}))},openExport(){this.$emit("export",!1),this.$emit("update:modal",!0)},cancel(){this.$emit("update:modal",!1)}}};var h=(0,c.Z)(m,[["render",function(t,e,a,n,l,r){const o=(0,i.up)("a-button"),d=(0,i.up)("a-result"),u=(0,i.up)("a-popconfirm"),c=(0,i.up)("a-space"),p=(0,i.up)("ServiceExportForm"),m=(0,i.up)("a-form"),h=(0,i.up)("a-card"),g=(0,i.up)("a-col"),w=(0,i.up)("ServiceImportList"),f=(0,i.up)("a-row"),v=(0,i.up)("a-modal"),y=(0,i.Q2)("permission");return(0,i.wg)(),(0,i.iD)(i.HY,null,[a.isEdit||l.loading?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(d,{key:0,status:"404",title:t.$t("Not Service Export")},{extra:(0,i.w5)((()=>[(0,i.Wm)(o,{loading:l.saveLoading,onClick:r.openExport,type:"primary"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(t.$t("Export")),1)])),_:1},8,["loading","onClick"])])),_:1},8,["title"])),l.pid?((0,i.wg)(),(0,i.j4)(f,{key:1,class:"row-mg"},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{class:"col-pd",xl:10,lg:24,md:24,sm:24,xs:24},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{class:"card mb-20 nopd",bordered:!1,loading:l.loading,title:t.$t("Service Export")},{extra:(0,i.w5)((()=>[(0,i.Wm)(c,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{"ok-text":t.$t("Yes"),"cancel-text":t.$t("No"),onConfirm:r.remove},{title:(0,i.w5)((()=>[(0,i._)("p",null,(0,s.zw)(t.$t("Tip")),1),(0,i._)("p",null,(0,s.zw)(t.$t("Are you sure to delete this?")),1)])),default:(0,i.w5)((()=>[(0,i.wy)(((0,i.wg)(),(0,i.j4)(o,{loading:l.saveLoading},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(t.$t("Clear")),1)])),_:1},8,["loading"])),[[y,["service:update"]]])])),_:1},8,["ok-text","cancel-text","onConfirm"]),(0,i.wy)(((0,i.wg)(),(0,i.j4)(o,{loading:l.saveLoading,type:"primary",onClick:r.saveValid},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(t.$t("Save")),1)])),_:1},8,["loading","onClick"])),[[y,["service:update"]]])])),_:1})])),default:(0,i.w5)((()=>[(0,i.Wm)(m,{model:l.payload,"wrapper-col":{span:24},ref:"updateForm"},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{ports:a.ports,d:l.payload,"onUpdate:d":e[0]||(e[0]=t=>l.payload=t)},null,8,["ports","d"])])),_:1},8,["model"])])),_:1},8,["loading","title"])])),_:1}),(0,i.Wm)(g,{class:"col-pd",xl:14,lg:24,md:24,sm:24,xs:24},{default:(0,i.w5)((()=>[(0,i.Wm)(w,{embed:!0,"service-export":l.pid},null,8,["service-export"])])),_:1})])),_:1})):(0,i.kq)("",!0),(0,i.Wm)(v,{visible:l.visible,"onUpdate:visible":e[2]||(e[2]=t=>l.visible=t),title:t.$t("Service Export"),onOk:r.createValid,onCancel:r.cancel,width:"50%","ok-text":t.$t("Start")},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{model:l.payload,"wrapper-col":{span:24},ref:"createForm"},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{ports:a.ports,d:l.payload,"onUpdate:d":e[1]||(e[1]=t=>l.payload=t)},null,8,["ports","d"])])),_:1},8,["model"])])),_:1},8,["visible","title","onOk","onCancel","ok-text"])],64)}]])},88711:function(t,e,a){"use strict";a.d(e,{Z:function(){return N}});var i=a(66252),s=a(3577);const n={key:1},l={key:1},r={key:1},o={key:1},d={key:4,class:"editable-row-operations"},u={key:0},c=["onClick"],p={key:1},m=["onClick"],h=["onClick"],g={key:1},w=["href"],f={key:0},v={class:"textarea-tip"},y={key:1},k={key:1},b={key:1},$={key:4,class:"editable-row-operations"},S={key:0},_=["onClick"],x={key:1},C=["onClick"];a(57658);var j=a(99684),z=a(54367),W=a(75255),D=a(46981),I=a(1299),U=a(13589),E=a(79332),P=a(33907);const q=[{key:"as",dataIndex:"name"},{key:"Port",dataIndex:"port"},{key:"Protocol",dataIndex:"protocol"},{key:"Target Port",dataIndex:"targetPort"},{key:"Action",width:140,dataIndex:"action"}],O=[{key:"Host",dataIndex:"host"},{key:"Ports(Name/Port/Protocol)",dataIndex:"ports"},{key:"node",dataIndex:"nodeName"},{key:"Ready",dataIndex:"ready"},{key:"Action",width:140,dataIndex:"action"}];var V={name:"ServicesDetail",i18n:a(89234),components:{PlusCircleTwoTone:j.Z,CloseOutlined:z.Z,CheckOutlined:W.Z,EditOutlined:D.Z,DetailList:I.Z,DetailListItem:U.Z,FormItem:E.Z},props:["detail","registry"],data(){return{port_columns:q,ep_columns:O}},computed:{...(0,P.rn)("rules",["rules"]),epDataColumns(){return this.ep_columns.map((t=>(t.title=this.$t(t.key),t)))},portDataColumns(){return this.port_columns.map((t=>(t.title=this.$t(t.key),t)))}},created(){},methods:{removePort(t){this.detail.spec.ports.splice(t,1),this.$emit("update:detail",this.detail)},removeEndpoint(t){this.detail.endpoints.splice(t,1),this.$emit("update:detail",this.detail)},cancel(t){t.isedit=!1,this.$emit("update:detail",this.detail)},edit(t){t.isedit=!0,this.$emit("update:detail",this.detail)},addEndpoints(){this.detail.endpoints=this.detail.endpoints||[],this.detail.endpoints.push({isedit:!0,host:"",port_val:"",nodeName:"",ready:""}),this.$emit("update:detail",this.detail)},addPort(){this.detail.spec.ports=this.detail.spec.ports||[],this.detail.spec.ports.push({isedit:!0,name:"",port:8080,protocol:"TCP",targetPort:""}),this.$emit("update:detail",this.detail)}}};var N=(0,a(83744).Z)(V,[["render",function(t,e,a,j,z,W){const D=(0,i.up)("a-input"),I=(0,i.up)("DetailListItem"),U=(0,i.up)("DetailList"),E=(0,i.up)("a-tag"),P=(0,i.up)("a-card"),q=(0,i.up)("PlusCircleTwoTone"),O=(0,i.up)("a-input-number"),V=(0,i.up)("FormItem"),N=(0,i.up)("a-select-option"),L=(0,i.up)("a-select"),T=(0,i.up)("CheckOutlined"),A=(0,i.up)("EditOutlined"),Y=(0,i.up)("CloseOutlined"),Z=(0,i.up)("a-table"),F=(0,i.up)("a-textarea"),K=(0,i.up)("a-col"),J=(0,i.up)("a-row"),R=(0,i.Q2)("permission");return(0,i.wg)(),(0,i.j4)(J,{class:"row-mg"},{default:(0,i.w5)((()=>[(0,i.Wm)(K,{class:"col-pd",xl:""!=t.pid&&t.$isPro?16:24,lg:24,md:24,sm:24,xs:24},{default:(0,i.w5)((()=>["k8s"==a.registry.type?((0,i.wg)(),(0,i.j4)(P,{key:0,class:"card mb-20",bordered:!1,loading:t.loading,title:t.$t("Resource Info")},{default:(0,i.w5)((()=>[(0,i.Wm)(U,{size:"small",col:3},{default:(0,i.w5)((()=>[(0,i.Wm)(I,{term:t.$t("Type")},{default:(0,i.w5)((()=>[(0,i.Wm)(D,{placeholder:t.$t("unset"),value:a.detail.spec.type,"onUpdate:value":e[0]||(e[0]=t=>a.detail.spec.type=t)},null,8,["placeholder","value"])])),_:1},8,["term"]),(0,i.Wm)(I,{term:t.$t("Cluster IP")},{default:(0,i.w5)((()=>[(0,i.Wm)(D,{placeholder:t.$t("unset"),value:a.detail.spec.clusterIP,"onUpdate:value":e[1]||(e[1]=t=>a.detail.spec.clusterIP=t)},null,8,["placeholder","value"])])),_:1},8,["term"]),(0,i.Wm)(I,{term:t.$t("Session Affinity")},{default:(0,i.w5)((()=>[(0,i.Wm)(D,{placeholder:t.$t("unset"),value:a.detail.spec.sessionAffinity,"onUpdate:value":e[2]||(e[2]=t=>a.detail.spec.sessionAffinity=t)},null,8,["placeholder","value"])])),_:1},8,["term"])])),_:1}),(0,i.Wm)(U,{size:"small",col:1},{default:(0,i.w5)((()=>[a.detail.spec.containerImages?((0,i.wg)(),(0,i.j4)(I,{key:0,term:t.$t("Container Images")},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.detail.containerImages,((t,e)=>((0,i.wg)(),(0,i.j4)(E,{key:e,closable:!1},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(t),1)])),_:2},1024)))),128))])),_:1},8,["term"])):(0,i.kq)("",!0),a.detail.spec.selector?((0,i.wg)(),(0,i.j4)(I,{key:1,term:t.$t("Selector")},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(Object.keys(a.detail.spec.selector),((t,e)=>((0,i.wg)(),(0,i.j4)(E,{key:e,closable:!1},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(t)+":"+(0,s.zw)(a.detail.spec.selector[t]),1)])),_:2},1024)))),128))])),_:1},8,["term"])):(0,i.kq)("",!0),a.detail.spec.labelSelector&&a.detail.spec.labelSelector.matchLabels?((0,i.wg)(),(0,i.j4)(I,{key:2,term:t.$t("Selector")},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(Object.keys(a.detail.spec.labelSelector.matchLabels),((t,e)=>((0,i.wg)(),(0,i.j4)(E,{key:e,closable:!1},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(t)+":"+(0,s.zw)(a.detail.spec.labelSelector.matchLabels[t]),1)])),_:2},1024)))),128))])),_:1},8,["term"])):(0,i.kq)("",!0)])),_:1})])),_:1},8,["loading","title"])):(0,i.kq)("",!0),"eureka"==a.registry.type?((0,i.wg)(),(0,i.j4)(P,{key:1,class:"card mb-20",bordered:!1,loading:t.loading,title:t.$t("Resource Info")},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.detail.instance,((e,a)=>((0,i.wg)(),(0,i.j4)(U,{size:"small",col:3,key:a},{default:(0,i.w5)((()=>[(0,i.Wm)(I,{term:t.$t("Name")},{default:(0,i.w5)((()=>[(0,i.Wm)(E,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(e.app),1)])),_:2},1024)])),_:2},1032,["term"]),(0,i.Wm)(I,{term:t.$t("Status")},{default:(0,i.w5)((()=>[(0,i.Wm)(E,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(e.status),1)])),_:2},1024)])),_:2},1032,["term"]),(0,i.Wm)(I,{term:t.$t("Host")},{default:(0,i.w5)((()=>[(0,i.Wm)(E,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(e.hostName),1)])),_:2},1024)])),_:2},1032,["term"]),(0,i.Wm)(I,{term:t.$t("IP")},{default:(0,i.w5)((()=>[(0,i.Wm)(E,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(e.ipAddr),1)])),_:2},1024)])),_:2},1032,["term"]),(0,i.Wm)(I,{term:t.$t("Port")},{default:(0,i.w5)((()=>[(0,i.Wm)(E,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(e.port.$),1)])),_:2},1024)])),_:2},1032,["term"])])),_:2},1024)))),128))])),_:1},8,["loading","title"])):(0,i.kq)("",!0),(0,i.Wm)(P,{class:"card mb-20",bordered:!1,loading:t.loading,title:t.$t("Ports")},{extra:(0,i.w5)((()=>[(0,i.wy)(((0,i.wg)(),(0,i.iD)("a",{onClick:e[3]||(e[3]=(...t)=>W.addPort&&W.addPort(...t)),href:"javascript:void(0)"},[(0,i.Wm)(q,{class:"font-20"})])),[[R,["service:update"]]])])),default:(0,i.w5)((()=>[(0,i.Wm)(Z,{pagination:!1,columns:W.portDataColumns,"data-source":a.detail.spec.ports,loading:t.loading,class:"bg-white"},{bodyCell:(0,i.w5)((({column:e,record:g,index:w})=>["name"===e.dataIndex?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[g.isedit?((0,i.wg)(),(0,i.j4)(D,{key:0,value:g.name,"onUpdate:value":t=>g.name=t,class:"edit-input"},null,8,["value","onUpdate:value"])):((0,i.wg)(),(0,i.iD)("div",n,(0,s.zw)(g.name||"-"),1))],64)):(0,i.kq)("",!0),"port"===e.dataIndex?((0,i.wg)(),(0,i.j4)(V,{key:1,name:["spec","ports",w,"port"],rules:t.rules.numberRequired},{default:(0,i.w5)((()=>[g.isedit?((0,i.wg)(),(0,i.j4)(O,{key:0,min:0,value:g.port,"onUpdate:value":t=>g.port=t,class:"edit-input"},null,8,["value","onUpdate:value"])):((0,i.wg)(),(0,i.iD)("div",l,(0,s.zw)(g.port||"-"),1))])),_:2},1032,["name","rules"])):(0,i.kq)("",!0),"protocol"===e.dataIndex?((0,i.wg)(),(0,i.iD)(i.HY,{key:2},[g.isedit?((0,i.wg)(),(0,i.j4)(L,{key:0,value:g.protocol,"onUpdate:value":t=>g.protocol=t,class:"edit-input width-90"},{default:(0,i.w5)((()=>[(0,i.Wm)(N,{value:"TCP"},{default:(0,i.w5)((()=>[(0,i.Uk)(" TCP ")])),_:1}),(0,i.Wm)(N,{value:"SCTP"},{default:(0,i.w5)((()=>[(0,i.Uk)(" SCTP ")])),_:1}),(0,i.Wm)(N,{value:"UDP"},{default:(0,i.w5)((()=>[(0,i.Uk)(" UDP ")])),_:1})])),_:2},1032,["value","onUpdate:value"])):((0,i.wg)(),(0,i.iD)("div",r,(0,s.zw)(g.protocol||"-"),1))],64)):(0,i.kq)("",!0),"targetPort"===e.dataIndex?((0,i.wg)(),(0,i.j4)(V,{key:3,name:["spec","ports",w,"targetPort"],rules:t.rules.numberRequired},{default:(0,i.w5)((()=>[g.isedit?((0,i.wg)(),(0,i.j4)(O,{key:0,min:0,value:g.targetPort,"onUpdate:value":t=>g.targetPort=t,class:"edit-input"},null,8,["value","onUpdate:value"])):((0,i.wg)(),(0,i.iD)("div",o,(0,s.zw)(g.targetPort||"-"),1))])),_:2},1032,["name","rules"])):"action"===e.dataIndex?((0,i.wg)(),(0,i.iD)("div",d,[g.isedit?((0,i.wg)(),(0,i.iD)("span",u,[(0,i._)("a",{onClick:t=>W.cancel(g)},[(0,i.Wm)(T,{class:"icon-menu"})],8,c)])):((0,i.wg)(),(0,i.iD)("span",p,[(0,i.wy)(((0,i.wg)(),(0,i.iD)("a",{onClick:t=>W.edit(g)},[(0,i.Wm)(A,{class:"icon-menu"})],8,m)),[[R,["service:update"]]])])),a.detail.spec.ports.length>1?((0,i.wg)(),(0,i.iD)("a",{key:2,onClick:t=>W.removePort(w)},[(0,i.Wm)(Y,{class:"icon-menu"})],8,h)):(0,i.kq)("",!0)])):(0,i.kq)("",!0)])),_:1},8,["columns","data-source","loading"])])),_:1},8,["loading","title"]),(0,i.Wm)(P,{class:"card mb-20",bordered:!1,loading:t.loading,title:t.$t("Endpoints")},{extra:(0,i.w5)((()=>[(0,i.wy)(((0,i.wg)(),(0,i.iD)("a",{onClick:e[4]||(e[4]=(...t)=>W.addEndpoints&&W.addEndpoints(...t)),href:"javascript:void(0)"},[(0,i.Wm)(q,{class:"font-20"})])),[[R,["service:update"]]])])),default:(0,i.w5)((()=>[(0,i.Wm)(Z,{pagination:!1,columns:W.epDataColumns,"data-source":a.detail.endpoints,loading:t.loading,class:"bg-white"},{bodyCell:(0,i.w5)((({column:e,record:a})=>["host"===e.dataIndex?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[a.isedit?((0,i.wg)(),(0,i.j4)(D,{key:0,value:a.host,"onUpdate:value":t=>a.host=t,class:"edit-input"},null,8,["value","onUpdate:value"])):((0,i.wg)(),(0,i.iD)("div",g,[(0,i._)("a",{href:"http://"+a.host,target:"_blank"},(0,s.zw)(a.host||"-"),9,w)]))],64)):"ports"===e.dataIndex?((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[a.isedit?((0,i.wg)(),(0,i.iD)("div",f,[(0,i.Wm)(F,{value:a.port_val,"onUpdate:value":t=>a.port_val=t,placeholder:"","allow-clear":""},null,8,["value","onUpdate:value"]),(0,i._)("div",v,(0,s.zw)(t.$t("List of name/port/protocol")),1)])):((0,i.wg)(),(0,i.iD)("div",y,[(0,i._)("pre",null,(0,s.zw)(a.port_val.trim()||"-"),1)]))],64)):"nodeName"===e.dataIndex?((0,i.wg)(),(0,i.iD)(i.HY,{key:2},[a.isedit?((0,i.wg)(),(0,i.j4)(D,{key:0,value:a.nodeName,"onUpdate:value":t=>a.nodeName=t,class:"edit-input"},null,8,["value","onUpdate:value"])):((0,i.wg)(),(0,i.iD)("div",k,(0,s.zw)(a.nodeName||"-"),1))],64)):"ready"===e.dataIndex?((0,i.wg)(),(0,i.iD)(i.HY,{key:3},[a.isedit?((0,i.wg)(),(0,i.j4)(D,{key:0,value:a.ready,"onUpdate:value":t=>a.ready=t,class:"edit-input"},null,8,["value","onUpdate:value"])):((0,i.wg)(),(0,i.iD)("div",b,(0,s.zw)(a.ready||"-"),1))],64)):"action"===e.dataIndex?((0,i.wg)(),(0,i.iD)("div",$,[a.isedit?((0,i.wg)(),(0,i.iD)("span",S,[(0,i._)("a",{onClick:t=>W.cancel(a)},[(0,i.Wm)(T)],8,_)])):((0,i.wg)(),(0,i.iD)("span",x,[(0,i.wy)(((0,i.wg)(),(0,i.iD)("a",{onClick:t=>W.edit(a)},[(0,i.Wm)(A)],8,C)),[[R,["service:update"]]])]))])):(0,i.kq)("",!0)])),_:1},8,["columns","data-source","loading"])])),_:1},8,["loading","title"]),a.detail.rollingUpdateStrategy&&"k8s"==a.registry.type?((0,i.wg)(),(0,i.j4)(P,{key:2,class:"card mb-20",bordered:!1,loading:t.loading,title:t.$t("Rolling Update Strategy")},{default:(0,i.w5)((()=>[(0,i.Wm)(U,{size:"small",col:3},{default:(0,i.w5)((()=>[(0,i.Wm)(I,{term:t.$t("Max Surge")},{default:(0,i.w5)((()=>[(0,i.Wm)(D,{placeholder:t.$t("unset"),value:a.detail.rollingUpdateStrategy.maxSurge,"onUpdate:value":e[5]||(e[5]=t=>a.detail.rollingUpdateStrategy.maxSurge=t)},null,8,["placeholder","value"])])),_:1},8,["term"]),(0,i.Wm)(I,{term:t.$t("Max Unavailable")},{default:(0,i.w5)((()=>[(0,i.Wm)(D,{placeholder:t.$t("unset"),value:a.detail.rollingUpdateStrategy.maxUnavailable,"onUpdate:value":e[6]||(e[6]=t=>a.detail.rollingUpdateStrategy.maxUnavailable=t)},null,8,["placeholder","value"])])),_:1},8,["term"])])),_:1})])),_:1},8,["loading","title"])):(0,i.kq)("",!0)])),_:1},8,["xl"]),(0,i.WI)(t.$slots,"right")])),_:3})}]])}}]);