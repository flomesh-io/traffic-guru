"use strict";(self.webpackChunkflomesh_load_balancer=self.webpackChunkflomesh_load_balancer||[]).push([[8367],{79821:function(t,e,a){a.r(e),a.d(e,{default:function(){return f}});var n=a(66252);var i=a(95082),o=(a(74916),a(64765),a(77469)),s=a(7141),d=a(14766),r=a(61103),l=a(33907),u=a(39176),c=a(38251),p=a(44044),m=a(54140),g={name:"CronJobsDetail",i18n:a(89234),components:{PageLayout:r.Z,EventList:o.Z,StatusList:s.Z,JobList:d.Z,RollingUpdateCard:u.Z,PodStatusCard:p.Z,DetailHeader:m.Z,ResourceInfoCard:c.Z},data:function(){return{detail:{spec:{updateStrategy:{rollingUpdate:{}},template:{spec:{containers:[]}}},metadata:{labels:{},annotations:{}},typeMeta:{},jobStatus:{},podInfo:{},containerImages:[],selector:{},statusInfo:{},conditions:[],rollingUpdateStrategy:{}},loading:!0,pid:"",namespace:"",isMounted:!1,metrics:[],params:{key:"",pageNo:1,pageSize:10,total:0}}},computed:(0,i.Z)({},(0,l.rn)("setting",["isMobile"])),created:function(){this.pid=this.$route.params.id||"",this.namespace=this.$route.params.namespace||localStorage.getItem("NAMESPACE")},mounted:function(){this.isMounted=!0,""!=this.pid?this.search():(this.detail={spec:{updateStrategy:{rollingUpdate:{}},template:{spec:{containers:[]}}},metadata:{labels:{},annotations:{}},typeMeta:{},jobStatus:{},podInfo:{},containerImages:[],selector:{},statusInfo:{},conditions:[],rollingUpdateStrategy:{}},this.loading=!1)},methods:{onTabChange:function(t){},search:function(){var t=this;this.loading=!0,this.$request(this.URL(),this.$METHOD.GET).then((function(e){t.detail=e.data,t.loading=!1}))},URL:function(){var t="/"+this.pid;return this.$REST.K8S.encode(this.$REST.K8S.CRONJOB,t,this.namespace)},valid:function(){return!0},save:function(){this.valid()&&(""!=this.pid?(this.$message.success(this.$t("Save successfully"),3),this.$closePage(this.$route)):(this.$message.success(this.$t("Created successfully"),3),this.$closePage(this.$route)))},handleChange:function(){}}};var f=(0,a(83744).Z)(g,[["render",function(t,e,a,i,o,s){var d=(0,n.up)("DetailHeader"),r=(0,n.up)("ResourceInfoCard"),l=(0,n.up)("RollingUpdateCard"),u=(0,n.up)("PodStatusCard"),c=(0,n.up)("a-tab-pane"),p=(0,n.up)("JobList"),m=(0,n.up)("a-card"),g=(0,n.up)("StatusList"),f=(0,n.up)("EventList"),h=(0,n.up)("a-tabs"),b=(0,n.up)("a-col"),v=(0,n.up)("a-row"),S=(0,n.up)("PageLayout");return(0,n.wg)(),(0,n.j4)(S,{title:t.$t("Cron Jobs")},{headerContent:(0,n.w5)((function(){return[(0,n.Wm)(d,{d:o.detail},null,8,["d"])]})),action:(0,n.w5)((function(){return[]})),default:(0,n.w5)((function(){return[(0,n.Wm)(v,{class:"row-mg"},{default:(0,n.w5)((function(){return[(0,n.Wm)(b,{class:"col-pd",xl:24,lg:24,md:24,sm:24,xs:24},{default:(0,n.w5)((function(){return[(0,n.Wm)(h,{type:"card"},{default:(0,n.w5)((function(){return[(0,n.Wm)(c,{key:"1",tab:t.$t("Overview")},{default:(0,n.w5)((function(){var t;return[(0,n.Wm)(r,{loading:o.loading,d:o.detail},null,8,["loading","d"]),(0,n.Wm)(l,{loading:o.loading,d:null===(t=o.detail.spec)||void 0===t?void 0:t.updateStrategy},null,8,["loading","d"]),(0,n.Wm)(u,{loading:o.loading,d:o.detail.podInfo},null,8,["loading","d"])]})),_:1},8,["tab"]),(0,n.Wm)(c,{key:"2",tab:t.$t("Jobs")},{default:(0,n.w5)((function(){return[(0,n.Wm)(m,{class:"card nopd",bordered:!1,loading:o.loading},{default:(0,n.w5)((function(){return[(0,n.Wm)(p,{title:t.$t("Active Jobs"),embed:!0,unactive:!1,"has-search":!1,d:o.detail.active},null,8,["title","d"])]})),_:1},8,["loading"]),(0,n.Wm)(m,{class:"card mt-10 nopd",bordered:!1,loading:o.loading},{default:(0,n.w5)((function(){return[(0,n.Wm)(p,{title:t.$t("Not Working Jobs"),embed:!0,unactive:!0,"has-search":!1,d:o.detail.notWorking},null,8,["title","d"])]})),_:1},8,["loading"])]})),_:1},8,["tab"]),o.detail.jobStatus?((0,n.wg)(),(0,n.j4)(c,{key:"3",tab:t.$t("Status")},{default:(0,n.w5)((function(){return[(0,n.Wm)(m,{class:"card nopd",bordered:!1,loading:o.loading},{default:(0,n.w5)((function(){return[(0,n.Wm)(g,{d:o.detail.jobStatus.conditions||[]},null,8,["d"])]})),_:1},8,["loading"])]})),_:1},8,["tab"])):(0,n.kq)("",!0),(0,n.Wm)(c,{key:"4",tab:t.$t("Events")},{default:(0,n.w5)((function(){return[(0,n.Wm)(m,{class:"card nopd",bordered:!1,loading:o.loading},{default:(0,n.w5)((function(){return[(0,n.Wm)(f,{namespace:o.namespace,"has-search":!1,url:t.$REST.K8S.CRONJOB+"/"+o.pid+"/event"},null,8,["namespace","url"])]})),_:1},8,["loading"])]})),_:1},8,["tab"])]})),_:1})]})),_:1})]})),_:1})]})),_:1},8,["title"])}]])},7141:function(t,e,a){a.d(e,{Z:function(){return s}});var n=a(66252);a(21249),a(74916),a(64765);var i=[{key:"Type",dataIndex:"type"},{key:"Status",dataIndex:"status"},{key:"Last Probe Time",dataIndex:"lastProbeTime"},{key:"Last Transition Time",dataIndex:"lastTransitionTime"},{key:"Reason",dataIndex:"reason"},{key:"Message",dataIndex:"message"}],o={name:"StatusList",components:{},props:["d"],i18n:a(89234),data:function(){return{columns:i,loading:!1,list:[]}},computed:{dataColumns:function(){var t=this;return this.columns.map((function(e){return e.title=t.$t(e.key),e}))}},created:function(){this.search()},methods:{search:function(){this.list=this.reset(this.d)},reset:function(t){for(var e=0;e<t.length;e++)t[e].lastProbeTime=new Date(t[e].lastProbeTime).toLocaleString(),t[e].lastTransitionTime=new Date(t[e].lastTransitionTime).toLocaleString();return t}}};var s=(0,a(83744).Z)(o,[["render",function(t,e,a,i,o,s){var d=(0,n.up)("a-table"),r=(0,n.up)("a-card");return(0,n.wg)(),(0,n.j4)(r,{class:"card nopd",title:t.$t("Status"),loading:o.loading},{default:(0,n.w5)((function(){return[(0,n._)("div",null,[(0,n.Wm)(d,{columns:s.dataColumns,"data-source":o.list},null,8,["columns","data-source"])])]})),_:1},8,["title","loading"])}],["__scopeId","data-v-1d5ee6b5"]])}}]);