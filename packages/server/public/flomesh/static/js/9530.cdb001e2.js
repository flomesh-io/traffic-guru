"use strict";(self.webpackChunkflomesh_load_balancer=self.webpackChunkflomesh_load_balancer||[]).push([[9530],{89530:function(t,e,a){a.r(e),a.d(e,{default:function(){return _}});var n=a(66252),i=a(3577);const l=["onClick"],s={key:0},o=["onClick"],r={class:"list-content"},u={class:"list-content-item"},c={class:"list-content-item"},p={key:0},d={key:1};a(57658);var m=a(2692),h=a(99684),w=a(65421),g={name:"AlarmList",i18n:a(89234),components:{MoreOutlined:m.Z,PlusCircleTwoTone:h.Z,WarningOutlined:w.Z},data(){return{key:"",pageSize:10,pageNo:1,total:0,loading:!0,list:[]}},computed:{start(){return(this.pageNo-1)*this.pageSize}},created(){this.search()},methods:{remove(t){this.$gql.mutation(`deleteAlarm(id:${t}){data{id}}`).then((()=>{this.$message.success(this.$t("Deleted successfully"),3),this.search()}))},newLb(){this.$router.push({path:"/ops-center/alarm/create"})},detail(t){this.$router.push({path:"/ops-center/alarm/detail/"+t})},search(t,e){t&&(this.pageNo=t,this.pageSize=e),this.loading=!0;let a={name:{contains:this.key}};this.$gql.query(`alarms(filters: $filters, pagination:{start: ${this.start}, limit: ${this.pageSize}}){\n\t\t\t\t\t\tdata{id,attributes{\n\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\tcontent,\n\t\t\t\t\t\t\tscope,\n\t\t\t\t\t\t\tchannels,\n\t\t\t\t\t\t\tusers{data{id,attributes{\n\t\t\t\t\t\t\t\tusername,\n\t\t\t\t\t\t\t\tphone,\n\t\t\t\t\t\t\t\temail,\n\t\t\t\t\t\t\t\ttype,\n\t\t\t\t\t\t\t\trole{data{id,attributes{\n\t\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\t\ttype\n\t\t\t\t\t\t\t\t}}}\n\t\t\t\t\t\t\t}}},\n\t\t\t\t\t\t\tserviceTargets{data{id,attributes{name}}},\n\t\t\t\t\t\t\tapiTargets{data{id,attributes{name}}},\n\t\t\t\t\t\t}},\n\t\t\t\t\t\tmeta{pagination{total}}\n\t\t\t\t\t}`,{filters:a},{filters:"AlarmFiltersInput"}).then((t=>{this.list=t.data,this.total=t.pagination.total,this.loading=!1}))}}};var _=(0,a(83744).Z)(g,[["render",function(t,e,a,m,h,w){const g=(0,n.up)("a-input-search"),_=(0,n.up)("a-divider"),k=(0,n.up)("PlusCircleTwoTone"),f=(0,n.up)("a-button"),$=(0,n.up)("WarningOutlined"),v=(0,n.up)("a-list-item-meta"),z=(0,n.up)("a-menu-item"),y=(0,n.up)("a-popconfirm"),W=(0,n.up)("a-menu"),C=(0,n.up)("MoreOutlined"),b=(0,n.up)("a-dropdown"),D=(0,n.up)("a-tag"),S=(0,n.up)("a-list-item"),T=(0,n.up)("a-list"),A=(0,n.up)("a-card");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(A,{bordered:!1,title:t.$t("Alarm"),loading:h.loading},{extra:(0,n.w5)((()=>[(0,n._)("div",null,[(0,n.Wm)(g,{value:h.key,"onUpdate:value":e[0]||(e[0]=t=>h.key=t),onSearch:e[1]||(e[1]=t=>w.search()),class:"right-search-input",placeholder:t.$t("search")},null,8,["value","placeholder"]),(0,n.Wm)(_,{type:"vertical"}),(0,n.Wm)(f,{type:"link",shape:"circle",onClick:w.newLb},{icon:(0,n.w5)((()=>[(0,n.Wm)(k,{class:"font-20 icon-menu-sm rotate-icon"})])),_:1},8,["onClick"])])])),default:(0,n.w5)((()=>[(0,n.Wm)(T,{size:"large",pagination:{showSizeChanger:!0,showQuickJumper:!1,onShowSizeChange:w.search,onChange:w.search,current:h.pageNo,pageSize:h.pageSize,showTotal:(e,a)=>`${t.$t("Total")} ${e}`,total:h.total}},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(h.list,((e,a)=>((0,n.wg)(),(0,n.j4)(S,{key:a},{actions:(0,n.w5)((()=>[(0,n._)("div",null,[(0,n.Wm)(b,null,{overlay:(0,n.w5)((()=>[(0,n.Wm)(W,null,{default:(0,n.w5)((()=>[(0,n.Wm)(z,null,{default:(0,n.w5)((()=>[(0,n._)("a",{onClick:t=>w.detail(e.id)},(0,i.zw)(t.$t("edit")),9,o)])),_:2},1024),(0,n.Wm)(z,null,{default:(0,n.w5)((()=>[(0,n.Wm)(y,{placement:"topLeft","ok-text":t.$t("Yes"),"cancel-text":t.$t("No"),onConfirm:t=>w.remove(e.id)},{title:(0,n.w5)((()=>[(0,n._)("p",null,(0,i.zw)(t.$t("Tip")),1),(0,n._)("p",null,(0,i.zw)(t.$t("Are you sure to delete this?")),1)])),default:(0,n.w5)((()=>[(0,n._)("a",null,(0,i.zw)(t.$t("delete")),1)])),_:2},1032,["ok-text","cancel-text","onConfirm"])])),_:2},1024)])),_:2},1024)])),default:(0,n.w5)((()=>[(0,n._)("a",null,[(0,n.Wm)(C)])])),_:2},1024)])])),default:(0,n.w5)((()=>[(0,n.Wm)(v,null,{avatar:(0,n.w5)((()=>[(0,n.Wm)($,{class:"WarningOutlined"})])),title:(0,n.w5)((()=>[(0,n._)("a",{onClick:t=>w.detail(e.id)},(0,i.zw)(e.name?e.name:"Unnamed"),9,l)])),description:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.content.rules,((t,e)=>((0,n.wg)(),(0,n.iD)("span",{key:e},[e>0?((0,n.wg)(),(0,n.iD)("span",s,"/")):(0,n.kq)("",!0),(0,n.Uk)(" "+(0,i.zw)(t.col)+" "+(0,i.zw)(t.opt)+" "+(0,i.zw)(t.value),1)])))),128))])),_:2},1024),(0,n._)("div",r,[(0,n._)("div",u,[(0,n._)("span",null,(0,i.zw)(t.$t("Channels")),1),(0,n._)("p",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.channels,((e,a)=>((0,n.wg)(),(0,n.j4)(D,{key:a},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(t.$t(e+" notify")),1)])),_:2},1024)))),128))])]),(0,n._)("div",c,[(0,n._)("span",null,(0,i.zw)({global:t.$t("Global monitor"),service:t.$t("Service monitor"),api:t.$t("Api monitor")}[e.scope]),1),"service"==e.scope?((0,n.wg)(),(0,n.iD)("p",p,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.serviceTargets,((t,e)=>((0,n.wg)(),(0,n.j4)(D,{key:e},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(t.name),1)])),_:2},1024)))),128))])):"api"==e.scope?((0,n.wg)(),(0,n.iD)("p",d,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.apiTargets,((t,e)=>((0,n.wg)(),(0,n.j4)(D,{key:e},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(t.name),1)])),_:2},1024)))),128))])):(0,n.kq)("",!0)])])])),_:2},1024)))),128))])),_:1},8,["pagination"])])),_:1},8,["title","loading"])])}],["__scopeId","data-v-32497562"]])}}]);