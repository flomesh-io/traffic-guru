"use strict";(self.webpackChunkflomesh_load_balancer=self.webpackChunkflomesh_load_balancer||[]).push([[6574],{71900:function(t,e,a){a.d(e,{Z:function(){return o}});var i=a(66252),l=a(3577);const n={class:"head-info"};var s={name:"HeadInfo",props:["title","content"]};var o=(0,a(83744).Z)(s,[["render",function(t,e,a,s,o,p){return(0,i.wg)(),(0,i.iD)("div",n,[(0,i._)("span",null,(0,l.zw)(a.title),1),(0,i._)("p",null,[(0,i.Uk)((0,l.zw)(a.content),1),(0,i.WI)(t.$slots,"body",{},void 0,!0)])])}],["__scopeId","data-v-00006846"]])},96574:function(t,e,a){a.r(e),a.d(e,{default:function(){return $}});var i=a(66252),l=a(3577),n=a(49963);const s={class:"search-input"},o={class:"content flex"},p={class:"flex-item"},r={class:"form-row"},c={class:"label"},u={class:"content"},d={class:"search-content"},h={class:"project-selection"},g={class:"font-22"},v={class:"font-16"},w={class:"font-20 primary"};a(57658);var m=a(71900),y=a(99684),f=a(33907),_=a(66022),j=a(61103),k={name:"ApiList",i18n:a(89234),components:{PageLayout:j.Z,ApplicationListResults:_.Z,PlusCircleTwoTone:y.Z,HeadInfo:m.Z},data(){return{pageSize:12,pageNo:1,total:0,key:"",projects:[],viewtypevalue:0,viewtypeproject:null,viewtype:[{value:0,label:"All"},{value:1,label:"Goup By Project"}],apps:[],categray:[{value:!0,label:"All"},{value:!1,label:"Success"},{value:!1,label:"Pending"},{value:!1,label:"Error"}],loading:!0}},computed:{...(0,f.rn)("setting",["layout","pageWidth"]),start(){return(this.pageNo-1)*this.pageSize}},mounted(){this.search()},methods:{add(){this.$router.push({path:"/openapi/application/create"})},detail(t,e,a){this.$router.push({path:"/openapi/application/detail/"+a.id})},remove(t,e,a){this.$gql.mutation(`deleteApplication(id:${a.id}){data{id}}`).then((()=>{this.$message.success(this.$t("Deleted successfully"),3),this.search()}))},getData(){},removeViewtypeproject(){this.viewtypeproject=null,this.searchProject()},filterData(t){this.viewtypeproject=t,this.search()},changeView(){this.viewtypeproject=null,0==this.viewtypevalue?this.search():this.searchProject()},search(t){this.pageNo=t||1,this.loading=!0;let e={name:{contains:this.key}};this.viewtypeproject&&(e.project={id:{eq:this.viewtypeproject.id}}),this.$gql.query(`applications(filters: $filters, pagination:{start: ${this.start}, limit: ${this.pageSize}}){\n\t\t\t\t\t\tdata{id,attributes{\n\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\tproject{data{id,attributes{name}}},\n\t\t\t\t\t\t\tapis{data{id,attributes{name}}},\n\t\t\t\t\t\t\tcontent,\n\t\t\t\t\t\t\tupdatedAt\n\t\t\t\t\t\t}},\n\t\t\t\t\t\tmeta{pagination{total}}\n\t\t\t\t\t}`,{filters:e},{filters:"ApplicationFiltersInput"}).then((t=>{this.apps=t.data,this.total=t.pagination.total,this.loading=!1}))},searchProject(t){this.pageNo=t||1,this.loading=!0,this.$gql.query(`projects(pagination:{start: ${this.start}, limit: ${this.pageSize}}){\n\t\t\t\t\t\tdata{id,attributes{\n\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\tapplications{data{id,attributes{name}}},\n\t\t\t\t\t\t\tcontent,\n\t\t\t\t\t\t\tupdatedAt\n\t\t\t\t\t\t}}\n\t\t\t\t\t}`).then((t=>{this.projects=t.data,this.loading=!1}))}}};var $=(0,a(83744).Z)(k,[["render",function(t,e,a,m,y,f){const _=(0,i.up)("a-input-search"),j=(0,i.up)("a-radio-button"),k=(0,i.up)("a-radio-group"),$=(0,i.up)("a-tag"),z=(0,i.up)("a-form-item"),b=(0,i.up)("a-form"),C=(0,i.up)("PlusCircleTwoTone"),N=(0,i.up)("HeadInfo"),W=(0,i.up)("a-card"),A=(0,i.up)("a-col"),S=(0,i.up)("a-row"),P=(0,i.up)("ApplicationListResults"),q=(0,i.up)("a-pagination"),D=(0,i.up)("PageLayout"),U=(0,i.Q2)("permission");return(0,i.wg)(),(0,i.j4)(D,{title:t.$t("Application")},{headerContent:(0,i.w5)((()=>[(0,i._)("div",{class:(0,l.C_)(["search-head",t.layout,t.pageWidth])},[(0,i._)("div",s,[(0,i.Wm)(_,{value:y.key,"onUpdate:value":e[0]||(e[0]=t=>y.key=t),class:"search-ipt",onSearch:e[1]||(e[1]=t=>f.search()),placeholder:t.$t("Please input")+"...",size:"large"},null,8,["value","placeholder"])]),(0,i.Wm)(W,{bordered:!1,class:"search-form"},{default:(0,i.w5)((()=>[(0,i._)("div",o,[(0,i._)("div",p,[(0,i.Wm)(b,null,{default:(0,i.w5)((()=>[(0,i._)("div",r,[(0,i._)("div",c,[(0,i._)("span",null,(0,l.zw)(t.$t("Card View")),1)]),(0,i._)("div",u,[(0,i.Wm)(z,null,{default:(0,i.w5)((()=>[(0,i.Wm)(k,{size:"small",onChange:f.changeView,value:y.viewtypevalue,"onUpdate:value":e[2]||(e[2]=t=>y.viewtypevalue=t),"button-style":"solid"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(y.viewtype,((e,a)=>((0,i.wg)(),(0,i.j4)(j,{value:e.value,key:a},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(t.$t(e.label)),1)])),_:2},1032,["value"])))),128))])),_:1},8,["onChange","value"]),y.viewtypeproject?((0,i.wg)(),(0,i.j4)($,{key:0,class:"ml-10",closable:"",onClose:f.removeViewtypeproject},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(y.viewtypeproject.name),1)])),_:1},8,["onClose"])):(0,i.kq)("",!0)])),_:1})])])])),_:1})]),(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(N,{class:"pd-0 split-right",title:t.$t("Create application")},{body:(0,i.w5)((()=>[(0,i._)("div",null,[(0,i.Wm)(C,{onClick:f.add,class:"font-primary icon-menu rotate-icon"},null,8,["onClick"])])])),_:1},8,["title"])])),[[U,["application:create"]]])])])),_:1})],2)])),default:(0,i.w5)((()=>[(0,i._)("div",d,[(0,i.wy)((0,i.Wm)(S,{gutter:[16,8],class:"mb-10"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(y.projects,((e,a)=>((0,i.wg)(),(0,i.j4)(A,{key:a,span:4,onClick:t=>f.filterData(e)},{default:(0,i.w5)((()=>[(0,i._)("div",h,[(0,i._)("p",g,(0,l.zw)(e.name),1),(0,i._)("p",v,[(0,i.Uk)((0,l.zw)(t.$t("Application"))+" ",1),(0,i._)("span",w,(0,l.zw)(e.applications.length),1),(0,i.Uk)(" "+(0,l.zw)(t.$t("unitge")),1)])])])),_:2},1032,["onClick"])))),128))])),_:1},512),[[n.F8,1==y.viewtypevalue&&!y.viewtypeproject]]),(0,i.wy)((0,i.Wm)(P,{ref:"result",loading:y.loading,apps:y.apps,"page-no":y.pageNo,total:y.total,onSearch:f.search,"page-size":y.pageSize},null,8,["loading","apps","page-no","total","onSearch","page-size"]),[[n.F8,0==y.viewtypevalue||y.viewtypeproject]]),(0,i.wy)((0,i.Wm)(q,{onChange:f.searchProject,current:y.pageNo,"onUpdate:current":e[3]||(e[3]=t=>y.pageNo=t),total:y.total,"page-size":y.pageSize,"show-less-items":""},null,8,["onChange","current","total","page-size"]),[[n.F8,1==y.viewtypevalue&&!y.viewtypeproject]])])])),_:1},8,["title"])}],["__scopeId","data-v-3cd215dd"]])},66022:function(t,e,a){a.d(e,{Z:function(){return u}});var i=a(66252),l=a(3577);const n={class:"search-content"},s={class:"mb-5"},o={class:"content"};a(57658);var p=a(60234),r=a(69596),c={name:"ApplicationListResults",i18n:a(89234),components:{CardList:r.Z},props:["apps","total","pageNo","pageSize","loading"],data(){return{BookmarkSvg:p,pageNoVal:0,key:"",projects:[]}},computed:{},watch:{pageNoVal:{deep:!0,handler(){this.$emit("update:pageNo",this.pageNoVal)}}},mounted(){this.pageNoVal=this.pageNo},methods:{detail(t,e,a){this.$router.push({path:"/openapi/application/detail/"+a.id})},remove(t,e,a){this.$gql.mutation(`deleteApplication(id:${a.id}){data{id}}`).then((()=>{this.$message.success(this.$t("Deleted successfully"),3),this.search()}))},search(t,e,a){this.$emit("search",t,e,a)}}};var u=(0,a(83744).Z)(c,[["render",function(t,e,a,p,r,c){const u=(0,i.up)("a-tag"),d=(0,i.up)("a-avatar"),h=(0,i.up)("a-card-meta"),g=(0,i.up)("CardList"),v=(0,i.up)("a-pagination");return(0,i.wg)(),(0,i.iD)("div",n,[(0,i.Wm)(g,{"result-empty":{status:404,title:t.$t("No data")},loading:a.loading,"data-source":a.apps||[],"hide-action-title":!0,type:"component",actions:[{icon:"EditOutlined",text:t.$t("edit"),call:c.detail},{icon:"DeleteOutlined",text:t.$t("delete"),call:c.remove,hide:!0,permissionWhere:["application:delete:project:","project","application:delete"]}]},{default:(0,i.w5)((({item:e})=>[(0,i.Wm)(h,null,{title:(0,i.w5)((()=>[(0,i._)("div",s,[(0,i.Uk)((0,l.zw)(e.name)+" ",1),e.project?((0,i.wg)(),(0,i.j4)(u,{key:0,color:"pink",class:"result-tag"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(e.project.name),1)])),_:2},1024)):(0,i.kq)("",!0)])])),avatar:(0,i.w5)((()=>[(0,i.Wm)(d,{class:"CodeSandboxOutlined avatar-img primary",size:"small",shape:"square",src:r.BookmarkSvg},null,8,["src"])])),description:(0,i.w5)((()=>[])),_:2},1024),(0,i._)("div",o,[(0,i._)("div",null,[(0,i._)("p",null,"API "+(0,l.zw)(t.$t("Running")),1),(0,i._)("p",null,(0,l.zw)(e.apis?e.apis.length:0),1)]),(0,i._)("div",null,[(0,i._)("p",null,"API "+(0,l.zw)(t.$t("total")),1),(0,i._)("p",null,(0,l.zw)(e.apis?e.apis.length:0),1)])])])),_:1},8,["result-empty","loading","data-source","actions"]),a.pageNo>=0?((0,i.wg)(),(0,i.j4)(v,{key:0,onChange:c.search,current:r.pageNoVal,"onUpdate:current":e[0]||(e[0]=t=>r.pageNoVal=t),total:a.total,"page-size":a.pageSize,"show-less-items":""},null,8,["onChange","current","total","page-size"])):(0,i.kq)("",!0)])}],["__scopeId","data-v-1e49c432"]])}}]);