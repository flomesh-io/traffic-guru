"use strict";(self.webpackChunkflomesh_load_balancer=self.webpackChunkflomesh_load_balancer||[]).push([[7809],{71900:function(t,e,a){a.d(e,{Z:function(){return n}});var i=a(66252),l=a(3577);const s={class:"head-info"};var o={name:"HeadInfo",props:["title","content"]};var n=(0,a(83744).Z)(o,[["render",function(t,e,a,o,n,c){return(0,i.wg)(),(0,i.iD)("div",s,[(0,i._)("span",null,(0,l.zw)(a.title),1),(0,i._)("p",null,[(0,i.Uk)((0,l.zw)(a.content),1),(0,i.WI)(t.$slots,"body",{},void 0,!0)])])}],["__scopeId","data-v-00006846"]])},77809:function(t,e,a){a.r(e),a.d(e,{default:function(){return P}});var i=a(66252),l=a(3577),s=a(49963);const o={class:"search-input"},n={class:"content flex"},c={class:"flex-item"},p={class:"form-row"},r={class:"label"},d={class:"content"},u={class:"width-200"},h={class:"search-content"},g={class:"project-selection"},w={class:"font-22"},y={class:"font-16"},m={class:"font-20 primary"},v={class:"mb-3"},f={key:0,class:"blockquote"};a(57658);var _=a(71900),k=a(92246),b=a(99684),j=a(33907),$=a(69596),z=a(61103),C=a(85263),W={name:"ApiList",i18n:a(89234),components:{BulbOutlined:k.Z,PageLayout:z.Z,CardList:$.Z,PlusCircleTwoTone:b.Z,HeadInfo:_.Z},props:["hideHead"],data(){return{pageSize:12,pageNo:1,total:0,key:"",filterApp:"",simpleImage:C.Z.PRESENTED_IMAGE_SIMPLE,visible:!1,visible2:!1,showApp:!1,projects:[],json:"{}",policyType:["Sign Encrypt","Encrypt Attestation","Decrypt","Encrypt","Forward Proxy"],policies:[],viewtypevalue:0,viewtypeproject:null,viewtype:[{value:0,label:"All"},{value:1,label:"Goup By Project"}],loading:!0}},computed:{...(0,j.rn)("setting",["layout","pageWidth"]),start(){return(this.pageNo-1)*this.pageSize}},mounted(){this.search()},methods:{addpolicy(){this.$router.push({path:"/openapi/policy/create"})},detail(t,e,a){this.$router.push({path:"/openapi/policy/detail/"+a.id})},remove(t,e,a){this.$gql.mutation(`deletePolicy(id:${a.id}){data{id}}`).then((()=>{this.$message.success(this.$t("Deleted successfully"),3),this.search()}))},search(t){this.pageNo=t||1,this.loading=!0;let e={name:{contains:this.key}};this.$gql.query(`policies(filters: $filters, pagination: {start: ${this.start}, limit: ${this.pageSize}}){\n\t\t\t\t\t\tdata{id,attributes{name,project{data{id,attributes{name}}},content,updatedAt}},\n\t\t\t\t\t\tmeta{pagination{total}}\n\t\t\t\t\t}`,{filters:e},{filters:"PolicyFiltersInput"}).then((t=>{this.policies=t.data,this.total=t.pagination.total,this.loading=!1}))},searchProject(t){this.pageNo=t||1,this.loading=!0,this.$gql.query(`projects(filters: $filters, pagination: {start: ${this.start}, limit: ${this.pageSize}}){data{id,attributes{\n\t\t\t\t\t\tname,\n\t\t\t\t\t\tapis{data{id,attributes{name}}},\n\t\t\t\t\t\tcontent,\n\t\t\t\t\t\tupdatedAt\n\t\t\t\t\t}}}`).then((t=>{this.projects=t.data,this.loading=!1}))},select(t,e,a){this.$emit("selectPolicy",a)},getData(){}}};var P=(0,a(83744).Z)(W,[["render",function(t,e,a,_,k,b){const j=(0,i.up)("a-input-search"),$=(0,i.up)("a-radio-button"),z=(0,i.up)("a-radio-group"),C=(0,i.up)("a-tag"),W=(0,i.up)("a-form-item"),P=(0,i.up)("a-form"),D=(0,i.up)("PlusCircleTwoTone"),H=(0,i.up)("HeadInfo"),S=(0,i.up)("a-card"),U=(0,i.up)("a-col"),I=(0,i.up)("a-row"),N=(0,i.up)("BulbOutlined"),q=(0,i.up)("a-card-meta"),A=(0,i.up)("a-badge"),E=(0,i.up)("CardList"),Z=(0,i.up)("a-pagination"),x=(0,i.up)("PageLayout"),F=(0,i.Q2)("permission");return(0,i.wg)(),(0,i.j4)(x,{title:t.$t("Policy"),"hide-head":a.hideHead,style:(0,l.j5)(a.hideHead?"padding-top:0 ;":"")},{headerContent:(0,i.w5)((()=>[(0,i._)("div",{class:(0,l.C_)(["search-head",t.layout,t.pageWidth])},[(0,i._)("div",o,[(0,i.Wm)(j,{value:k.key,"onUpdate:value":e[0]||(e[0]=t=>k.key=t),class:"search-ipt",onSearch:e[1]||(e[1]=t=>b.search()),placeholder:t.$t("Please input")+"...",size:"large"},null,8,["value","placeholder"])]),(0,i.Wm)(S,{bordered:!1,class:"search-form"},{default:(0,i.w5)((()=>[(0,i._)("div",n,[(0,i._)("div",c,[(0,i.Wm)(P,null,{default:(0,i.w5)((()=>[(0,i._)("div",p,[(0,i._)("div",r,[(0,i._)("span",null,(0,l.zw)(t.$t("Card View")),1)]),(0,i._)("div",d,[(0,i.Wm)(W,null,{default:(0,i.w5)((()=>[(0,i.Wm)(z,{size:"small",onChange:t.changeView,value:k.viewtypevalue,"onUpdate:value":e[2]||(e[2]=t=>k.viewtypevalue=t),"button-style":"solid"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(k.viewtype,((e,a)=>((0,i.wg)(),(0,i.j4)($,{value:e.value,key:a},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(t.$t(e.label)),1)])),_:2},1032,["value"])))),128))])),_:1},8,["onChange","value"]),k.viewtypeproject?((0,i.wg)(),(0,i.j4)(C,{key:0,class:"ml-10",closable:"",onClose:t.removeViewtypeproject},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(k.viewtypeproject.name),1)])),_:1},8,["onClose"])):(0,i.kq)("",!0)])),_:1})])])])),_:1})]),(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",u,[(0,i.Wm)(H,{class:"pd-0 split-right",title:t.$t("Create policy")},{body:(0,i.w5)((()=>[(0,i._)("div",null,[(0,i.Wm)(D,{onClick:b.addpolicy,class:"font-primary icon-menu rotate-icon"},null,8,["onClick"])])])),_:1},8,["title"])])),[[F,["policy:create"]]])])])),_:1})],2)])),default:(0,i.w5)((()=>[(0,i._)("div",h,[(0,i.wy)((0,i.Wm)(I,{gutter:[16,8],class:"mb-10"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(k.projects,((e,a)=>((0,i.wg)(),(0,i.j4)(U,{key:a,span:4,onClick:a=>t.filterData(e)},{default:(0,i.w5)((()=>[(0,i._)("div",g,[(0,i._)("p",w,(0,l.zw)(e.name),1),(0,i._)("p",y,[(0,i.Uk)(" API "),(0,i._)("span",m,(0,l.zw)(e.policies.length),1),(0,i.Uk)(" "+(0,l.zw)(t.$t("unitge")),1)])])])),_:2},1032,["onClick"])))),128))])),_:1},512),[[s.F8,1==k.viewtypevalue&&!k.viewtypeproject]]),(0,i.wy)((0,i.Wm)(E,{"result-empty":{status:404,title:t.$t("No data")},col:a.hideHead?1:null,loading:k.loading,"data-source":k.policies,"hide-action-title":!a.hideHead,type:"component",actions:a.hideHead?[{icon:"SelectOutlined",text:t.$t("Selector"),call:b.select}]:[{icon:"EditOutlined",text:t.$t("edit"),call:b.detail},{icon:"DeleteOutlined",text:t.$t("delete"),call:b.remove,hide:!0}]},{default:(0,i.w5)((({item:t})=>[(0,i.Wm)(q,null,{title:(0,i.w5)((()=>[(0,i._)("div",v,[(0,i.Uk)((0,l.zw)(t.name)+" ",1),t.project?((0,i.wg)(),(0,i.j4)(C,{key:0,color:"pink",class:"result-tag"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(t.project.name),1)])),_:2},1024)):(0,i.kq)("",!0)])])),avatar:(0,i.w5)((()=>[(0,i.Wm)(N,{class:"primary"})])),description:(0,i.w5)((()=>[])),_:2},1024),t.content&&t.content.plugins?((0,i.wg)(),(0,i.iD)("blockquote",f,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.content.plugins,((t,e)=>((0,i.wg)(),(0,i.iD)("span",{key:e,class:"mr-20 nowrap"},[(0,i.Wm)(A,{status:t.switch?"processing":"orange"},null,8,["status"]),(0,i.Uk)(" "+(0,l.zw)(t.content.displayName),1)])))),128))])):(0,i.kq)("",!0)])),_:1},8,["result-empty","col","loading","data-source","hide-action-title","actions"]),[[s.F8,0==k.viewtypevalue||k.viewtypeproject]]),(0,i.wy)((0,i.Wm)(Z,{onChange:b.searchProject,current:k.pageNo,"onUpdate:current":e[3]||(e[3]=t=>k.pageNo=t),total:k.total,"page-size":k.pageSize,"show-less-items":""},null,8,["onChange","current","total","page-size"]),[[s.F8,1==k.viewtypevalue&&!k.viewtypeproject]]),(0,i.wy)((0,i.Wm)(Z,{onChange:b.search,current:k.pageNo,"onUpdate:current":e[4]||(e[4]=t=>k.pageNo=t),total:k.total,"page-size":k.pageSize,"show-less-items":""},null,8,["onChange","current","total","page-size"]),[[s.F8,0==k.viewtypevalue||k.viewtypeproject]])])])),_:1},8,["title","hide-head","style"])}],["__scopeId","data-v-ac71bda6"]])}}]);