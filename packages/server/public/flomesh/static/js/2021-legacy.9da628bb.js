"use strict";(self.webpackChunkflomesh_load_balancer=self.webpackChunkflomesh_load_balancer||[]).push([[2021],{33601:function(t,e,a){a.d(e,{Z:function(){return u}});var n=a(66252),r={icon:function(t,e){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z",fill:t}},{tag:"path",attrs:{d:"M372.5 256H184v512h656V370.4H492.1z",fill:e}}]}},name:"folder",theme:"twotone"},o=a(33058);function s(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?Object(arguments[e]):{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})))),n.forEach((function(e){i(t,e,a[e])}))}return t}function i(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var d=function(t,e){var a=s({},t,e.attrs);return(0,n.Wm)(o.Z,s({},a,{icon:r}),null)};d.displayName="FolderTwoTone",d.inheritAttrs=!1;var u=d},47556:function(t,e,a){a.d(e,{Bl:function(){return d},Cb:function(){return I},DB:function(){return E},Gm:function(){return l},IJ:function(){return w},MZ:function(){return S},O7:function(){return f},Ru:function(){return Z},Tf:function(){return N},US:function(){return P},ZC:function(){return c},eb:function(){return A},k5:function(){return u},l1:function(){return m},lr:function(){return i},q8:function(){return s},qF:function(){return g},sl:function(){return M},ud:function(){return T},vC:function(){return p},zN:function(){return h}});var n=a(50124),r=a(48534),o=(a(69600),a(68309),a(6199)),s="system.common.ORGANIZATION_TOTAL,system.common.PROJECT_TOTAL,system.common.Space,system.common.Space,workload.dashboard.DEPLOYMENT,workload.dashboard.STATEFULSET,workload.dashboard.JOB,workload.dashboard.POD",i="flb.dashboard.TOTAL,flb.dashboard.ADDRESSPOOL,flb.dashboard.BYTES,flb.dashboard.PROCESS_MEMORY,flb.dashboard.CONNECTIONS,flb.dashboard.INACT_CONNECTIONS,flb.dashboard.FAIL_CONNECTIONS,flb.dashboard.TIME_WAIT,flb.dashboard.FREE_CPU,flb.dashboard.PROCESS_CPU,flb.dashboard.FULL_CONN_OVERFLOW_ERROR,flb.dashboard.HALF_CONN_OVERFLOW_ERROR,flb.dashboard.UNHEALTHY_UPSTREAM,flb.dashboard.RANKING,flb.dashboard.SANKEY",d="fsm.dashboard.REGISTRY_TOTAL,fsm.dashboard.NAMESPACE_TOTAL,fsm.dashboard.SERVICE_TOTAL,system.common.Space,fsm.dashboard.SERVICE_HEALTHCHECK,fsm.dashboard.SERVICE_STATUS,fsm.dashboard.INGRESS_STATUS,fsm.dashboard.MCS_TOPOLOGY",u="fsm.dashboard.NAMESPACE_MESH_TOTAL,fsm.dashboard.SERVICE_MESH_TOTAL,system.common.Space,system.common.Space,system.common.TPS_MESH,system.common.ERROR_RATE_MESH,system.common.LATENCY_MESH,workload.dashboard.POD,fsm.dashboard.TOPOLOGY",c="fsm.dashboard.TPS_ERROR,fsm.dashboard.BPS,fsm.dashboard.LATENCY,fsm.dashboard.LOAD_STATUS,fsm.dashboard.TOPOLOGY,fsm.dashboard.QOS",l="workload.dashboard.CRONJOB,workload.dashboard.DAEMONSET,workload.dashboard.DEPLOYMENT,workload.dashboard.JOB,workload.dashboard.POD,workload.dashboard.REPLICASET,workload.dashboard.REPLICATIONCONTROLLER,workload.dashboard.STATEFULSET",p="openapi.dashboard.API_TOTAL,openapi.dashboard.APP_TOTAL,system.common.ORGANIZATION_TOTAL,system.common.PROJECT_TOTAL,system.common.LATENCY,system.common.USER_AGENT,system.common.QPS,system.common.ERROR_RATE,openapi.dashboard.API_STATUS,openapi.dashboard.API_METRIC_WEEK,openapi.dashboard.API_METRIC_MONTH,system.common.Space,system.common.RANKING",f="openapi.dashboard.API_TOTAL,openapi.dashboard.APP_TOTAL,system.common.Space,system.common.Space,fsm.dashboard.QOS,fsm.dashboard.LATENCY,fsm.dashboard.LOAD_STATUS,fsm.dashboard.TPS_ERROR,fsm.dashboard.BPS,openapi.dashboard.API_STATUS,openapi.dashboard.API_METRIC_WEEK,openapi.dashboard.API_METRIC_MONTH",h="fsm.dashboard.TPS_ERROR,fsm.dashboard.BPS,fsm.dashboard.LATENCY,fsm.dashboard.LOAD_STATUS,openapi.dashboard.TOPOLOGY,fsm.dashboard.QOS,openapi.dashboard.API_METRIC_WEEK,openapi.dashboard.API_METRIC_MONTH";function m(t){return b.apply(this,arguments)}function b(){return(b=(0,r.Z)((0,n.Z)().mark((function t(e){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,o.IO)("dashboard(id:".concat(e,"){data{id,attributes{name,content,apply}}}")));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function T(t){return v.apply(this,arguments)}function v(){return(v=(0,r.Z)((0,n.Z)().mark((function t(e){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,o.IO)('dashboards(filters:{apply:{eq:"'.concat(e,'"}}){data{id,attributes{name,content,apply}}}')));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function g(t,e){return O.apply(this,arguments)}function O(){return(O=(0,r.Z)((0,n.Z)().mark((function t(e,a){var r,s;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={},s="",a.subscribes&&(s=a.subscribes.join(","),r.content={widget:s}),a.name&&a.name.length>0&&(r.name=a.name),null!=a.apply&&(r.apply=a.apply),t.abrupt("return",(0,o.QF)("updateDashboard(id:".concat(e,", data: $data){data{id}}"),{data:r},{data:"DashboardInput!"}));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function E(t){return y.apply(this,arguments)}function y(){return(y=(0,r.Z)((0,n.Z)().mark((function t(e){var a;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={},null!=e.widget&&(a.content={widget:e.widget}),e.name&&e.name.length>0&&(a.name=e.name),null!=e.apply&&(a.apply=e.apply),t.abrupt("return",(0,o.QF)("createDashboard(data: $data){data{id}}",{data:a},{data:"DashboardInput!"}));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function S(t){return _.apply(this,arguments)}function _(){return(_=(0,r.Z)((0,n.Z)().mark((function t(e){var a;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={content:e,name:e.id,shared:0},t.abrupt("return",(0,o.QF)("createWidget(data: $data){data{id}}",{data:a},{data:"WidgetInput!"}));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function w(t,e){return k.apply(this,arguments)}function k(){return(k=(0,r.Z)((0,n.Z)().mark((function t(e,a){var r;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return delete a.uid,r={content:a,name:a.id},t.abrupt("return",(0,o.QF)("updateWidget(id:".concat(e,", data: $data){data{id}}"),{data:r},{data:"WidgetInput!"}));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function A(t){return C.apply(this,arguments)}function C(){return(C=(0,r.Z)((0,n.Z)().mark((function t(e){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,o.QF)("deleteWidget(id:".concat(e,"){data{id}}")));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function P(){return R.apply(this,arguments)}function R(){return(R=(0,r.Z)((0,n.Z)().mark((function t(){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,o.IO)("widgets{data{id,attributes{name,shared,user_id,content}}}"));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function I(t){return L.apply(this,arguments)}function L(){return(L=(0,r.Z)((0,n.Z)().mark((function t(e){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,o.IO)("widget(id:".concat(e,"){data{id,attributes{name,shared,user_id,content}}}")));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var N={id:"TEST-CUSTOM",title:"A Sample",tag:{name:"Gauge"},service:{type:"rest",path:"hk.flomesh.cn:8090/kube-dashboard/?url=%2Fapi%2Fv1%2Fjob%2Fdefault%3FitemsPerPage%3D0%26page%3D1%26sortBy%3Dd%2CcreationTimestamp",method:"GET",payload:"{}",clickhouseSQL:"",prometheusSQL:""},col:6,data:"res => {\n\tlet _data = res.data;\n\tfunction getPercentage(current,status){\n\t\tlet per = (status.running+status.succeeded+status.failed);\n\t\treturn per ==0 ?0 :Math.round(current*100/per);\n\t}\n\treturn {\n\t\tid:'WP-CUSTOM',\n\t\tvals:[\n\t\t\tgetPercentage(_data.status.running,_data.status),\n\t\t\tgetPercentage(_data.status.succeeded,_data.status),\n\t\t\tgetPercentage(_data.status.failed,_data.status)\n\t\t]\n\t}\n}"},Z={id:"CLICKHOUSE-TEST-CUSTOM",title:"A Clickhouse Datasource Sample",tag:{name:"MiniSector"},service:{type:"clickhouse",path:"",method:"GET",payload:"{}",clickhouseSQL:"select count() as count,res.status from log where res.status>'0' group by res.status order by res.status",prometheusSQL:""},col:6,data:"res => {\n\tlet dv = [];\n\tres.map((item) => {\n\t\t\tdv.push({type:item[1],value:item[0],name:item[1]});\n\t});\n\treturn {\n\t\tcolors:['#8bd4a1','#fac858','#fb9690'],\n\t\tdv:dv\n\t}\n}"},M={id:"PROMETHEUS-TEST-CUSTOM",title:"A Prometheus Datasource Sample",tag:{name:"MiniArea"},service:{type:"prometheus",path:"",method:"GET",payload:"{}",clickhouseSQL:"",prometheusSQL:"sum(pipy_chunk_size)"},col:6,data:"res => {\n\tlet dv = [];\n\tif(res.data?.result){\n\t\tres.data.result.forEach((result,i) => {\n\t\t\tresult.values.forEach((value,j) => {\n\t\t\t\tif(value[1]){\n\t\t\t\t\tdv.push({\n\t\t\t\t\t\ttype:'item'+i,\n\t\t\t\t\t\tvalue:(value[1]*1).toFixed(2),\n\t\t\t\t\t\tdate:new Date(value[0]*1000).toISOString().split('.')[0].replace('T',' ')\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n\t\t})\n\t}\n\treturn {\n\t\tid: 'Test-Prometheus-MiniArea',\n\t\tcolors: ['#8bd4a1', '#fb9690'],\n\t\theight: 240,\n\t\tpadding: [0, 0, 0, 0],\n\t\taxis: false,\n\t\tunit: 'unitge',\n\t\tshowy: false,\n\t\tdv\n\t}\n}"}},34531:function(t,e,a){a.d(e,{Z:function(){return m}});a(74916),a(64765),a(68309);var n=a(66252),r=a(3577),o={key:0,class:"flex pd-10"},s={key:0,class:"flex-item"},i={class:"flex-item"},d={class:"pl-10"},u=["xlink:href"],c={class:"card-selector-title"};a(41539),a(54747),a(21249),a(57327),a(69826);var l=a(85263),p=a(75255),f=a(60459),h={name:"CardSelector",components:{CheckOutlined:p.Z,EnvSelector:f.Z},props:["loading","envFilter","search","options","icon","placement","disabled","value","getTag","svg","col","width","multiple"],emits:["envChange","select"],data:function(){return{simpleImage:l.Z.PRESENTED_IMAGE_SIMPLE,visible:!1,key:""}},i18n:a(89234),computed:{multipleSelectNum:function(){var t=0;return this.options.forEach((function(e){e.checked&&t++})),t},filterOptions:function(){var t=this;if(this.key){var e=this.options.filter((function(e){return(e.name||e.username||"").indexOf(t.key)>=0}));return e.map((function(t){null==t.checked&&(t.checked=!1)})),e}var a=this.options;return a.map((function(t){null==t.checked&&(t.checked=!1)})),a}},watch:{value:{handler:function(){var t=this;this.multiple&&this.options.forEach((function(e){e.checked=!!t.value.find((function(t){return e.id==t.id}))}))},deep:!0}},methods:{envChange:function(t){this.$emit("envChange",t)},multipleSelect:function(){this.visible=!1;var t=this.options.filter((function(t){return t.checked}));this.$emit("select",t),this.$emit("update:value",t)},select:function(t){this.multiple?this.options.forEach((function(e){e.id==t.id&&(e.checked=!e.checked)})):(this.visible=!1,this.$emit("update:value",t.id),this.$emit("select",t))}}};var m=(0,a(83744).Z)(h,[["render",function(t,e,a,l,p,f){var h=(0,n.up)("EnvSelector"),m=(0,n.up)("a-input-search"),b=(0,n.up)("a-button"),T=(0,n.up)("a-empty"),v=(0,n.up)("a-skeleton"),g=(0,n.up)("a-card-grid"),O=(0,n.up)("a-card"),E=(0,n.up)("CheckOutlined"),y=(0,n.up)("a-tag"),S=(0,n.up)("a-popover");return(0,n.wg)(),(0,n.j4)(S,{placement:a.placement||"bottom","overlay-class-name":"selector-popover",visible:p.visible,"onUpdate:visible":e[1]||(e[1]=function(t){return p.visible=t}),trigger:"click"},{content:(0,n.w5)((function(){return[a.search?((0,n.wg)(),(0,n.iD)("div",o,[a.envFilter?((0,n.wg)(),(0,n.iD)("div",s,[(0,n.Wm)(h,{"no-all":!0,"is-filter":!0,onEnvChange:f.envChange},null,8,["onEnvChange"])])):(0,n.kq)("",!0),(0,n._)("div",i,[(0,n.Wm)(m,{value:p.key,"onUpdate:value":e[0]||(e[0]=function(t){return p.key=t}),class:"full",placeholder:t.$t("search")},null,8,["value","placeholder"])]),(0,n._)("div",d,[a.multiple?((0,n.wg)(),(0,n.j4)(b,{key:0,type:"primary",onClick:f.multipleSelect,disabled:0==f.multipleSelectNum},{default:(0,n.w5)((function(){return[(0,n.Uk)((0,r.zw)(t.$t("Ok")),1)]})),_:1},8,["onClick","disabled"])):(0,n.kq)("",!0)])])):(0,n.kq)("",!0),a.loading||0!=f.filterOptions.length?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(T,{key:1,image:p.simpleImage},null,8,["image"])),(0,n._)("div",{class:"overflow-auto scrollbar",style:(0,r.j5)("max-height:"+90*(t.rows||5)+"px")},[a.loading?((0,n.wg)(),(0,n.j4)(O,{key:0,class:"grid-menu",style:(0,r.j5)("width: "+(a.width?a.width:300)+"px")},{default:(0,n.w5)((function(){return[(0,n.Wm)(g,{class:"selector-item",style:{width:"100%",padding:"15px"}},{default:(0,n.w5)((function(){return[(0,n.Wm)(v,{avatar:"",paragraph:{rows:2}})]})),_:1})]})),_:1},8,["style"])):((0,n.wg)(),(0,n.j4)(O,{key:1,class:"grid-menu",style:(0,r.j5)("width: "+(a.width?a.width:300)+"px")},{default:(0,n.w5)((function(){return[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(f.filterOptions,(function(t,e){return(0,n.wg)(),(0,n.j4)(g,{class:(0,r.C_)(["selector-item",(a.value==t.id?"selected":"")+(a.disabled&&a.disabled(t)?" disabled":"")]),key:e,value:t.id,style:(0,r.j5)(a.col?"width:"+100/a.col+"%":a.options.length>=3?"width: 33%;":2==a.options.length?"width:50%;":"width:100%;"),onClick:function(e){return f.select(t)}},{default:(0,n.w5)((function(){return[t.checked?((0,n.wg)(),(0,n.j4)(E,{key:0,class:"CheckOutlined"})):(0,n.kq)("",!0),(0,n._)("div",{class:(0,r.C_)(a.getTag?"mt-15":"")},[a.icon?((0,n.wg)(),(0,n.j4)((0,n.LL)(a.icon),{key:0,"two-tone-color":"#00adef"})):a.svg?((0,n.wg)(),(0,n.iD)("svg",{key:1,class:(0,r.C_)([a.getTag?"mt-20":"","card-avatar icon"]),"aria-hidden":"true"},[(0,n._)("use",{"xlink:href":a.svg},null,8,u)],2)):(0,n.kq)("",!0),(0,n._)("div",c,(0,r.zw)(t.name||t.username),1)],2),a.getTag&&a.getTag(t)?((0,n.wg)(),(0,n.j4)(y,{key:1,class:"ribbon",color:"#f5f5f5"},{default:(0,n.w5)((function(){return[(0,n.Uk)((0,r.zw)(a.getTag(t)),1)]})),_:2},1024)):(0,n.kq)("",!0)]})),_:2},1032,["class","value","style","onClick"])})),128))]})),_:1},8,["style"]))],4)]})),default:(0,n.w5)((function(){return[(0,n.WI)(t.$slots,"default",{},void 0,!0)]})),_:3},8,["placement","visible"])}],["__scopeId","data-v-30bb0bbf"]])},90806:function(t,e,a){a.r(e),a.d(e,{default:function(){return i}});var n=a(66252);var r=a(47556),o=a(87484),s={name:"ProjectDetail",components:{UsersResults:a(38189).Z,ProjectBaseDetail:o.Z},i18n:a(89234),data:function(){return{DEFAULT_PROJECT:r.O7,activeKey:"1",pid:"",detail:{users:[],id:"",name:"",organization:null},loading:!0}},computed:{},created:function(){this.pid=this.$route.params.id||""},methods:{remove:function(t,e,a){this.$refs.projectBase.delProjectUser(a.id)},setting:function(t,e,a){this.$refs.projectBase.showProjectRole(a)},getDetail:function(t){this.detail=t.detail,this.loading=t.loading}}};var i=(0,a(83744).Z)(s,[["render",function(t,e,a,r,o,s){var i=(0,n.up)("UsersResults"),d=(0,n.up)("a-tab-pane"),u=(0,n.up)("a-tabs"),c=(0,n.up)("ProjectBaseDetail");return(0,n.wg)(),(0,n.j4)(c,{pid:o.pid,"onUpdate:pid":e[1]||(e[1]=function(t){return o.pid=t}),onGetDetail:s.getDetail},{tabs:(0,n.w5)((function(){return[(0,n.Wm)(u,{type:"card",activeKey:o.activeKey,"onUpdate:activeKey":e[0]||(e[0]=function(t){return o.activeKey=t})},{default:(0,n.w5)((function(){return[(0,n.Wm)(d,{key:"1",tab:t.$t("Project members")},{default:(0,n.w5)((function(){return[(0,n.Wm)(i,{loading:o.loading,actions:[{icon:"EditOutlined",text:t.$t("Set Project Role"),call:s.setting,permission:[o.detail.organization?"project:update:organization:"+o.detail.organization:"project:update"]},{icon:"CloseOutlined",hide:!0,text:t.$t("Remove"),call:s.remove,permission:[o.detail.organization?"project:update:organization:"+o.detail.organization:"project:update"]}],users:o.detail.users},null,8,["loading","actions","users"])]})),_:1},8,["tab"])]})),_:1},8,["activeKey"])]})),_:1},8,["pid","onGetDetail"])}]])}}]);