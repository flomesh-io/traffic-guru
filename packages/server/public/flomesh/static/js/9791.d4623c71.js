"use strict";(self.webpackChunkflomesh_load_balancer=self.webpackChunkflomesh_load_balancer||[]).push([[9791],{42445:function(e,a,t){t.r(a),t.d(a,{default:function(){return v}});var s=t(66252),l=t(3577);t(57658);var i=t(13504),n=t(7141),d=t(19373);const o={key:0},r=["onClick"];var c=t(2692);const m=[{key:"as",dataIndex:"name"},{key:"Namespace",width:130,dataIndex:"namespace"},{key:"Min Replicas",dataIndex:"minReplicas"},{key:"Max Replicas",dataIndex:"maxReplicas"},{key:"Ref",dataIndex:"ref"},{key:"Creation Timestamp",dataIndex:"creationTimestamp"},{key:"Action",width:130,dataIndex:"action"}];var p={name:"ServiceList",components:{MoreOutlined:c.Z},props:["embed","d","url","namespace"],i18n:t(89234),data(){return{params:{pageNo:1,pageSize:10,total:0},columns:m,loading:!1,list:[]}},computed:{dataColumns(){return this.columns.map((e=>(e.title=this.$t(e.key),e)))}},created(){this.embed?(this.list=this.reset(this.d),this.params.total=this.d.length,this.loading=!1):this.search()},methods:{detail(e,a){this.$router.push({path:`/fsm/service/detail/${a}/${e}`})},MakeUrl(){let e=this.$REST.K8S.append(this.params.pageSize,this.params.pageNo,"d,creationTimestamp");return this.$REST.K8S.encode(this.url,e,this.namespace)},search(e,a){e&&(this.params.pageNo=e,this.params.pageSize=a),this.loading=!0,this.$request(this.MakeUrl(),this.$METHOD.GET).then((e=>{let a=e.data;this.list=this.reset(a.items),this.params.total=a.count,this.loading=!1}))},reset(e){for(let a=0;a<e.length;a++)e[a].uid=e[a].metadata.uid,e[a].name=e[a].metadata.name,e[a].namespace=e[a].metadata.namespace,e[a].minReplicas=e[a].spec.minReplicas,e[a].maxReplicas=e[a].spec.maxReplicas,e[a].ref=e[a].spec.scaleTargetRef?e[a].spec.scaleTargetRef.kind+"/"+e[a].spec.scaleTargetRef.name:"-",e[a].creationTimestamp=new Date(e[a].metadata.creationTimestamp).toLocaleString();return e}}},u=t(83744);var g=(0,u.Z)(p,[["render",function(e,a,t,i,n,d){const c=(0,s.up)("a-menu-item"),m=(0,s.up)("a-popconfirm"),p=(0,s.up)("a-menu"),u=(0,s.up)("MoreOutlined"),g=(0,s.up)("a-dropdown"),h=(0,s.up)("a-table"),w=(0,s.up)("a-card");return(0,s.wg)(),(0,s.j4)(w,{class:"card nopd",title:e.$t("Pod Horizontal Auto Scaler"),loading:n.loading},{default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s.Wm)(h,{pagination:{showSizeChanger:!1,showQuickJumper:!1,onShowSizeChange:d.search,onChange:d.search,current:n.params.pageNo,pageSize:n.params.pageSize,showTotal:(a,t)=>`${e.$t("Total")} ${a}`,total:n.params.total},columns:d.dataColumns,"data-source":n.list,class:"bg-white"},{bodyCell:(0,s.w5)((({column:t,record:i})=>["action"===t.dataIndex?((0,s.wg)(),(0,s.iD)("div",o,[(0,s.Wm)(g,null,{overlay:(0,s.w5)((()=>[(0,s.Wm)(p,null,{default:(0,s.w5)((()=>[(0,s.Wm)(c,null,{default:(0,s.w5)((()=>[(0,s._)("a",{onClick:e=>d.detail(i.name,i.namespace)},(0,l.zw)(e.$t("edit")),9,r)])),_:2},1024),(0,s.Wm)(c,null,{default:(0,s.w5)((()=>[(0,s.Wm)(m,{placement:"topLeft","ok-text":e.$t("Yes"),"cancel-text":e.$t("No"),onConfirm:a[0]||(a[0]=a=>e.remove(e.item.id))},{title:(0,s.w5)((()=>[(0,s._)("p",null,(0,l.zw)(e.$t("Tip")),1),(0,s._)("p",null,(0,l.zw)(e.$t("Are you sure to delete this?")),1)])),default:(0,s.w5)((()=>[(0,s._)("a",null,(0,l.zw)(e.$t("delete")),1)])),_:1},8,["ok-text","cancel-text"])])),_:1})])),_:2},1024)])),default:(0,s.w5)((()=>[(0,s._)("a",null,[(0,s.Wm)(u)])])),_:2},1024)])):(0,s.kq)("",!0)])),_:1},8,["pagination","columns","data-source"])])])),_:1},8,["title","loading"])}],["__scopeId","data-v-290ec034"]]),h=t(61103),w=t(1299),f=t(33907),k=t(13589),$=t(39176),S=t(44044),y=t(51461),_=t(54140),T=t(67554),b=t(5966),I={name:"DeploymentsDetail",i18n:t(89234),components:{DetailListItem:k.Z,DetailList:w.Z,PageLayout:h.Z,StatusList:n.Z,EventList:i.Z,HozScalerList:g,ReplicaSetList:d.Z,RollingUpdateCard:$.Z,PodStatusCard:S.Z,ImageTags:y.Z,DetailHeader:_.Z,PodStatusTags:b.Z,ResourceInfoCard:T.Z},data(){return{detail:{metadata:{labels:{},annotations:{}},typeMeta:{},pods:{},containerImages:[],selector:{},statusInfo:{},conditions:[],rollingUpdateStrategy:{}},loading:!0,pid:"",namespace:"",isMounted:!1,metrics:[],params:{key:"",pageNo:1,pageSize:10,total:0}}},computed:{...(0,f.rn)("setting",["isMobile"])},created(){this.pid=this.$route.params.id||"",this.namespace=this.$route.params.namespace||localStorage.getItem("NAMESPACE")},mounted(){this.isMounted=!0,""!=this.pid?this.search():(this.detail={metadata:{labels:{},annotations:{}},typeMeta:{},pods:{},containerImages:[],selector:{},statusInfo:{},conditions:[],rollingUpdateStrategy:{}},this.loading=!1)},methods:{onTabChange(e){},search(){this.loading=!0,this.$request(this.URL(),this.$METHOD.GET).then((e=>{this.detail=e.data,this.loading=!1}))},URL(){let e="/"+this.pid;return this.$REST.K8S.encode(this.$REST.K8S.DEPLOYMENT,e,this.namespace)},valid(){return!0},save(){this.valid()&&(""!=this.pid?(this.$message.success(this.$t("Save successfully"),3),this.$closePage(this.$route)):(this.$message.success(this.$t("Created successfully"),3),this.$closePage(this.$route)))},handleChange(){},newreplicasetDetail(e,a){this.$router.push({path:`/workload/replicaset/detail/${a}/${e}`})}}};var v=(0,u.Z)(I,[["render",function(e,a,t,i,n,d){const o=(0,s.up)("DetailHeader"),r=(0,s.up)("ResourceInfoCard"),c=(0,s.up)("RollingUpdateCard"),m=(0,s.up)("PodStatusCard"),p=(0,s.up)("DetailListItem"),u=(0,s.up)("PodStatusTags"),g=(0,s.up)("DetailList"),h=(0,s.up)("a-tag"),w=(0,s.up)("ImageTags"),f=(0,s.up)("a-card"),k=(0,s.up)("ReplicaSetList"),$=(0,s.up)("HozScalerList"),S=(0,s.up)("a-tab-pane"),y=(0,s.up)("StatusList"),_=(0,s.up)("EventList"),T=(0,s.up)("a-tabs"),b=(0,s.up)("a-col"),I=(0,s.up)("a-row"),v=(0,s.up)("PageLayout");return(0,s.wg)(),(0,s.j4)(v,{title:e.$t("Deployments")},{headerContent:(0,s.w5)((()=>[(0,s.Wm)(o,{d:n.detail},null,8,["d"])])),action:(0,s.w5)((()=>[])),default:(0,s.w5)((()=>[(0,s.Wm)(I,{class:"row-mg"},{default:(0,s.w5)((()=>[(0,s.Wm)(b,{class:"col-pd",xl:24,lg:24,md:24,sm:24,xs:24},{default:(0,s.w5)((()=>[(0,s.Wm)(T,{type:"card"},{default:(0,s.w5)((()=>[(0,s.Wm)(S,{key:"1",tab:e.$t("Overview")},{default:(0,s.w5)((()=>[(0,s.Wm)(r,{loading:n.loading,d:n.detail},null,8,["loading","d"]),(0,s.Wm)(c,{loading:n.loading,d:n.detail.spec?.updateStrategy},null,8,["loading","d"]),(0,s.Wm)(c,{title:e.$t("Strategy"),loading:n.loading,d:n.detail.spec?.strategy},null,8,["title","loading","d"]),(0,s.Wm)(m,{loading:n.loading,d:n.detail.statusInfo},null,8,["loading","d"]),n.detail.newreplicaset&&n.detail.newreplicaset.metadata?((0,s.wg)(),(0,s.j4)(f,{key:0,class:"card mb-20",bordered:!1,loading:n.loading,title:e.$t("New Replica Set")},{default:(0,s.w5)((()=>[(0,s.Wm)(g,{size:"small",col:4},{default:(0,s.w5)((()=>[(0,s.Wm)(p,{term:e.$t("as")},{default:(0,s.w5)((()=>[(0,s._)("a",{href:"javascript:void(0)",onClick:a[0]||(a[0]=e=>d.newreplicasetDetail(n.detail.newreplicaset.metadata.name,n.detail.newreplicaset.metadata.namespace))},(0,l.zw)(n.detail.newreplicaset.metadata.name),1)])),_:1},8,["term"]),(0,s.Wm)(p,{term:e.$t("Namespace")},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(n.detail.newreplicaset.metadata.namespace),1)])),_:1},8,["term"]),(0,s.Wm)(p,{term:e.$t("Creation Timestamp")},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(new Date(n.detail.newreplicaset.metadata.creationTimestamp).toLocaleString()),1)])),_:1},8,["term"]),n.detail.newreplicaset.podInfo?((0,s.wg)(),(0,s.j4)(p,{key:0,term:e.$t("Pods")},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{d:n.detail.newreplicaset.podInfo},null,8,["d"])])),_:1},8,["term"])):(0,s.kq)("",!0)])),_:1}),(0,s.Wm)(g,{size:"small",col:1},{default:(0,s.w5)((()=>[n.detail.newreplicaset.metadata.labels?((0,s.wg)(),(0,s.j4)(p,{key:0,term:e.$t("Labels")},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(Object.keys(n.detail.newreplicaset.metadata.labels||[]),((e,a)=>((0,s.wg)(),(0,s.j4)(h,{key:a,closable:!1},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(e)+":"+(0,l.zw)(n.detail.newreplicaset.metadata.labels[e]),1)])),_:2},1024)))),128))])),_:1},8,["term"])):(0,s.kq)("",!0),n.detail.newreplicaset?((0,s.wg)(),(0,s.j4)(p,{key:1,term:e.$t("Container Images")},{default:(0,s.w5)((()=>[(0,s.Wm)(w,{d:n.detail.newreplicaset},null,8,["d"])])),_:1},8,["term"])):(0,s.kq)("",!0)])),_:1})])),_:1},8,["loading","title"])):(0,s.kq)("",!0),n.loading?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(k,{key:1,namespace:n.namespace,class:"mb-20",d:n.detail.oldreplicaset||[],embed:!0,title:e.$t("Old Replica Sets"),metric:!1,"has-search":!1},null,8,["namespace","d","title"])),n.loading?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)($,{key:2,embed:!0,namespace:n.namespace,d:n.detail.horizontalpodautoscaler||[]},null,8,["namespace","d"]))])),_:1},8,["tab"]),(0,s.Wm)(S,{key:"2",tab:e.$t("Status")},{default:(0,s.w5)((()=>[(0,s.Wm)(f,{class:"card nopd",bordered:!1,loading:n.loading},{default:(0,s.w5)((()=>[(0,s.Wm)(y,{d:n.detail.status.conditions||[]},null,8,["d"])])),_:1},8,["loading"])])),_:1},8,["tab"]),(0,s.Wm)(S,{key:"4",tab:e.$t("Events")},{default:(0,s.w5)((()=>[(0,s.Wm)(f,{class:"card nopd",bordered:!1,loading:n.loading},{default:(0,s.w5)((()=>[(0,s.Wm)(_,{namespace:n.namespace,"has-search":!1,url:e.$REST.K8S.DEPLOYMENT+"/"+n.pid+"/event"},null,8,["namespace","url"])])),_:1},8,["loading"])])),_:1},8,["tab"])])),_:1})])),_:1})])),_:1})])),_:1},8,["title"])}]])},7141:function(e,a,t){t.d(a,{Z:function(){return n}});var s=t(66252);const l=[{key:"Type",dataIndex:"type"},{key:"Status",dataIndex:"status"},{key:"Last Probe Time",dataIndex:"lastProbeTime"},{key:"Last Transition Time",dataIndex:"lastTransitionTime"},{key:"Reason",dataIndex:"reason"},{key:"Message",dataIndex:"message"}];var i={name:"StatusList",components:{},props:["d"],i18n:t(89234),data(){return{columns:l,loading:!1,list:[]}},computed:{dataColumns(){return this.columns.map((e=>(e.title=this.$t(e.key),e)))}},created(){this.search()},methods:{search(){this.list=this.reset(this.d)},reset(e){for(let a=0;a<e.length;a++)e[a].lastProbeTime=new Date(e[a].lastProbeTime).toLocaleString(),e[a].lastTransitionTime=new Date(e[a].lastTransitionTime).toLocaleString();return e}}};var n=(0,t(83744).Z)(i,[["render",function(e,a,t,l,i,n){const d=(0,s.up)("a-table"),o=(0,s.up)("a-card");return(0,s.wg)(),(0,s.j4)(o,{class:"card nopd",title:e.$t("Status"),loading:i.loading},{default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s.Wm)(d,{columns:n.dataColumns,"data-source":i.list},null,8,["columns","data-source"])])])),_:1},8,["title","loading"])}],["__scopeId","data-v-1d5ee6b5"]])}}]);