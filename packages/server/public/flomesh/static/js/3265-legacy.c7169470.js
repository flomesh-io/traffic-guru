"use strict";(self.webpackChunkflomesh_load_balancer=self.webpackChunkflomesh_load_balancer||[]).push([[3265],{71900:function(t,e,n){n.d(e,{Z:function(){return u}});var a=n(66252),o=n(3577),l={class:"head-info"};var i={name:"HeadInfo",props:["title","content"]};var u=(0,n(83744).Z)(i,[["render",function(t,e,n,i,u,r){return(0,a.wg)(),(0,a.iD)("div",l,[(0,a._)("span",null,(0,o.zw)(n.title),1),(0,a._)("p",null,[(0,a.Uk)((0,o.zw)(n.content),1),(0,a.WI)(t.$slots,"body",{},void 0,!0)])])}],["__scopeId","data-v-00006846"]])},13265:function(t,e,n){n.r(e),n.d(e,{default:function(){return z}});n(68309),n(74916),n(64765);var a=n(66252),o=n(3577),l=function(t){return(0,a.dD)("data-v-3ccc44c5"),t=t(),(0,a.Cn)(),t}((function(){return(0,a._)("div",null,null,-1)})),i={key:0},u={key:1},r={key:0,class:"blockquote"},s={class:"mr-20 nowrap"};var c=n(95082),d=(n(92222),n(99684)),p=n(52928),f={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 140H96c-17.7 0-32 14.3-32 32v496c0 17.7 14.3 32 32 32h380v112H304c-8.8 0-16 7.2-16 16v48c0 4.4 3.6 8 8 8h432c4.4 0 8-3.6 8-8v-48c0-8.8-7.2-16-16-16H548V700h380c17.7 0 32-14.3 32-32V172c0-17.7-14.3-32-32-32zm-40 488H136V212h752v416z"}}]},name:"desktop",theme:"outlined"},h=n(33058);function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?Object(arguments[e]):{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),a.forEach((function(e){v(t,e,n[e])}))}return t}function v(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var g=function(t,e){var n=m({},t,e.attrs);return(0,a.Wm)(h.Z,m({},n,{icon:f}),null)};g.displayName="DesktopOutlined",g.inheritAttrs=!1;var y=g,w=n(61103),b=n(71900),_=n(69596),$=n(96486),k=n.n($),S=n(85263),W=n(76754),O=n(33907),C={name:"TestTargets",components:{HeadInfo:b.Z,PageLayout:w.Z,CardList:_.Z,PlusCircleTwoTone:d.Z,ApartmentOutlined:p.Z,DesktopOutlined:y,FormItem:W.Z},i18n:n(89234),data:function(){return{ApartmentOutlined:p.Z,isEdit:!1,visible:!1,payload:{content:{os:"generic_linux",arch:"loongarch64",pipy_version:"nightly-202205110231",host:"",port:"",path:"",status:""}},targets:[],pageSize:12,pageNo:1,total:0,loading:!0,simpleImage:S.Z.PRESENTED_IMAGE_SIMPLE}},computed:(0,c.Z)((0,c.Z)({},(0,O.rn)("rules",["rules"])),{},{start:function(){return(this.pageNo-1)*this.pageSize}}),created:function(){this.loaddata()},activated:function(){},methods:{add:function(){this.isEdit=!1,this.payload={content:{os:"generic_linux",arch:"loongarch64",pipy_version:"nightly-202205110231",host:"",port:"",path:"",status:""}},this.showModal()},showModal:function(){this.visible=!0},valid:function(){var t=this;this.$refs.form.validateFields().then((function(){t.handleOk()})).catch((function(){}))},handleOk:function(t){var e=this,n=k().cloneDeep(this.payload);if(n.content.status=t||"activated",n.type="TestcaseURL",this.isEdit){var a=n.id;delete n.id,this.$gql.mutation("updateSystemSetting(id:".concat(a,", data: $data){data{id}}"),{data:n},{data:"SystemSettingInput"}).then((function(){e.visible=!1,e.$message.success(e.$t("Modified successfully"),3),e.loaddata()}))}else delete n.id,this.$gql.mutation("createSystemSetting(data: $data){data{id}}",{data:n},{data:"SystemSettingInput"}).then((function(){e.visible=!1,e.$message.success(e.$t("Created successfully"),3),e.loaddata()}))},remove:function(t,e,n){var a=this;this.$gql.mutation("deleteSystemSetting(id:".concat(n.id,"){data{id}}")).then((function(){a.$message.success(a.$t("Deleted successfully"),3),a.loaddata()}))},deploy:function(t,e,n){this.payload=k().cloneDeep(n),this.isEdit=!0,this.changeStatus("deploy",this.payload.id),this.handleOk("deploy")},stop:function(t,e,n){this.payload=k().cloneDeep(n),this.isEdit=!0,this.changeStatus("stop",this.payload.id),this.handleOk("stop")},changeStatus:function(t,e){this.$gql.mutation("".concat(t,"TestTarget(testTarget:").concat(e,")")).then((function(){}))},setting:function(t,e,n){this.payload=k().cloneDeep(n),this.isEdit=!0,this.showModal()},edit:function(){},search:function(t,e){t&&(this.pageNo=t,this.pageSize=e),this.loaddata()},loaddata:function(){var t=this;this.loading=!0,this.$gql.query('systemSettings(sort: ""createdAt:desc", filters: $filters, pagination:{start: '.concat(this.start,", limit: ").concat(this.pageSize,"}){\n\t\t\t\t\t\tdata{id,attributes{content}},\n\t\t\t\t\t\tmeta{pagination{total}}\n\t\t\t\t\t}"),{filters:{type:{eq:"TestcaseURL"}}},{filters:"SystemSettingFiltersInput"}).then((function(e){t.targets=e.data,t.total=e.pagination.total,t.loading=!1}))}}};var z=(0,n(83744).Z)(C,[["render",function(t,e,n,c,d,p){var f=(0,a.up)("PlusCircleTwoTone"),h=(0,a.up)("HeadInfo"),m=(0,a.up)("DesktopOutlined"),v=(0,a.up)("a-badge"),g=(0,a.up)("a-card-meta"),y=(0,a.up)("CardList"),w=(0,a.up)("a-pagination"),b=(0,a.up)("a-button"),_=(0,a.up)("a-input"),$=(0,a.up)("FormItem"),k=(0,a.up)("a-descriptions-item"),S=(0,a.up)("a-descriptions"),W=(0,a.up)("a-form"),O=(0,a.up)("a-modal"),C=((0,a.up)("ApartmentOutlined"),(0,a.up)("PageLayout"));return(0,a.wg)(),(0,a.j4)(C,{avatar:d.ApartmentOutlined},{headerContent:(0,a.w5)((function(){return[l]})),extra:(0,a.w5)((function(){return[(0,a.Wm)(h,{class:"split-right",title:t.$t("Create Target")},{body:(0,a.w5)((function(){return[(0,a._)("div",null,[(0,a.Wm)(f,{onClick:p.add,class:"font-primary icon-menu rotate-icon"},null,8,["onClick"])])]})),_:1},8,["title"])]})),default:(0,a.w5)((function(){return[(0,a.Wm)(y,{"hide-action-title":!0,"data-source":d.targets,loading:d.loading,type:"component",actions:[{svg:"#icon-play",text:t.$t("Deploy"),call:p.deploy},{svg:"#icon-stop",text:t.$t("Stop"),call:p.stop},{icon:"EditOutlined",text:t.$t("edit"),call:p.setting},{icon:"CloseOutlined",hide:!0,text:t.$t("delete"),call:p.remove}]},{default:(0,a.w5)((function(t){var e=t.item;return[(0,a.Wm)(g,null,{title:(0,a.w5)((function(){return[(0,a._)("div",null,[e.content.displayName?((0,a.wg)(),(0,a.iD)("span",i,(0,o.zw)(e.content.displayName),1)):((0,a.wg)(),(0,a.iD)("span",u,(0,o.zw)(e.name),1))])]})),avatar:(0,a.w5)((function(){return[(0,a.Wm)(m,{class:"font-30 primary"})]})),description:(0,a.w5)((function(){return[e.content&&e.content.host?((0,a.wg)(),(0,a.iD)("blockquote",r,[(0,a._)("div",s,[e.content.status?((0,a.wg)(),(0,a.j4)(v,{key:0,status:{deploy:"processing",activated:"green",stop:"red"}[e.content.status]},null,8,["status"])):(0,a.kq)("",!0),(0,a.Uk)(" "+(0,o.zw)(e.content.host)+":"+(0,o.zw)(e.content.port),1),(0,a._)("span",null,(0,o.zw)(e.content.path),1)])])):(0,a.kq)("",!0)]})),_:2},1024)]})),_:1},8,["data-source","loading","actions"]),(0,a.Wm)(w,{onChange:p.search,current:d.pageNo,"onUpdate:current":e[0]||(e[0]=function(t){return d.pageNo=t}),total:d.total,"page-size":d.pageSize,"show-less-items":""},null,8,["onChange","current","total","page-size"]),(0,a.Wm)(O,{visible:d.visible,"onUpdate:visible":e[8]||(e[8]=function(t){return d.visible=t}),title:t.$t("Target"),width:"60%"},{footer:(0,a.w5)((function(){return[d.isEdit?((0,a.wg)(),(0,a.j4)(b,{key:0,type:"primary",onClick:p.valid},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,o.zw)(t.$t("save")),1)]})),_:1},8,["onClick"])):((0,a.wg)(),(0,a.j4)(b,{key:1,type:"primary",onClick:p.valid},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,o.zw)(t.$t("create")),1)]})),_:1},8,["onClick"]))]})),default:(0,a.w5)((function(){return[(0,a.Wm)(W,{model:d.payload.content,"wrapper-col":{span:24},ref:"form"},{default:(0,a.w5)((function(){return[(0,a.Wm)(S,{bordered:""},{default:(0,a.w5)((function(){return[(0,a.Wm)(k,{label:t.$t("as"),span:3},{default:(0,a.w5)((function(){return[(0,a.Wm)($,{name:"displayName",rules:t.rules.required},{default:(0,a.w5)((function(){return[(0,a.Wm)(_,{placeholder:t.$t("unset"),value:d.payload.content.displayName,"onUpdate:value":e[1]||(e[1]=function(t){return d.payload.content.displayName=t})},null,8,["placeholder","value"])]})),_:1},8,["rules"])]})),_:1},8,["label"]),(0,a.Wm)(k,{label:t.$t("Host"),span:2},{default:(0,a.w5)((function(){return[(0,a.Wm)($,{name:"host",rules:t.rules.required},{default:(0,a.w5)((function(){return[(0,a.Wm)(_,{placeholder:t.$t("unset"),value:d.payload.content.host,"onUpdate:value":e[2]||(e[2]=function(t){return d.payload.content.host=t})},null,8,["placeholder","value"])]})),_:1},8,["rules"])]})),_:1},8,["label"]),(0,a.Wm)(k,{label:t.$t("Port"),span:1},{default:(0,a.w5)((function(){return[(0,a.Wm)(_,{placeholder:t.$t("unset"),value:d.payload.content.port,"onUpdate:value":e[3]||(e[3]=function(t){return d.payload.content.port=t})},null,8,["placeholder","value"])]})),_:1},8,["label"]),(0,a.Wm)(k,{label:t.$t("Path"),span:3},{default:(0,a.w5)((function(){return[(0,a.Wm)(_,{placeholder:t.$t("unset"),value:d.payload.content.path,"onUpdate:value":e[4]||(e[4]=function(t){return d.payload.content.path=t})},null,8,["placeholder","value"])]})),_:1},8,["label"]),(0,a.Wm)(k,{label:t.$t("OS"),span:1},{default:(0,a.w5)((function(){return[(0,a.Wm)(_,{placeholder:t.$t("unset"),value:d.payload.content.os,"onUpdate:value":e[5]||(e[5]=function(t){return d.payload.content.os=t})},null,8,["placeholder","value"])]})),_:1},8,["label"]),(0,a.Wm)(k,{label:t.$t("Arch"),span:1},{default:(0,a.w5)((function(){return[(0,a.Wm)(_,{placeholder:t.$t("unset"),value:d.payload.content.arch,"onUpdate:value":e[6]||(e[6]=function(t){return d.payload.content.arch=t})},null,8,["placeholder","value"])]})),_:1},8,["label"]),(0,a.Wm)(k,{label:t.$t("Pipy Version"),span:1},{default:(0,a.w5)((function(){return[(0,a.Wm)(_,{placeholder:t.$t("unset"),value:d.payload.content.pipy_version,"onUpdate:value":e[7]||(e[7]=function(t){return d.payload.content.pipy_version=t})},null,8,["placeholder","value"])]})),_:1},8,["label"])]})),_:1})]})),_:1},8,["model"])]})),_:1},8,["visible","title"]),(0,a.kq)("",!0)]})),_:1},8,["avatar"])}],["__scopeId","data-v-3ccc44c5"]])}}]);