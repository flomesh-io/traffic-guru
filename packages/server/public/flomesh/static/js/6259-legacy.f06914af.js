"use strict";(self.webpackChunkflomesh_load_balancer=self.webpackChunkflomesh_load_balancer||[]).push([[6259],{81188:function(e,l,a){a.d(l,{Z:function(){return p}});a(68309),a(41539),a(33948);var t=a(66252),n=a(3577),u={key:8,class:"form-tips"};var i=a(82482);a(21249);var r={name:"FormItem",i18n:a(39945),props:{label:{type:String,required:!1,default:""},name:{type:String,required:!1,default:""},rules:{type:Array,required:!1,default:function(){return[]}}},data:function(){return{}},computed:{getRules:function(){var e=this;return this.rules.map((function(l){return l.message=e.$t(l.message),l})),this.rules}},created:function(){},methods:{}},o=a(83744);var s=(0,o.Z)(r,[["render",function(e,l,a,n,u,i){var r=(0,t.up)("a-form-item");return a.rules?((0,t.wg)(),(0,t.j4)(r,{key:0,label:a.label,name:a.name,rules:i.getRules},{default:(0,t.w5)((function(){return[(0,t.WI)(e.$slots,"default")]})),_:3},8,["label","name","rules"])):((0,t.wg)(),(0,t.j4)(r,{key:1,label:a.label},{default:(0,t.w5)((function(){return[(0,t.WI)(e.$slots,"default")]})),_:3},8,["label"]))}]]),d={name:"AutoForm",i18n:a(89234),components:{FormItem:s},props:["field"],data:function(){var e;return{keyset:(e={"Discovery Name":{type:"text"},"LB IP":{type:"text"},"LB Port":{type:"number"},"Target Hosts":{type:"textarea",tips:"List of <ip>:<port>[@<weight>]"},Slots:{type:"number"},"Hash On":{type:"select",options:[{value:"None",label:"None"},{value:"IP Address",label:"IP Address"},{value:"HTTP Header",label:"HTTP Header"},{value:"HTTP Cookie",label:"HTTP Cookie"},{value:"Application",label:"Application"}]},"Hash Fallback":{type:"select",options:[{value:"None",label:"None"},{value:"IP Address",label:"IP Address"},{value:"HTTP Header",label:"HTTP Header"},{value:"HTTP Cookie",label:"HTTP Cookie"},{value:"Application",label:"Application"}]},Type:{type:"select",options:[{value:"TCP",label:"TCP"},{value:"HTTP",label:"HTTP"},{value:"HTTPS",label:"HTTPS"}]},"HTTPS Verify Certificate":{type:"select",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}]},Concurrency:{type:"number"},Timeout:{type:"number"},"HTTPS SNI":{type:"text"},"HTTPS Path":{type:"text"},"HTTP Statuses":{type:"multipleselect",options:[{value:100,label:"100"},{value:101,label:"101"},{value:103,label:"103"},{value:200,label:"200"},{value:201,label:"201"},{value:202,label:"202"},{value:203,label:"203"},{value:204,label:"204"},{value:205,label:"205"},{value:206,label:"206"},{value:300,label:"300"},{value:301,label:"301"},{value:302,label:"302"},{value:303,label:"303"},{value:304,label:"304"},{value:307,label:"307"},{value:308,label:"308"},{value:400,label:"400"},{value:401,label:"401"},{value:403,label:"403"},{value:404,label:"404"},{value:405,label:"405"},{value:406,label:"406"},{value:407,label:"407"},{value:408,label:"408"},{value:500,label:"500"},{value:501,label:"501"},{value:502,label:"502"},{value:503,label:"503"},{value:504,label:"504"}]},Interval:{type:"number"},Successes:{type:"number"},"TCP Failures":{type:"number"},"HTTP Failures":{type:"number"},"HTTP Header":{type:"textarea",tips:"List of <header-key>:<value>"},Timeouts:{type:"number"}},(0,i.Z)(e,"TCP Failures",{type:"number"}),(0,i.Z)(e,"HTTP Failures",{type:"number"}),(0,i.Z)(e,"Algorithm",{type:"select",options:[{value:"rr",label:"RoundRobinLoadBalancer"},{value:"lc",label:"LeastWorkLoadBalancer"},{value:"ch",label:"HashingLoadBalancer"}]}),(0,i.Z)(e,"Hash header key",{type:"text"}),(0,i.Z)(e,"Sticky",{type:"boolean"}),(0,i.Z)(e,"Port",{type:"number"}),(0,i.Z)(e,"TLS Port",{type:"number"}),e),valueset:{"HTTP Header":[{label:"HTTP Header",value:""}]}}},methods:{change:function(e){this.$emit("change",e)},toggleSelect:function(e){this.valueset[e.value]&&this.valueset[e.value].length>0?e.subfields=this.valueset[e.value]:delete e.subfields}}};var p=(0,o.Z)(d,[["render",function(e,l,a,i,r,o){var s,d,p=(0,t.up)("a-switch"),c=(0,t.up)("a-input"),v=(0,t.up)("a-input-password"),f=(0,t.up)("a-select-option"),y=(0,t.up)("a-select"),b=(0,t.up)("a-textarea"),h=(0,t.up)("FormItem");return(0,t.wg)(),(0,t.j4)(h,{label:e.$t(a.field.label),name:null===(s=a.field)||void 0===s?void 0:s.name,rules:null===(d=a.field)||void 0===d?void 0:d.rules},{default:(0,t.w5)((function(){return["boolean"==a.field.type||!a.field.type&&r.keyset[a.field.label]&&"boolean"==r.keyset[a.field.label].type?((0,t.wg)(),(0,t.j4)(p,{key:0,onChange:o.change,checked:a.field.value,"onUpdate:checked":l[0]||(l[0]=function(e){return a.field.value=e})},null,8,["onChange","checked"])):(0,t.kq)("",!0),"text"==a.field.type||"number"==a.field.type?((0,t.wg)(),(0,t.j4)(c,{key:1,type:a.field.type,placeholder:e.$t("unset"),value:a.field.value,"onUpdate:value":l[1]||(l[1]=function(e){return a.field.value=e}),onChange:o.change,suffix:a.field.unit},null,8,["type","placeholder","value","onChange","suffix"])):(0,t.kq)("",!0),a.field.type||"text"!=r.keyset[a.field.label].type&&"number"!=r.keyset[a.field.label].type?(0,t.kq)("",!0):((0,t.wg)(),(0,t.j4)(c,{key:2,type:r.keyset[a.field.label].type,placeholder:e.$t("unset"),value:a.field.value,"onUpdate:value":l[2]||(l[2]=function(e){return a.field.value=e}),onChange:o.change,suffix:r.keyset[a.field.label].unit},null,8,["type","placeholder","value","onChange","suffix"])),"password"==a.field.type?((0,t.wg)(),(0,t.j4)(v,{key:3,type:a.field.type,placeholder:e.$t("unset"),onChange:o.change,value:a.field.value,"onUpdate:value":l[3]||(l[3]=function(e){return a.field.value=e})},null,8,["type","placeholder","onChange","value"])):(0,t.kq)("",!0),a.field.type||"password"!=r.keyset[a.field.label].type?(0,t.kq)("",!0):((0,t.wg)(),(0,t.j4)(v,{key:4,type:r.keyset[a.field.label].type,placeholder:e.$t("unset"),onChange:o.change,value:a.field.value,"onUpdate:value":l[4]||(l[4]=function(e){return a.field.value=e})},null,8,["type","placeholder","onChange","value"])),"select"==a.field.type||!a.field.type&&r.keyset[a.field.label]&&"select"==r.keyset[a.field.label].type?((0,t.wg)(),(0,t.j4)(y,{key:5,class:"form-width",onChange:l[5]||(l[5]=function(e){return o.toggleSelect(a.field)}),value:a.field.value,"onUpdate:value":l[6]||(l[6]=function(e){return a.field.value=e}),placeholder:e.$t("unset")},{default:(0,t.w5)((function(){return[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(a.field.values||a.field.options||r.keyset[a.field.label].options,(function(e,l){return(0,t.wg)(),(0,t.j4)(f,{key:l,value:e.value},{default:(0,t.w5)((function(){return[(0,t.Uk)((0,n.zw)(e.label),1)]})),_:2},1032,["value"])})),128))]})),_:1},8,["value","placeholder"])):(0,t.kq)("",!0),"multipleselect"==a.field.type||!a.field.type&&r.keyset[a.field.label]&&"multipleselect"==r.keyset[a.field.label].type?((0,t.wg)(),(0,t.j4)(y,{key:6,class:"form-width",value:a.field.value,"onUpdate:value":l[7]||(l[7]=function(e){return a.field.value=e}),placeholder:e.$t("unset"),onChange:o.change,mode:"multiple"},{default:(0,t.w5)((function(){return[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(a.field.values||a.field.options||r.keyset[a.field.label].options,(function(e,l){return(0,t.wg)(),(0,t.j4)(f,{key:l,value:e.value},{default:(0,t.w5)((function(){return[(0,t.Uk)((0,n.zw)(e.label),1)]})),_:2},1032,["value"])})),128))]})),_:1},8,["value","placeholder","onChange"])):(0,t.kq)("",!0),"textarea"==a.field.type||!a.field.type&&r.keyset[a.field.label]&&"textarea"==r.keyset[a.field.label].type?((0,t.wg)(),(0,t.j4)(b,{key:7,value:a.field.value,"onUpdate:value":l[8]||(l[8]=function(e){return a.field.value=e}),onChange:o.change,placeholder:e.$t("unset"),class:"form-width","auto-size":{minRows:4,maxRows:6}},null,8,["value","onChange","placeholder"])):(0,t.kq)("",!0),r.keyset[a.field.label]&&r.keyset[a.field.label].tips?((0,t.wg)(),(0,t.iD)("div",u,(0,n.zw)(r.keyset[a.field.label].tips),1)):(0,t.kq)("",!0)]})),_:1},8,["label","name","rules"])}],["__scopeId","data-v-21ce07e8"]])},46259:function(e,l,a){a.r(l),a.d(l,{default:function(){return Z}});var t=a(66252),n=a(3577),u=a(49963),i=function(e){return(0,t.dD)("data-v-ce9397e2"),e=e(),(0,t.Cn)(),e},r={class:"pd-10"},o={class:"flex"},s={class:"flex-item"},d={class:"flex-item"},p={key:0},c={id:"right-unselect"},v=[i((function(){return(0,t._)("br",null,null,-1)})),i((function(){return(0,t._)("div",{class:"row",style:{"text-align":"center",color:"#999"}},[(0,t._)("em",null,"- none -")],-1)}))],f={key:0,id:"right-endpoint"},y={class:"row",style:{"text-align":"center"}},b={key:0,class:"row"},h={key:1,class:"row"},g={key:1,id:"right-line"},m={class:"row",style:{"text-align":"center"}},k={class:"row"},w={class:"data-row"},T=i((function(){return(0,t._)("b",{class:"data-name"}," Source ",-1)})),x={class:"data-value"},H={class:"data-row"},P=i((function(){return(0,t._)("b",{class:"data-name"}," Target ",-1)})),_={class:"data-value"},D={key:0,class:"data-row"},C=i((function(){return(0,t._)("b",{class:"data-name"}," Weight ",-1)})),S={class:"data-value"};var q=a(55581),I=a.n(q),N=a(81188),U=[{label:"ns1",value:"ns1"},{label:"ns2",value:"ns2"}],j=[{label:"*",value:"*"},{label:"GET",value:"GET"},{label:"POST",value:"POST"}],A=[{label:"account1",value:"account1",namespace:"ns1"},{label:"account2",value:"account2",namespace:"ns1"}],$={name:"SmiTopologyEditor",components:{TopologyEditor:I(),AutoItem:N.Z},data:function(){return{title:"MyApp",namespace:null,lines:[],endpoints:[],namespaces:U,menu:{Traffic:{open:!0,submenu:{Target:[{label:"Name",type:"text",value:""},{label:"Namespace",type:"select",value:null,options:U}],Split:[{label:"Name",type:"text",value:""}],UpstreamSetting:[{label:"Name",type:"text",value:""},{label:"Host",type:"text",value:""},{label:"Tcp Max Connections",type:"number",value:1},{label:"Http Max Pending Requests",type:"number",value:1},{label:"Http Max Requests Per Connection",type:"number",value:1}],Metric:[]}},Rules:{open:!0,submenu:{HTTPGroup:[{label:"Name",type:"text",value:""},{label:"Path Regex",type:"text",value:"/metrics"},{label:"Methods",type:"select",value:null,options:j}],TCP:[{label:"Name",type:"text",value:""},{label:"Port",type:"number",value:0}]}},K8S:{open:!0,submenu:{Service:[{label:"Name",type:"select",value:null,options:[{label:"service1",value:"service1"},{label:"service2",value:"service2"}]}],Account:[{label:"Name",type:"select",value:null,options:A}],Egress:[{label:"Name",type:"text",value:""}]}}},rightData:null}},unmounted:function(){},methods:{save:function(e){alert(e)},select:function(e){this.rightData=e.data,this.rightType=e.type},changeOverlay:function(e){this.$refs.topoEditor.LineOverlayChange(e)}}};var Z=(0,a(83744).Z)($,[["render",function(e,l,a,i,q,I){var N=(0,t.up)("a-input"),U=(0,t.up)("a-select-option"),j=(0,t.up)("a-select"),A=(0,t.up)("AutoItem"),$=(0,t.up)("TopologyEditor");return(0,t.wg)(),(0,t.iD)("div",r,[(0,t.Wm)($,{ref:"topoEditor",style:{"box-shadow":"0 0 3px 3px rgba(0,0,0,0.1)","border-radius":"10px"},menu:q.menu,options:{Service:{childLimit:["UpstreamSetting","Egress"],width:250}},lines:q.lines,"onUpdate:lines":l[4]||(l[4]=function(e){return q.lines=e}),endpoints:q.endpoints,"onUpdate:endpoints":l[5]||(l[5]=function(e){return q.endpoints=e}),onSave:I.save,onSelect:I.select},{title:(0,t.w5)((function(){return[(0,t._)("div",o,[(0,t._)("div",s,[(0,t.Wm)(N,{type:"text",placeholder:"Name",modelValue:q.title,"onUpdate:modelValue":l[0]||(l[0]=function(e){return q.title=e})},null,8,["modelValue"])]),(0,t._)("div",d,[(0,t.Wm)(j,{modelValue:q.namespace,"onUpdate:modelValue":l[1]||(l[1]=function(e){return q.namespace=e}),placeholder:"Namespace"},{default:(0,t.w5)((function(){return[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(q.namespaces,(function(e,l){return(0,t.wg)(),(0,t.j4)(U,{key:l,value:e.value},{default:(0,t.w5)((function(){return[(0,t.Uk)((0,n.zw)(e.label),1)]})),_:2},1032,["value"])})),128))]})),_:1},8,["modelValue"])])])]})),right:(0,t.w5)((function(){return[q.rightData?((0,t.wg)(),(0,t.iD)("div",p,[(0,t.wy)((0,t._)("div",c,v,512),[[u.F8,!e.rightType||"unselect"==e.rightType]]),"endpoints"==e.rightType?((0,t.wg)(),(0,t.iD)("div",f,[(0,t._)("div",{class:(0,n.C_)(["touch-move",q.rightData.title])},null,2),(0,t._)("div",y,[(0,t._)("h3",null,(0,n.zw)(q.rightData.title),1)]),q.rightData.childIndex>-1&&q.endpoints[q.rightData.index].children[q.rightData.childIndex].attr?((0,t.wg)(),(0,t.iD)("div",b,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(q.endpoints[q.rightData.index].children[q.rightData.childIndex].attr,(function(e,l){return(0,t.wg)(),(0,t.iD)("p",{class:"data-row",key:l},[null!=e&&e.type?((0,t.wg)(),(0,t.j4)(A,{key:0,field:e},null,8,["field"])):(0,t.kq)("",!0)])})),128))])):q.rightData.index>-1&&q.endpoints[q.rightData.index].attr?((0,t.wg)(),(0,t.iD)("div",h,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(q.endpoints[q.rightData.index].attr,(function(e,l){return(0,t.wg)(),(0,t.iD)("p",{class:"data-row",key:l},[null!=e&&e.type?((0,t.wg)(),(0,t.j4)(A,{key:0,field:e},null,8,["field"])):(0,t.kq)("",!0)])})),128))])):(0,t.kq)("",!0)])):"lines"==e.rightType?((0,t.wg)(),(0,t.iD)("div",g,[(0,t._)("div",m,[(0,t._)("h3",null,(0,n.zw)(q.rightData.title),1)]),(0,t._)("div",k,[(0,t._)("p",w,[T,(0,t._)("span",x,(0,n.zw)(q.rightData.source),1)]),(0,t._)("p",H,[P,(0,t._)("span",_,(0,n.zw)(q.rightData.target),1)]),"Split"==q.rightData.source&&"Service"==q.rightData.target?((0,t.wg)(),(0,t.iD)("p",D,[C,(0,t._)("span",S,[(0,t.wy)((0,t._)("input",{style:{width:"80px"},type:"text",placeholder:"",onInput:l[2]||(l[2]=function(e){return I.changeOverlay(q.rightData.overlay)}),"onUpdate:modelValue":l[3]||(l[3]=function(e){return q.rightData.overlay=e})},null,544),[[u.nr,q.rightData.overlay]])])])):(0,t.kq)("",!0)])])):(0,t.kq)("",!0)])):(0,t.kq)("",!0)]})),_:1},8,["menu","lines","endpoints","onSave","onSelect"])])}],["__scopeId","data-v-ce9397e2"]])}}]);