"use strict";(self.webpackChunkflomesh_load_balancer=self.webpackChunkflomesh_load_balancer||[]).push([[7441],{21002:function(e,t,n){n.d(t,{Z:function(){return i}});var a=n(66252);var r={name:"SyncBar",components:{SyncOutlined:n(21826).Z},props:["percent"],methods:{sync:function(){this.$emit("sync")}}};var i=(0,n(83744).Z)(r,[["render",function(e,t,n,r,i,o){var s=(0,a.up)("a-progress"),c=(0,a.up)("SyncOutlined"),u=(0,a.up)("a-button");return(0,a.wg)(),(0,a.iD)(a.HY,null,[n.percent>-1?((0,a.wg)(),(0,a.j4)(s,{key:0,size:"small",class:"title-progress","stroke-color":{"0%":"#00adef","100%":"#87d068"},percent:n.percent},null,8,["percent"])):(0,a.kq)("",!0),-1==n.percent?((0,a.wg)(),(0,a.j4)(u,{key:1,type:"link",shape:"circle",onClick:o.sync},{icon:(0,a.w5)((function(){return[(0,a.Wm)(c,{class:"font-20 icon-menu-sm rotate-icon"})]})),_:1},8,["onClick"])):(0,a.kq)("",!0),n.percent>-1&&n.percent<100?((0,a.wg)(),(0,a.j4)(u,{key:2,type:"link",shape:"circle"},{icon:(0,a.w5)((function(){return[n.percent>-1&&n.percent<100?((0,a.wg)(),(0,a.j4)(c,{key:0,spin:"",class:"font-12"})):(0,a.kq)("",!0)]})),_:1})):(0,a.kq)("",!0)],64)}],["__scopeId","data-v-6a8f29bb"]])},67441:function(e,t,n){n.r(t),n.d(t,{default:function(){return w}});var a=n(66252);n(74916),n(64765),n(92222),n(68309),n(47941);var r=n(3577),i={key:0},o=["onClick"],s={key:1},c={key:2},u=["onClick"];n(21249),n(57658);var l=n(2692),d=n(99684),p=n(21002),m=[{key:"as",dataIndex:"name"},{key:"Namespace",width:130,dataIndex:"namespace"},{key:"protocol",dataIndex:"protocol"},{key:"Creation Timestamp",dataIndex:"creationTimestamp",sorter:!0},{key:"Action",width:130,dataIndex:"action"}],g={name:"EgressList",components:{MoreOutlined:l.Z,PlusCircleTwoTone:d.Z,SyncBar:p.Z},props:["hasSearch"],i18n:n(89234),data:function(){return{pageNo:1,syncLoading:-1,pageSize:10,total:0,key:"",columns:m,loading:!0,list:[]}},computed:{dataColumns:function(){var e=this;return this.columns.map((function(t){return t.title=e.$t(t.key),t}))},start:function(){return(this.pageNo-1)*this.pageSize}},created:function(){this.sync(!0)},methods:{sync:function(e){var t=this;e&&(this.syncLoading=0,this.$gql.mutation("fetchEgresses").then((function(){t.syncLoading=100,t.search(),setTimeout((function(){t.syncLoading=-1}),1e3)}))),this.syncLoading<90&&(this.syncLoading+=10,setTimeout((function(){t.sync()}),100))},remove:function(e){var t=this;this.$gql.mutation("deleteEgressSync(id:".concat(e,"){data{id}}")).then((function(){t.$message.success(t.$t("Deleted successfully"),3),t.search()}))},detail:function(e,t){this.$router.push({path:"/fsm/egress/detail/".concat(t,"/").concat(e)})},search:function(e,t){var n=this;e&&(this.pageNo=e,this.pageSize=t);var a={start:this.start,limit:this.pageSize};this.loading=!0;var r={name:{contains:this.key}};this.$gql.query("getEgresses(filters: $filters, pagination: $pagination){\n\t\t\t\t\t\tdata{id,attributes{name,content,createdAt}},\n\t\t\t\t\t\tmeta{pagination{total}}\n\t\t\t\t\t}",{filters:r,pagination:a},{filters:"EgressFiltersInput",pagination:"PaginationArg"}).then((function(e){n.list=n.reset(e.data),n.total=e.pagination.total,n.loading=!1}))},reset:function(e){for(var t=0;t<e.length;t++){var n=e[t].content;e[t].name=n.metadata.name,e[t].namespace=n.metadata.namespace,e[t].protocol=n.metadata.protocol,e[t].labels=n.metadata.labels?n.metadata.labels:{},e[t].hosts=n.hosts,e[t].creationTimestamp=new Date(e[t].createdAt).toLocaleString()}return e},newEgress:function(){this.$router.push({path:"/fsm/egress/create"})}}},f=n(83744);var h={name:"Egresss",components:{EgressList:(0,f.Z)(g,[["render",function(e,t,n,l,d,p){var m=(0,a.up)("a-input-search"),g=(0,a.up)("a-divider"),f=(0,a.up)("PlusCircleTwoTone"),h=(0,a.up)("a-button"),w=(0,a.up)("SyncBar"),y=(0,a.up)("a-tag"),k=(0,a.up)("a-menu-item"),v=(0,a.up)("a-popconfirm"),_=(0,a.up)("a-menu"),b=(0,a.up)("MoreOutlined"),C=(0,a.up)("a-dropdown"),S=(0,a.up)("a-table"),$=(0,a.up)("a-card"),z=(0,a.Q2)("permission");return(0,a.wg)(),(0,a.j4)($,{class:"card nopd",title:e.$t("Egress"),loading:d.loading},(0,a.Nv)({default:(0,a.w5)((function(){return[(0,a._)("div",null,[(0,a.Wm)(S,{pagination:{showSizeChanger:!1,showQuickJumper:!1,onShowSizeChange:p.search,onChange:p.search,current:d.pageNo,pageSize:d.pageSize,showTotal:function(t,n){return"".concat(e.$t("Total")," ").concat(t)},total:d.total},columns:p.dataColumns,"data-source":d.list,class:"bg-white"},{bodyCell:(0,a.w5)((function(t){var n=t.column,l=t.record;return["name"===n.dataIndex?((0,a.wg)(),(0,a.iD)("div",i,[(0,a._)("a",{href:"javascript:void(0)",onClick:function(e){return p.detail(l.id,l.namespace)}},(0,r.zw)(l.name),9,o)])):"labels"===n.dataIndex?((0,a.wg)(),(0,a.iD)("div",s,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(Object.keys(l.labels),(function(e,t){return(0,a.wg)(),(0,a.j4)(y,{key:t,closable:!1},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,r.zw)(e)+":"+(0,r.zw)(l.labels[e]),1)]})),_:2},1024)})),128))])):"action"===n.dataIndex?((0,a.wg)(),(0,a.iD)("div",c,[(0,a.Wm)(C,null,{overlay:(0,a.w5)((function(){return[(0,a.Wm)(_,null,{default:(0,a.w5)((function(){return[(0,a.wy)(((0,a.wg)(),(0,a.j4)(k,null,{default:(0,a.w5)((function(){return[(0,a._)("a",{onClick:function(e){return p.detail(l.id,l.namespace)}},(0,r.zw)(e.$t("edit")),9,u)]})),_:2},1024)),[[z,["egress:find"]]]),(0,a.Wm)(k,null,{default:(0,a.w5)((function(){return[(0,a.Wm)(v,{placement:"topLeft","ok-text":e.$t("Yes"),"cancel-text":e.$t("No"),onConfirm:function(e){return p.remove(l.id)}},{title:(0,a.w5)((function(){return[(0,a._)("p",null,(0,r.zw)(e.$t("Tip")),1),(0,a._)("p",null,(0,r.zw)(e.$t("Are you sure to delete this?")),1)]})),default:(0,a.w5)((function(){return[(0,a.wy)(((0,a.wg)(),(0,a.iD)("a",null,[(0,a.Uk)((0,r.zw)(e.$t("delete")),1)])),[[z,["egress:delete"]]])]})),_:2},1032,["ok-text","cancel-text","onConfirm"])]})),_:2},1024)]})),_:2},1024)]})),default:(0,a.w5)((function(){return[(0,a._)("a",null,[(0,a.Wm)(b)])]})),_:2},1024)])):(0,a.kq)("",!0)]})),_:1},8,["pagination","columns","data-source"])])]})),_:2},[n.hasSearch?{name:"extra",fn:(0,a.w5)((function(){return[(0,a._)("div",null,[(0,a.Wm)(m,{value:d.key,"onUpdate:value":t[0]||(t[0]=function(e){return d.key=e}),onSearch:t[1]||(t[1]=function(e){return p.search()}),class:"right-search-input",placeholder:e.$t("search")},null,8,["value","placeholder"]),(0,a.wy)((0,a.Wm)(g,{type:"vertical"},null,512),[[z,["egress:create"]]]),(0,a.wy)(((0,a.wg)(),(0,a.j4)(h,{type:"link",shape:"circle",onClick:p.newEgress},{icon:(0,a.w5)((function(){return[(0,a.Wm)(f,{class:"font-20 icon-menu-sm rotate-icon"})]})),_:1},8,["onClick"])),[[z,["egress:create"]]]),(0,a.wy)((0,a.Wm)(g,{type:"vertical"},null,512),[[z,["egress:create"]]]),(0,a.wy)((0,a.Wm)(w,{percent:d.syncLoading,onSync:t[2]||(t[2]=function(e){return p.sync(!0)})},null,8,["percent"]),[[z,["egress:create"]]])])]})),key:"0"}:void 0]),1032,["title","loading"])}],["__scopeId","data-v-1c2b65e1"]])},i18n:n(89234),data:function(){return{}},created:function(){}};var w=(0,f.Z)(h,[["render",function(e,t,n,r,i,o){var s=(0,a.up)("EgressList");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(s,{"has-search":!0})])}]])}}]);