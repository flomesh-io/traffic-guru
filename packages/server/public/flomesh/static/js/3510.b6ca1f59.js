"use strict";(self.webpackChunkflomesh_load_balancer=self.webpackChunkflomesh_load_balancer||[]).push([[3510],{990:function(t,e,a){a.d(e,{Z:function(){return d}});var i=a(66252);const p={class:"DashboardCore"};var s=a(56912),o={name:"Dashboard",i18n:a(89234),components:{DashboardCore:s.Z},props:["pageId","prometheus","apply","params","hideAdd","init","defaultWidget"],data(){return{prometheusVal:null}},computed:{},watch:{prometheus(t){this.prometheusVal=t}},created(){},mounted(){this.prometheusVal=this.prometheus},methods:{prometheusChange(){this.$emit("update:prometheus",this.prometheusVal),this.$emit("prometheusChange",this.prometheusVal)}}};var d=(0,a(83744).Z)(o,[["render",function(t,e,a,s,o,d){const n=(0,i.up)("DashboardCore");return(0,i.wg)(),(0,i.iD)("div",p,[(0,i.Wm)(n,{"hide-add":a.hideAdd,init:a.init,"hide-head":!0,"page-id":a.pageId,params:a.params,kind:a.apply,prometheus:o.prometheusVal,"onUpdate:prometheus":e[0]||(e[0]=t=>o.prometheusVal=t),onPrometheusChange:d.prometheusChange,apply:a.apply+"."+a.pageId,embed:!0,"default-widget":a.defaultWidget},null,8,["hide-add","init","page-id","params","kind","prometheus","onPrometheusChange","apply","default-widget"])])}]])},66022:function(t,e,a){a.d(e,{Z:function(){return u}});var i=a(66252),p=a(3577);const s={class:"search-content"},o={class:"mb-5"},d={class:"content"};a(57658);var n=a(60234),l=a(69596),r={name:"ApplicationListResults",i18n:a(89234),components:{CardList:l.Z},props:["apps","total","pageNo","pageSize","loading"],data(){return{BookmarkSvg:n,pageNoVal:0,key:"",projects:[]}},computed:{},watch:{pageNoVal:{deep:!0,handler(){this.$emit("update:pageNo",this.pageNoVal)}}},mounted(){this.pageNoVal=this.pageNo},methods:{detail(t,e,a){this.$router.push({path:"/openapi/application/detail/"+a.id})},remove(t,e,a){this.$gql.mutation(`deleteApplication(id:${a.id}){data{id}}`).then((()=>{this.$message.success(this.$t("Deleted successfully"),3),this.search()}))},search(t,e,a){this.$emit("search",t,e,a)}}};var u=(0,a(83744).Z)(r,[["render",function(t,e,a,n,l,r){const u=(0,i.up)("a-tag"),c=(0,i.up)("a-avatar"),h=(0,i.up)("a-card-meta"),g=(0,i.up)("CardList"),m=(0,i.up)("a-pagination");return(0,i.wg)(),(0,i.iD)("div",s,[(0,i.Wm)(g,{"result-empty":{status:404,title:t.$t("No data")},loading:a.loading,"data-source":a.apps||[],"hide-action-title":!0,type:"component",actions:[{icon:"EditOutlined",text:t.$t("edit"),call:r.detail},{icon:"DeleteOutlined",text:t.$t("delete"),call:r.remove,hide:!0,permissionWhere:["application:delete:project:","project","application:delete"]}]},{default:(0,i.w5)((({item:e})=>[(0,i.Wm)(h,null,{title:(0,i.w5)((()=>[(0,i._)("div",o,[(0,i.Uk)((0,p.zw)(e.name)+" ",1),e.project?((0,i.wg)(),(0,i.j4)(u,{key:0,color:"pink",class:"result-tag"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,p.zw)(e.project.name),1)])),_:2},1024)):(0,i.kq)("",!0)])])),avatar:(0,i.w5)((()=>[(0,i.Wm)(c,{class:"CodeSandboxOutlined avatar-img primary",size:"small",shape:"square",src:l.BookmarkSvg},null,8,["src"])])),description:(0,i.w5)((()=>[])),_:2},1024),(0,i._)("div",d,[(0,i._)("div",null,[(0,i._)("p",null,"API "+(0,p.zw)(t.$t("Running")),1),(0,i._)("p",null,(0,p.zw)(e.apis?e.apis.length:0),1)]),(0,i._)("div",null,[(0,i._)("p",null,"API "+(0,p.zw)(t.$t("total")),1),(0,i._)("p",null,(0,p.zw)(e.apis?e.apis.length:0),1)])])])),_:1},8,["result-empty","loading","data-source","actions"]),a.pageNo>=0?((0,i.wg)(),(0,i.j4)(m,{key:0,onChange:r.search,current:l.pageNoVal,"onUpdate:current":e[0]||(e[0]=t=>l.pageNoVal=t),total:a.total,"page-size":a.pageSize,"show-less-items":""},null,8,["onChange","current","total","page-size"])):(0,i.kq)("",!0)])}],["__scopeId","data-v-1e49c432"]])},1222:function(t,e,a){a.r(e),a.d(e,{default:function(){return c}});var i=a(66252),p=a(3577);a(57658);var s=a(47556),o=a(87484),d=a(33224),n=a(66022),l=a(38189),r=a(990),u={name:"ProjectDetail",components:{ApiListResults:d.Z,ApplicationListResults:n.Z,UsersResults:l.Z,ProjectBaseDetail:o.Z,EmbedDashboard:r.Z},i18n:a(89234),data(){return{DEFAULT_PROJECT:s.O7,activeKey:"1",pid:"",detail:{users:[],apis:[],applications:[],id:"",name:"",organization:null},loading:!0,apiLoading:!0,appLoading:!0,subApis:[]}},computed:{},created(){this.pid=this.$route.params.id||""},methods:{remove(t,e,a){this.$refs.projectBase.delProjectUser(a.id)},setting(t,e,a){this.$refs.projectBase.showProjectRole(a)},getDetail(t){this.detail=t.detail,this.apiLoading=!0,this.appLoading=!0,this.pid&&(this.$gql.query(`applications(filters: {project:{id:{eq:${this.pid}}}}, pagination:{start:0,limit: ${this.$DFT_LIMIT}}){\n\t\t\t\t\t\t\tdata{id,attributes{name,apis{data{id}}}}\n\t\t\t\t\t\t}`).then((t=>{this.appLoading=!1,this.detail.applications=t.data||[]})),this.$gql.query(`apis(pagination:{start:0,limit: ${this.$DFT_LIMIT}},filters: {project:{id:{eq:${this.pid}}}}){\n\t\t\t\t\t\t\tdata{id,attributes{name,spec,step,status,chart,applications{data{id}}}}\n\t\t\t\t\t\t}`).then((t=>{this.apiLoading=!1,this.detail.apis=t.data||[]}))),this.loading=t.loading},importApi(){importApi(this)},addApp(){this.$router.push({path:"/openapi/application/create"})},addApi(){this.$router.push({path:"/openapi/api/create"})},getSubApis(t){this.subApis=t}}};var c=(0,a(83744).Z)(u,[["render",function(t,e,a,s,o,d){const n=(0,i.up)("a-button"),l=(0,i.up)("UsersResults"),r=(0,i.up)("a-tab-pane"),u=(0,i.up)("ApiListResults"),c=(0,i.up)("ApplicationListResults"),h=(0,i.up)("EmbedDashboard"),g=(0,i.up)("a-tabs"),m=(0,i.up)("ProjectBaseDetail"),w=(0,i.Q2)("permission");return(0,i.wg)(),(0,i.j4)(m,{pid:o.pid,"onUpdate:pid":e[1]||(e[1]=t=>o.pid=t),ref:"projectBase",onGetDetail:d.getDetail},{action:(0,i.w5)((()=>[""!=o.pid&&t.$isPro?(0,i.wy)(((0,i.wg)(),(0,i.j4)(n,{key:0,type:"default",onClick:d.addApi},{default:(0,i.w5)((()=>[(0,i.Uk)((0,p.zw)(t.$t("Create API")),1)])),_:1},8,["onClick"])),[[w,["api:create:project:"+o.pid]]]):(0,i.kq)("",!0),""!=o.pid&&t.$isPro?(0,i.wy)(((0,i.wg)(),(0,i.j4)(n,{key:1,type:"default",onClick:d.importApi},{default:(0,i.w5)((()=>[(0,i.Uk)((0,p.zw)(t.$t("Import API")),1)])),_:1},8,["onClick"])),[[w,["api:create:project:"+o.pid]]]):(0,i.kq)("",!0),""!=o.pid&&t.$isPro?(0,i.wy)(((0,i.wg)(),(0,i.j4)(n,{key:2,type:"default",onClick:d.addApp},{default:(0,i.w5)((()=>[(0,i.Uk)((0,p.zw)(t.$t("Create application")),1)])),_:1},8,["onClick"])),[[w,["api:create:project:"+o.pid]]]):(0,i.kq)("",!0)])),tabs:(0,i.w5)((()=>[(0,i.Wm)(g,{type:"card",activeKey:o.activeKey,"onUpdate:activeKey":e[0]||(e[0]=t=>o.activeKey=t)},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{key:"1",tab:t.$t("Project members")},{default:(0,i.w5)((()=>[(0,i.Wm)(l,{loading:o.loading,actions:[{icon:"EditOutlined",text:t.$t("Set Project Role"),call:d.setting,permission:[o.detail.organization?"project:update:organization:"+o.detail.organization:"project:update"]},{icon:"CloseOutlined",hide:!0,text:t.$t("Remove"),call:d.remove,permission:[o.detail.organization?"project:update:organization:"+o.detail.organization:"project:update"]}],users:o.detail.users},null,8,["loading","actions","users"])])),_:1},8,["tab"]),t.$isPro?((0,i.wg)(),(0,i.j4)(r,{key:"2",tab:t.$t("API")},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{ref:"result",embed:!0,loading:o.apiLoading,apis:o.detail.apis,onSubApisChange:d.getSubApis},null,8,["loading","apis","onSubApisChange"])])),_:1},8,["tab"])):(0,i.kq)("",!0),t.$isPro?((0,i.wg)(),(0,i.j4)(r,{key:"3",tab:t.$t("Application")},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{loading:o.appLoading,apps:o.detail.applications},null,8,["loading","apps"])])),_:1},8,["tab"])):(0,i.kq)("",!0),""!=o.pid&&t.$isPro?((0,i.wg)(),(0,i.j4)(r,{key:"5",tab:t.$t("Dashboard")},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{"page-id":o.pid,apply:"project","default-widget":o.DEFAULT_PROJECT,"hide-add":"5"!=o.activeKey},null,8,["page-id","default-widget","hide-add"])])),_:1},8,["tab"])):(0,i.kq)("",!0)])),_:1},8,["activeKey"])])),_:1},8,["pid","onGetDetail"])}]])}}]);