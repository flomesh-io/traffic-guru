"use strict";(self.webpackChunkflomesh_load_balancer=self.webpackChunkflomesh_load_balancer||[]).push([[6776],{62967:function(t,e,a){a.d(e,{Z:function(){return d}});var i=a(66252),s={icon:function(t,e){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M911.9 283.9v.5L835.5 865c-1 8-7.9 14-15.9 14H204.5c-8.1 0-14.9-6.1-16-14l-76.4-580.6v-.6 1.6L188.5 866c1.1 7.9 7.9 14 16 14h615.1c8 0 14.9-6 15.9-14l76.4-580.6c.1-.5.1-1 0-1.5z",fill:e}},{tag:"path",attrs:{d:"M773.6 810.6l53.9-409.4-139.8 86.1L512 252.9 336.3 487.3l-139.8-86.1 53.8 409.4h523.3zm-374.2-189c0-62.1 50.5-112.6 112.6-112.6s112.6 50.5 112.6 112.6v1c0 62.1-50.5 112.6-112.6 112.6s-112.6-50.5-112.6-112.6v-1z",fill:e}},{tag:"path",attrs:{d:"M512 734.2c61.9 0 112.3-50.2 112.6-112.1v-.5c0-62.1-50.5-112.6-112.6-112.6s-112.6 50.5-112.6 112.6v.5c.3 61.9 50.7 112.1 112.6 112.1zm0-160.9c26.6 0 48.2 21.6 48.2 48.3 0 26.6-21.6 48.3-48.2 48.3s-48.2-21.6-48.2-48.3c0-26.6 21.6-48.3 48.2-48.3z",fill:t}},{tag:"path",attrs:{d:"M188.5 865c1.1 7.9 7.9 14 16 14h615.1c8 0 14.9-6 15.9-14l76.4-580.6v-.5c.3-6.4-6.7-10.8-12.3-7.4L705 396.4 518.4 147.5a8.06 8.06 0 00-12.9 0L319 396.4 124.3 276.5c-5.5-3.4-12.6.9-12.2 7.3v.6L188.5 865zm147.8-377.7L512 252.9l175.7 234.4 139.8-86.1-53.9 409.4H250.3l-53.8-409.4 139.8 86.1z",fill:t}}]}},name:"crown",theme:"twotone"},n=a(33058);function r(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?Object(arguments[e]):{},i=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(a).filter((function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})))),i.forEach((function(e){l(t,e,a[e])}))}return t}function l(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var o=function(t,e){var a=r({},t,e.attrs);return(0,i.Wm)(n.Z,r({},a,{icon:s}),null)};o.displayName="CrownTwoTone",o.inheritAttrs=!1;var d=o},77682:function(t,e,a){a.d(e,{Z:function(){return d}});var i=a(66252),s={icon:function(t,e){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 632h128v192H696zm-496 0h128v192H200z",fill:e}},{tag:"path",attrs:{d:"M512 128c-212.1 0-384 171.9-384 384v360c0 13.3 10.7 24 24 24h184c35.3 0 64-28.7 64-64V624c0-35.3-28.7-64-64-64H200v-48c0-172.3 139.7-312 312-312s312 139.7 312 312v48H688c-35.3 0-64 28.7-64 64v208c0 35.3 28.7 64 64 64h184c13.3 0 24-10.7 24-24V512c0-212.1-171.9-384-384-384zM328 632v192H200V632h128zm496 192H696V632h128v192z",fill:t}}]}},name:"customer-service",theme:"twotone"},n=a(33058);function r(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?Object(arguments[e]):{},i=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(a).filter((function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})))),i.forEach((function(e){l(t,e,a[e])}))}return t}function l(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var o=function(t,e){var a=r({},t,e.attrs);return(0,i.Wm)(n.Z,r({},a,{icon:s}),null)};o.displayName="CustomerServiceTwoTone",o.inheritAttrs=!1;var d=o},33601:function(t,e,a){a.d(e,{Z:function(){return d}});var i=a(66252),s={icon:function(t,e){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z",fill:t}},{tag:"path",attrs:{d:"M372.5 256H184v512h656V370.4H492.1z",fill:e}}]}},name:"folder",theme:"twotone"},n=a(33058);function r(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?Object(arguments[e]):{},i=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(a).filter((function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})))),i.forEach((function(e){l(t,e,a[e])}))}return t}function l(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var o=function(t,e){var a=r({},t,e.attrs);return(0,i.Wm)(n.Z,r({},a,{icon:s}),null)};o.displayName="FolderTwoTone",o.inheritAttrs=!1;var d=o},38046:function(t,e,a){a.d(e,{Z:function(){return d}});var i=a(66252),s={icon:function(t,e){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 632H136V232h752v560z",fill:t}},{tag:"path",attrs:{d:"M136 792h752V232H136v560zm472-372c0-4.4 1-8 2.3-8h123.4c1.3 0 2.3 3.6 2.3 8v48c0 4.4-1 8-2.3 8H610.3c-1.3 0-2.3-3.6-2.3-8v-48zm0 144c0-4.4 3.2-8 7.1-8h185.7c3.9 0 7.1 3.6 7.1 8v48c0 4.4-3.2 8-7.1 8H615.1c-3.9 0-7.1-3.6-7.1-8v-48zM216.2 664.6c2.8-53.3 31.9-99.6 74.6-126.1-18.1-20-29.1-46.4-29.1-75.5 0-61.9 49.9-112 111.4-112s111.4 50.1 111.4 112c0 29.1-11 55.6-29.1 75.5 42.6 26.4 71.8 72.8 74.6 126.1a8 8 0 01-8 8.4h-43.9c-4.2 0-7.6-3.3-7.9-7.5-3.8-50.5-46-90.5-97.2-90.5s-93.4 40-97.2 90.5c-.3 4.2-3.7 7.5-7.9 7.5H224c-4.6 0-8.2-3.8-7.8-8.4z",fill:e}},{tag:"path",attrs:{d:"M321.3 463a51.7 52 0 10103.4 0 51.7 52 0 10-103.4 0z",fill:e}},{tag:"path",attrs:{d:"M610.3 476h123.4c1.3 0 2.3-3.6 2.3-8v-48c0-4.4-1-8-2.3-8H610.3c-1.3 0-2.3 3.6-2.3 8v48c0 4.4 1 8 2.3 8zm4.8 144h185.7c3.9 0 7.1-3.6 7.1-8v-48c0-4.4-3.2-8-7.1-8H615.1c-3.9 0-7.1 3.6-7.1 8v48c0 4.4 3.2 8 7.1 8zM224 673h43.9c4.2 0 7.6-3.3 7.9-7.5 3.8-50.5 46-90.5 97.2-90.5s93.4 40 97.2 90.5c.3 4.2 3.7 7.5 7.9 7.5H522a8 8 0 008-8.4c-2.8-53.3-32-99.7-74.6-126.1a111.8 111.8 0 0029.1-75.5c0-61.9-49.9-112-111.4-112s-111.4 50.1-111.4 112c0 29.1 11 55.5 29.1 75.5a158.09 158.09 0 00-74.6 126.1c-.4 4.6 3.2 8.4 7.8 8.4zm149-262c28.5 0 51.7 23.3 51.7 52s-23.2 52-51.7 52-51.7-23.3-51.7-52 23.2-52 51.7-52z",fill:t}}]}},name:"idcard",theme:"twotone"},n=a(33058);function r(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?Object(arguments[e]):{},i=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(a).filter((function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})))),i.forEach((function(e){l(t,e,a[e])}))}return t}function l(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var o=function(t,e){var a=r({},t,e.attrs);return(0,i.Wm)(n.Z,r({},a,{icon:s}),null)};o.displayName="IdcardTwoTone",o.inheritAttrs=!1;var d=o},74353:function(t,e,a){a.d(e,{Z:function(){return d}});var i=a(66252),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372 0-89 31.3-170.8 83.5-234.8l523.3 523.3C682.8 852.7 601 884 512 884zm288.5-137.2L277.2 223.5C341.2 171.3 423 140 512 140c205.4 0 372 166.6 372 372 0 89-31.3 170.8-83.5 234.8z"}}]},name:"stop",theme:"outlined"},n=a(33058);function r(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?Object(arguments[e]):{},i=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(a).filter((function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})))),i.forEach((function(e){l(t,e,a[e])}))}return t}function l(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var o=function(t,e){var a=r({},t,e.attrs);return(0,i.Wm)(n.Z,r({},a,{icon:s}),null)};o.displayName="StopOutlined",o.inheritAttrs=!1;var d=o},34531:function(t,e,a){a.d(e,{Z:function(){return m}});var i=a(66252),s=a(3577);const n={key:0,class:"flex pd-10"},r={key:0,class:"flex-item"},l={class:"flex-item"},o={class:"pl-10"},d=["xlink:href"],c={class:"card-selector-title"};var u=a(85263),p=a(75255),g=a(60459),h={name:"CardSelector",components:{CheckOutlined:p.Z,EnvSelector:g.Z},props:["loading","envFilter","search","options","icon","placement","disabled","value","getTag","svg","col","width","multiple"],emits:["envChange","select"],data(){return{simpleImage:u.Z.PRESENTED_IMAGE_SIMPLE,visible:!1,key:""}},i18n:a(89234),computed:{multipleSelectNum(){let t=0;return this.options.forEach((e=>{e.checked&&t++})),t},filterOptions(){if(this.key){let t=this.options.filter((t=>(t.name||t.username||"").indexOf(this.key)>=0));return t.map((t=>{null==t.checked&&(t.checked=!1)})),t}{let t=this.options;return t.map((t=>{null==t.checked&&(t.checked=!1)})),t}}},watch:{value:{handler(){this.multiple&&this.options.forEach((t=>{t.checked=!!this.value.find((e=>t.id==e.id))}))},deep:!0}},methods:{envChange(t){this.$emit("envChange",t)},multipleSelect(){this.visible=!1;let t=this.options.filter((t=>t.checked));this.$emit("select",t),this.$emit("update:value",t)},select(t){this.multiple?this.options.forEach((e=>{e.id==t.id&&(e.checked=!e.checked)})):(this.visible=!1,this.$emit("update:value",t.id),this.$emit("select",t))}}};var m=(0,a(83744).Z)(h,[["render",function(t,e,a,u,p,g){const h=(0,i.up)("EnvSelector"),m=(0,i.up)("a-input-search"),w=(0,i.up)("a-button"),v=(0,i.up)("a-empty"),f=(0,i.up)("a-skeleton"),b=(0,i.up)("a-card-grid"),y=(0,i.up)("a-card"),k=(0,i.up)("CheckOutlined"),z=(0,i.up)("a-tag"),O=(0,i.up)("a-popover");return(0,i.wg)(),(0,i.j4)(O,{placement:a.placement||"bottom","overlay-class-name":"selector-popover",visible:p.visible,"onUpdate:visible":e[1]||(e[1]=t=>p.visible=t),trigger:"click"},{content:(0,i.w5)((()=>[a.search?((0,i.wg)(),(0,i.iD)("div",n,[a.envFilter?((0,i.wg)(),(0,i.iD)("div",r,[(0,i.Wm)(h,{"no-all":!0,"is-filter":!0,onEnvChange:g.envChange},null,8,["onEnvChange"])])):(0,i.kq)("",!0),(0,i._)("div",l,[(0,i.Wm)(m,{value:p.key,"onUpdate:value":e[0]||(e[0]=t=>p.key=t),class:"full",placeholder:t.$t("search")},null,8,["value","placeholder"])]),(0,i._)("div",o,[a.multiple?((0,i.wg)(),(0,i.j4)(w,{key:0,type:"primary",onClick:g.multipleSelect,disabled:0==g.multipleSelectNum},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(t.$t("Ok")),1)])),_:1},8,["onClick","disabled"])):(0,i.kq)("",!0)])])):(0,i.kq)("",!0),a.loading||0!=g.filterOptions.length?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(v,{key:1,image:p.simpleImage},null,8,["image"])),(0,i._)("div",{class:"overflow-auto scrollbar",style:(0,s.j5)("max-height:"+90*(t.rows||5)+"px")},[a.loading?((0,i.wg)(),(0,i.j4)(y,{key:0,class:"grid-menu",style:(0,s.j5)("width: "+(a.width?a.width:300)+"px")},{default:(0,i.w5)((()=>[(0,i.Wm)(b,{class:"selector-item",style:{width:"100%",padding:"15px"}},{default:(0,i.w5)((()=>[(0,i.Wm)(f,{avatar:"",paragraph:{rows:2}})])),_:1})])),_:1},8,["style"])):((0,i.wg)(),(0,i.j4)(y,{key:1,class:"grid-menu",style:(0,s.j5)("width: "+(a.width?a.width:300)+"px")},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(g.filterOptions,((t,e)=>((0,i.wg)(),(0,i.j4)(b,{class:(0,s.C_)(["selector-item",(a.value==t.id?"selected":"")+(a.disabled&&a.disabled(t)?" disabled":"")]),key:e,value:t.id,style:(0,s.j5)(a.col?"width:"+100/a.col+"%":a.options.length>=3?"width: 33%;":2==a.options.length?"width:50%;":"width:100%;"),onClick:e=>g.select(t)},{default:(0,i.w5)((()=>[t.checked?((0,i.wg)(),(0,i.j4)(k,{key:0,class:"CheckOutlined"})):(0,i.kq)("",!0),(0,i._)("div",{class:(0,s.C_)(a.getTag?"mt-15":"")},[a.icon?((0,i.wg)(),(0,i.j4)((0,i.LL)(a.icon),{key:0,"two-tone-color":"#00adef"})):a.svg?((0,i.wg)(),(0,i.iD)("svg",{key:1,class:(0,s.C_)([a.getTag?"mt-20":"","card-avatar icon"]),"aria-hidden":"true"},[(0,i._)("use",{"xlink:href":a.svg},null,8,d)],2)):(0,i.kq)("",!0),(0,i._)("div",c,(0,s.zw)(t.name||t.username),1)],2),a.getTag&&a.getTag(t)?((0,i.wg)(),(0,i.j4)(z,{key:1,class:"ribbon",color:"#f5f5f5"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(a.getTag(t)),1)])),_:2},1024)):(0,i.kq)("",!0)])),_:2},1032,["class","value","style","onClick"])))),128))])),_:1},8,["style"]))],4)])),default:(0,i.w5)((()=>[(0,i.WI)(t.$slots,"default",{},void 0,!0)])),_:3},8,["placement","visible"])}],["__scopeId","data-v-30bb0bbf"]])},10711:function(t,e,a){a.d(e,{Z:function(){return w}});var i=a(66252),s=a(3577);const n={key:0,class:"permission-card-body"},r={key:1,class:"permission-card-body"},l={key:0},o={class:"inline-block"},d={class:"inline-block relative",style:{left:"10px",top:"-7px"}},c={key:1},u={class:"inline-block"},p=(t=>((0,i.dD)("data-v-21a71ec4"),t=t(),(0,i.Cn)(),t))((()=>(0,i._)("div",{class:"inline-block relative",style:{left:"10px",top:"-7px"}},null,-1)));var g=a(75255),h=a(54367),m={name:"PermissionCard",components:{CheckOutlined:g.Z,CloseOutlined:h.Z},props:["resources"],i18n:a(89234),data(){return{}},computed:{maxResources(){let t=0;return this.resources.forEach((e=>{t=t>e.actions.length?t:e.actions.length})),t}},created(){},mounted(){},methods:{}};var w=(0,a(83744).Z)(m,[["render",function(t,e,a,g,h,m){const w=(0,i.up)("a-card-grid"),v=(0,i.up)("CheckOutlined"),f=(0,i.up)("CloseOutlined"),b=(0,i.up)("a-card");return(0,i.wg)(),(0,i.j4)(b,{class:"grid-menu nopd small-grid-menu",bordered:!1},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.resources,((e,g)=>((0,i.wg)(),(0,i.iD)("div",{key:g},["project"!=e.type||0!=g&&a.resources[g-1].project?.id==e.project.id?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",n,(0,s.zw)(t.$t("Project"))+":"+(0,s.zw)(e.project.name),1)),"organization"!=e.type||0!=g&&a.resources[g-1].organization?.id==e.organization.id?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",r,(0,s.zw)(t.$t("Organization"))+":"+(0,s.zw)(e.organization.name),1)),(0,i.Wm)(w,{class:"flex-item permission-card-resource",style:(0,s.j5)("width:"+Math.floor(1e3/(m.maxResources+1))/10+"%")},{default:(0,i.w5)((()=>[(0,i._)("b",null,(0,s.zw)(t.$t(e.name)),1)])),_:2},1032,["style"]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(m.maxResources,((a,n)=>((0,i.wg)(),(0,i.j4)(w,{key:n,class:"flex-item permission-card-action",style:(0,s.j5)("width:"+Math.floor(1e3/(m.maxResources+1))/10+"%")},{default:(0,i.w5)((()=>[e.actions.length>n?((0,i.wg)(),(0,i.iD)("div",l,[(0,i._)("div",o,[e.actions[n].enabled?((0,i.wg)(),(0,i.j4)(v,{key:0,class:"success"})):((0,i.wg)(),(0,i.j4)(f,{key:1,class:"danger"}))]),(0,i._)("div",d,(0,s.zw)(t.$t(e.actions[n].name)),1)])):((0,i.wg)(),(0,i.iD)("div",c,[(0,i._)("div",u,[(0,i.Wm)(f,{class:"danger",style:{opacity:"0"}})]),p]))])),_:2},1032,["style"])))),128))])))),128))])),_:1})}],["__scopeId","data-v-21a71ec4"]])},13682:function(t,e,a){a.r(e),a.d(e,{default:function(){return bt}});var i=a(66252),s=a(3577),n=a(49963);const r=(t=>((0,i.dD)("data-v-be2324e4"),t=t(),(0,i.Cn)(),t))((()=>(0,i._)("div",null,null,-1))),l={class:"flex min-height-200"},o={class:"flex-item"},d=["title"],c={class:"title"},u={class:"rightSpan"},p={class:"role-name"},g=["onClick"],h={class:"flex-item"},m=["title"],w={class:"title"},v={class:"rightSpan"},f={class:"role-name"},b=["onClick"],y={key:0},k=["onClick"],z={key:0},O={key:1},$={key:0},_={key:3},j=["onClick"],S={key:0,class:"pd-10"},C={key:0},P={key:0},W={key:0,class:"width-60"},R=["onClick"],U=["onClick"],q={key:1,class:"font-green icon-menu width-60"},x={key:2,class:"font-indianred icon-menu width-60"};a(57658);var T=a(30631),I=a(99684),D=a(44924),M=a(62611),E=a(38046),Z=a(62967),L=a(77682),A=a(2692),H=a(54367),V=a(5009),N=a(75255),Y=a(39694),F=a(74353),K=a(33601),G=a(61103),B=a(34531),Q=a(71900);const J={class:"task-group"},X={class:"task-head"},tt={class:"title"},et={key:0},at={class:"actions float-right"},it={class:"task-content"};var st=a(9980),nt=a.n(st),rt=a(85263),lt={name:"TaskGroup",components:{draggable:nt()},props:["title","group","list","handle"],data(){return{simpleImage:rt.Z.PRESENTED_IMAGE_SIMPLE,innerList:[]}},computed:{count(){return this.innerList.length}},watch:{list:{immediate:!0,deep:!0,handler(){this.innerList=this.list}}},methods:{updateList(){this.$emit("update:list",this.innerList)},addList(t){this.$emit("update:list",this.innerList),this.$emit("change",t)}}},ot=a(83744);var dt=(0,ot.Z)(lt,[["render",function(t,e,a,n,r,l){const o=(0,i.up)("a-empty"),d=(0,i.up)("draggable");return(0,i.wg)(),(0,i.iD)("div",J,[(0,i._)("div",X,[(0,i._)("h3",tt,[(0,i.Uk)((0,s.zw)(a.title)+" ",1),l.count?((0,i.wg)(),(0,i.iD)("span",et,(0,s.zw)(l.count),1)):(0,i.kq)("",!0)]),(0,i._)("div",at,[(0,i.WI)(t.$slots,"actions")])]),(0,i._)("div",it,[(0,i.Wm)(d,{group:a.group,sort:!0,scroll:!0,"scroll-speed":2,animation:150,"ghost-class":"dragable-ghost","chosen-class":"dragable-chose","drag-class":"dragable-drag","item-key":"id",modelValue:r.innerList,"onUpdate:modelValue":e[0]||(e[0]=t=>r.innerList=t),handle:a.handle,onUpdate:l.updateList,onAdd:l.addList},{footer:(0,i.w5)((()=>[r.innerList&&0!=r.innerList.length?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(o,{key:0,image:r.simpleImage},null,8,["image"]))])),item:(0,i.w5)((({element:e})=>[(0,i._)("div",null,[(0,i.WI)(t.$slots,"item",{data:e})])])),_:3},8,["group","modelValue","handle","onUpdate","onAdd"])])])}]]),ct=a(10711),ut=a(96486),pt=a.n(ut),gt=a(33907),ht=a(93099);const mt=[{key:"as",dataIndex:"name"},{key:"Organization",width:130,dataIndex:"organizationName"},{key:"Namespace",width:130,dataIndex:"namespace"},{key:"Registry",dataIndex:"registryName"}],wt=[...mt,{key:"Action",width:130,dataIndex:"action"}],vt=[...mt,{key:"Subscribe",dataIndex:"subscribeOrgCnt"},{key:"Applies",dataIndex:"appliesCnt"},{key:"Action",width:130,dataIndex:"action"}];var ft={name:"OrganizationDetail",components:{EyeOutlined:T.Z,HeadInfo:Q.Z,PageLayout:G.Z,PlusCircleTwoTone:I.Z,UserOutlined:D.Z,PartitionOutlined:M.Z,IdcardTwoTone:E.Z,CrownTwoTone:Z.Z,CustomerServiceTwoTone:L.Z,TaskGroup:dt,MoreOutlined:A.Z,CloseOutlined:H.Z,SettingOutlined:V.Z,CheckOutlined:N.Z,PermissionCard:ct.Z,CardSelector:B.Z,SwapOutlined:Y.Z,StopOutlined:F.Z,FolderTwoTone:K.Z},i18n:a(89234),data(){return{PartitionOutlined:M.Z,UserOutlined:D.Z,FolderTwoTone:K.Z,pid:"",users:[],targetSvc:null,org:{whiteOrgs:[]},serviceType:1,columnsFree:wt,columnsPro:vt,services:[],subscribeServices:[],isEdit:!1,selectProjects:null,selectUsers:null,roles:[],visible:!1,projectVisible:!1,organizationVisible:!1,permissionPayload:{userOrganizationRole:null},payload:{id:"",name:"",description:""},white:{loading:!0,key:"",pageSize:10,pageNo:1,total:0,list:[]},bindTarget:{},editorIsCreate:!0,workload:[],projects:[],pageSize:4,pageNo:1,total:0,loading:!0,activities:[],config:{},teams:[],resources:[],organizationRoles:[],projectRoles:[],settingVisible:!1,userOrganizationRoles:[],userOrganizationRolesMap:{},simpleImage:rt.Z.PRESENTED_IMAGE_SIMPLE}},computed:{...(0,gt.Se)("account",["user"]),dataColumns(){return(this.$isPro?this.columnsPro:this.columnsFree).map((t=>(t.title=this.$t(t.key),t)))},dataleftColumns(){return[{dataIndex:"name",title:this.$t("Name")},{dataIndex:"userLength",title:this.$t("Users")}]},datarightColumns(){return[{dataIndex:"name",title:this.$t("Name")},{dataIndex:"userLength",title:this.$t("Users")}]}},created(){this.pid=this.$route.params.id||""},mounted(){this.loaddata(),this.loadroles(),this.getWhiteOrgs()},activated(){},methods:{projectChange(){let t=[];this.org.users.forEach((e=>{t.find((t=>t.id==e.id))||t.push(e)})),this.org.users=t},orgChange(){let t=[];this.org.users.forEach((e=>{t.find((t=>t.id==e.id))||t.push(e)})),this.org.users=t},detailsvc(t,e){this.$router.push({path:`/fsm/service/detail/${e}/${t}`})},changeScope(t){this.$gql.mutation(`updateService(id:${t.id}, data: $data){data{id}}`,{data:{scope:t.scope}},{data:"ServiceInput"}).then((()=>{this.$message.success(this.$t("Save successfully"),3)}))},approvalApply(t,e){let a=[],i=!1;this.$gql.query(`getService(id: ${t.id}){data{id,attributes{subscribeOrgs{data{id,attributes{name}}}}}}`).then((s=>{s.data.subscribeOrgs.forEach((t=>{e.applyOrganization.id==t.id&&(i=!0),a.push(t.id)})),i||a.push(e.applyOrganization.id),this.$gql.mutation(`updateService(id:${t.id}, data: $data){data{id}}`,{data:{subscribeOrgs:a}},{data:"ServiceInput!"}).then((()=>{this.$gql.mutation(`updateSubscribeServiceApply(id: ${e.id},data:{status: 1}){data{id}}`).then((()=>{this.loaddata(!0),this.$message.success(this.$t("Save successfully"),3)}))}))}))},refuseApply(t,e){this.$gql.mutation(`updateSubscribeServiceApply(id: ${e.id},data:{status: 2}){data{id}}`).then((()=>{this.$message.success(this.$t("Save successfully"),3),this.loaddata(!0)}))},removeSubscribe(t,e){let a=[];this.$gql.query(`getService(id: ${t.id}){data{id,attributes{subscribeOrgs{data{id,attributes{name}}}}}}`).then((i=>{i.data.subscribeOrgs.forEach((t=>{e.id!=t.id&&a.push(t.id)})),this.$gql.mutation(`updateService(id:${t.id}, data: $data){data{id}}`,{data:{subscribeOrgs:a}},{data:"ServiceInput!"}).then((()=>{this.$message.success(this.$t("Save successfully"),3),this.loaddata(!0)}))}))},unsubscribe(t,e){this.targetSvc=null,this.settingVisible=!1;let a=[];this.$gql.query(`getService(id: ${t.id}){data{id,attributes{subscribeOrgs{data{id,attributes{name}}}}}}`).then((i=>{i.data.subscribeOrgs.forEach((t=>{e.id!=t.id&&a.push(t.id)})),this.$gql.mutation(`updateService(id:${t.id}, data: $data){data{id}}`,{data:{subscribeOrgs:a}},{data:"ServiceInput!"}).then((()=>{this.$message.success(this.$t("Save successfully"),3),this.loaddata(!0)}))}))},saveSetting(){this.targetSvc=null,this.settingVisible=!1},closeSetting(){this.targetSvc=null,this.settingVisible=!1},showSetting(t){this.targetSvc=t,this.settingVisible=!0},svcremove(t){this.$gql.mutation(`deleteServiceSync(id:${t}){data{id}}`).then((()=>{this.$message.success(this.$t("Deleted successfully"),3),this.search()}))},svcdetail(t,e){this.$router.push({path:`/fsm/service/detail/${e}/${t}`})},saveUserOrganizationRoles(t,e,a,i,s){let n=!1,r={user:t,organization:e,role:i,type:s};if("organization"==s?this.userOrganizationRolesMap[s+"-"+t]&&(n=!0,r.id=this.userOrganizationRolesMap[s+"-"+t].id):(r.project=a,this.userOrganizationRolesMap[`${s}-${a}-${t}`]&&(n=!0,r.id=this.userOrganizationRolesMap[`${s}-${a}-${t}`].id)),n){const t=r.id;delete r.id,this.$gql.mutation(`updateUserOrganizationRole(id:${t}, data: $data){data{id}}`,{data:r},{data:"UserOrganizationRoleInput!"}).then((()=>{this.$message.success(this.$t("Modified successfully"),3),this.permissionPayload.userOrganizationRole=null,this.resources=[],this.projectVisible=!1,this.organizationVisible=!1,this.loadUserOrganizationRoles()}))}else delete r.id,this.$gql.mutation("createUserOrganizationRole(data: $data){data{id}}",{data:r},{data:"UserOrganizationRoleInput!"}).then((()=>{this.$message.success(this.$t("Created successfully"),3),this.permissionPayload.userOrganizationRole=null,this.resources=[],this.projectVisible=!1,this.organizationVisible=!1,this.loadUserOrganizationRoles()}))},deleteUserOrganizationRoles(t){this.$gql.mutation(`deleteUserOrganizationRole(id:${t}){data{id}}`).then((()=>{this.$message.success(this.$t("Deleted successfully"),3),this.loadUserOrganizationRoles()}))},onWhiteChange(t){this.org.whiteOrgs=t,this.$gql.mutation(`updateOrganization(id:${this.pid}, data: $data){data{id}}`,{data:{whiteOrgs:t}},{data:"OrganizationInput!"}).then((()=>{}))},whiteSearch(t,e){"left"==t&&(this.white.key=e,this.getWhiteOrgs())},getWhiteOrgs(t,e){this.getOrgs(this.white,t,e)},getOrgs(t,e,a){e&&(t.pageNo=e,t.pageSize=a),t.loading=!0;let i={name:{contains:this.key}};this.$gql.query("organizations(pagination:{start: 0, limit: 999}, filters: $filters){\n\t\t\t\t\t\tdata{id,attributes{name,users{data{id,attributes{username}}}}},\n\t\t\t\t\t\tmeta{pagination{total}}\n\t\t\t\t\t}",{filters:i},{filters:"OrganizationFiltersInput"}).then((e=>{t.list=e.data,t.list.forEach((t=>{t.users?t.userLength=t.users.length:t.userLength="-",t.key=`${t.id}`})),t.total=e.pagination.total,t.loading=!1}))},setPermissionPayload(t,e,a,i,s){this.permissionPayload.userOrganizationRole=null,this.resources=[],"organization"==s?this.userOrganizationRolesMap[s+"-"+t]&&(this.permissionPayload.userOrganizationRole=this.userOrganizationRolesMap[s+"-"+t].role.id):this.userOrganizationRolesMap[`${s}-${a}-${t}`]&&(this.permissionPayload.userOrganizationRole=this.userOrganizationRolesMap[`${s}-${a}-${t}`].role.id),this.setDefaultResources()},setDefaultResources(){if(this.permissionPayload.userOrganizationRole){let t=this.permissionPayload.userOrganizationRole;(0,ht.Yj)({id:t}).then((t=>{this.resources=t.permissions}))}},loadUserOrganizationRoles(){this.userOrganizationRoles=[],this.userOrganizationRolesMap={};const t=this.pid;this.$gql.query(`userOrganizationRoles(pagination:{limit: ${this.$DFT_LIMIT}},filters:{organization:{id:{eq:${t}}}}){data{id,attributes{\n\t\t\t\t\t\ttype,\n\t\t\t\t\t\tproject{data{id,attributes{name}}},\n\t\t\t\t\t\tuser{data{id,attributes{username}}},\n\t\t\t\t\t\trole{data{id,attributes{name}}}\n\t\t\t\t\t}}}`).then((t=>{this.userOrganizationRoles=t.data,t.data.forEach((t=>{"organization"==t.type&&t.user?this.userOrganizationRolesMap[`organization-${t.user.id}`]=t:"project"==t.type&&t.user&&(this.userOrganizationRolesMap[`project-${t.project.id}-${t.user.id}`]=t)}))}))},loadroles(){this.loadUserOrganizationRoles(),this.organizationRoles=[],this.$gql.query('usersPermissionsRoles(filters:{type:{eq:"organization"}}){data{id,attributes{name,type}}}').then((t=>{this.organizationRoles=t.data})),this.projectRoles=[],this.$gql.query('usersPermissionsRoles(filters:{type:{eq:"project"}}){data{id,attributes{name,type}}}').then((t=>{this.projectRoles=t.data}))},saveProjectChange(t,e){const a=t.clone.querySelector(".userline").title.split(",");this.addProjectUser(a[0],e,a[1])},addProject(){let t=[];this.org.projects.forEach((e=>{t.push(e.id)})),t.push(this.selectProjects),this.selectProjects=null,this.updateOrgProject(this.org.id,t)},removeProject(t,e){let a=[];e.projects.forEach((e=>{t!=e.id&&a.push(e.id)})),this.updateOrgProject(e.id,a)},updateOrgProject(t,e){this.$gql.mutation(`updateOrganization(id:${t}, data: $data){data{id}}`,{data:{projects:e}},{data:"OrganizationInput!"}).then((()=>{this.loaddata(!0)}))},addUser(){let t=[];this.org.users.forEach((e=>{t.push(e.id)})),t.push(this.selectUsers),this.selectUsers=null,this.updateOrgUser(this.org.id,t)},delUser(t,e){let a=[],i=[];e.users.forEach((e=>{t!=e.id&&(a.push(e),i.push(e.id))})),e.users=a,this.updateOrgUser(e.id,i)},updateOrgUser(t,e){this.$gql.mutation(`updateOrganization(id:${t}, data: $data){data{id}}`,{data:{users:e}},{data:"OrganizationInput!"}).then((()=>{this.loaddata(!0)}))},addProjectUser(t,e){let a=[],i=[];e.users.forEach((t=>{a.find((e=>e.id==t.id))||(a.push(t),i.push(t.id))})),a.find((e=>e.id==t))||i.push(t),e.users=a,this.updateProjectUser(e.id,i)},delProjectUser(t,e){let a=[],i=[];e.users.forEach((e=>{t.id!=e.id&&(a.push(e),i.push(e.id))})),e.users=a,this.updateProjectUser(e.id,i)},updateProjectUser(t,e){let a={users:e};this.$gql.mutation(`updateProject(id:${t}, data: $data){data{id}}`,{data:a},{data:"ProjectInput!"}).then((()=>{this.loaddata(!0)}))},handleOk(){let t=pt().cloneDeep(this.payload);if(this.isEdit){const e=t.id;delete t.id,this.$gql.mutation(`updateOrganization(id:${e}, data: $data){data{id}}`,{data:t},{data:"OrganizationInput!"}).then((()=>{this.visible=!1,this.$message.success(this.$t("Modified successfully"),3),this.loaddata(!0)}))}else delete t.id,this.$gql.mutation("createOrganization(data: $data){data{id}}",{data:t},{data:"OrganizationInput!"}).then((()=>{this.visible=!1,this.$message.success(this.$t("Created successfully"),3),this.loaddata(!0)}))},getRowSelection(t,e,a,i){return{getCheckboxProps:e=>({disabled:t||e.disabled}),onSelectAll(t,e){const i=e.filter((t=>!t.disabled)).map((({key:t})=>t));a(i,t)},onSelect(t,e){i(t.key,e)},selectedRowKeys:e}},removeOrg(t){this.$gql.mutation(`deleteOrganization(id:${t}){data{id}}`).then((()=>{this.$message.success(this.$t("Deleted successfully"),3),this.loaddata(!0)}))},goProject(t){this.$router.push({path:"/system/projects/detail/"+t})},loaddata(t){t||(this.loading=!0),this.$gql.query(`organization(id: ${this.pid}){data{id,attributes{\n\t\t\t\t\t\tname,\n\t\t\t\t\t\twhiteOrgs{data{id,attributes{name}}},\n\t\t\t\t\t\tparent{data{id,attributes{name}}},\n\t\t\t\t\t\tdescription,\n\t\t\t\t\t\tprojects{data{id,attributes{\n\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\tusers{data{id,attributes{\n\t\t\t\t\t\t\t\tusername,\n\t\t\t\t\t\t\t\ttype,\n\t\t\t\t\t\t\t\trole{data{id,attributes{name}}}\n\t\t\t\t\t\t\t}}}\n\t\t\t\t\t\t}}},\n\t\t\t\t\t\tusers{data{id,attributes{\n\t\t\t\t\t\t\tusername,\n\t\t\t\t\t\t\ttype,\n\t\t\t\t\t\t\trole{data{id,attributes{name}}}\n\t\t\t\t\t\t}}},\n\t\t\t\t\t\tsubscribeServices{data{id,attributes{\n\t\t\t\t\t\t\tuid,\n\t\t\t\t\t\t\tfleet{data{id,attributes{name}}},\n\t\t\t\t\t\t\torganization{data{id,attributes{name}}},\n\t\t\t\t\t\t\tsubscribeOrgs{data{id,attributes{name}}},\n\t\t\t\t\t\t\tnamespace,\n\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\tregistry{data{id,attributes{name}}},\n\t\t\t\t\t\t\tcontent,\n\t\t\t\t\t\t\tcreatedAt\n\t\t\t\t\t\t}}},\n\t\t\t\t\t\tservices{data{id,attributes{\n\t\t\t\t\t\t\tuid,\n\t\t\t\t\t\t\tscope,\n\t\t\t\t\t\t\tsubscribeServiceApplies{data{id,attributes{\n\t\t\t\t\t\t\t\tstatus,\n\t\t\t\t\t\t\t\tupdatedAt,\n\t\t\t\t\t\t\t\tapplyUser{data{id,attributes{\n\t\t\t\t\t\t\t\t\tusername\n\t\t\t\t\t\t\t\t}}},\n\t\t\t\t\t\t\t\tapplyOrganization{data{id,attributes{name}}},\n\t\t\t\t\t\t\t\tapproveOrganization{data{id,attributes{name}}}\n\t\t\t\t\t\t\t}}},\n\t\t\t\t\t\t\tfleet{data{id,attributes{name}}},\n\t\t\t\t\t\t\torganization{data{id,attributes{name}}},\n\t\t\t\t\t\t\tsubscribeOrgs{data{id,attributes{name}}},\n\t\t\t\t\t\t\tnamespace,\n\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\tregistry{data{id,attributes{name}}},\n\t\t\t\t\t\t\tcontent,\n\t\t\t\t\t\t\tcreatedAt\n\t\t\t\t\t\t}}}\n\t\t\t\t\t}}}`).then((t=>{this.org=t.data,this.org.whiteOrgs=t.data.whiteOrgs.map((t=>t.id)),this.services=this.reset(t.data.services,1),this.subscribeServices=this.reset(t.data.subscribeServices,2),this.loading=!1})),this.loadprojects(),this.loadusers()},reset(t,e){for(let a=0;a<t.length;a++){let i=t[a].content;t[a].uid=i.metadata.uid,t[a].name=i.metadata.name,t[a].organizationName=t[a].organization?t[a].organization.name:"-",t[a].registryName=t[a].registry?t[a].registry.name:"-",t[a].namespace=i.metadata.namespace,t[a].labels=i.metadata.labels,t[a].creationTimestamp=new Date(i.metadata.creationTimestamp).toLocaleString(),t[a].appliesCnt=0,t[a].subscribeServiceApplies&&t[a].subscribeServiceApplies.forEach((e=>{0==e.status&&t[a].appliesCnt++})),t[a].subscribeOrgCnt=t[a].subscribeOrgs.length,this.serviceType==e&&this.targetSvc&&this.targetSvc.id==t[a].id&&(this.targetSvc=t[a])}return t},loadusers(){this.$gql.query("usersPermissionsUsers{data{id,attributes{username,userOrganizations{data{id}},phone,email,type}}}").then((t=>{this.users=t.data}))},loadprojects(){this.$gql.query("projects(filters:{organization:{id: {null: true}}}){data{id,attributes{name,organization{data{id,attributes{name}}}}}}").then((t=>{this.projects=t.data}))}}};var bt=(0,ot.Z)(ft,[["render",function(t,e,a,T,I,D){const M=(0,i.up)("PlusCircleTwoTone"),E=(0,i.up)("CardSelector"),Z=(0,i.up)("HeadInfo"),L=(0,i.up)("a-skeleton"),A=(0,i.up)("a-empty"),H=(0,i.up)("EyeOutlined"),V=(0,i.up)("a-divider"),N=(0,i.up)("a-popconfirm"),Y=(0,i.up)("a-menu-item"),F=(0,i.up)("a-menu"),K=(0,i.up)("MoreOutlined"),G=(0,i.up)("a-dropdown"),B=(0,i.up)("CrownTwoTone"),Q=(0,i.up)("CustomerServiceTwoTone"),J=(0,i.up)("IdcardTwoTone"),X=(0,i.up)("a-tag"),tt=(0,i.up)("SwapOutlined"),et=(0,i.up)("a-select-option"),at=(0,i.up)("a-select"),it=(0,i.up)("PermissionCard"),st=(0,i.up)("a-button"),nt=(0,i.up)("a-popover"),rt=(0,i.up)("TaskGroup"),lt=(0,i.up)("a-card-grid"),ot=(0,i.up)("a-card"),dt=(0,i.up)("a-col"),ct=(0,i.up)("a-row"),ut=(0,i.up)("a-tab-pane"),pt=(0,i.up)("a-radio"),gt=(0,i.up)("a-radio-group"),ht=(0,i.up)("a-badge"),mt=(0,i.up)("SettingOutlined"),wt=(0,i.up)("a-table"),vt=(0,i.up)("CloseOutlined"),ft=(0,i.up)("a-descriptions-item"),bt=(0,i.up)("a-descriptions"),yt=(0,i.up)("PartitionOutlined"),kt=(0,i.up)("a-list-item-meta"),zt=(0,i.up)("StopOutlined"),Ot=(0,i.up)("a-list-item"),$t=(0,i.up)("a-list"),_t=(0,i.up)("CheckOutlined"),jt=(0,i.up)("a-tabs"),St=(0,i.up)("a-transfer"),Ct=((0,i.up)("UserOutlined"),(0,i.up)("FolderTwoTone"),(0,i.up)("PageLayout")),Pt=(0,i.Q2)("permission");return(0,i.wg)(),(0,i.j4)(Ct,{title:I.org.name||"",avatar:I.PartitionOutlined},{headerContent:(0,i.w5)((()=>[r])),extra:(0,i.w5)((()=>[(0,i.wy)(((0,i.wg)(),(0,i.j4)(Z,{class:"split-right",title:t.$t("Add Project")},{body:(0,i.w5)((()=>[(0,i._)("div",null,[(0,i.Wm)(E,{search:!0,icon:I.FolderTwoTone,onSelect:D.addProject,options:I.projects,disabled:t=>t.organization_id,value:I.selectProjects,"onUpdate:value":e[0]||(e[0]=t=>I.selectProjects=t)},{default:(0,i.w5)((()=>[(0,i.Wm)(M,{class:"font-primary icon-menu rotate-icon"})])),_:1},8,["icon","onSelect","options","disabled","value"])])])),_:1},8,["title"])),[[Pt,["organization:update"]]]),(0,i.wy)(((0,i.wg)(),(0,i.j4)(Z,{class:"split-right",title:t.$t("Add User")},{body:(0,i.w5)((()=>[(0,i._)("div",null,[(0,i.Wm)(E,{search:!0,icon:I.UserOutlined,onSelect:D.addUser,disabled:t=>{let e=!1;return(t.userOrganizations||[]).forEach((t=>{e=t.id==I.pid||e})),e},options:I.users,value:I.selectUsers,"onUpdate:value":e[1]||(e[1]=t=>I.selectUsers=t)},{default:(0,i.w5)((()=>[(0,i.Wm)(M,{class:"font-primary icon-menu rotate-icon"})])),_:1},8,["icon","onSelect","disabled","options","value"])])])),_:1},8,["title"])),[[Pt,["organization:update"]]])])),default:(0,i.w5)((()=>[(0,i.Wm)(jt,{type:"card"},{default:(0,i.w5)((()=>[(0,i.Wm)(ut,{key:"1",tab:t.$t("Overview")},{default:(0,i.w5)((()=>[(0,i.Wm)(L,{loading:I.loading,active:""},null,8,["loading"]),(0,i.wy)((0,i.Wm)(ct,{class:"row-mg"},{default:(0,i.w5)((()=>[I.loading?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(dt,{key:0,class:"col-pd",xl:24,lg:24,md:24,sm:24,xs:24},{default:(0,i.w5)((()=>[(0,i.Wm)(ot,{class:"card mb-20 nopd"},{default:(0,i.w5)((()=>[(0,i._)("div",l,[(0,i._)("div",o,[I.org.projects&&0!=I.org.projects.length?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(A,{key:0,image:I.simpleImage,description:t.$t("Projects not added"),class:"mt-100"},null,8,["image","description"])),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(I.org.projects,((a,r)=>((0,i.wg)(),(0,i.j4)(lt,{class:"full pd-20",key:r},{default:(0,i.w5)((()=>[(0,i.Wm)(rt,{class:"task-group",handle:".handle",onChange:t=>D.saveProjectChange(t,a,I.org),title:t.$t("Project")+" : "+a.name,group:{name:I.org.name,pull:"clone"},list:a.users,"onUpdate:list":t=>a.users=t},{actions:(0,i.w5)((()=>[(0,i._)("a",null,[(0,i.Wm)(H,{class:"icon-menu",onClick:t=>D.goProject(a.id)},null,8,["onClick"])]),(0,i.Wm)(V,{type:"vertical"}),(0,i.Wm)(G,{placements:"topLeft"},{overlay:(0,i.w5)((()=>[(0,i.Wm)(F,null,{default:(0,i.w5)((()=>[(0,i.Wm)(Y,null,{default:(0,i.w5)((()=>[(0,i.Wm)(N,{placement:"topLeft","ok-text":t.$t("Yes"),"cancel-text":t.$t("No"),onConfirm:t=>D.removeProject(a.id,I.org)},{title:(0,i.w5)((()=>[(0,i._)("p",null,(0,s.zw)(t.$t("Tip")),1),(0,i._)("p",null,(0,s.zw)(t.$t("Are you sure to remove this?")),1)])),default:(0,i.w5)((()=>[(0,i.wy)(((0,i.wg)(),(0,i.iD)("a",null,[(0,i.Uk)((0,s.zw)(t.$t("Remove")),1)])),[[Pt,["organization:update"]]])])),_:2},1032,["ok-text","cancel-text","onConfirm"])])),_:2},1024)])),_:2},1024)])),default:(0,i.w5)((()=>[(0,i._)("a",null,[(0,i.Wm)(K,{class:"icon-menu"})])])),_:2},1024)])),item:(0,i.w5)((r=>[(0,i._)("div",{class:"userline",title:r.data.id+","+r.data.username},[r.data.role&&"Authenticated"==r.data.role.name?((0,i.wg)(),(0,i.j4)(B,{key:0,"two-tone-color":"#00adef",class:"usericon"})):r.data.role&&"Public"==r.data.role.name?((0,i.wg)(),(0,i.j4)(Q,{key:1,class:"usericon"})):((0,i.wg)(),(0,i.j4)(J,{key:2,"two-tone-color":"#00adef",class:"IdcardTwoTone usericon"})),(0,i._)("span",c,[(0,i.Uk)((0,s.zw)(r.data.username)+" ",1),I.userOrganizationRolesMap["project-"+a.id+"-"+r.data.id]?((0,i.wg)(),(0,i.j4)(X,{key:0,color:"blue",closable:!0,onClose:(0,n.iM)((t=>D.deleteUserOrganizationRoles(I.userOrganizationRolesMap["project-"+a.id+"-"+r.data.id].id)),["prevent"]),class:"ml-10"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(I.userOrganizationRolesMap["project-"+a.id+"-"+r.data.id].role.name),1)])),_:2},1032,["onClose"])):(0,i.kq)("",!0)]),(0,i._)("span",u,[(0,i.wy)((0,i.Wm)(tt,{class:"handle move primary"},null,512),[[Pt,["organization:update"]]]),(0,i.wy)((0,i.Wm)(V,{type:"vertical"},null,512),[[Pt,["organization:update"]]]),(0,i.Wm)(G,{trigger:"click",placements:"topRight"},{overlay:(0,i.w5)((()=>[(0,i.Wm)(F,null,{default:(0,i.w5)((()=>[(0,i.Wm)(Y,null,{default:(0,i.w5)((()=>[(0,i.Wm)(nt,{visible:r.visible,"onUpdate:visible":t=>r.visible=t,"destroy-tooltip-on-hide":!0,placement:"topRight",trigger:"click"},{content:(0,i.w5)((()=>[(0,i._)("p",null,[(0,i.Wm)(at,{placeholder:t.$t("unset"),class:"width-500",value:I.permissionPayload.userOrganizationRole,"onUpdate:value":e[2]||(e[2]=t=>I.permissionPayload.userOrganizationRole=t),onChange:D.setDefaultResources},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(I.projectRoles,((t,e)=>((0,i.wg)(),(0,i.j4)(et,{key:e,value:t.id},{default:(0,i.w5)((()=>[(0,i._)("span",null,[(0,i.Wm)(J,{"two-tone-color":"#00adef",class:"font-30"}),(0,i._)("span",p,(0,s.zw)(t.name),1)])])),_:2},1032,["value"])))),128))])),_:1},8,["placeholder","value","onChange"])]),(0,i._)("p",null,[I.resources.length>0?((0,i.wg)(),(0,i.j4)(it,{key:0,resources:I.resources,style:{width:"1200px"}},null,8,["resources"])):(0,i.kq)("",!0)]),(0,i._)("p",null,[(0,i.Wm)(st,{type:"primary",onClick:t=>{D.saveUserOrganizationRoles(r.data.id,I.org.id,a.id,I.permissionPayload.userOrganizationRole,"project"),r.visible=!1}},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(t.$t("Ok")),1)])),_:2},1032,["onClick"])])])),title:(0,i.w5)((()=>[(0,i._)("span",null,(0,s.zw)(t.$t("Set Project Role")),1)])),default:(0,i.w5)((()=>[t.$isPro?(0,i.wy)(((0,i.wg)(),(0,i.iD)("a",{key:0,onClick:t=>D.setPermissionPayload(r.data.id,I.org.id,a.id,I.permissionPayload.userOrganizationRole,"project")},[(0,i.Uk)((0,s.zw)(t.$t("Set Project Role")),1)],8,g)),[[Pt,["organization:update"]]]):(0,i.kq)("",!0)])),_:2},1032,["visible","onUpdate:visible"])])),_:2},1024),(0,i.Wm)(Y,null,{default:(0,i.w5)((()=>[(0,i.Wm)(N,{placement:"topLeft","ok-text":t.$t("Yes"),"cancel-text":t.$t("No"),onConfirm:t=>D.delProjectUser(r.data,a)},{title:(0,i.w5)((()=>[(0,i._)("p",null,(0,s.zw)(t.$t("Tip")),1),(0,i._)("p",null,(0,s.zw)(t.$t("Are you sure to remove this?")),1)])),default:(0,i.w5)((()=>[(0,i.wy)(((0,i.wg)(),(0,i.iD)("a",null,[(0,i.Uk)((0,s.zw)(t.$t("Remove")),1)])),[[Pt,["organization:update"]]])])),_:2},1032,["ok-text","cancel-text","onConfirm"])])),_:2},1024)])),_:2},1024)])),default:(0,i.w5)((()=>[(0,i._)("a",null,[(0,i.Wm)(K,{class:"rightIcon"})])])),_:2},1024)])],8,d)])),_:2},1032,["onChange","title","group","list","onUpdate:list"])])),_:2},1024)))),128))]),(0,i._)("div",h,[(0,i.Wm)(lt,{class:"full pd-20"},{default:(0,i.w5)((()=>[(0,i.Wm)(rt,{class:"task-group",handle:".handle",title:t.$t("Organization members"),group:{name:I.org.name,pull:"clone"},list:I.org.users,"onUpdate:list":e[4]||(e[4]=t=>I.org.users=t),onChange:D.orgChange},{actions:(0,i.w5)((()=>[])),item:(0,i.w5)((a=>[(0,i._)("div",{class:"userline",title:a.data.id+","+a.data.username},[a.data.role&&"Authenticated"==a.data.role.name?((0,i.wg)(),(0,i.j4)(B,{key:0,"two-tone-color":"#00adef",class:"usericon"})):a.data.role&&"Public"==a.data.role.name?((0,i.wg)(),(0,i.j4)(Q,{key:1,"two-tone-color":"#00adef",class:"usericon"})):((0,i.wg)(),(0,i.j4)(J,{key:2,"two-tone-color":"#00adef",class:"IdcardTwoTone usericon"})),(0,i._)("span",w,[(0,i.Uk)((0,s.zw)(a.data.username)+" ",1),I.userOrganizationRolesMap["organization-"+a.data.id]&&I.userOrganizationRolesMap["organization-"+a.data.id].role?((0,i.wg)(),(0,i.j4)(X,{key:0,color:"orange",closable:!0,onClose:(0,n.iM)((t=>D.deleteUserOrganizationRoles(I.userOrganizationRolesMap["organization-"+a.data.id].id)),["prevent"]),class:"ml-10"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(I.userOrganizationRolesMap["organization-"+a.data.id].role.name),1)])),_:2},1032,["onClose"])):(0,i.kq)("",!0)]),(0,i._)("span",v,[(0,i.wy)((0,i.Wm)(tt,{class:"handle move primary"},null,512),[[Pt,["organization:update"]]]),(0,i.wy)((0,i.Wm)(V,{type:"vertical"},null,512),[[Pt,["organization:update"]]]),(0,i.Wm)(G,{trigger:"click"},{overlay:(0,i.w5)((()=>[(0,i.Wm)(F,null,{default:(0,i.w5)((()=>[(0,i.Wm)(Y,null,{default:(0,i.w5)((()=>[(0,i.Wm)(nt,{visible:a.visible,"onUpdate:visible":t=>a.visible=t,"destroy-tooltip-on-hide":!0,placement:"topLeft",trigger:"click"},{content:(0,i.w5)((()=>[(0,i._)("p",null,[(0,i.Wm)(at,{placeholder:t.$t("unset"),class:"width-500",value:I.permissionPayload.userOrganizationRole,"onUpdate:value":e[3]||(e[3]=t=>I.permissionPayload.userOrganizationRole=t),onChange:D.setDefaultResources},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(I.organizationRoles,((t,e)=>((0,i.wg)(),(0,i.j4)(et,{key:e,value:t.id},{default:(0,i.w5)((()=>[(0,i._)("span",null,[(0,i.Wm)(J,{"two-tone-color":"#00adef",class:"font-30"}),(0,i._)("span",f,(0,s.zw)(t.name),1)])])),_:2},1032,["value"])))),128))])),_:1},8,["placeholder","value","onChange"])]),(0,i._)("p",null,[I.resources.length>0?((0,i.wg)(),(0,i.j4)(it,{key:0,resources:I.resources},null,8,["resources"])):(0,i.kq)("",!0)]),(0,i._)("p",null,[(0,i.Wm)(st,{type:"primary",onClick:t=>D.saveUserOrganizationRoles(a.data.id,I.org.id,null,I.permissionPayload.userOrganizationRole,"organization")},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(t.$t("Ok")),1)])),_:2},1032,["onClick"])])])),title:(0,i.w5)((()=>[(0,i._)("span",null,(0,s.zw)(t.$t("Set Organization Role")),1)])),default:(0,i.w5)((()=>[(0,i.wy)(((0,i.wg)(),(0,i.iD)("a",{onClick:t=>{D.setPermissionPayload(a.data.id,I.org.id,null,I.permissionPayload.userOrganizationRole,"organization"),a.visible=!1}},[(0,i.Uk)((0,s.zw)(t.$t("Set Organization Role")),1)],8,b)),[[Pt,["organization:update"]]])])),_:2},1032,["visible","onUpdate:visible"])])),_:2},1024),(0,i.Wm)(Y,null,{default:(0,i.w5)((()=>[(0,i.Wm)(N,{placement:"topLeft","ok-text":t.$t("Yes"),"cancel-text":t.$t("No"),onConfirm:t=>D.delUser(a.data.id,I.org)},{title:(0,i.w5)((()=>[(0,i._)("p",null,(0,s.zw)(t.$t("Tip")),1),(0,i._)("p",null,(0,s.zw)(t.$t("Are you sure to remove this?")),1)])),default:(0,i.w5)((()=>[(0,i.wy)(((0,i.wg)(),(0,i.iD)("a",null,[(0,i.Uk)((0,s.zw)(t.$t("Remove")),1)])),[[Pt,["organization:update"]]])])),_:2},1032,["ok-text","cancel-text","onConfirm"])])),_:2},1024)])),_:2},1024)])),default:(0,i.w5)((()=>[(0,i._)("a",null,[(0,i.Wm)(K,{class:"rightIcon"})])])),_:2},1024)])],8,m)])),_:1},8,["title","group","list","onChange"])])),_:1})])])])),_:1})])),_:1}))])),_:1},512),[[n.F8,!I.loading]])])),_:1},8,["tab"]),t.$isPro?((0,i.wg)(),(0,i.j4)(ut,{key:"2",tab:t.$t("Service")},{default:(0,i.w5)((()=>[t.$isPro?((0,i.wg)(),(0,i.j4)(gt,{key:0,value:I.serviceType,"onUpdate:value":e[5]||(e[5]=t=>I.serviceType=t),class:"service-type"},{default:(0,i.w5)((()=>[(0,i.Wm)(pt,{value:1},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(t.$t("My Service")),1)])),_:1}),(0,i.Wm)(pt,{value:2},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(t.$t("Subscribe Service")),1)])),_:1})])),_:1},8,["value"])):(0,i.kq)("",!0),(0,i.Wm)(ct,{gutter:16},{default:(0,i.w5)((()=>[(0,i.Wm)(dt,{span:I.settingVisible?16:24},{default:(0,i.w5)((()=>[(0,i.Wm)(wt,{columns:D.dataColumns,pagination:!1,"data-source":1==I.serviceType?I.services:I.subscribeServices,class:"bg-white"},{bodyCell:(0,i.w5)((({column:e,record:a})=>["name"===e.dataIndex?((0,i.wg)(),(0,i.iD)("div",y,[(0,i._)("a",{href:"javascript:void(0)",onClick:t=>D.detailsvc(a.id,a.namespace)},(0,s.zw)(a.name),9,k)])):"appliesCnt"===e.dataIndex?((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[a.appliesCnt>0?((0,i.wg)(),(0,i.iD)("div",z,[(0,i.Wm)(ht,{count:a.appliesCnt,onClick:t=>D.showSetting(a)},null,8,["count","onClick"])])):((0,i.wg)(),(0,i.iD)("div",O," - "))],64)):"labels"===e.dataIndex?((0,i.wg)(),(0,i.iD)(i.HY,{key:2},[a.labels?((0,i.wg)(),(0,i.iD)("div",$,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(Object.keys(a.labels),((t,e)=>((0,i.wg)(),(0,i.j4)(X,{key:e,closable:!1},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(t)+":"+(0,s.zw)(a.labels[t]),1)])),_:2},1024)))),128))])):(0,i.kq)("",!0)],64)):"action"===e.dataIndex?((0,i.wg)(),(0,i.iD)("div",_,[(0,i._)("a",null,[(0,i.Wm)(mt,{onClick:t=>D.showSetting(a),class:"font-18 mr-10"},null,8,["onClick"])]),(0,i.Wm)(G,null,{overlay:(0,i.w5)((()=>[(0,i.Wm)(F,null,{default:(0,i.w5)((()=>[t.$isPro?(0,i.wy)(((0,i.wg)(),(0,i.j4)(Y,{key:0},{default:(0,i.w5)((()=>[(0,i._)("a",{onClick:t=>D.svcdetail(a.id,a.namespace)},(0,s.zw)(t.$t("edit")),9,j)])),_:2},1024)),[[Pt,["service:find"]]]):(0,i.kq)("",!0),(0,i.Wm)(Y,null,{default:(0,i.w5)((()=>[(0,i.Wm)(N,{placement:"topLeft","ok-text":t.$t("Yes"),"cancel-text":t.$t("No"),onConfirm:t=>D.svcremove(a.id)},{title:(0,i.w5)((()=>[(0,i._)("p",null,(0,s.zw)(t.$t("Tip")),1),(0,i._)("p",null,(0,s.zw)(t.$t("Are you sure to delete this?")),1)])),default:(0,i.w5)((()=>[(0,i.wy)(((0,i.wg)(),(0,i.iD)("a",null,[(0,i.Uk)((0,s.zw)(t.$t("delete")),1)])),[[Pt,["service:delete"]]])])),_:2},1032,["ok-text","cancel-text","onConfirm"])])),_:2},1024)])),_:2},1024)])),default:(0,i.w5)((()=>[(0,i._)("a",null,[(0,i.Wm)(K)])])),_:2},1024)])):(0,i.kq)("",!0)])),_:1},8,["columns","data-source"])])),_:1},8,["span"]),I.settingVisible?((0,i.wg)(),(0,i.j4)(dt,{key:0,span:8},{default:(0,i.w5)((()=>[I.targetSvc?((0,i.wg)(),(0,i.j4)(ot,{key:0,class:"card full nopd",title:I.targetSvc.name},{extra:(0,i.w5)((()=>[(0,i._)("a",{href:"javascript:void(0)",onClick:e[6]||(e[6]=(...t)=>D.closeSetting&&D.closeSetting(...t))},[(0,i.Wm)(vt)])])),default:(0,i.w5)((()=>[(0,i.Wm)(bt,{bordered:"",size:"small"},{default:(0,i.w5)((()=>[(0,i.Wm)(ft,{label:t.$t("Organization"),span:3},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(I.targetSvc.organizationName),1)])),_:1},8,["label"]),1==I.serviceType?((0,i.wg)(),(0,i.j4)(ft,{key:0,label:t.$t("Permission"),span:3},{default:(0,i.w5)((()=>[(0,i.Wm)(gt,{value:I.targetSvc.scope,"onUpdate:value":e[7]||(e[7]=t=>I.targetSvc.scope=t),onChange:e[8]||(e[8]=t=>D.changeScope(I.targetSvc))},{default:(0,i.w5)((()=>[(0,i.Wm)(pt,{value:1},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(t.$t("Public")),1)])),_:1}),(0,i.Wm)(pt,{value:2},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(t.$t("Private")),1)])),_:1})])),_:1},8,["value"])])),_:1},8,["label"])):(0,i.kq)("",!0),2==I.serviceType?((0,i.wg)(),(0,i.j4)(ft,{key:1,label:t.$t("Action"),span:3},{default:(0,i.w5)((()=>[(0,i._)("a",{onClick:e[9]||(e[9]=t=>D.unsubscribe(I.targetSvc,I.org))},(0,s.zw)(t.$t("Unsubscribe")),1)])),_:1},8,["label"])):(0,i.kq)("",!0)])),_:1}),1==I.serviceType?((0,i.wg)(),(0,i.iD)("div",S,[(0,i.Wm)(jt,{type:"card"},{default:(0,i.w5)((()=>[(0,i.Wm)(ut,{key:"1"},{tab:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(t.$t("Subscribe"))+" ",1),I.targetSvc.subscribeOrgCnt>0?((0,i.wg)(),(0,i.iD)("span",C,"("+(0,s.zw)(I.targetSvc.subscribeOrgCnt)+")",1)):(0,i.kq)("",!0)])),default:(0,i.w5)((()=>[(0,i.Wm)($t,{"item-layout":"horizontal","data-source":I.targetSvc.subscribeOrgs},{renderItem:(0,i.w5)((({item:t})=>[(0,i.Wm)(Ot,null,{extra:(0,i.w5)((()=>[(0,i.wy)((0,i.Wm)(zt,{class:"danger icon-menu mr-10",onClick:e=>D.removeSubscribe(I.targetSvc,t)},null,8,["onClick"]),[[Pt,["organization:update"]]])])),default:(0,i.w5)((()=>[(0,i.Wm)(kt,{description:t.description?t.description:"-"},{title:(0,i.w5)((()=>[(0,i._)("a",null,(0,s.zw)(t.name),1)])),avatar:(0,i.w5)((()=>[(0,i.Wm)(yt,{class:"primary"})])),_:2},1032,["description"])])),_:2},1024)])),_:1},8,["data-source"])])),_:1}),(0,i.Wm)(ut,{key:"2"},{tab:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(t.$t("Applies"))+" ",1),I.targetSvc.appliesCnt>0?((0,i.wg)(),(0,i.iD)("span",P,[(0,i.Wm)(ht,{count:I.targetSvc.appliesCnt},null,8,["count"])])):(0,i.kq)("",!0)])),default:(0,i.w5)((()=>[(0,i.Wm)($t,{"item-layout":"horizontal","data-source":I.targetSvc.subscribeServiceApplies},{renderItem:(0,i.w5)((({item:e})=>[(0,i.Wm)(Ot,null,{extra:(0,i.w5)((()=>[0==e.status?((0,i.wg)(),(0,i.iD)("div",W,[(0,i._)("a",{href:"javascript:void(0)",onClick:t=>D.refuseApply(I.targetSvc,e)},[(0,i.Wm)(vt)],8,R),(0,i._)("a",{href:"javascript:void(0)",onClick:t=>D.approvalApply(I.targetSvc,e),class:"ml-15"},[(0,i.Wm)(_t)],8,U)])):1==e.status?((0,i.wg)(),(0,i.iD)("div",q,(0,s.zw)(t.$t("Approval")),1)):2==e.status?((0,i.wg)(),(0,i.iD)("div",x,(0,s.zw)(t.$t("Refuse")),1)):(0,i.kq)("",!0)])),default:(0,i.w5)((()=>[(0,i.Wm)(kt,{description:new Date(e.updatedAt).toLocaleString()},{title:(0,i.w5)((()=>[(0,i._)("b",null,(0,s.zw)(e.applyOrganization.name),1),(0,i.Uk)(" ("+(0,s.zw)(e.applyUser.username)+") "+(0,s.zw)(t.$t("applies for subscription")),1)])),avatar:(0,i.w5)((()=>[(0,i.Wm)(yt,{class:"primary"})])),_:2},1032,["description"])])),_:2},1024)])),_:1},8,["data-source"])])),_:1})])),_:1})])):(0,i.kq)("",!0)])),_:1},8,["title"])):(0,i.kq)("",!0)])),_:1})):(0,i.kq)("",!0)])),_:1})])),_:1},8,["tab"])):(0,i.kq)("",!0),t.$isPro?((0,i.wg)(),(0,i.j4)(ut,{key:"3",tab:t.$t("ACL")},{default:(0,i.w5)((()=>[(0,i.Wm)(ot,{title:t.$t("Organization White")},{default:(0,i.w5)((()=>[(0,i.Wm)(St,{titles:[t.$t("Organization")," "+t.$t("Added")],"data-source":I.white.list,"target-keys":I.org.whiteOrgs,"onUpdate:target-keys":e[10]||(e[10]=t=>I.org.whiteOrgs=t),"show-search":!0,"filter-option":(t,e)=>-1!==e.name.indexOf(t),"show-select-all":!1,onSearch:D.whiteSearch,onChange:D.onWhiteChange},{children:(0,i.w5)((({direction:e,filteredItems:a,selectedKeys:n,disabled:r,onItemSelectAll:l,onItemSelect:o})=>[(0,i.Wm)(wt,{"row-selection":D.getRowSelection(r,n,l,o),columns:"left"===e?D.dataleftColumns:D.datarightColumns,"data-source":a,size:"small",pagination:"left"===e&&{onChange:t.whitePagging,current:I.white.pageNo,pageSize:I.white.pageSize,showTotal:(e,a)=>`${t.$t("Total")} ${e}`,total:I.white.total},style:(0,s.j5)({pointerEvents:r?"none":null}),"custom-row":({key:t,disabled:e})=>({onClick:()=>{e||r||o(t,!n.includes(t))}})},null,8,["row-selection","columns","data-source","pagination","style","custom-row"])])),_:1},8,["titles","data-source","target-keys","filter-option","onSearch","onChange"])])),_:1},8,["title"])])),_:1},8,["tab"])):(0,i.kq)("",!0)])),_:1}),(0,i.kq)("",!0),(0,i.kq)("",!0),(0,i.kq)("",!0)])),_:1},8,["title","avatar"])}],["__scopeId","data-v-be2324e4"]])}}]);