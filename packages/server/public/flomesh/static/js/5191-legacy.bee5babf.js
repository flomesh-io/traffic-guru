"use strict";(self.webpackChunkflomesh_load_balancer=self.webpackChunkflomesh_load_balancer||[]).push([[5191],{60300:function(t,e,i){i.d(e,{Z:function(){return u}});var n=i(66252),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-600 72h560v208H232V136zm560 480H232V408h560v208zm0 272H232V680h560v208zM304 240a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"database",theme:"outlined"},l=i(33058);function r(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?Object(arguments[e]):{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter((function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable})))),n.forEach((function(e){s(t,e,i[e])}))}return t}function s(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var o=function(t,e){var i=r({},t,e.attrs);return(0,n.Wm)(l.Z,r({},i,{icon:a}),null)};o.displayName="DatabaseOutlined",o.inheritAttrs=!1;var u=o},14941:function(t,e,i){i.d(e,{Z:function(){return u}});var n=i(66252),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M957.6 507.4L603.2 158.2a7.9 7.9 0 00-11.2 0L353.3 393.4a8.03 8.03 0 00-.1 11.3l.1.1 40 39.4-117.2 115.3a8.03 8.03 0 00-.1 11.3l.1.1 39.5 38.9-189.1 187H72.1c-4.4 0-8.1 3.6-8.1 8V860c0 4.4 3.6 8 8 8h344.9c2.1 0 4.1-.8 5.6-2.3l76.1-75.6 40.4 39.8a7.9 7.9 0 0011.2 0l117.1-115.6 40.1 39.5a7.9 7.9 0 0011.2 0l238.7-235.2c3.4-3 3.4-8 .3-11.2zM389.8 796.2H229.6l134.4-133 80.1 78.9-54.3 54.1zm154.8-62.1L373.2 565.2l68.6-67.6 171.4 168.9-68.6 67.6zM713.1 658L450.3 399.1 597.6 254l262.8 259-147.3 145z"}}]},name:"highlight",theme:"outlined"},l=i(33058);function r(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?Object(arguments[e]):{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter((function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable})))),n.forEach((function(e){s(t,e,i[e])}))}return t}function s(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var o=function(t,e){var i=r({},t,e.attrs);return(0,n.Wm)(l.Z,r({},i,{icon:a}),null)};o.displayName="HighlightOutlined",o.inheritAttrs=!1;var u=o},50128:function(t,e,i){i.d(e,{Z:function(){return d}});var n=i(66252),a=i(3577),l={class:"mini-chart"},r=["id"];var s=i(95082),o=(i(41539),i(54747),i(47941),i(2707),i(57658),i(85263)),u=i(33907),c={name:"MiniBar",props:["dv","id","axis","height","colors","stack","ver","unit"],data:function(){return{id2:Math.ceil(1e3*Math.random()),isMounted:!1,simpleImage:o.Z.PRESENTED_IMAGE_SIMPLE}},computed:(0,s.Z)({},(0,u.rn)("setting",["lang"])),watch:{lang:function(t){this.$i18n.locale=t},dv:function(){var t=this;this.isMounted&&setTimeout((function(){t.renderChart()}),100)},ver:function(){var t=this;this.isMounted&&setTimeout((function(){t.renderChart()}),100)}},mounted:function(){this.isMounted=!0,this.$i18n.locale=this.lang,this.renderChart()},methods:{getLegend:function(){var t={};return this.dv.forEach((function(e){t[e.type]=e.type})),Object.keys(t)},getXAxis:function(){var t={};return this.dv.forEach((function(e){t[e.date]=e.date})),Object.keys(t).sort()},getSeriesValue:function(){var t={};return this.dv.forEach((function(e){t[e.date]||(t[e.date]={}),e.itemStyle?t[e.date][e.type]={value:e.value,itemStyle:e.itemStyle}:t[e.date][e.type]=e.value})),t},getSeries:function(t,e){var i=this,n=this.getSeriesValue(),a=[];return t.forEach((function(t){var l=[];e.forEach((function(e){l.push(n[e][t]||0)}));var r={name:t,type:"bar",smooth:!0,areaStyle:{},emphasis:{focus:"series"},data:l};i.stack&&(r.stack=i.stack),a.push(r)})),a},renderChart:function(){var t=this,e=this.getLegend(),i=this.getXAxis(),n=this.getSeries(e,i),a=document.getElementById(this.id+this.id2);a&&this.$echarts.dispose(a);var l=this.$echarts.init(a);l.showLoading();var r={color:this.colors?this.colors:["rgba(0, 137, 237,0.7)","rgba(255, 157, 77,0.7)","rgba(90, 216, 166,0.7)","rgba(227, 137, 163,0.7)","rgba(146, 112, 202,0.7)"],tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:e,show:!1},toolbox:{},grid:{top:"0px",right:"10px",left:"30px",bottom:"0px"},xAxis:[{axisLabel:{backgroundColor:"rgba(240,240,240,0.7)",padding:[2,3,2,3],textStyle:{color:"#6a7985"},inside:!0,borderRadius:2,minInterval:20},data:i,axisTick:{show:!1},axisLine:{show:!1},z:10}],yAxis:[{show:!!this.axis,type:"value",axisLabel:this.axis?{formatter:function(e){return""+e+(t.unit?t.unit:"")}}:{showMinLabel:!1,showMaxLabel:!1,inside:!0,margin:-30,backgroundColor:"rgba(240,240,240,0.7)",padding:[2,3,2,3],textStyle:{color:"#6a7985"},formatter:function(e){return""+e+(t.unit?t.unit:"")}}}],series:n};l.setOption(r,{lazyUpdate:!0}),l.hideLoading()}}};var d=(0,i(83744).Z)(c,[["render",function(t,e,i,s,o,u){var c=(0,n.up)("a-empty");return(0,n.wg)(),(0,n.iD)("div",l,[i.dv&&0!=i.dv.length?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(c,{key:0,image:o.simpleImage,description:""},null,8,["image"])),(0,n._)("div",{ref:i.id,class:"chart-content full",id:i.id+o.id2,style:(0,a.j5)({height:i.height?i.height+"px":"100px"})},null,12,r)])}],["__scopeId","data-v-64c489b5"]])},49568:function(t,e,i){i.d(e,{Z:function(){return p}});var n=i(66252),a=i(3577),l={class:"mini-chart"},r={class:"absolute full mt-10"},s=["id"];var o=i(95082),u=(i(57658),i(85263)),c=i(33907),d={name:"MiniSector",props:["dv","noEmpty","id","height","padding","colors","ver"],data:function(){return{id2:Math.ceil(1e3*Math.random()),isMounted:!1,simpleImage:u.Z.PRESENTED_IMAGE_SIMPLE}},computed:(0,o.Z)({},(0,c.rn)("setting",["lang"])),watch:{lang:function(t){this.$i18n.locale=t},dv:function(){var t=this;this.isMounted&&setTimeout((function(){t.renderChart()}),100)},ver:function(){var t=this;this.isMounted&&setTimeout((function(){t.renderChart()}),100)}},mounted:function(){var t=this;this.isMounted=!0,this.$i18n.locale=this.lang,setTimeout((function(){t.renderChart()}),100)},methods:{getSeries:function(){var t=[];return t.push({type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:"40",fontWeight:"bold"}},labelLine:{show:!1},data:this.dv}),t},renderChart:function(){var t=this.getSeries(),e=document.getElementById(this.id+this.id2);e&&this.$echarts.dispose(e);var i=this.$echarts.init(e);i.showLoading();var n={color:this.colors?this.colors:["rgba(0, 137, 237,0.7)","rgba(255, 157, 77,0.7)","rgba(90, 216, 166,0.7)","rgba(227, 137, 163,0.7)","rgba(146, 112, 202,0.7)"],tooltip:{trigger:"item"},legend:{show:!0,orient:"vertical",right:"right",formatter:function(t){return t.length>10?t.substr(0,10)+"...":t}},toolbox:{},grid:{left:this.padding?this.padding[3]:0,right:this.padding?this.padding[1]:0,bottom:this.padding?this.padding[2]:0,top:this.padding?this.padding[0]:0,containLabel:!0},series:t};i.setOption(n,{lazyUpdate:!0}),i.hideLoading()}}};var p=(0,i(83744).Z)(d,[["render",function(t,e,i,o,u,c){var d=(0,n.up)("a-empty");return(0,n.wg)(),(0,n.iD)("div",l,[(0,n._)("div",r,[i.dv&&0!=i.dv.length||i.noEmpty?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(d,{key:0,image:u.simpleImage,description:""},null,8,["image"]))]),(0,n._)("div",{ref:i.id,class:"chart-content full",id:i.id+u.id2,style:(0,a.j5)({height:i.height?i.height+"px":"200px"})},null,12,s)])}],["__scopeId","data-v-51a6e4be"]])},1299:function(t,e,i){i.d(e,{Z:function(){return s}});var n=i(66252),a=i(3577),l={key:0,class:"title"};i(9653);var r={name:"DetailList",props:{title:{type:String,required:!1,default:""},col:{type:Number,required:!1,default:3},size:{type:String,required:!1,default:"large"},layout:{type:String,required:!1,default:"horizontal"}}};var s=(0,i(83744).Z)(r,[["render",function(t,e,i,r,s,o){var u=(0,n.up)("a-row");return(0,n.wg)(),(0,n.iD)("div",{class:(0,a.C_)(["detail-list","small"===i.size?"small":"large","vertical"===i.layout?"vertical":"horizontal"]),style:(0,a.j5)("flex-"+i.col)},[i.title?((0,n.wg)(),(0,n.iD)("div",l,(0,a.zw)(i.title),1)):(0,n.kq)("",!0),(0,n.Wm)(u,null,{default:(0,n.w5)((function(){return[(0,n.WI)(t.$slots,"default")]})),_:3})],6)}]])},13589:function(t,e,i){i.d(e,{Z:function(){return o}});i(68309);var n=i(66252),a=i(3577),l={class:"detail-content"};i(21249);var r={1:{xs:24},2:{xs:24,sm:12},3:{xs:24,sm:12,md:8},4:{xs:24,sm:12,md:6}},s={name:"DetailListItem",i18n:i(39945),props:{name:{type:String,required:!1,default:""},rules:{type:Array,required:!1,default:function(){return[]}},term:{type:String,required:!1,default:""},termTop:{type:Boolean}},data:function(){return{col:2,responsive:r}},computed:{getRules:function(){var t=this;return this.rules.map((function(e){return e.message=t.$t(e.message),e})),this.rules}},created:function(){this.$parent&&this.$parent.$parent&&this.$parent.$parent.col>0&&(this.col=this.$parent.$parent.col)},methods:{}};var o=(0,i(83744).Z)(s,[["render",function(t,e,i,r,s,o){var u=(0,n.up)("a-form-item"),c=(0,n.up)("a-col");return(0,n.wg)(),(0,n.j4)(c,(0,n.dG)({class:"detail-list-content flex"},s.responsive[s.col]),{default:(0,n.w5)((function(){return[(0,n._)("div",{class:(0,a.C_)(i.termTop?"term top":"term")},(0,a.zw)(i.term),3),(0,n._)("div",l,[i.rules?((0,n.wg)(),(0,n.j4)(u,{key:0,name:i.name,rules:o.getRules},{default:(0,n.w5)((function(){return[(0,n.WI)(t.$slots,"default")]})),_:3},8,["name","rules"])):(0,n.WI)(t.$slots,"default",{key:1})])]})),_:3},16)}]])},71900:function(t,e,i){i.d(e,{Z:function(){return s}});var n=i(66252),a=i(3577),l={class:"head-info"};var r={name:"HeadInfo",props:["title","content"]};var s=(0,i(83744).Z)(r,[["render",function(t,e,i,r,s,o){return(0,n.wg)(),(0,n.iD)("div",l,[(0,n._)("span",null,(0,a.zw)(i.title),1),(0,n._)("p",null,[(0,n.Uk)((0,a.zw)(i.content),1),(0,n.WI)(t.$slots,"body",{},void 0,!0)])])}],["__scopeId","data-v-00006846"]])},18743:function(t,e,i){i.r(e),i.d(e,{default:function(){return pt}});i(68309),i(92222);var n=i(66252),a=i(3577),l={key:0},r={key:1,class:"gray"},s={class:"absolute",style:{right:"0"}},o=["onClick"],u={key:0},c={key:1,class:"width-80"};var d=i(95082),p=(i(41539),i(54747),i(47941),i(57658),i(57327),i(38862),i(96486)),f=i.n(p),h=i(49702),m=i(60300),v=i(54367),g=i(62611),y=i(61103),w=i(1299),b=i(33907),k=i(71900),_=i(13589),$=(i(74916),i(15306),{class:"mb-3"}),S=function(t){return(0,n.dD)("data-v-1bfc6ca1"),t=t(),(0,n.Cn)(),t}((function(){return(0,n._)("svg",{class:"card-avatar icon","aria-hidden":"true"},[(0,n._)("use",{"xlink:href":"#icon-certificate"})],-1)})),W={key:0,class:"meta-content"},A={key:1,class:"meta-content"};i(40561);var x=i(99684),C=i(69596),j=i(50976),L=i(76754),E={name:"IdentifierList",i18n:i(89234),components:{PlusCircleTwoTone:x.Z,CardList:C.Z,AutoForm:j.Z,FormItem:L.Z},props:["col","title","identifiers"],data:function(){return{visible:!1,identifiersVals:{},identityTypes:[],payload:{type:null,name:"",content:""},isEdit:!1,loading:!0,identityKey:""}},computed:(0,d.Z)({},(0,b.rn)("rules",["rules"])),watch:{identifiersVals:{deep:!0,handler:function(){this.$emit("update:identifiers",this.identifiersVals)}},identifiers:{deep:!0,immediate:!0,handler:function(){}}},created:function(){},mounted:function(){var t=this;this.$gql.query('systemSettings(filters:{type:{eq:"Identifier"}}){data{id,attributes{mode,content}}}').then((function(e){t.identityTypes=e.data[0].content,t.identityKey=e.data[0].content[0].value}))},methods:{setting:function(t,e,i){this.payload=f().cloneDeep(i),this.payload.type=e,this.payload.index=t,this.isEdit=!0,this.visible=!0},remove:function(t,e){this.identifiersVals=this.identifiers,this.identifiersVals[e].splice(t,1),this.$emit("identifierSave")},showModal:function(){var t=this;this.visible=!0,this.isEdit=!1,this.payload.type=this.identityKey,this.identityTypes.forEach((function(e){e.value==t.payload.type&&(t.payload.content={fields:e.fields})}))},renderCallback:function(){var t=this;this.identityTypes.forEach((function(e){e.value==t.payload.type&&(t.payload.content={fields:e.fields})}))},valid:function(){var t=this;this.$refs.form.validateFields().then((function(){t.handleOk()})).catch((function(){}))},handleOk:function(){this.identifiersVals=this.identifiers,this.identifiersVals[this.payload.type]=this.identifiersVals[this.payload.type]?this.identifiersVals[this.payload.type]:[],this.isEdit?this.identifiersVals[this.payload.type][this.payload.index]={name:this.payload.name,content:this.payload.content}:this.identifiersVals[this.payload.type].push({name:this.payload.name,content:this.payload.content}),this.payload={type:null,name:"",content:""},this.visible=!1,this.$emit("identifierSave")},onTabChange:function(t){}}},I=i(83744);var z=(0,I.Z)(E,[["render",function(t,e,i,l,r,s){var o=(0,n.up)("PlusCircleTwoTone"),u=(0,n.up)("a-button"),c=(0,n.up)("a-tag"),d=(0,n.up)("a-space"),p=(0,n.up)("a-card-meta"),f=(0,n.up)("CardList"),h=(0,n.up)("a-tab-pane"),m=(0,n.up)("a-tabs"),v=(0,n.up)("a-card"),g=(0,n.up)("a-select-option"),y=(0,n.up)("a-select"),w=(0,n.up)("a-descriptions-item"),b=(0,n.up)("a-input"),k=(0,n.up)("FormItem"),_=(0,n.up)("AutoForm"),x=(0,n.up)("a-textarea"),C=(0,n.up)("a-descriptions"),j=(0,n.up)("a-form"),L=(0,n.up)("a-modal");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(v,{title:i.title,class:"card identifier-card",bordered:!1},{extra:(0,n.w5)((function(){return[(0,n._)("div",null,[(0,n.Wm)(u,{type:"link",shape:"circle",onClick:s.showModal},{icon:(0,n.w5)((function(){return[(0,n.Wm)(o,{class:"PlusCircleTwoTone icon-menu-sm rotate-icon"})]})),_:1},8,["onClick"])])]})),default:(0,n.w5)((function(){return[(0,n.Wm)(m,{activeKey:r.identityKey,"onUpdate:activeKey":e[0]||(e[0]=function(t){return r.identityKey=t}),"tab-position":"left"},{default:(0,n.w5)((function(){return[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.identityTypes,(function(e){return(0,n.wg)(),(0,n.j4)(h,{key:e.value,tab:t.$t(e.label)},{default:(0,n.w5)((function(){return[(0,n.Wm)(f,{col:i.col,"hide-action-title":!0,"data-source":i.identifiers[e.value]||[],type:e.value,loading:!1,actions:[{icon:"EditOutlined",text:t.$t("edit"),call:s.setting},{icon:"CloseOutlined",hide:!0,text:t.$t("delete"),call:s.remove}]},{default:(0,n.w5)((function(t){var e=t.item;return[(0,n.Wm)(p,null,{title:(0,n.w5)((function(){return[(0,n._)("div",$,(0,a.zw)(e.name),1)]})),avatar:(0,n.w5)((function(){return[S]})),description:(0,n.w5)((function(){return[e.content.fields?((0,n.wg)(),(0,n.iD)("div",W,[(0,n.Wm)(d,null,{default:(0,n.w5)((function(){return[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.content.fields,(function(t,e){return(0,n.wg)(),(0,n.iD)("span",{key:e},[t.value?((0,n.wg)(),(0,n.j4)(c,{key:0},{default:(0,n.w5)((function(){return[(0,n.Uk)((0,a.zw)(t.label)+":"+(0,a.zw)("password"==t.type?t.value.replace(/./g,"*"):t.value),1)]})),_:2},1024)):(0,n.kq)("",!0)])})),128))]})),_:2},1024)])):((0,n.wg)(),(0,n.iD)("div",A,(0,a.zw)(e.content),1))]})),_:2},1024)]})),_:2},1032,["col","data-source","type","actions"])]})),_:2},1032,["tab"])})),128))]})),_:1},8,["activeKey"])]})),_:1},8,["title"]),(0,n.Wm)(L,{visible:r.visible,"onUpdate:visible":e[4]||(e[4]=function(t){return r.visible=t}),title:t.$t("Identity"),onOk:s.valid,width:"50%","ok-text":r.isEdit?t.$t("Save"):t.$t("create")},{default:(0,n.w5)((function(){return[(0,n.Wm)(j,{model:r.payload,"wrapper-col":{span:24},ref:"form"},{default:(0,n.w5)((function(){return[(0,n.Wm)(C,{bordered:""},{default:(0,n.w5)((function(){return[(0,n.Wm)(w,{label:t.$t("Type"),span:3},{default:(0,n.w5)((function(){return[(0,n.Wm)(y,{disabled:r.isEdit,placeholder:t.$t("unset"),class:"width-200",value:r.payload.type,"onUpdate:value":e[1]||(e[1]=function(t){return r.payload.type=t}),onChange:s.renderCallback},{default:(0,n.w5)((function(){return[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.identityTypes,(function(e,i){return(0,n.wg)(),(0,n.j4)(g,{key:i,value:e.value},{default:(0,n.w5)((function(){return[(0,n._)("span",null,(0,a.zw)(t.$t(e.label)),1)]})),_:2},1032,["value"])})),128))]})),_:1},8,["disabled","placeholder","value","onChange"])]})),_:1},8,["label"]),(0,n.Wm)(w,{label:t.$t("as"),span:3},{default:(0,n.w5)((function(){return[(0,n.Wm)(k,{name:"name",rules:t.rules.name},{default:(0,n.w5)((function(){return[(0,n.Wm)(b,{placeholder:t.$t("unset"),value:r.payload.name,"onUpdate:value":e[2]||(e[2]=function(t){return r.payload.name=t}),class:"width-300"},null,8,["placeholder","value"])]})),_:1},8,["rules"])]})),_:1},8,["label"]),(0,n.Wm)(w,{label:t.$t("content"),span:3},{default:(0,n.w5)((function(){return[r.payload.content.fields?((0,n.wg)(),(0,n.j4)(_,{key:0,col:i.col,fields:[r.payload.content.fields]},null,8,["col","fields"])):((0,n.wg)(),(0,n.j4)(x,{key:1,value:r.payload.content,"onUpdate:value":e[3]||(e[3]=function(t){return r.payload.content=t}),placeholder:"User:Password / Token / JWT","allow-clear":"",rows:14},null,8,["value"]))]})),_:1},8,["label"])]})),_:1})]})),_:1},8,["model"])]})),_:1},8,["visible","title","onOk","ok-text"])],64)}],["__scopeId","data-v-1bfc6ca1"]]),D={class:"mb-3"},O=function(t){return(0,n.dD)("data-v-a514a356"),t=t(),(0,n.Cn)(),t}((function(){return(0,n._)("svg",{class:"card-avatar icon","aria-hidden":"true"},[(0,n._)("use",{"xlink:href":"#icon-certificate"})],-1)})),q={key:0,class:"meta-content"},T={key:1,class:"meta-content"};var Z={name:"RatelimitingList",i18n:i(89234),components:{PlusCircleTwoTone:x.Z,CardList:C.Z,AutoForm:j.Z,FormItem:L.Z},props:["col","title","ratelimitings"],data:function(){return{visible:!1,ratelimitingVals:{},ratelimitingTypes:[],payload:{type:null,name:"",key:"",content:""},isEdit:!1,loading:!0,ratelimitingKey:""}},computed:(0,d.Z)({},(0,b.rn)("rules",["rules"])),watch:{ratelimitingVals:{deep:!0,handler:function(){this.$emit("update:ratelimitings",this.ratelimitingVals)}},ratelimitings:{deep:!0,immediate:!0,handler:function(){}}},created:function(){},mounted:function(){var t=this;this.$gql.query('systemSettings(filters:{type:{eq:"Identifier"}}){data{id,attributes{mode,content}}}').then((function(){t.ratelimitingTypes=[{label:"Header",value:"header",name:"",key:"",fields:[{name:"enable",type:"select",label:"Enable",value:"true",options:[{label:"ON",value:"true"},{label:"OFF",value:"false"}]},{name:"limit",type:"number",label:"Limit",value:""},{name:"maxWait",type:"number",label:"Max Wait",value:""},{name:"sync_rate",type:"number",label:"Sync Rate",value:""}]}],t.ratelimitingKey="header"}))},methods:{setting:function(t,e,i){this.payload=f().cloneDeep(i),this.payload.type=e,this.payload.index=t,this.isEdit=!0,this.visible=!0},remove:function(t,e){this.ratelimitingVals=this.ratelimitings,this.ratelimitingVals[e].splice(t,1),this.$emit("ratelimitingSave")},showModal:function(){var t=this;this.visible=!0,this.isEdit=!1,this.payload.type=this.ratelimitingKey,this.ratelimitingTypes.forEach((function(e){e.value==t.payload.type&&(t.payload.name="",t.payload.key="",t.payload.content={fields:e.fields})}))},renderCallback:function(){var t=this;this.ratelimitingTypes.forEach((function(e){e.value==t.payload.type&&(t.payload.content={fields:e.fields})}))},valid:function(){var t=this;this.$refs.form.validateFields().then((function(){t.handleOk()})).catch((function(){}))},handleOk:function(){this.ratelimitingVals=this.ratelimitings,this.ratelimitingVals[this.payload.type]=this.ratelimitingVals[this.payload.type]?this.ratelimitingVals[this.payload.type]:[],this.isEdit?this.ratelimitingVals[this.payload.type][this.payload.index]={name:this.payload.name,key:this.payload.key,content:this.payload.content}:this.ratelimitingVals[this.payload.type].push({name:this.payload.name,key:this.payload.key,content:this.payload.content}),this.payload={type:null,name:"",key:"",enable:!0,content:""},this.visible=!1,this.$emit("ratelimitingSave")},onTabChange:function(t){}}};var P=(0,I.Z)(Z,[["render",function(t,e,i,l,r,s){var o=(0,n.up)("PlusCircleTwoTone"),u=(0,n.up)("a-button"),c=(0,n.up)("a-tag"),d=(0,n.up)("a-space"),p=(0,n.up)("a-card-meta"),f=(0,n.up)("CardList"),h=(0,n.up)("a-tab-pane"),m=(0,n.up)("a-tabs"),v=(0,n.up)("a-card"),g=(0,n.up)("a-select-option"),y=(0,n.up)("a-select"),w=(0,n.up)("a-descriptions-item"),b=(0,n.up)("a-input"),k=(0,n.up)("FormItem"),_=(0,n.up)("AutoForm"),$=(0,n.up)("a-descriptions"),S=(0,n.up)("a-form"),W=(0,n.up)("a-modal");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(v,{title:i.title,class:"card identifier-card",bordered:!1},{extra:(0,n.w5)((function(){return[(0,n._)("div",null,[(0,n.Wm)(u,{type:"link",shape:"circle",onClick:s.showModal},{icon:(0,n.w5)((function(){return[(0,n.Wm)(o,{class:"PlusCircleTwoTone icon-menu-sm rotate-icon"})]})),_:1},8,["onClick"])])]})),default:(0,n.w5)((function(){return[(0,n.Wm)(m,{activeKey:r.ratelimitingKey,"onUpdate:activeKey":e[0]||(e[0]=function(t){return r.ratelimitingKey=t}),"tab-position":"left"},{default:(0,n.w5)((function(){return[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.ratelimitingTypes,(function(e){return(0,n.wg)(),(0,n.j4)(h,{key:e.value,tab:e.label},{default:(0,n.w5)((function(){return[(0,n.Wm)(f,{col:i.col,"hide-action-title":!0,"data-source":i.ratelimitings[e.value]||[],type:e.value,loading:!1,actions:[{icon:"EditOutlined",text:t.$t("edit"),call:s.setting},{icon:"CloseOutlined",hide:!0,text:t.$t("delete"),call:s.remove}]},{default:(0,n.w5)((function(t){var e=t.item;return[(0,n.Wm)(p,null,{title:(0,n.w5)((function(){return[(0,n._)("div",D,(0,a.zw)(e.name),1)]})),avatar:(0,n.w5)((function(){return[O]})),description:(0,n.w5)((function(){return[e.content.fields?((0,n.wg)(),(0,n.iD)("div",q,[(0,n.Wm)(d,null,{default:(0,n.w5)((function(){return[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.content.fields,(function(t,e){return(0,n.wg)(),(0,n.iD)("span",{key:e},[t.value?((0,n.wg)(),(0,n.j4)(c,{key:0},{default:(0,n.w5)((function(){return[(0,n.Uk)((0,a.zw)(t.label)+":"+(0,a.zw)("password"==t.type?t.value.replace(/./g,"*"):t.value),1)]})),_:2},1024)):(0,n.kq)("",!0)])})),128))]})),_:2},1024)])):((0,n.wg)(),(0,n.iD)("div",T,(0,a.zw)(e.content),1))]})),_:2},1024)]})),_:2},1032,["col","data-source","type","actions"])]})),_:2},1032,["tab"])})),128))]})),_:1},8,["activeKey"])]})),_:1},8,["title"]),(0,n.Wm)(W,{visible:r.visible,"onUpdate:visible":e[4]||(e[4]=function(t){return r.visible=t}),title:t.$t("Identity"),onOk:s.valid,width:"50%","ok-text":r.isEdit?t.$t("Save"):t.$t("create")},{default:(0,n.w5)((function(){return[(0,n.Wm)(S,{model:r.payload,"wrapper-col":{span:24},ref:"form"},{default:(0,n.w5)((function(){return[(0,n.Wm)($,{bordered:""},{default:(0,n.w5)((function(){return[(0,n.Wm)(w,{label:t.$t("Type"),span:3},{default:(0,n.w5)((function(){return[(0,n.Wm)(y,{disabled:r.isEdit,placeholder:t.$t("unset"),class:"width-200",value:r.payload.type,"onUpdate:value":e[1]||(e[1]=function(t){return r.payload.type=t}),onChange:s.renderCallback},{default:(0,n.w5)((function(){return[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.ratelimitingTypes,(function(e,i){return(0,n.wg)(),(0,n.j4)(g,{key:i,value:e},{default:(0,n.w5)((function(){return[(0,n._)("span",null,(0,a.zw)(t.$t(e.label)),1)]})),_:2},1032,["value"])})),128))]})),_:1},8,["disabled","placeholder","value","onChange"])]})),_:1},8,["label"]),(0,n.Wm)(w,{label:t.$t("as"),span:3},{default:(0,n.w5)((function(){return[(0,n.Wm)(k,{name:"name",rules:t.rules.name},{default:(0,n.w5)((function(){return[(0,n.Wm)(b,{placeholder:t.$t("unset"),value:r.payload.name,"onUpdate:value":e[2]||(e[2]=function(t){return r.payload.name=t}),class:"width-300"},null,8,["placeholder","value"])]})),_:1},8,["rules"])]})),_:1},8,["label"]),(0,n.Wm)(w,{label:t.$t("key"),span:3},{default:(0,n.w5)((function(){return[(0,n.Wm)(k,{name:"key",rules:t.rules.required},{default:(0,n.w5)((function(){return[(0,n.Wm)(b,{placeholder:t.$t("unset"),value:r.payload.key,"onUpdate:value":e[3]||(e[3]=function(t){return r.payload.key=t}),class:"width-300"},null,8,["placeholder","value"])]})),_:1},8,["rules"])]})),_:1},8,["label"]),(0,n.Wm)(w,{label:t.$t("content"),span:3},{default:(0,n.w5)((function(){return[r.payload.content.fields?((0,n.wg)(),(0,n.j4)(_,{key:0,col:i.col,fields:[r.payload.content.fields]},null,8,["col","fields"])):(0,n.kq)("",!0)]})),_:1},8,["label"])]})),_:1})]})),_:1},8,["model"])]})),_:1},8,["visible","title","onOk","ok-text"])],64)}],["__scopeId","data-v-a514a356"]]),U=(i(26699),i(32023),{class:"pd-0 search-content"}),M={class:"mb-3"},K={class:"relative"},V={class:"content template-div-3"},R={class:"template-div"},H={class:"template-div"},N={key:0},F={key:1},Y={key:2},G={key:3},B={key:0,class:"result-chart"},J={key:1,class:"result-chart"},X=function(t){return(0,n.dD)("data-v-27fc238e"),t=t(),(0,n.Cn)(),t}((function(){return(0,n._)("div",{class:"swagger",id:"swagger"},null,-1)}));i(21249);var Q=i(48551),tt=i(85263),et=i(11416),it=i.n(et),nt=i(14941),at=i(30631),lt=i(16527),rt=i(52255),st=i(93320),ot={name:"SubscriptionList",components:{PageLayout:y.Z,MiniArea:Q.Z,CardList:C.Z,HighlightOutlined:nt.Z,EyeOutlined:at.Z,RocketOutlined:lt.Z,PauseOutlined:rt.Z},props:["subApis","identifiers","authApis","loading","col"],i18n:i(89234),data:function(){return{simpleImage:tt.Z.PRESENTED_IMAGE_SIMPLE,visible:!1,payload:{auths:[],id:null},visibleAuth:!1,showProject:!1}},computed:(0,d.Z)((0,d.Z)({},(0,b.rn)("setting",["layout","pageWidth"])),{},{dataleftColumns:function(){return[{dataIndex:"name",title:this.$t("Name")},{dataIndex:"type",title:this.$t("Type")}]},datarightColumns:function(){return[{dataIndex:"name",title:this.$t("Name")},{dataIndex:"type",title:this.$t("Type")}]}}),mounted:function(){},methods:{onAuthChange:function(t){var e=this;this.payload.auths=t;var i=[],n=this.authApis,a=!1;t.forEach((function(t){if(t){var e=t.split("-");i.push({type:e[0],name:e[1]})}})),n.forEach((function(t){e.payload.id==t.id&&(t.auths=i,a=!0)})),a||n.push({id:this.payload.id,auths:i}),this.$emit("update:authApis",n)},getRowSelection:function(t,e,i,n){return{getCheckboxProps:function(e){return{disabled:t||e.disabled}},onSelectAll:function(t,e){var n=e.filter((function(t){return!t.disabled})).map((function(t){return t.key}));i(n,t)},onSelect:function(t,e){n(t.key,e)},selectedRowKeys:e}},apiList:function(){this.$router.push({path:"/openapi/api/list"})},detail:function(t,e,i){this.$router.push({path:"/openapi/api/detail/"+i.id})},remove:function(t,e,i){var n=this.authApis;this.$emit("update:authApis",n.filter((function(t){return i.id!=t.id}))),this.$emit("remove",i.id)},getDummtSGdata:function(){var t=this;fetch("swagger.yaml").then((function(t){return t.text()})).then((function(e){var i=st.load(e),n=JSON.stringify(i,null,"  ");t.swaggerchange(n)})).catch((function(t){}))},auth:function(t,e,i){var n=this;this.payload.id=i.id,this.payload.auths=[];var a=this.authApis,l=!1;a.forEach((function(t){n.payload.id==t.id&&(t.auths.forEach((function(t){t&&n.payload.auths.push("".concat(t.type,"-").concat(t.name))})),l=!0)})),l||(this.payload.auths=[]),this.visibleAuth=!0},show:function(t,e,i){this.visible=!0,this.swaggerchange(i.spec)},swaggerchange:function(t){it()({spec:t,dom_id:"#swagger",deepLinking:!1,presets:[it().presets.apis,it().SwaggerUIStandalonePreset],plugins:[it().plugins.DownloadUrl]})},getData:function(){}}};var ut=(0,I.Z)(ot,[["render",function(t,e,i,l,r,s){var o=(0,n.up)("a-tag"),u=(0,n.up)("a-badge"),c=(0,n.up)("a-card-meta"),d=(0,n.up)("HighlightOutlined"),p=(0,n.up)("EyeOutlined"),f=(0,n.up)("RocketOutlined"),h=(0,n.up)("PauseOutlined"),m=(0,n.up)("MiniArea"),v=(0,n.up)("CardList"),g=(0,n.up)("a-drawer"),y=(0,n.up)("a-table"),w=(0,n.up)("a-transfer"),b=(0,n.up)("a-modal"),k=(0,n.up)("PageLayout");return(0,n.wg)(),(0,n.j4)(k,{"hide-head":!0,title:t.$t("Subscription API"),class:"pd-0",style:{"padding-top":"0 !important"}},{default:(0,n.w5)((function(){return[(0,n._)("div",U,[(0,n.Wm)(v,{loading:i.loading,add:{text:t.$t("Add to API Market"),call:s.apiList,height:"225px"},col:i.col,empty:[{link:s.apiList,text:t.$t("There is no data yet. Please select and join the subscription car in the API market")}],"custom-empty":!0,"data-source":i.subApis,"hide-action-title":!0,type:"component",actions:[{icon:"EyeOutlined",text:t.$t("Preview"),call:s.show},{icon:"DeleteOutlined",text:t.$t("Remove subscription"),call:s.remove},{icon:"KeyOutlined",text:t.$t("Authority"),call:s.auth}]},{default:(0,n.w5)((function(e){var i=e.item;return[(0,n.Wm)(c,null,{title:(0,n.w5)((function(){return[(0,n._)("div",M,[(0,n.Uk)((0,a.zw)(i.name)+" ",1),(0,n.Wm)(o,{color:"pink",class:"result-tag"},{default:(0,n.w5)((function(){return[(0,n.Uk)((0,a.zw)(i.project.name),1)]})),_:2},1024),1==i.status?((0,n.wg)(),(0,n.j4)(o,{key:0,color:"orange",class:"result-tag"},{default:(0,n.w5)((function(){return[(0,n.Uk)((0,a.zw)(t.$t("PENDING")),1)]})),_:1})):(0,n.kq)("",!0),2==i.status?((0,n.wg)(),(0,n.j4)(o,{key:1,color:"red",class:"result-tag"},{default:(0,n.w5)((function(){return[(0,n.Uk)((0,a.zw)(t.$t("ERROR")),1)]})),_:1})):(0,n.kq)("",!0)])]})),avatar:(0,n.w5)((function(){return[0==i.status?((0,n.wg)(),(0,n.j4)(u,{key:0,status:"processing"})):(0,n.kq)("",!0),1==i.status?((0,n.wg)(),(0,n.j4)(u,{key:1,status:"warning"})):(0,n.kq)("",!0),2==i.status?((0,n.wg)(),(0,n.j4)(u,{key:2,status:"error"})):(0,n.kq)("",!0)]})),description:(0,n.w5)((function(){return[]})),_:2},1024),(0,n._)("div",K,[(0,n._)("div",V,[(0,n._)("div",R,[(0,n._)("p",null,(0,a.zw)(t.$t("Subscription")),1),(0,n._)("p",null,(0,a.zw)(i.applications.length),1)]),(0,n._)("div",H,[0==i.step?((0,n.wg)(),(0,n.iD)("p",N,(0,a.zw)(t.$t("In Design")),1)):(0,n.kq)("",!0),1==i.step?((0,n.wg)(),(0,n.iD)("p",F,(0,a.zw)(t.$t("Under Review")),1)):(0,n.kq)("",!0),2==i.step?((0,n.wg)(),(0,n.iD)("p",Y,(0,a.zw)(t.$t("Running")),1)):(0,n.kq)("",!0),3==i.step?((0,n.wg)(),(0,n.iD)("p",G,(0,a.zw)(t.$t("Stop")),1)):(0,n.kq)("",!0),(0,n._)("p",null,[0==i.step?((0,n.wg)(),(0,n.j4)(d,{key:0,class:"primary"})):(0,n.kq)("",!0),1==i.step?((0,n.wg)(),(0,n.j4)(p,{key:1,class:"primary"})):(0,n.kq)("",!0),2==i.step?((0,n.wg)(),(0,n.j4)(f,{key:2,class:"primary"})):(0,n.kq)("",!0),3==i.step?((0,n.wg)(),(0,n.j4)(h,{key:3,class:"danger"})):(0,n.kq)("",!0)])])]),i.chart&&i.chart.length>0?((0,n.wg)(),(0,n.iD)("div",B,[(0,n.Wm)(m,{colors:["#8be4c1"],height:100,id:i.id,padding:[0,0,0,0],axis:!1,ver:t.screenWidth,showy:!1,dv:i.chart},null,8,["id","ver","dv"])])):((0,n.wg)(),(0,n.iD)("div",J,[(0,n.Wm)(m,{colors:["#8be4c1"],height:100,id:i.id,padding:[0,0,0,0],axis:!1,"hide-legend":!0,ver:t.screenWidth,showy:!1,dv:[{type:"-",date:(new Date).toLocaleDateString(),value:0}]},null,8,["id","ver","dv"])]))])]})),_:1},8,["loading","add","col","empty","data-source","actions"])]),(0,n.Wm)(g,{title:t.$t("Specs"),placement:"right",closable:!1,width:"50%",visible:r.visible,"onUpdate:visible":e[0]||(e[0]=function(t){return r.visible=t})},{default:(0,n.w5)((function(){return[X]})),_:1},8,["title","visible"]),(0,n.Wm)(b,{title:t.$t("Identifier"),closable:!0,footer:null,width:"50%",visible:r.visibleAuth,"onUpdate:visible":e[2]||(e[2]=function(t){return r.visibleAuth=t})},{default:(0,n.w5)((function(){return[(0,n.Wm)(w,{titles:[t.$t("Identifier")," "+t.$t("Added")],"data-source":i.identifiers,"target-keys":r.payload.auths,"onUpdate:target-keys":e[1]||(e[1]=function(t){return r.payload.auths=t}),"show-search":!0,"filter-option":function(t,e){return-1!==e.name.indexOf(t)},"show-select-all":!1,onChange:s.onAuthChange},{children:(0,n.w5)((function(t){var e=t.direction,i=t.filteredItems,l=t.selectedKeys,r=t.disabled,o=t.onItemSelectAll,u=t.onItemSelect;return[(0,n.Wm)(y,{"row-selection":s.getRowSelection(r,l,o,u),columns:"left"===e?s.dataleftColumns:s.datarightColumns,"data-source":i,size:"small",style:(0,a.j5)({pointerEvents:r?"none":null}),"custom-row":function(t){var e=t.key,i=t.disabled;return{onClick:function(){i||r||u(e,!l.includes(e))}}}},null,8,["row-selection","columns","data-source","style","custom-row"])]})),_:1},8,["titles","data-source","target-keys","filter-option","onChange"])]})),_:1},8,["title","visible"])]})),_:1},8,["title"])}],["__scopeId","data-v-27fc238e"]]),ct=i(34531),dt={name:"ApplicationDetail",i18n:i(89234),components:{HeadInfo:k.Z,DatabaseOutlined:m.Z,CardSelector:ct.Z,DetailListItem:_.Z,DetailList:w.Z,PageLayout:y.Z,IdentifierList:z,ApplicationRateLimiting:P,SubscriptionList:ut,CloseOutlined:v.Z,PartitionOutlined:g.Z,LogViewer:h.Z},props:["embed"],data:function(){return{DatabaseOutlined:m.Z,detail:{project:null,service:null,content:{apis:[],ratelimiting:{},identitys:{},identifiers:{},certificates:[]},name:"",apis:[]},projects:[],editorIsCreate:!0,json:"{}",activeKey:"1",services:[],functions:["func1","func2","func3"],zones:["zone1","zone2","zone3"],types:["Host","Service","Function","Zone"],protocols:["HTTP","HTTPS","Dubbo"],methods:["GET","POST","PATCH","PUT","DELETE","HEAD","OPTIONS"],visible:!1,loading:!0,logloading:!0,subscriptionLoading:!0,swaggerLoading:!0,logs:[],log:"{}",pid:"",filter:"",approvalLevels:[],applies:[],key:"",pageSize:10,pageNo:1,total:0,profiles:[],clusters:[],tps:[],tpsCnt:0,activeTabKey:"2"}},computed:(0,d.Z)((0,d.Z)({},(0,b.rn)({rules:function(t){return t.rules.rules},isMobile:function(t){return t.setting.isMobile}})),{},{identifierList:function(){var t=this,e=[];return Object.keys(this.detail.content.identifiers).forEach((function(i){t.detail.content.identifiers[i].forEach((function(t){e.push((0,d.Z)((0,d.Z)({},t),{},{type:i,key:"".concat(i,"-").concat(t.name)}))}))})),e},start:function(){return(this.pageNo-1)*this.pageSize}}),created:function(){this.pid=this.$route.params.id||"",this.editorIsCreate=""==this.pid},mounted:function(){var t=this;this.$gql.query("projects{data{id,attributes{name}}}").then((function(e){t.projects=e.data})),""!=this.pid?this.loadApplication():(this.detail={project:null,service:null,content:{apis:[],identitys:{},identifiers:{},ratelimiting:{},certificates:[]},name:"",apis:[]},this.loading=!1)},methods:{clearService:function(){this.detail.service=null},saveService:function(t){this.detail.service=t},showModal:function(){this.visible=!0},handleOk:function(){this.visible=!1},onTabChange:function(t){},valid:function(){return""!=this.detail.name||(this.$message.error(this.$t("The name cannot be empty"),3),!1)},refuseApply:function(t){var e=this;this.$gql.mutation("deleteSubscribeApiApply(id: ".concat(t.id,"){data{id}}")).then((function(){e.$message.success(e.$t("Delete successfully"),3),e.loadApplication()}))},removeSubApi:function(t){var e=this,i=[];this.detail.apis=this.detail.apis.filter((function(e){return t!=e.id})),this.detail.apis.forEach((function(t){i.push(t.id)})),this.$gql.mutation("updateApplication(id:".concat(this.pid,", data: $data){data{id}}"),{data:{apis:i}},{data:"ApplicationInput!"}).then((function(){e.$message.success($t("Removed successfully"),3)}))},validate:function(){var t=this;this.$refs.layout.$refs.form.validateFields().then((function(){t.save()})).catch((function(){}))},save:function(){var t=this;if(this.valid()){var e=f().cloneDeep(this.detail);delete e.createdAt,delete e.updatedAt,delete e.id,delete e.apis,delete e.subscribeApiApplies,e.content.certificates&&e.content.certificates.length>0&&(e.certificates=[],e.content.certificates.forEach((function(t){e.certificates.push(t.id)}))),e.service&&(e.service=e.service.id),""!=this.pid?this.$gql.mutation("updateApplication(id:".concat(this.pid,", data: $data){data{id}}"),{data:e},{data:"ApplicationInput!"}).then((function(){t.$message.success(t.$t("Save successfully"),3)})):this.$gql.mutation("createApplication(data: $data){data{id}}",{data:e},{data:"ApplicationInput!"}).then((function(e){t.pid=e.data.id,t.$message.success(t.$t("Created successfully"),3)}))}},handleChange:function(){},hide:function(){this.visible=!1},searchApplies:function(t){var e=this;this.pageNo=t||1,this.loading=!0;var i={application:{id:{eq:this.pid}}};this.$gql.query("subscribeApiApplies(filters: $filters, pagination:{start: ".concat(this.start,", limit: ").concat(this.pageSize,"}){\n\t\t\t\t\t\tdata{id,attributes{\n\t\t\t\t\t\t\tmsg,\n\t\t\t\t\t\t\tstatus,\n\t\t\t\t\t\t\tcontent,\n\t\t\t\t\t\t\tapprovalStep,\n\t\t\t\t\t\t\tapi{data{id,attributes{approvalLevel,name}}},\n\t\t\t\t\t\t\tapplyUser{data{id,attributes{username}}},\n\t\t\t\t\t\t\tcreatedAt,\n\t\t\t\t\t\t\tupdatedAt\n\t\t\t\t\t\t}},\n\t\t\t\t\t\tmeta{pagination{total}}\n\t\t\t\t\t}"),{filters:i},{filters:"SubscribeApiApplyFiltersInput"}).then((function(t){var i=t.data;i&&e.$gql.query('systemSettings(filters:{type:{eq:"ApiApprovalLevelType"}}){data{id,attributes{mode,content}}}').then((function(t){e.approvalLevels=t.data[0].content,e.approvalLevels.forEach((function(t){t.value=1*t.value})),i.forEach((function(t){e.approvalLevels.forEach((function(e){e.value==t.api.approvalLevel&&(t.findApprovalLevel=e)}))})),e.applies=i})),e.total=t.pagination.total}))},loadApplication:function(){var t=this;this.loading=!0,this.subscriptionLoading=!0,this.$gql.query("application(id: ".concat(this.pid,"){data{id,attributes{\n\t\t\t\t\t\tname,\n\t\t\t\t\t\tcontent,\n\t\t\t\t\t\tsubscribeApiApplies{data{id,attributes{\n\t\t\t\t\t\t\tmsg,\n\t\t\t\t\t\t\tstatus,\n\t\t\t\t\t\t\tcontent,\n\t\t\t\t\t\t\tapprovalStep,\n\t\t\t\t\t\t\tapi{data{id,attributes{approvalLevel,name}}},\n\t\t\t\t\t\t\tapplyUser{data{id,attributes{username}}},\n\t\t\t\t\t\t\tcreatedAt,\n\t\t\t\t\t\t\tupdatedAt\n\t\t\t\t\t\t}}},\n\t\t\t\t\t\tservice{data{id,attributes{name}}},\n\t\t\t\t\t\tcertificates{data{id,attributes{name,content}}},\n\t\t\t\t\t\tapis{data{id,attributes{\n\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\tspec,\n\t\t\t\t\t\t\tproject{data{id,attributes{name}}},\n\t\t\t\t\t\t\tstep,\n\t\t\t\t\t\t\tstatus,\n\t\t\t\t\t\t\tchart,\n\t\t\t\t\t\t\tapplications{data{id,attributes{name}}},\n\t\t\t\t\t\t\tcontent,\n\t\t\t\t\t\t\tupdatedAt\n\t\t\t\t\t\t}}},\n\t\t\t\t\t\tproject{data{id}},\n\t\t\t\t\t\tcreatedAt,\n\t\t\t\t\t\tupdatedAt\n\t\t\t\t\t}}}")).then((function(e){var i=e.data;t.loading=!1,t.subscriptionLoading=!1,i.service=i.service,t.detail=i,t.detail.spec=JSON.stringify(i.spec),t.detail.project=i.project?i.project.id:null,t.detail.content.apis||(t.detail.content.apis=[]),t.detail.content.identitys||(t.detail.content.identitys={}),t.detail.content.identifiers||(t.detail.content.identifiers={}),t.detail.content.ratelimiting||(t.detail.content.ratelimiting={}),t.detail.content.certificates||(t.detail.content.certificates=[]),i.certificates&&i.certificates.length>0&&t.detail.content.certificates.forEach((function(t){i.certificates.forEach((function(e){t.id==e.id&&(t.name=e.name,t.content=e.content)}))}))})),this.searchApplies()},getServices:function(){var t=this,e={namespace:{eq:this.env.namespace},registry:{id:{eq:this.env.registerId}}};this.$gql.query("getServices(pagination:{start: 0, limit: ".concat(this.$DFT_LIMIT,"}, filters: $filters){\n\t\t\t\t\t\tdata{id,attributes{\n\t\t\t\t\t\t\tuid,\n\t\t\t\t\t\t\tnamespace,\n\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\tregistry{data{id,attributes{name}}},\n\t\t\t\t\t\t\tcontent,\n\t\t\t\t\t\t\tcreatedAt\n\t\t\t\t\t\t}},\n\t\t\t\t\t\tmeta{pagination{total}}\n\t\t\t\t\t}"),{filters:e},{filters:"ServiceFiltersInput"}).then((function(e){t.services=e.data,t.services.forEach((function(t){t.name=t.name?t.name:t.metadata.name,t.registry?t.clusterName=t.registry.name:t.fleet?t.clusterName=t.fleet.name:t.clusterName="-"}))}))},envChange:function(t){this.env=t,this.getServices()}}};var pt=(0,I.Z)(dt,[["render",function(t,e,i,d,p,f){var h=(0,n.up)("a-input"),m=(0,n.up)("DetailListItem"),v=(0,n.up)("a-select-option"),g=(0,n.up)("a-select"),y=(0,n.up)("a-tag"),w=(0,n.up)("CardSelector"),b=(0,n.up)("DetailList"),k=((0,n.up)("HeadInfo"),(0,n.up)("a-button")),_=(0,n.up)("IdentifierList"),$=(0,n.up)("a-col"),S=(0,n.up)("a-row"),W=(0,n.up)("ApplicationRateLimiting"),A=(0,n.up)("a-tab-pane"),x=(0,n.up)("SubscriptionList"),C=(0,n.up)("PartitionOutlined"),j=(0,n.up)("a-list-item-meta"),L=(0,n.up)("CloseOutlined"),E=(0,n.up)("a-step"),I=(0,n.up)("a-steps"),z=(0,n.up)("a-list-item"),D=(0,n.up)("a-list"),O=(0,n.up)("a-card"),q=(0,n.up)("LogViewer"),T=(0,n.up)("a-tabs"),Z=((0,n.up)("DatabaseOutlined"),(0,n.up)("PageLayout")),P=(0,n.Q2)("permission");return(0,n.wg)(),(0,n.j4)(Z,{"hide-breadcrumb":i.embed,title:i.embed?" ":p.detail.name?p.detail.name:t.$t("new")+t.$t("Application"),"form-state":p.detail,ref:"layout"},(0,n.Nv)({headerContent:(0,n.w5)((function(){return[(0,n.Wm)(b,{size:"small",col:1},{default:(0,n.w5)((function(){return[i.embed?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(m,{key:0,term:t.$t("as"),rules:t.rules.uniqueName("applications",{id:p.pid,project:p.detail.project}),name:"name"},{default:(0,n.w5)((function(){return[(0,n.Wm)(h,{placeholder:t.$t("unset"),value:p.detail.name,"onUpdate:value":e[0]||(e[0]=function(t){return p.detail.name=t}),class:"width-200"},null,8,["placeholder","value"])]})),_:1},8,["term","rules"])),(0,n.Wm)(m,{term:t.$t("Project"),rules:t.rules.required,name:"project"},{default:(0,n.w5)((function(){return[(0,n.Wm)(g,{placeholder:t.$t("unallocated"),class:"width-200",value:p.detail.project,"onUpdate:value":e[1]||(e[1]=function(t){return p.detail.project=t}),onChange:e[2]||(e[2]=function(t){return f.handleChange()})},{default:(0,n.w5)((function(){return[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(p.projects,(function(t,e){return(0,n.wg)(),(0,n.j4)(v,{key:e,value:t.id},{default:(0,n.w5)((function(){return[t.id?((0,n.wg)(),(0,n.iD)("span",l,(0,a.zw)(t.name),1)):(0,n.kq)("",!0),t.id?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("i",r,(0,a.zw)(t.name),1))]})),_:2},1032,["value"])})),128))]})),_:1},8,["placeholder","value"])]})),_:1},8,["term","rules"]),(0,n.Wm)(m,{term:t.$t("Service")},{default:(0,n.w5)((function(){return[p.detail.service?((0,n.wg)(),(0,n.j4)(y,{key:0,closable:"",onClose:f.clearService},{default:(0,n.w5)((function(){return[(0,n.Uk)((0,a.zw)(p.detail.service.name),1)]})),_:1},8,["onClose"])):(0,n.kq)("",!0),(0,n.Wm)(w,{width:400,col:2,"env-filter":!0,search:!0,placement:"right",icon:p.DatabaseOutlined,onSelect:f.saveService,onEnvChange:f.envChange,"get-tag":function(t){return t.clusterName+" / "+t.namespace},options:p.services},{default:(0,n.w5)((function(){return[(0,n._)("a",null,[(0,n.Wm)(y,{color:"#00adef",key:"submit",type:"primary"},{default:(0,n.w5)((function(){return[(0,n.Uk)((0,a.zw)(t.$t("Relation Service")),1)]})),_:1})])]})),_:1},8,["icon","onSelect","onEnvChange","get-tag","options"])]})),_:1},8,["term"])]})),_:1})]})),default:(0,n.w5)((function(){return[(0,n.Wm)(S,{class:"row-mg"},{default:(0,n.w5)((function(){return[(0,n.Wm)($,{class:"col-pd",xl:24,lg:24,md:24,sm:24,xs:24},{default:(0,n.w5)((function(){return[(0,n.Wm)(T,{type:"card",activeKey:p.activeKey,"onUpdate:activeKey":e[5]||(e[5]=function(t){return p.activeKey=t})},{default:(0,n.w5)((function(){return[(0,n.Wm)(A,{key:"1",tab:t.$t("Overview")},{default:(0,n.w5)((function(){return[(0,n.Wm)(S,{class:"mb-20 row-mg"},{default:(0,n.w5)((function(){return[(0,n.Wm)($,{class:"col-pd",xl:12,lg:24,md:24,sm:24,xs:24},{default:(0,n.w5)((function(){return[(0,n.Wm)(_,{identifiers:p.detail.content.identifiers,"onUpdate:identifiers":e[3]||(e[3]=function(t){return p.detail.content.identifiers=t}),col:1,title:t.$t("Identifier"),onIdentifierSave:f.validate},null,8,["identifiers","title","onIdentifierSave"])]})),_:1})]})),_:1}),(0,n.Wm)(S,{class:"row-mg"},{default:(0,n.w5)((function(){return[(0,n.Wm)($,{class:"col-pd",xl:12,lg:24,md:24,sm:24,xs:24},{default:(0,n.w5)((function(){return[(0,n.Wm)(W,{ratelimitings:p.detail.content.ratelimiting,"onUpdate:ratelimitings":e[4]||(e[4]=function(t){return p.detail.content.ratelimiting=t}),col:1,title:t.$t("Rate Limiting"),onRatelimitingSave:f.validate},null,8,["ratelimitings","title","onRatelimitingSave"])]})),_:1})]})),_:1})]})),_:1},8,["tab"]),p.pid?((0,n.wg)(),(0,n.j4)(A,{key:"2",tab:t.$t("Subscription API")},{default:(0,n.w5)((function(){return[(0,n.Wm)(S,{class:"row-mg"},{default:(0,n.w5)((function(){return[(0,n.Wm)($,{class:"col-pd",xl:p.applies>0?16:24,lg:24,md:24,sm:24,xs:24},{default:(0,n.w5)((function(){return[(0,n.Wm)(x,{col:p.applies>0?3:4,loading:p.subscriptionLoading,onRemove:f.removeSubApi,"sub-apis":p.detail.apis,identifiers:f.identifierList,"auth-apis":p.detail.content.apis},null,8,["col","loading","onRemove","sub-apis","identifiers","auth-apis"])]})),_:1},8,["xl"]),(0,n.Wm)($,{class:"col-pd",xl:p.applies>0?8:0,lg:24,md:24,sm:24,xs:24},{default:(0,n.w5)((function(){return[(0,n.Wm)(O,null,{title:(0,n.w5)((function(){return[(0,n.Uk)((0,a.zw)(t.$t("Applies")),1)]})),default:(0,n.w5)((function(){return[(0,n.Wm)(D,{"item-layout":"vertical","data-source":p.applies,pagination:{onChange:f.searchApplies,current:p.pageNo,pageSize:p.pageSize,showTotal:function(e,i){return"".concat(t.$t("Total")," ").concat(e)},total:p.total}},{renderItem:(0,n.w5)((function(e){var i=e.item;return[(0,n.Wm)(z,null,{extra:(0,n.w5)((function(){return[(0,n._)("div",s,[(0,n._)("a",{href:"javascript:void(0)",onClick:function(t){return f.refuseApply(i)}},[(0,n.Wm)(L,{class:"icon-menu"})],8,o)])]})),default:(0,n.w5)((function(){return[(0,n.Wm)(j,null,{description:(0,n.w5)((function(){return[(0,n.Uk)((0,a.zw)(new Date(i.updatedAt).toLocaleString())+" ("+(0,a.zw)(i.applyUser.username)+") "+(0,a.zw)(t.$t("applies for subscription")),1)]})),title:(0,n.w5)((function(){return[(0,n._)("b",null,(0,a.zw)(i.api?i.api.name:""),1)]})),avatar:(0,n.w5)((function(){return[(0,n.Wm)(C,{class:"primary"})]})),_:2},1024),(0,n._)("div",null,[(0,n._)("div",{class:"relative vm",style:(0,a.j5)([{left:"15px"},"width:"+120*i.api.approvalLevel+"px"])},[(0,n.Wm)(I,{current:i.approvalStep,size:"small",status:["process","finish","error"][i.status]},{default:(0,n.w5)((function(){return[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.findApprovalLevel.approvalRoles,(function(t,e){return(0,n.wg)(),(0,n.j4)(E,{class:"pb-10",key:e,title:t.label},(0,n.Nv)({_:2},[e<=i.approvalStep&&i.content&&i.content.history&&i.content.history[e]?{name:"description",fn:(0,n.w5)((function(){return[i.content.history[e].user?((0,n.wg)(),(0,n.iD)("div",u,[(0,n._)("b",null,(0,a.zw)(i.content.history[e].user.username),1)])):(0,n.kq)("",!0),i.content.history[e].time?((0,n.wg)(),(0,n.iD)("div",c,(0,a.zw)(i.content.history[e].time),1)):(0,n.kq)("",!0)]})),key:"0"}:void 0]),1032,["title"])})),128))]})),_:2},1032,["current","status"])],4)])]})),_:2},1024)]})),_:1},8,["data-source","pagination"])]})),_:1})]})),_:1},8,["xl"])]})),_:1})]})),_:1},8,["tab"])):(0,n.kq)("",!0),""!=p.pid?((0,n.wg)(),(0,n.j4)(A,{key:"11",tab:t.$t("log")},{default:(0,n.w5)((function(){return[(0,n.Wm)(q,{uid:p.pid,type:"app"},null,8,["uid"])]})),_:1},8,["tab"])):(0,n.kq)("",!0)]})),_:1},8,["activeKey"])]})),_:1})]})),_:1}),(0,n.kq)("",!0)]})),_:2},[void 0,i.embed?void 0:{name:"action",fn:(0,n.w5)((function(){return[""!=p.pid?(0,n.wy)(((0,n.wg)(),(0,n.j4)(k,{key:0,type:"primary",onClick:f.validate},{default:(0,n.w5)((function(){return[(0,n.Uk)((0,a.zw)(t.$t("save")),1)]})),_:1},8,["onClick"])),[[P,[p.detail.project?"application:update:project:"+p.detail.project:"application:update"]]]):(0,n.wy)(((0,n.wg)(),(0,n.j4)(k,{key:1,type:"primary",onClick:f.validate},{default:(0,n.w5)((function(){return[(0,n.Uk)((0,a.zw)(t.$t("create")),1)]})),_:1},8,["onClick"])),[[P,[p.detail.project?"application:create:project:"+p.detail.project:"application:create"]]])]})),key:"1"}]),1032,["hide-breadcrumb","title","form-state"])}]])}}]);