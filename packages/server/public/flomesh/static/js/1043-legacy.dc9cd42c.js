"use strict";(self.webpackChunkflomesh_load_balancer=self.webpackChunkflomesh_load_balancer||[]).push([[1043],{39694:function(e,t,_){_.d(t,{Z:function(){return u}});var n=_(66252),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M847.9 592H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h605.2L612.9 851c-4.1 5.2-.4 13 6.3 13h72.5c4.9 0 9.5-2.2 12.6-6.1l168.8-214.1c16.5-21 1.6-51.8-25.2-51.8zM872 356H266.8l144.3-183c4.1-5.2.4-13-6.3-13h-72.5c-4.9 0-9.5 2.2-12.6 6.1L150.9 380.2c-16.5 21-1.6 51.8 25.1 51.8h696c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"swap",theme:"outlined"},o=_(33058);function s(e){for(var t=1;t<arguments.length;t++){var _=null!=arguments[t]?Object(arguments[t]):{},n=Object.keys(_);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(_).filter((function(e){return Object.getOwnPropertyDescriptor(_,e).enumerable})))),n.forEach((function(t){r(e,t,_[t])}))}return e}function r(e,t,_){return t in e?Object.defineProperty(e,t,{value:_,enumerable:!0,configurable:!0,writable:!0}):e[t]=_,e}var a=function(e,t){var _=s({},e,t.attrs);return(0,n.Wm)(o.Z,s({},_,{icon:i}),null)};a.displayName="SwapOutlined",a.inheritAttrs=!1;var u=a},54877:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _Users_zhangcheng_Desktop_work_flomesh_gui_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(95082),core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(57327),core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(41539),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(47941),core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(68309),core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_json_stringify_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(38862),core_js_modules_es_json_stringify_js__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_json_stringify_js__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(39714),core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_6__),_components_editor_JsonEditor__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(21936),_components_editor_JsEditor__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(9294),_components_editor_SQLEditor__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(46919),_components_card_AutoCard__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(66316),_components_tool_FormItem__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(76754),_components_tool_ColSpace__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(75359),_services_clickhouse__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(26917),_services_prometheus__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(17582),_components_tool_Timeline__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(79566),lodash__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(96486),lodash__WEBPACK_IMPORTED_MODULE_16___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_16__),_utils_util__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(84722),_subscribe_index__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(934),vuex__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(33907),_services_dashboard__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(47556),_ant_design_icons_vue__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(64167),isFree=!(0,_utils_util__WEBPACK_IMPORTED_MODULE_17__._y)();__webpack_exports__.Z={name:"WidgetEditor",components:{JsonEditor:_components_editor_JsonEditor__WEBPACK_IMPORTED_MODULE_7__.Z,JsEditor:_components_editor_JsEditor__WEBPACK_IMPORTED_MODULE_8__.Z,SQLEditor:_components_editor_SQLEditor__WEBPACK_IMPORTED_MODULE_9__.Z,AutoCard:_components_card_AutoCard__WEBPACK_IMPORTED_MODULE_10__.Z,FormItem:_components_tool_FormItem__WEBPACK_IMPORTED_MODULE_11__.Z,ColSpace:_components_tool_ColSpace__WEBPACK_IMPORTED_MODULE_12__.Z,FilterOutlined:_ant_design_icons_vue__WEBPACK_IMPORTED_MODULE_20__.Z,Timeline:_components_tool_Timeline__WEBPACK_IMPORTED_MODULE_15__.Z},i18n:__webpack_require__(89234),data:function(){return{running:!1,response:"",pid:"",activeKey:"1",ver:1,custom:{id:"",title:"",tag:{name:"Gauge"},service:{type:"rest",path:"",method:"GET",payload:"{}",clickhouseSQL:"",prometheusSQL:""},col:6,data:""},dateVal:[60,100],rightKey:"1",readonly:!1,icons:_subscribe_index__WEBPACK_IMPORTED_MODULE_18__.Z.baseComponents,visiblePre:!1,visibleAttr:!1,visibleEdit:!1,flb:[],fsm:[],openapi:[],userWidgets:{},baseComponents:{},customComponents:[],system:[],workload:[],widgetName:"",projects:[],inPreview:!1,previewSubscribe:"",previewSubscribeWidth:"300",loading:!0,activities:[],config:{},teams:[],samples:[{icon:"icon-component",title:"Get a Rest-API sample",config:_services_dashboard__WEBPACK_IMPORTED_MODULE_19__.Tf},{icon:"icon-component",title:"Get a Clickhouse-Query sample",config:_services_dashboard__WEBPACK_IMPORTED_MODULE_19__.Ru},{icon:"icon-component",title:"Get a Prometheus-Query sample",config:_services_dashboard__WEBPACK_IMPORTED_MODULE_19__.sl}],isFree:isFree}},computed:(0,_Users_zhangcheng_Desktop_work_flomesh_gui_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__.Z)((0,_Users_zhangcheng_Desktop_work_flomesh_gui_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__.Z)({},(0,vuex__WEBPACK_IMPORTED_MODULE_21__.rn)("rules",["rules"])),{},{filterBaseComponents:function(){var e=this;return Object.keys(this.baseComponents||{}).filter((function(t){return e.baseComponents[t].isOpen}))},timelineQL:function(){return(0,_services_prometheus__WEBPACK_IMPORTED_MODULE_14__.xI)(this.dateVal[0],this.dateVal[1])||""},where:function(){return(0,_services_clickhouse__WEBPACK_IMPORTED_MODULE_13__.M0)(this.dateVal[0],this.dateVal[1])||""}}),created:function(){this.baseComponents=_subscribe_index__WEBPACK_IMPORTED_MODULE_18__.Z.baseComponents,this.pid=this.$route.params.id||"",this.widgetName=this.$route.params.name||"",this.pid?this.loaddata():this.widgetName?this.run():this.resetCustom()},activated:function(){},methods:{dateChange:function(e){},getResp:function(e){var t=this;setTimeout((function(){t.running=!1}),600),e.error?this.response=JSON.stringify({error:e.error}):this.response=JSON.stringify(e.data)},normalRun:function normalRun(){if(!this.readonly){var root=this.widgetName.split(".")[0],key1=this.widgetName.split(".")[1],key2=this.widgetName.split(".")[2];this.previewSubscribe=root+"."+key1+"."+key2;var config=this.getSubscribe([root,key1,key2],_subscribe_index__WEBPACK_IMPORTED_MODULE_18__.Z,0);this.custom=(0,_Users_zhangcheng_Desktop_work_flomesh_gui_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__.Z)((0,_Users_zhangcheng_Desktop_work_flomesh_gui_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__.Z)({},lodash__WEBPACK_IMPORTED_MODULE_16___default().cloneDeep(config)),{},{data:(config.data||function(){}).toString(),col:_subscribe_index__WEBPACK_IMPORTED_MODULE_18__.Z[root][key1][key2].col})}this.config=(0,_Users_zhangcheng_Desktop_work_flomesh_gui_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__.Z)((0,_Users_zhangcheng_Desktop_work_flomesh_gui_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__.Z)({},lodash__WEBPACK_IMPORTED_MODULE_16___default().cloneDeep(this.custom)),{},{data:eval(this.custom.data)}),this.previewSubscribeWidth=50*this.config.col,this.readonly=!0},customRun:function(){var e=this.custom.tag.name,t=this.custom.id;this.previewSubscribe="custom."+e+"."+t,this.config=this.custom,this.previewSubscribeWidth=50*this.config.col},run:function(){this.rightKey="1",this.widgetName?this.normalRun():this.customRun(),this.ver++,this.running=!0},add:function(){this.resetCustom(),this.showModalEdit()},getSamples:function(e){this.custom=e,this.activeKey="1",this.run()},resetCustom:function(){this.custom={id:"",title:"",tag:{name:"Gauge"},service:{type:"rest",path:"",method:"GET",payload:"{}",clickhouseSQL:"",prometheusSQL:""},col:6,data:this.baseComponents.Gauge.callback}},showModalPre:function(){this.visiblePre=!0},showModalAttr:function(){this.visibleAttr=!0},showModalEdit:function(){this.visibleEdit=!0,this.custom.service||(this.custom.service={type:"rest",path:"",method:"GET",payload:"{}",clickhouseSQL:"",prometheusSQL:""})},valid:function(e){return!this.userWidgets[e.id]||(this.$message.error(this.$t("Duplicate widget ID name, please try another ID"),3),!1)},validComponentForm:function(){var e=this;this.$refs.componentForm.validateFields().then((function(){e.handleOk()})).catch((function(){}))},handleOk:function(){var e=this;this.visibleEdit=!1;var t=lodash__WEBPACK_IMPORTED_MODULE_16___default().cloneDeep(this.custom);t.service.type&&"rest"!=t.service.type||t.service.path||delete t.service,this.pid?(0,_services_dashboard__WEBPACK_IMPORTED_MODULE_19__.IJ)(this.pid,t).then((function(){e.$message.success(e.$t("Save successfully"),3),e.loaddata()})):this.valid(t)&&(0,_services_dashboard__WEBPACK_IMPORTED_MODULE_19__.MZ)(t).then((function(){e.$message.success(e.$t("Created successfully"),3),e.$closePage(e.$route)}))},getSubscribe:function(e,t,_){return e.length>_?this.getSubscribe(e,t[e[_]],++_):t},renderCallback:function(){var e=this;if(this.pid){var t=this;this.$confirm({title:this.$t("Tip"),content:function(){return e.$t("Synchronize matching callbacks?")},onOk:function(){t.custom.data=t.baseComponents[t.custom.tag.name].callback},onCancel:function(){},class:"test"})}else this.custom.data=this.baseComponents[this.custom.tag.name].callback},reset:function(){this.pid?this.loaddata():this.resetCustom()},loaddata:function(){var e=this;this.readonly=!1,(0,_services_dashboard__WEBPACK_IMPORTED_MODULE_19__.Cb)(this.pid).then((function(t){e.loading=!1,e.custom=t.content,e.run()}))}}}},9294:function(e,t,_){_.d(t,{Z:function(){return s}});var n=_(66252);_(74916),_(15306);var i=_(29764);(0,_(25552).H)({id:"javascript",extensions:[".js",".es6",".jsx",".mjs"],firstLine:"^#!.*\\bnode",filenames:["jakefile"],aliases:["JavaScript","javascript","js"],mimetypes:["text/javascript"],loader:function(){return _.e(6015).then(_.bind(_,6015))}});var o={name:"JsEditor",components:{monacoeditor:i.Z},props:["value","height","isReadonly","id","theme"],data:function(){return{code:"",cmOptions:{lineNumbers:!0,mode:"javascript",readOnly:!1,lint:!0}}},watch:{value:function(e,t){e!==t&&this.setValue()}},mounted:function(){this.setValue()},methods:{change:function(e){"string"==typeof e&&(this.$emit("update:value",e),this.$emit("change",e))},setValue:function(){null!=this.value.replace&&(this.code=this.value)}}};var s=(0,_(83744).Z)(o,[["render",function(e,t,_,i,o,s){var r=(0,n.up)("monacoeditor");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(r,{id:_.id||"JsEditor",content:o.code,"onUpdate:content":t[0]||(t[0]=function(e){return o.code=e}),option:o.cmOptions,onChange:s.change,height:_.height,theme:_.theme,"is-readonly":_.isReadonly},null,8,["id","content","option","onChange","height","theme","is-readonly"])])}]])},46919:function(e,t,_){_.d(t,{Z:function(){return s}});var n=_(66252);_(74916),_(15306);var i=_(29764);(0,_(25552).H)({id:"sql",extensions:[".sql"],aliases:["SQL"],loader:function(){return _.e(7778).then(_.bind(_,27778))}});var o={name:"SQLEditor",components:{monacoeditor:i.Z},props:["value","height","isReadonly","id","theme"],data:function(){return{code:"",cmOptions:{lineNumbers:!0,mode:"sql",readOnly:!1,lint:!0}}},watch:{value:function(e,t){e!==t&&this.setValue()}},mounted:function(){this.setValue()},methods:{change:function(e){"string"==typeof e&&(this.$emit("update:value",e),this.$emit("change",e))},setValue:function(){null!=this.value.replace&&(this.code=this.value.replace(/"/g,"").replace(/\\n/g,"\n").replace(/\\t/g,"\t"))}}};var s=(0,_(83744).Z)(o,[["render",function(e,t,_,i,o,s){var r=(0,n.up)("monacoeditor");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(r,{id:_.id||"SQLEditor",content:o.code,"onUpdate:content":t[0]||(t[0]=function(e){return o.code=e}),option:o.cmOptions,onChange:s.change,height:_.height,theme:_.theme,"is-readonly":_.isReadonly},null,8,["id","content","option","onChange","height","theme","is-readonly"])])}]])},75359:function(e,t,_){_.d(t,{Z:function(){return M}});var n=_(66252),i=_(3577),o=function(e){return(0,n.dD)("data-v-7025c042"),e=e(),(0,n.Cn)(),e},s={class:"col-space flex"},r={class:"flex-item"},a=o((function(){return(0,n._)("h5",null,"1 / 4",-1)})),u={class:"layout-body"},l=[o((function(){return(0,n._)("div",{class:"layout-item"},null,-1)}))],c={class:"flex-item"},d=o((function(){return(0,n._)("h5",null,"1 / 3",-1)})),p={class:"layout-body"},m=[o((function(){return(0,n._)("div",{class:"layout-item"},null,-1)}))],h={class:"flex-item"},f=o((function(){return(0,n._)("h5",null,"1 / 2",-1)})),E={class:"layout-body"},g=[o((function(){return(0,n._)("div",{class:"layout-item"},null,-1)}))],v={class:"flex-item"},b=o((function(){return(0,n._)("h5",null,"2 / 3",-1)})),w={class:"layout-body"},D=[o((function(){return(0,n._)("div",{class:"layout-item"},null,-1)}))],y={class:"flex-item"},O=o((function(){return(0,n._)("h5",null,"100%",-1)})),P={class:"layout-body"},k=[o((function(){return(0,n._)("div",{class:"layout-item"},null,-1)}))];var C={name:"ColSpace",props:["col","readonly"],data:function(){return{}},created:function(){},methods:{update:function(e){this.readonly||this.$emit("update:col",e)}}};var M=(0,_(83744).Z)(C,[["render",function(e,t,_,o,C,M){return(0,n.wg)(),(0,n.iD)("div",s,[(0,n._)("div",r,[(0,n._)("div",{class:(0,i.C_)(["layout-selector",6==_.col?"highlight":""]),onClick:t[0]||(t[0]=function(e){return M.update(6)})},[a,(0,n._)("div",u,[((0,n.wg)(),(0,n.iD)(n.HY,null,(0,n.Ko)(4,(function(e,t){return(0,n._)("div",{key:t,class:(0,i.C_)(["layout-grid",0==t?"highlight":""])},l,2)})),64))])],2)]),(0,n._)("div",c,[(0,n._)("div",{class:(0,i.C_)(["layout-selector",8==_.col?"highlight":""]),onClick:t[1]||(t[1]=function(e){return M.update(8)})},[d,(0,n._)("div",p,[((0,n.wg)(),(0,n.iD)(n.HY,null,(0,n.Ko)(3,(function(e,t){return(0,n._)("div",{key:t,class:(0,i.C_)(["layout-grid",0==t?"highlight":""])},m,2)})),64))])],2)]),(0,n._)("div",h,[(0,n._)("div",{class:(0,i.C_)(["layout-selector",12==_.col?"highlight":""]),onClick:t[2]||(t[2]=function(e){return M.update(12)})},[f,(0,n._)("div",E,[((0,n.wg)(),(0,n.iD)(n.HY,null,(0,n.Ko)(2,(function(e,t){return(0,n._)("div",{key:t,class:(0,i.C_)(["layout-grid",0==t?"highlight":""])},g,2)})),64))])],2)]),(0,n._)("div",v,[(0,n._)("div",{class:(0,i.C_)(["layout-selector",16==_.col?"highlight":""]),onClick:t[3]||(t[3]=function(e){return M.update(16)})},[b,(0,n._)("div",w,[((0,n.wg)(),(0,n.iD)(n.HY,null,(0,n.Ko)(2,(function(e,t){return(0,n._)("div",{key:t,class:(0,i.C_)(["layout-grid",0==t?"highlight":""]),style:(0,i.j5)(0==t?"flex:2":"")},D,6)})),64))])],2)]),(0,n._)("div",y,[(0,n._)("div",{class:(0,i.C_)(["layout-selector",24==_.col?"highlight":""]),onClick:t[4]||(t[4]=function(e){return M.update(24)})},[O,(0,n._)("div",P,[((0,n.wg)(),(0,n.iD)(n.HY,null,(0,n.Ko)(1,(function(e,t){return(0,n._)("div",{key:t,class:(0,i.C_)(["layout-grid",0==t?"highlight":""])},k,2)})),64))])],2)])])}],["__scopeId","data-v-7025c042"]])},45228:function(e,t,_){_.r(t),_.d(t,{default:function(){return f}});_(68309);var n=_(66252),i=_(3577),o=_(87932),s={style:{margin:"-12px -16px"}},r={class:"filter fullscreen header-fullscreen normal"},a={class:"buttonGroup"},u={class:"icon select-svg","aria-hidden":"true"},l=["xlink:href"],c=["onClick"],d={class:"icon select-svg","aria-hidden":"true"},p=["xlink:href"],m=function(e){return(0,n.dD)("data-v-e7aef960"),e=e(),(0,n.Cn)(),e}((function(){return(0,n._)("img",{src:o,style:{width:"300px"}},null,-1)}));var h=_(54877);var f=(0,_(83744).Z)(h.Z,[["render",function(e,t,_,o,h,f){var E=(0,n.up)("Timeline"),g=(0,n.up)("a-descriptions-item"),v=(0,n.up)("a-descriptions"),b=(0,n.up)("FilterOutlined"),w=(0,n.up)("a-tooltip"),D=(0,n.up)("a-popover"),y=(0,n.up)("a-button"),O=(0,n.up)("a-input"),P=(0,n.up)("FormItem"),k=(0,n.up)("a-select-option"),C=(0,n.up)("a-select"),M=(0,n.up)("ColSpace"),W=(0,n.up)("a-radio-group"),U=(0,n.up)("a-input-group"),j=(0,n.up)("SQLEditor"),L=((0,n.up)("a-textarea"),(0,n.up)("JsEditor")),K=(0,n.up)("a-form"),R=(0,n.up)("a-tab-pane"),T=(0,n.up)("a-list-item-meta"),I=(0,n.up)("a-list-item"),A=(0,n.up)("a-list"),B=(0,n.up)("a-tabs"),S=(0,n.up)("a-card"),$=(0,n.up)("a-col"),q=(0,n.up)("AutoCard"),x=(0,n.up)("a-result"),Z=(0,n.up)("JsonEditor"),Q=(0,n.up)("a-row"),N=(0,n.Q2)("permission");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(D,{placement:"left",trigger:"click",class:"nopd"},{content:(0,n.w5)((function(){return[(0,n._)("div",s,[(0,n.Wm)(v,{bordered:""},{default:(0,n.w5)((function(){return[(0,n.Wm)(g,{label:e.$t("Timeline"),span:3},{default:(0,n.w5)((function(){return[(0,n.Wm)(E,{dateVal:h.dateVal,"onUpdate:dateVal":t[0]||(t[0]=function(e){return h.dateVal=e}),onDateChange:f.dateChange},null,8,["dateVal","onDateChange"])]})),_:1},8,["label"])]})),_:1})])]})),default:(0,n.w5)((function(){return[(0,n._)("div",r,[(0,n.Wm)(w,{placement:"left",title:e.$t("Filter")},{default:(0,n.w5)((function(){return[(0,n.Wm)(b,{class:"icon"})]})),_:1},8,["title"])])]})),_:1}),(0,n.Wm)(Q,{class:"bg-white"},{default:(0,n.w5)((function(){return[(0,n.Wm)($,{span:12},{default:(0,n.w5)((function(){return[(0,n.Wm)(S,{class:"left preview-card"},{default:(0,n.w5)((function(){return[(0,n.Wm)(B,{activeKey:h.activeKey,"onUpdate:activeKey":t[12]||(t[12]=function(e){return h.activeKey=e})},{rightExtra:(0,n.w5)((function(){return[(0,n._)("div",a,[h.widgetName?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(y,{key:0,type:"link",onClick:f.reset},{default:(0,n.w5)((function(){return[(0,n.Uk)((0,i.zw)(e.$t("Reset")),1)]})),_:1},8,["onClick"])),(0,n.Wm)(y,{type:"link",loading:h.running,onClick:f.run},{default:(0,n.w5)((function(){return[(0,n.Uk)((0,i.zw)(e.$t("Run")),1)]})),_:1},8,["loading","onClick"]),!h.readonly&&h.pid?(0,n.wy)(((0,n.wg)(),(0,n.j4)(y,{key:1,type:"primary",onClick:f.validComponentForm},{default:(0,n.w5)((function(){return[(0,n.Uk)((0,i.zw)(e.$t("save")),1)]})),_:1},8,["onClick"])),[[N,["widget:update"]]]):h.readonly||h.pid?((0,n.wg)(),(0,n.j4)(y,{key:3,type:"primary",disabled:""},{default:(0,n.w5)((function(){return[(0,n.Uk)((0,i.zw)(e.$t("Readonly")),1)]})),_:1})):(0,n.wy)(((0,n.wg)(),(0,n.j4)(y,{key:2,type:"primary",onClick:f.validComponentForm},{default:(0,n.w5)((function(){return[(0,n.Uk)((0,i.zw)(e.$t("create")),1)]})),_:1},8,["onClick"])),[[N,["service:create"]]])])]})),default:(0,n.w5)((function(){return[(0,n.Wm)(R,{key:"1",tab:e.$t("Config")},{default:(0,n.w5)((function(){return[(0,n.Wm)(K,{model:h.custom,"wrapper-col":{span:24},ref:"componentForm"},{default:(0,n.w5)((function(){return[(0,n.Wm)(v,{bordered:""},{default:(0,n.w5)((function(){return[h.widgetName?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(g,{key:0,label:e.$t("as"),span:3},{default:(0,n.w5)((function(){return[(0,n.Wm)(P,{name:"id",rules:e.rules.required},{default:(0,n.w5)((function(){return[(0,n.Wm)(O,{disabled:!!h.pid,placeholder:e.$t("unset"),value:h.custom.id,"onUpdate:value":t[1]||(t[1]=function(e){return h.custom.id=e}),class:"bold width-200"},null,8,["disabled","placeholder","value"])]})),_:1},8,["rules"])]})),_:1},8,["label"])),(0,n.Wm)(g,{label:e.$t("Title"),span:3},{default:(0,n.w5)((function(){return[(0,n.Wm)(P,{name:"title",rules:e.rules.required},{default:(0,n.w5)((function(){return[(0,n.Wm)(O,{placeholder:e.$t("unset"),value:h.custom.title,"onUpdate:value":t[2]||(t[2]=function(e){return h.custom.title=e}),disabled:!!h.widgetName,class:"width-300"},null,8,["placeholder","value","disabled"])]})),_:1},8,["rules"])]})),_:1},8,["label"]),(0,n.Wm)(g,{label:e.$t("Tag"),span:3},{default:(0,n.w5)((function(){return[(0,n.Wm)(C,{placeholder:e.$t("Please select"),class:"width-200",disabled:!!h.pid||!!h.widgetName,value:h.custom.tag.name,"onUpdate:value":t[3]||(t[3]=function(e){return h.custom.tag.name=e}),onChange:f.renderCallback},{default:(0,n.w5)((function(){return[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(f.filterBaseComponents,(function(e,t){return(0,n.wg)(),(0,n.j4)(k,{key:t,value:e},{default:(0,n.w5)((function(){return[(0,n._)("span",null,[((0,n.wg)(),(0,n.iD)("svg",u,[(0,n._)("use",{"xlink:href":"#"+h.baseComponents[e].icon},null,8,l)])),(0,n.Uk)(" "+(0,i.zw)(e),1)])]})),_:2},1032,["value"])})),128))]})),_:1},8,["placeholder","disabled","value","onChange"])]})),_:1},8,["label"]),(0,n.Wm)(g,{label:e.$t("Cols"),"content-style":{padding:0},span:3},{default:(0,n.w5)((function(){return[(0,n.Wm)(M,{col:h.custom.col,"onUpdate:col":t[4]||(t[4]=function(e){return h.custom.col=e})},null,8,["col"])]})),_:1},8,["label"]),h.widgetName?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(g,{key:1,label:e.$t("Data Source"),span:3},{default:(0,n.w5)((function(){return[(0,n.Wm)(W,{class:"mb-10",value:h.custom.service.type,"onUpdate:value":t[5]||(t[5]=function(e){return h.custom.service.type=e}),"option-type":"button",options:[{label:"Rest API",value:"rest"},{label:"Clickhouse",value:"clickhouse"},{label:"Prometheus",value:"prometheus"}]},null,8,["value"])]})),_:1},8,["label"])),h.widgetName?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(g,{key:2,label:e.$t("Query"),"content-style":{padding:0},span:3},{default:(0,n.w5)((function(){return[h.custom.service.type&&"rest"!=h.custom.service.type?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(U,{key:0,compact:""},{default:(0,n.w5)((function(){return[(0,n.Wm)(O,{class:"width-0_2","default-value":"http://",disabled:""}),(0,n.Wm)(O,{class:"width-0_6",value:h.custom.service.path,"onUpdate:value":t[6]||(t[6]=function(e){return h.custom.service.path=e}),placeholder:e.$t("Path")},null,8,["value","placeholder"]),(0,n.Wm)(C,{placeholder:e.$t("Please select"),class:"width-0_2",value:h.custom.service.method,"onUpdate:value":t[7]||(t[7]=function(e){return h.custom.service.method=e})},{default:(0,n.w5)((function(){return[(0,n.Wm)(k,{value:"GET"},{default:(0,n.w5)((function(){return[(0,n.Uk)(" GET ")]})),_:1}),(0,n.Wm)(k,{value:"POST"},{default:(0,n.w5)((function(){return[(0,n.Uk)(" POST ")]})),_:1})]})),_:1},8,["placeholder","value"])]})),_:1})),"clickhouse"==h.custom.service.type?((0,n.wg)(),(0,n.j4)(j,{key:1,id:"clickhouseEditor",value:h.custom.service.clickhouseSQL,"onUpdate:value":t[8]||(t[8]=function(e){return h.custom.service.clickhouseSQL=e}),height:"150px"},null,8,["value"])):(0,n.kq)("",!0),"prometheus"==h.custom.service.type?((0,n.wg)(),(0,n.j4)(j,{key:2,id:"prometheusEditor",value:h.custom.service.prometheusSQL,"onUpdate:value":t[9]||(t[9]=function(e){return h.custom.service.prometheusSQL=e}),height:"150px"},null,8,["value"])):(0,n.kq)("",!0)]})),_:1},8,["label"])),(0,n.kq)("",!0),(0,n.Wm)(g,{label:e.$t("Callback"),"content-style":{padding:0},span:3},{default:(0,n.w5)((function(){return[(0,n.Wm)(L,{id:"editJsEditor","is-readonly":!!h.widgetName,value:h.custom.data,"onUpdate:value":t[11]||(t[11]=function(e){return h.custom.data=e}),height:"300px"},null,8,["is-readonly","value"])]})),_:1},8,["label"])]})),_:1})]})),_:1},8,["model"])]})),_:1},8,["tab"]),h.widgetName||h.pid?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(R,{key:"2",class:"pl-10 pr-10",tab:e.$t("Samples")},{default:(0,n.w5)((function(){return[(0,n.Wm)(A,{"item-layout":"horizontal","data-source":h.samples},{renderItem:(0,n.w5)((function(t){var _=t.item;return[(0,n.Wm)(I,null,{actions:(0,n.w5)((function(){return[(0,n._)("a",{onClick:function(e){return f.getSamples(_.config)}},(0,i.zw)(e.$t("Use")),9,c)]})),default:(0,n.w5)((function(){return[(0,n.Wm)(T,{description:""},{title:(0,n.w5)((function(){return[(0,n.Uk)((0,i.zw)(e.$t(_.title)),1)]})),avatar:(0,n.w5)((function(){return[((0,n.wg)(),(0,n.iD)("svg",d,[(0,n._)("use",{"xlink:href":"#"+_.icon},null,8,p)]))]})),_:2},1024)]})),_:2},1024)]})),_:1},8,["data-source"])]})),_:1},8,["tab"]))]})),_:1},8,["activeKey"])]})),_:1})]})),_:1}),(0,n.Wm)($,{span:12},{default:(0,n.w5)((function(){return[(0,n.Wm)(S,{class:"bg-gray preview-card"},{default:(0,n.w5)((function(){return[(0,n.Wm)(B,{activeKey:h.rightKey,"onUpdate:activeKey":t[14]||(t[14]=function(e){return h.rightKey=e}),"destroy-inactive-tab-pane":!0,centered:""},{default:(0,n.w5)((function(){return[(0,n.Wm)(R,{class:"overflow-auto pt-20",key:"1",tab:e.$t("Preview")},{default:(0,n.w5)((function(){return[h.previewSubscribe?((0,n.wg)(),(0,n.j4)(q,{key:0,n:h.previewSubscribe,config:h.config,where:f.where,filters:{timelineQL:f.timelineQL},ver:h.ver,class:"auto-card nopd",style:(0,i.j5)("width:"+h.previewSubscribeWidth+"px"),onResp:f.getResp},null,8,["n","config","where","filters","ver","style","onResp"])):((0,n.wg)(),(0,n.j4)(x,{key:1,title:e.$t("No Widget"),"sub-title":e.$t("Try change the config and click run button")},{icon:(0,n.w5)((function(){return[m]})),_:1},8,["title","sub-title"]))]})),_:1},8,["tab"]),(0,n.Wm)(R,{key:"2",tab:e.$t("Response")},{default:(0,n.w5)((function(){return[(0,n.Wm)(Z,{"is-readonly":!0,"is-json":!0,height:"800px",value:h.response,"onUpdate:value":t[13]||(t[13]=function(e){return h.response=e})},null,8,["value"])]})),_:1},8,["tab"])]})),_:1},8,["activeKey"])]})),_:1})]})),_:1})]})),_:1})],64)}],["__scopeId","data-v-e7aef960"]])}}]);