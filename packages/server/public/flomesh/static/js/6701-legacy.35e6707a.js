"use strict";(self.webpackChunkflomesh_load_balancer=self.webpackChunkflomesh_load_balancer||[]).push([[6701],{10711:function(e,t,n){n.d(t,{Z:function(){return h}});n(68309);var i=n(66252),a=n(3577),o={key:0,class:"permission-card-body"},r={key:1,class:"permission-card-body"},l={key:0},s={class:"inline-block"},u={class:"inline-block relative",style:{left:"10px",top:"-7px"}},c={key:1},d={class:"inline-block"},f=function(e){return(0,i.dD)("data-v-21a71ec4"),e=e(),(0,i.Cn)(),e}((function(){return(0,i._)("div",{class:"inline-block relative",style:{left:"10px",top:"-7px"}},null,-1)}));n(41539),n(54747);var p=n(75255),m=n(54367),g={name:"PermissionCard",components:{CheckOutlined:p.Z,CloseOutlined:m.Z},props:["resources"],i18n:n(89234),data:function(){return{}},computed:{maxResources:function(){var e=0;return this.resources.forEach((function(t){e=e>t.actions.length?e:t.actions.length})),e}},created:function(){},mounted:function(){},methods:{}};var h=(0,n(83744).Z)(g,[["render",function(e,t,n,p,m,g){var h=(0,i.up)("a-card-grid"),w=(0,i.up)("CheckOutlined"),v=(0,i.up)("CloseOutlined"),y=(0,i.up)("a-card");return(0,i.wg)(),(0,i.j4)(y,{class:"grid-menu nopd small-grid-menu",bordered:!1},{default:(0,i.w5)((function(){return[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.resources,(function(t,p){var m,y;return(0,i.wg)(),(0,i.iD)("div",{key:p},["project"!=t.type||0!=p&&(null===(m=n.resources[p-1].project)||void 0===m?void 0:m.id)==t.project.id?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",o,(0,a.zw)(e.$t("Project"))+":"+(0,a.zw)(t.project.name),1)),"organization"!=t.type||0!=p&&(null===(y=n.resources[p-1].organization)||void 0===y?void 0:y.id)==t.organization.id?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",r,(0,a.zw)(e.$t("Organization"))+":"+(0,a.zw)(t.organization.name),1)),(0,i.Wm)(h,{class:"flex-item permission-card-resource",style:(0,a.j5)("width:"+Math.floor(1e3/(g.maxResources+1))/10+"%")},{default:(0,i.w5)((function(){return[(0,i._)("b",null,(0,a.zw)(e.$t(t.name)),1)]})),_:2},1032,["style"]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(g.maxResources,(function(n,o){return(0,i.wg)(),(0,i.j4)(h,{key:o,class:"flex-item permission-card-action",style:(0,a.j5)("width:"+Math.floor(1e3/(g.maxResources+1))/10+"%")},{default:(0,i.w5)((function(){return[t.actions.length>o?((0,i.wg)(),(0,i.iD)("div",l,[(0,i._)("div",s,[t.actions[o].enabled?((0,i.wg)(),(0,i.j4)(w,{key:0,class:"success"})):((0,i.wg)(),(0,i.j4)(v,{key:1,class:"danger"}))]),(0,i._)("div",u,(0,a.zw)(e.$t(t.actions[o].name)),1)])):((0,i.wg)(),(0,i.iD)("div",c,[(0,i._)("div",d,[(0,i.Wm)(v,{class:"danger",style:{opacity:"0"}})]),f]))]})),_:2},1032,["style"])})),128))])})),128))]})),_:1})}],["__scopeId","data-v-21a71ec4"]])},71900:function(e,t,n){n.d(t,{Z:function(){return l}});var i=n(66252),a=n(3577),o={class:"head-info"};var r={name:"HeadInfo",props:["title","content"]};var l=(0,n(83744).Z)(r,[["render",function(e,t,n,r,l,s){return(0,i.wg)(),(0,i.iD)("div",o,[(0,i._)("span",null,(0,a.zw)(n.title),1),(0,i._)("p",null,[(0,i.Uk)((0,a.zw)(n.content),1),(0,i.WI)(e.$slots,"body",{},void 0,!0)])])}],["__scopeId","data-v-00006846"]])},96701:function(e,t,n){n.r(t),n.d(t,{default:function(){return D}});n(68309);var i=n(66252),a=n(3577),o={class:"title"},r={class:"userinfo-description"},l={key:0},s={class:"userinfo-description"},u={key:0},c={key:0},d={key:0},f=["onClick"],p={class:"capitalize"},m={class:"pd-20"};var g=n(95082),h=(n(74916),n(64765),n(57658),n(41539),n(54747),n(94107)),w=n(72424),v=n(61103),y=n(71900),b=n(10711),k=n(93099),_=n(33907),z={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M865.3 244.7c-.3-.3-61.1 59.8-182.1 180.6l-84.9-84.9 180.9-180.9c-95.2-57.3-217.5-42.6-296.8 36.7A244.42 244.42 0 00419 432l1.8 6.7-283.5 283.4c-6.2 6.2-6.2 16.4 0 22.6l141.4 141.4c6.2 6.2 16.4 6.2 22.6 0l283.3-283.3 6.7 1.8c83.7 22.3 173.6-.9 236-63.3 79.4-79.3 94.1-201.6 38-296.6z"}}]},name:"tool",theme:"filled"},j=n(33058);function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){W(e,t,n[t])}))}return e}function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=function(e,t){var n=$({},e,t.attrs);return(0,i.Wm)(j.Z,$({},n,{icon:z}),null)};O.displayName="ToolFilled",O.inheritAttrs=!1;var P=O,x={name:"UserInfo",components:{HeadInfo:y.Z,PageLayout:v.Z,ToolFilled:P,PermissionCard:b.Z,ForgetForm:w.Z},i18n:n(89234),data:function(){return{visible:!1,resources:{},loading:!0,oldphone:"",activeKey:"system",tabs:[],detail:{phone:"",email:"",role:{name:""}},welcome:{timeFix:(new Date).toLocaleString(),message:"Welcome Flomesh"}}},computed:(0,g.Z)({},(0,_.rn)("account",{currUser:"user"})),watch:{},created:function(){this.$isPro?this.tabs=[{type:"system",title:"System Role"},{type:"organization",title:"Organization Role"},{type:"project",title:"Project Role"}]:this.tabs=[{type:"system",title:"System Role"},{type:"organization",title:"Organization Role"}]},mounted:function(){this.search()},methods:{forget:function(){var e=this;this.$refs.forget.validate((function(t){t&&(e.visible=!1)}))},goProject:function(e){this.$router.push({path:"/system/projects/detail/"+e})},showModal:function(){this.visible=!0},search:function(){var e=this;this.loading=!0,(0,k.bG)().then((function(t){e.detail=t.data,e.detail.phone=e.detail.phone||"",e.oldphone=e.detail.phone||"",e.detail.email=e.detail.email||"",e.initroles(),e.loading=!1}))},saveEmail:function(){var e=this;this.loading||(this.loading=!0,(0,k.ic)({id:this.detail.id,email:this.detail.email}).then((function(){e.loading=!1,e.$message.success(e.$t("Email replacement succeeded"),3)})))},initroles:function(){this.changeRes()},changeRes:function(){var e=this;this.resources=[],h.Z.getters["account/roles"].permissions.forEach((function(t){"system"!=e.activeKey||t.type&&t.type!=e.activeKey?"system"!=e.activeKey&&t.type==e.activeKey&&e.resources.push(t):e.resources.push(t)}))},savePhone:function(){var e=this;if(!this.loading){if(this.loading=!0,isNaN(1*this.detail.phone))return this.$message.error(this.$t("Wrong phone number format"),3),void setTimeout((function(){e.detail.phone=e.oldphone}),300);(0,k.ic)({id:this.detail.id,phone:this.detail.phone}).then((function(){e.loading=!1,e.oldphone=e.detail.phone,e.$message.success(e.$t("Mobile phone number changed successfully"),3)}))}}}};var D=(0,n(83744).Z)(x,[["render",function(e,t,g,h,w,v){var y=(0,i.up)("ToolFilled"),b=(0,i.up)("HeadInfo"),k=(0,i.up)("a-descriptions-item"),_=(0,i.up)("a-typography-paragraph"),z=(0,i.up)("a-tag"),j=(0,i.up)("a-badge"),$=(0,i.up)("a-descriptions"),W=(0,i.up)("a-card"),O=(0,i.up)("a-tab-pane"),P=(0,i.up)("PermissionCard"),x=(0,i.up)("a-tabs"),D=(0,i.up)("a-col"),C=(0,i.up)("a-row"),K=(0,i.up)("ForgetForm"),R=(0,i.up)("a-modal"),Z=(0,i.up)("PageLayout");return(0,i.wg)(),(0,i.j4)(Z,{avatar:n(61006)},{headerContent:(0,i.w5)((function(){return[(0,i._)("div",null,[(0,i._)("div",o,(0,a.zw)(e.$t("Hello")+" ")+" "+(0,a.zw)(e.currUser.name+" ")+"ï¼Œ"+(0,a.zw)(e.$t(w.welcome.message)),1),(0,i._)("div",null,(0,a.zw)(e.$t("Last Login"))+" : "+(0,a.zw)(w.welcome.timeFix),1)])]})),extra:(0,i.w5)((function(){return[(0,i.Wm)(b,{class:"split-right",title:e.$t("Change Password")},{body:(0,i.w5)((function(){return[(0,i.Wm)(y,{onClick:v.showModal,class:"font-primary icon-menu rotate-icon"},null,8,["onClick"])]})),_:1},8,["title"])]})),default:(0,i.w5)((function(){return[(0,i.Wm)(C,{class:"row-mg"},{default:(0,i.w5)((function(){return[(0,i.Wm)(D,{class:"col-pd",xl:24,lg:24,md:24,sm:24,xs:24},{default:(0,i.w5)((function(){return[(0,i.Wm)(x,{type:"card"},{default:(0,i.w5)((function(){return[(0,i.Wm)(O,{key:"1",tab:e.$t("Overview")},{default:(0,i.w5)((function(){return[(0,i.Wm)(W,{class:"card mb-20 nopd",bordered:!1},{default:(0,i.w5)((function(){return[(0,i.Wm)($,{bordered:"",size:"small"},{default:(0,i.w5)((function(){return[(0,i.Wm)(k,{label:e.$t("as"),span:1},{default:(0,i.w5)((function(){return[(0,i.Uk)((0,a.zw)(w.detail.username),1)]})),_:1},8,["label"]),e.$isPro?((0,i.wg)(),(0,i.j4)(k,{key:0,label:e.$t("Mobile"),span:2},{default:(0,i.w5)((function(){return[(0,i._)("div",r,[w.detail.phone?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("span",l,"-")),(0,i.Wm)(_,{class:"inline-block",content:w.detail.phone,"onUpdate:content":t[0]||(t[0]=function(e){return w.detail.phone=e}),editable:{onEnd:v.savePhone}},null,8,["content","editable"])])]})),_:1},8,["label"])):(0,i.kq)("",!0),(0,i.Wm)(k,{label:e.$t("Roles"),span:1},{default:(0,i.w5)((function(){return[(0,i.Wm)(z,{color:"blue"},{default:(0,i.w5)((function(){return[(0,i.Uk)((0,a.zw)(e.$t(w.detail.role.name)),1)]})),_:1})]})),_:1},8,["label"]),(0,i.Wm)(k,{label:e.$t("Email"),span:2},{default:(0,i.w5)((function(){return[(0,i._)("div",s,[w.detail.email?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("span",u,"-")),(0,i.Wm)(_,{class:"inline-block",content:w.detail.email,"onUpdate:content":t[1]||(t[1]=function(e){return w.detail.email=e})},null,8,["content"])])]})),_:1},8,["label"]),(0,i.Wm)(k,{label:e.$t("Organization"),span:1},{default:(0,i.w5)((function(){return[w.detail.userOrganizations&&0!=w.detail.userOrganizations.length?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("span",c,"-")),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(w.detail.userOrganizations,(function(e,t){return(0,i.wg)(),(0,i.iD)("div",{key:t,style:(0,a.j5)(0==t?"":"margin-top: 5px;")},[(0,i.Wm)(z,{color:"orange"},{default:(0,i.w5)((function(){return[(0,i.Uk)((0,a.zw)(e.name),1)]})),_:2},1024)],4)})),128))]})),_:1},8,["label"]),(0,i.Wm)(k,{label:e.$t("Project"),span:2},{default:(0,i.w5)((function(){return[w.detail.userProjects&&0!=w.detail.userProjects.length?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("span",d,"-")),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(w.detail.userProjects,(function(e,t){return(0,i.wg)(),(0,i.iD)("div",{key:t,style:(0,a.j5)(0==t?"":"margin-top: 5px;"),onClick:function(t){return v.goProject(e.id)}},[(0,i.Wm)(j,{text:e.name,status:"processing"},null,8,["text"])],12,f)})),128))]})),_:1},8,["label"])]})),_:1})]})),_:1})]})),_:1},8,["tab"]),(0,i.Wm)(O,{key:"2",tab:e.$t("Authority")},{default:(0,i.w5)((function(){return[(0,i.Wm)(x,{"tab-position":"left",type:"line",activeKey:w.activeKey,"onUpdate:activeKey":t[2]||(t[2]=function(e){return w.activeKey=e}),onChange:v.changeRes},{default:(0,i.w5)((function(){return[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(w.tabs,(function(t){return(0,i.wg)(),(0,i.j4)(O,{key:t.type},{tab:(0,i.w5)((function(){return[(0,i._)("div",p,(0,a.zw)(e.$t(t.title)),1)]})),default:(0,i.w5)((function(){return[w.resources.length>0?((0,i.wg)(),(0,i.j4)(P,{key:0,resources:w.resources},null,8,["resources"])):(0,i.kq)("",!0)]})),_:2},1024)})),128))]})),_:1},8,["activeKey","onChange"])]})),_:1},8,["tab"])]})),_:1})]})),_:1})]})),_:1}),(0,i.Wm)(R,{visible:w.visible,"onUpdate:visible":t[3]||(t[3]=function(e){return w.visible=e}),title:e.$t("Change Password"),width:"25%","ok-text":e.$t("Reset"),onOk:v.forget},{default:(0,i.w5)((function(){return[(0,i._)("div",m,[(0,i.Wm)(K,{ref:"forget",nofoot:!0,"user-name":w.detail.email},null,8,["user-name"])])]})),_:1},8,["visible","title","ok-text","onOk"])]})),_:1},8,["avatar"])}],["__scopeId","data-v-61f79d51"]])}}]);