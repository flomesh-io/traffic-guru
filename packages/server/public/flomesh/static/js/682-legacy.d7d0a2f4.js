"use strict";(self.webpackChunkflomesh_load_balancer=self.webpackChunkflomesh_load_balancer||[]).push([[682],{990:function(t,e,a){a.d(e,{Z:function(){return r}});var i=a(66252),n={class:"DashboardCore"};var o=a(56912),p={name:"Dashboard",i18n:a(89234),components:{DashboardCore:o.Z},props:["pageId","prometheus","apply","params","hideAdd","init","defaultWidget"],data:function(){return{prometheusVal:null}},computed:{},watch:{prometheus:function(t){this.prometheusVal=t}},created:function(){},mounted:function(){this.prometheusVal=this.prometheus},methods:{prometheusChange:function(){this.$emit("update:prometheus",this.prometheusVal),this.$emit("prometheusChange",this.prometheusVal)}}};var r=(0,a(83744).Z)(p,[["render",function(t,e,a,o,p,r){var s=(0,i.up)("DashboardCore");return(0,i.wg)(),(0,i.iD)("div",n,[(0,i.Wm)(s,{"hide-add":a.hideAdd,init:a.init,"hide-head":!0,"page-id":a.pageId,params:a.params,kind:a.apply,prometheus:p.prometheusVal,"onUpdate:prometheus":e[0]||(e[0]=function(t){return p.prometheusVal=t}),onPrometheusChange:r.prometheusChange,apply:a.apply+"."+a.pageId,embed:!0,"default-widget":a.defaultWidget},null,8,["hide-add","init","page-id","params","kind","prometheus","onPrometheusChange","apply","default-widget"])])}]])},66022:function(t,e,a){a.d(e,{Z:function(){return l}});a(68309),a(74916),a(64765);var i=a(66252),n=a(3577),o={class:"search-content"},p={class:"mb-5"},r={class:"content"};a(57658);var s=a(60234),u=a(69596),d={name:"ApplicationListResults",i18n:a(89234),components:{CardList:u.Z},props:["apps","total","pageNo","pageSize","loading"],data:function(){return{BookmarkSvg:s,pageNoVal:0,key:"",projects:[]}},computed:{},watch:{pageNoVal:{deep:!0,handler:function(){this.$emit("update:pageNo",this.pageNoVal)}}},mounted:function(){this.pageNoVal=this.pageNo},methods:{detail:function(t,e,a){this.$router.push({path:"/openapi/application/detail/"+a.id})},remove:function(t,e,a){var i=this;this.$gql.mutation("deleteApplication(id:".concat(a.id,"){data{id}}")).then((function(){i.$message.success(i.$t("Deleted successfully"),3),i.search()}))},search:function(t,e,a){this.$emit("search",t,e,a)}}};var l=(0,a(83744).Z)(d,[["render",function(t,e,a,s,u,d){var l=(0,i.up)("a-tag"),c=(0,i.up)("a-avatar"),h=(0,i.up)("a-card-meta"),g=(0,i.up)("CardList"),m=(0,i.up)("a-pagination");return(0,i.wg)(),(0,i.iD)("div",o,[(0,i.Wm)(g,{"result-empty":{status:404,title:t.$t("No data")},loading:a.loading,"data-source":a.apps||[],"hide-action-title":!0,type:"component",actions:[{icon:"EditOutlined",text:t.$t("edit"),call:d.detail},{icon:"DeleteOutlined",text:t.$t("delete"),call:d.remove,hide:!0,permissionWhere:["application:delete:project:","project","application:delete"]}]},{default:(0,i.w5)((function(e){var a=e.item;return[(0,i.Wm)(h,null,{title:(0,i.w5)((function(){return[(0,i._)("div",p,[(0,i.Uk)((0,n.zw)(a.name)+" ",1),a.project?((0,i.wg)(),(0,i.j4)(l,{key:0,color:"pink",class:"result-tag"},{default:(0,i.w5)((function(){return[(0,i.Uk)((0,n.zw)(a.project.name),1)]})),_:2},1024)):(0,i.kq)("",!0)])]})),avatar:(0,i.w5)((function(){return[(0,i.Wm)(c,{class:"CodeSandboxOutlined avatar-img primary",size:"small",shape:"square",src:u.BookmarkSvg},null,8,["src"])]})),description:(0,i.w5)((function(){return[]})),_:2},1024),(0,i._)("div",r,[(0,i._)("div",null,[(0,i._)("p",null,"API "+(0,n.zw)(t.$t("Running")),1),(0,i._)("p",null,(0,n.zw)(a.apis?a.apis.length:0),1)]),(0,i._)("div",null,[(0,i._)("p",null,"API "+(0,n.zw)(t.$t("total")),1),(0,i._)("p",null,(0,n.zw)(a.apis?a.apis.length:0),1)])])]})),_:1},8,["result-empty","loading","data-source","actions"]),a.pageNo>=0?((0,i.wg)(),(0,i.j4)(m,{key:0,onChange:d.search,current:u.pageNoVal,"onUpdate:current":e[0]||(e[0]=function(t){return u.pageNoVal=t}),total:a.total,"page-size":a.pageSize,"show-less-items":""},null,8,["onChange","current","total","page-size"])):(0,i.kq)("",!0)])}],["__scopeId","data-v-1e49c432"]])},1222:function(t,e,a){a.r(e),a.d(e,{default:function(){return c}});var i=a(66252),n=a(3577);a(92222),a(41539),a(39714),a(57658);var o=a(47556),p=a(87484),r=a(33224),s=a(66022),u=a(38189),d=a(990),l={name:"ProjectDetail",components:{ApiListResults:r.Z,ApplicationListResults:s.Z,UsersResults:u.Z,ProjectBaseDetail:p.Z,EmbedDashboard:d.Z},i18n:a(89234),data:function(){return{DEFAULT_PROJECT:o.O7,activeKey:"1",pid:"",detail:{users:[],apis:[],applications:[],id:"",name:"",organization:null},loading:!0,apiLoading:!0,appLoading:!0,subApis:[]}},computed:{},created:function(){this.pid=this.$route.params.id||""},methods:{remove:function(t,e,a){this.$refs.projectBase.delProjectUser(a.id)},setting:function(t,e,a){this.$refs.projectBase.showProjectRole(a)},getDetail:function(t){var e=this;this.detail=t.detail,this.apiLoading=!0,this.appLoading=!0,this.pid&&(this.$gql.query("applications(filters: {project:{id:{eq:".concat(this.pid,"}}}, pagination:{start:0,limit: ").concat(this.$DFT_LIMIT,"}){\n\t\t\t\t\t\t\tdata{id,attributes{name,apis{data{id}}}}\n\t\t\t\t\t\t}")).then((function(t){e.appLoading=!1,e.detail.applications=t.data||[]})),this.$gql.query("apis(pagination:{start:0,limit: ".concat(this.$DFT_LIMIT,"},filters: {project:{id:{eq:").concat(this.pid,"}}}){\n\t\t\t\t\t\t\tdata{id,attributes{name,spec,step,status,chart,applications{data{id}}}}\n\t\t\t\t\t\t}")).then((function(t){e.apiLoading=!1,e.detail.apis=t.data||[]}))),this.loading=t.loading},importApi:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){importApi(this)})),addApp:function(){this.$router.push({path:"/openapi/application/create"})},addApi:function(){this.$router.push({path:"/openapi/api/create"})},getSubApis:function(t){this.subApis=t}}};var c=(0,a(83744).Z)(l,[["render",function(t,e,a,o,p,r){var s=(0,i.up)("a-button"),u=(0,i.up)("UsersResults"),d=(0,i.up)("a-tab-pane"),l=(0,i.up)("ApiListResults"),c=(0,i.up)("ApplicationListResults"),h=(0,i.up)("EmbedDashboard"),g=(0,i.up)("a-tabs"),m=(0,i.up)("ProjectBaseDetail"),f=(0,i.Q2)("permission");return(0,i.wg)(),(0,i.j4)(m,{pid:p.pid,"onUpdate:pid":e[1]||(e[1]=function(t){return p.pid=t}),ref:"projectBase",onGetDetail:r.getDetail},{action:(0,i.w5)((function(){return[""!=p.pid&&t.$isPro?(0,i.wy)(((0,i.wg)(),(0,i.j4)(s,{key:0,type:"default",onClick:r.addApi},{default:(0,i.w5)((function(){return[(0,i.Uk)((0,n.zw)(t.$t("Create API")),1)]})),_:1},8,["onClick"])),[[f,["api:create:project:"+p.pid]]]):(0,i.kq)("",!0),""!=p.pid&&t.$isPro?(0,i.wy)(((0,i.wg)(),(0,i.j4)(s,{key:1,type:"default",onClick:r.importApi},{default:(0,i.w5)((function(){return[(0,i.Uk)((0,n.zw)(t.$t("Import API")),1)]})),_:1},8,["onClick"])),[[f,["api:create:project:"+p.pid]]]):(0,i.kq)("",!0),""!=p.pid&&t.$isPro?(0,i.wy)(((0,i.wg)(),(0,i.j4)(s,{key:2,type:"default",onClick:r.addApp},{default:(0,i.w5)((function(){return[(0,i.Uk)((0,n.zw)(t.$t("Create application")),1)]})),_:1},8,["onClick"])),[[f,["api:create:project:"+p.pid]]]):(0,i.kq)("",!0)]})),tabs:(0,i.w5)((function(){return[(0,i.Wm)(g,{type:"card",activeKey:p.activeKey,"onUpdate:activeKey":e[0]||(e[0]=function(t){return p.activeKey=t})},{default:(0,i.w5)((function(){return[(0,i.Wm)(d,{key:"1",tab:t.$t("Project members")},{default:(0,i.w5)((function(){return[(0,i.Wm)(u,{loading:p.loading,actions:[{icon:"EditOutlined",text:t.$t("Set Project Role"),call:r.setting,permission:[p.detail.organization?"project:update:organization:"+p.detail.organization:"project:update"]},{icon:"CloseOutlined",hide:!0,text:t.$t("Remove"),call:r.remove,permission:[p.detail.organization?"project:update:organization:"+p.detail.organization:"project:update"]}],users:p.detail.users},null,8,["loading","actions","users"])]})),_:1},8,["tab"]),t.$isPro?((0,i.wg)(),(0,i.j4)(d,{key:"2",tab:t.$t("API")},{default:(0,i.w5)((function(){return[(0,i.Wm)(l,{ref:"result",embed:!0,loading:p.apiLoading,apis:p.detail.apis,onSubApisChange:r.getSubApis},null,8,["loading","apis","onSubApisChange"])]})),_:1},8,["tab"])):(0,i.kq)("",!0),t.$isPro?((0,i.wg)(),(0,i.j4)(d,{key:"3",tab:t.$t("Application")},{default:(0,i.w5)((function(){return[(0,i.Wm)(c,{loading:p.appLoading,apps:p.detail.applications},null,8,["loading","apps"])]})),_:1},8,["tab"])):(0,i.kq)("",!0),""!=p.pid&&t.$isPro?((0,i.wg)(),(0,i.j4)(d,{key:"5",tab:t.$t("Dashboard")},{default:(0,i.w5)((function(){return[(0,i.Wm)(h,{"page-id":p.pid,apply:"project","default-widget":p.DEFAULT_PROJECT,"hide-add":"5"!=p.activeKey},null,8,["page-id","default-widget","hide-add"])]})),_:1},8,["tab"])):(0,i.kq)("",!0)]})),_:1},8,["activeKey"])]})),_:1},8,["pid","onGetDetail"])}]])}}]);