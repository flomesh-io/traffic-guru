"use strict";(self.webpackChunkflomesh_load_balancer=self.webpackChunkflomesh_load_balancer||[]).push([[6259],{51659:function(e,l,a){a.d(l,{Z:function(){return r}});var t=a(66252),n=a(3577);const u={key:8,class:"form-tips"};var i={name:"FormItem",i18n:a(39945),props:{label:{type:String,required:!1,default:""},name:{type:String,required:!1,default:""},rules:{type:Array,required:!1,default(){return[]}}},data(){return{}},computed:{getRules(){return this.rules.map((e=>(e.message=this.$t(e.message),e))),this.rules}},created(){},methods:{}},s=a(83744);var o=(0,s.Z)(i,[["render",function(e,l,a,n,u,i){const s=(0,t.up)("a-form-item");return a.rules?((0,t.wg)(),(0,t.j4)(s,{key:0,label:a.label,name:a.name,rules:i.getRules},{default:(0,t.w5)((()=>[(0,t.WI)(e.$slots,"default")])),_:3},8,["label","name","rules"])):((0,t.wg)(),(0,t.j4)(s,{key:1,label:a.label},{default:(0,t.w5)((()=>[(0,t.WI)(e.$slots,"default")])),_:3},8,["label"]))}]]),d={name:"AutoForm",i18n:a(89234),components:{FormItem:o},props:["field"],data(){return{keyset:{"Discovery Name":{type:"text"},"LB IP":{type:"text"},"LB Port":{type:"number"},"Target Hosts":{type:"textarea",tips:"List of <ip>:<port>[@<weight>]"},Slots:{type:"number"},"Hash On":{type:"select",options:[{value:"None",label:"None"},{value:"IP Address",label:"IP Address"},{value:"HTTP Header",label:"HTTP Header"},{value:"HTTP Cookie",label:"HTTP Cookie"},{value:"Application",label:"Application"}]},"Hash Fallback":{type:"select",options:[{value:"None",label:"None"},{value:"IP Address",label:"IP Address"},{value:"HTTP Header",label:"HTTP Header"},{value:"HTTP Cookie",label:"HTTP Cookie"},{value:"Application",label:"Application"}]},Type:{type:"select",options:[{value:"TCP",label:"TCP"},{value:"HTTP",label:"HTTP"},{value:"HTTPS",label:"HTTPS"}]},"HTTPS Verify Certificate":{type:"select",options:[{value:"Yes",label:"Yes"},{value:"No",label:"No"}]},Concurrency:{type:"number"},Timeout:{type:"number"},"HTTPS SNI":{type:"text"},"HTTPS Path":{type:"text"},"HTTP Statuses":{type:"multipleselect",options:[{value:100,label:"100"},{value:101,label:"101"},{value:103,label:"103"},{value:200,label:"200"},{value:201,label:"201"},{value:202,label:"202"},{value:203,label:"203"},{value:204,label:"204"},{value:205,label:"205"},{value:206,label:"206"},{value:300,label:"300"},{value:301,label:"301"},{value:302,label:"302"},{value:303,label:"303"},{value:304,label:"304"},{value:307,label:"307"},{value:308,label:"308"},{value:400,label:"400"},{value:401,label:"401"},{value:403,label:"403"},{value:404,label:"404"},{value:405,label:"405"},{value:406,label:"406"},{value:407,label:"407"},{value:408,label:"408"},{value:500,label:"500"},{value:501,label:"501"},{value:502,label:"502"},{value:503,label:"503"},{value:504,label:"504"}]},Interval:{type:"number"},Successes:{type:"number"},"TCP Failures":{type:"number"},"HTTP Failures":{type:"number"},"HTTP Header":{type:"textarea",tips:"List of <header-key>:<value>"},Timeouts:{type:"number"},"TCP Failures":{type:"number"},"HTTP Failures":{type:"number"},Algorithm:{type:"select",options:[{value:"rr",label:"RoundRobinLoadBalancer"},{value:"lc",label:"LeastWorkLoadBalancer"},{value:"ch",label:"HashingLoadBalancer"}]},"Hash header key":{type:"text"},Sticky:{type:"boolean"},Port:{type:"number"},"TLS Port":{type:"number"}},valueset:{"HTTP Header":[{label:"HTTP Header",value:""}]}}},methods:{change(e){this.$emit("change",e)},toggleSelect(e){this.valueset[e.value]&&this.valueset[e.value].length>0?e.subfields=this.valueset[e.value]:delete e.subfields}}};var r=(0,s.Z)(d,[["render",function(e,l,a,i,s,o){const d=(0,t.up)("a-switch"),r=(0,t.up)("a-input"),p=(0,t.up)("a-input-password"),v=(0,t.up)("a-select-option"),c=(0,t.up)("a-select"),y=(0,t.up)("a-textarea"),b=(0,t.up)("FormItem");return(0,t.wg)(),(0,t.j4)(b,{label:e.$t(a.field.label),name:a.field?.name,rules:a.field?.rules},{default:(0,t.w5)((()=>["boolean"==a.field.type||!a.field.type&&s.keyset[a.field.label]&&"boolean"==s.keyset[a.field.label].type?((0,t.wg)(),(0,t.j4)(d,{key:0,onChange:o.change,checked:a.field.value,"onUpdate:checked":l[0]||(l[0]=e=>a.field.value=e)},null,8,["onChange","checked"])):(0,t.kq)("",!0),"text"==a.field.type||"number"==a.field.type?((0,t.wg)(),(0,t.j4)(r,{key:1,type:a.field.type,placeholder:e.$t("unset"),value:a.field.value,"onUpdate:value":l[1]||(l[1]=e=>a.field.value=e),onChange:o.change,suffix:a.field.unit},null,8,["type","placeholder","value","onChange","suffix"])):(0,t.kq)("",!0),a.field.type||"text"!=s.keyset[a.field.label].type&&"number"!=s.keyset[a.field.label].type?(0,t.kq)("",!0):((0,t.wg)(),(0,t.j4)(r,{key:2,type:s.keyset[a.field.label].type,placeholder:e.$t("unset"),value:a.field.value,"onUpdate:value":l[2]||(l[2]=e=>a.field.value=e),onChange:o.change,suffix:s.keyset[a.field.label].unit},null,8,["type","placeholder","value","onChange","suffix"])),"password"==a.field.type?((0,t.wg)(),(0,t.j4)(p,{key:3,type:a.field.type,placeholder:e.$t("unset"),onChange:o.change,value:a.field.value,"onUpdate:value":l[3]||(l[3]=e=>a.field.value=e)},null,8,["type","placeholder","onChange","value"])):(0,t.kq)("",!0),a.field.type||"password"!=s.keyset[a.field.label].type?(0,t.kq)("",!0):((0,t.wg)(),(0,t.j4)(p,{key:4,type:s.keyset[a.field.label].type,placeholder:e.$t("unset"),onChange:o.change,value:a.field.value,"onUpdate:value":l[4]||(l[4]=e=>a.field.value=e)},null,8,["type","placeholder","onChange","value"])),"select"==a.field.type||!a.field.type&&s.keyset[a.field.label]&&"select"==s.keyset[a.field.label].type?((0,t.wg)(),(0,t.j4)(c,{key:5,class:"form-width",onChange:l[5]||(l[5]=e=>o.toggleSelect(a.field)),value:a.field.value,"onUpdate:value":l[6]||(l[6]=e=>a.field.value=e),placeholder:e.$t("unset")},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(a.field.values||a.field.options||s.keyset[a.field.label].options,((e,l)=>((0,t.wg)(),(0,t.j4)(v,{key:l,value:e.value},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(e.label),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value","placeholder"])):(0,t.kq)("",!0),"multipleselect"==a.field.type||!a.field.type&&s.keyset[a.field.label]&&"multipleselect"==s.keyset[a.field.label].type?((0,t.wg)(),(0,t.j4)(c,{key:6,class:"form-width",value:a.field.value,"onUpdate:value":l[7]||(l[7]=e=>a.field.value=e),placeholder:e.$t("unset"),onChange:o.change,mode:"multiple"},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(a.field.values||a.field.options||s.keyset[a.field.label].options,((e,l)=>((0,t.wg)(),(0,t.j4)(v,{key:l,value:e.value},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(e.label),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value","placeholder","onChange"])):(0,t.kq)("",!0),"textarea"==a.field.type||!a.field.type&&s.keyset[a.field.label]&&"textarea"==s.keyset[a.field.label].type?((0,t.wg)(),(0,t.j4)(y,{key:7,value:a.field.value,"onUpdate:value":l[8]||(l[8]=e=>a.field.value=e),onChange:o.change,placeholder:e.$t("unset"),class:"form-width","auto-size":{minRows:4,maxRows:6}},null,8,["value","onChange","placeholder"])):(0,t.kq)("",!0),s.keyset[a.field.label]&&s.keyset[a.field.label].tips?((0,t.wg)(),(0,t.iD)("div",u,(0,n.zw)(s.keyset[a.field.label].tips),1)):(0,t.kq)("",!0)])),_:1},8,["label","name","rules"])}],["__scopeId","data-v-21ce07e8"]])},46259:function(e,l,a){a.r(l),a.d(l,{default:function(){return L}});var t=a(66252),n=a(3577),u=a(49963);const i=e=>((0,t.dD)("data-v-ce9397e2"),e=e(),(0,t.Cn)(),e),s={class:"pd-10"},o={class:"flex"},d={class:"flex-item"},r={class:"flex-item"},p={key:0},v={id:"right-unselect"},c=[i((()=>(0,t._)("br",null,null,-1))),i((()=>(0,t._)("div",{class:"row",style:{"text-align":"center",color:"#999"}},[(0,t._)("em",null,"- none -")],-1)))],y={key:0,id:"right-endpoint"},b={class:"row",style:{"text-align":"center"}},h={key:0,class:"row"},g={key:1,class:"row"},f={key:1,id:"right-line"},m={class:"row",style:{"text-align":"center"}},k={class:"row"},w={class:"data-row"},T=i((()=>(0,t._)("b",{class:"data-name"}," Source ",-1))),x={class:"data-value"},H={class:"data-row"},P=i((()=>(0,t._)("b",{class:"data-name"}," Target ",-1))),_={class:"data-value"},D={key:0,class:"data-row"},C=i((()=>(0,t._)("b",{class:"data-name"}," Weight ",-1))),S={class:"data-value"};var q=a(55581),I=a.n(q),N=a(51659);let U=[{label:"ns1",value:"ns1"},{label:"ns2",value:"ns2"}],j=[{label:"*",value:"*"},{label:"GET",value:"GET"},{label:"POST",value:"POST"}],A=[{label:"account1",value:"account1",namespace:"ns1"},{label:"account2",value:"account2",namespace:"ns1"}];var $={name:"SmiTopologyEditor",components:{TopologyEditor:I(),AutoItem:N.Z},data(){return{title:"MyApp",namespace:null,lines:[],endpoints:[],namespaces:U,menu:{Traffic:{open:!0,submenu:{Target:[{label:"Name",type:"text",value:""},{label:"Namespace",type:"select",value:null,options:U}],Split:[{label:"Name",type:"text",value:""}],UpstreamSetting:[{label:"Name",type:"text",value:""},{label:"Host",type:"text",value:""},{label:"Tcp Max Connections",type:"number",value:1},{label:"Http Max Pending Requests",type:"number",value:1},{label:"Http Max Requests Per Connection",type:"number",value:1}],Metric:[]}},Rules:{open:!0,submenu:{HTTPGroup:[{label:"Name",type:"text",value:""},{label:"Path Regex",type:"text",value:"/metrics"},{label:"Methods",type:"select",value:null,options:j}],TCP:[{label:"Name",type:"text",value:""},{label:"Port",type:"number",value:0}]}},K8S:{open:!0,submenu:{Service:[{label:"Name",type:"select",value:null,options:[{label:"service1",value:"service1"},{label:"service2",value:"service2"}]}],Account:[{label:"Name",type:"select",value:null,options:A}],Egress:[{label:"Name",type:"text",value:""}]}}},rightData:null}},unmounted(){},methods:{save(e){alert(e)},select(e){this.rightData=e.data,this.rightType=e.type},changeOverlay(e){this.$refs.topoEditor.LineOverlayChange(e)}}};var L=(0,a(83744).Z)($,[["render",function(e,l,a,i,q,I){const N=(0,t.up)("a-input"),U=(0,t.up)("a-select-option"),j=(0,t.up)("a-select"),A=(0,t.up)("AutoItem"),$=(0,t.up)("TopologyEditor");return(0,t.wg)(),(0,t.iD)("div",s,[(0,t.Wm)($,{ref:"topoEditor",style:{"box-shadow":"0 0 3px 3px rgba(0,0,0,0.1)","border-radius":"10px"},menu:q.menu,options:{Service:{childLimit:["UpstreamSetting","Egress"],width:250}},lines:q.lines,"onUpdate:lines":l[4]||(l[4]=e=>q.lines=e),endpoints:q.endpoints,"onUpdate:endpoints":l[5]||(l[5]=e=>q.endpoints=e),onSave:I.save,onSelect:I.select},{title:(0,t.w5)((()=>[(0,t._)("div",o,[(0,t._)("div",d,[(0,t.Wm)(N,{type:"text",placeholder:"Name",modelValue:q.title,"onUpdate:modelValue":l[0]||(l[0]=e=>q.title=e)},null,8,["modelValue"])]),(0,t._)("div",r,[(0,t.Wm)(j,{modelValue:q.namespace,"onUpdate:modelValue":l[1]||(l[1]=e=>q.namespace=e),placeholder:"Namespace"},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(q.namespaces,((e,l)=>((0,t.wg)(),(0,t.j4)(U,{key:l,value:e.value},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(e.label),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"])])])])),right:(0,t.w5)((()=>[q.rightData?((0,t.wg)(),(0,t.iD)("div",p,[(0,t.wy)((0,t._)("div",v,c,512),[[u.F8,!e.rightType||"unselect"==e.rightType]]),"endpoints"==e.rightType?((0,t.wg)(),(0,t.iD)("div",y,[(0,t._)("div",{class:(0,n.C_)(["touch-move",q.rightData.title])},null,2),(0,t._)("div",b,[(0,t._)("h3",null,(0,n.zw)(q.rightData.title),1)]),q.rightData.childIndex>-1&&q.endpoints[q.rightData.index].children[q.rightData.childIndex].attr?((0,t.wg)(),(0,t.iD)("div",h,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(q.endpoints[q.rightData.index].children[q.rightData.childIndex].attr,((e,l)=>((0,t.wg)(),(0,t.iD)("p",{class:"data-row",key:l},[e?.type?((0,t.wg)(),(0,t.j4)(A,{key:0,field:e},null,8,["field"])):(0,t.kq)("",!0)])))),128))])):q.rightData.index>-1&&q.endpoints[q.rightData.index].attr?((0,t.wg)(),(0,t.iD)("div",g,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(q.endpoints[q.rightData.index].attr,((e,l)=>((0,t.wg)(),(0,t.iD)("p",{class:"data-row",key:l},[e?.type?((0,t.wg)(),(0,t.j4)(A,{key:0,field:e},null,8,["field"])):(0,t.kq)("",!0)])))),128))])):(0,t.kq)("",!0)])):"lines"==e.rightType?((0,t.wg)(),(0,t.iD)("div",f,[(0,t._)("div",m,[(0,t._)("h3",null,(0,n.zw)(q.rightData.title),1)]),(0,t._)("div",k,[(0,t._)("p",w,[T,(0,t._)("span",x,(0,n.zw)(q.rightData.source),1)]),(0,t._)("p",H,[P,(0,t._)("span",_,(0,n.zw)(q.rightData.target),1)]),"Split"==q.rightData.source&&"Service"==q.rightData.target?((0,t.wg)(),(0,t.iD)("p",D,[C,(0,t._)("span",S,[(0,t.wy)((0,t._)("input",{style:{width:"80px"},type:"text",placeholder:"",onInput:l[2]||(l[2]=e=>I.changeOverlay(q.rightData.overlay)),"onUpdate:modelValue":l[3]||(l[3]=e=>q.rightData.overlay=e)},null,544),[[u.nr,q.rightData.overlay]])])])):(0,t.kq)("",!0)])])):(0,t.kq)("",!0)])):(0,t.kq)("",!0)])),_:1},8,["menu","lines","endpoints","onSave","onSelect"])])}],["__scopeId","data-v-ce9397e2"]])}}]);