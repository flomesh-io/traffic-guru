"use strict";(self.webpackChunkflomesh_load_balancer=self.webpackChunkflomesh_load_balancer||[]).push([[9198],{62967:function(t,e,a){a.d(e,{Z:function(){return d}});var i=a(66252),s={icon:function(t,e){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M911.9 283.9v.5L835.5 865c-1 8-7.9 14-15.9 14H204.5c-8.1 0-14.9-6.1-16-14l-76.4-580.6v-.6 1.6L188.5 866c1.1 7.9 7.9 14 16 14h615.1c8 0 14.9-6 15.9-14l76.4-580.6c.1-.5.1-1 0-1.5z",fill:e}},{tag:"path",attrs:{d:"M773.6 810.6l53.9-409.4-139.8 86.1L512 252.9 336.3 487.3l-139.8-86.1 53.8 409.4h523.3zm-374.2-189c0-62.1 50.5-112.6 112.6-112.6s112.6 50.5 112.6 112.6v1c0 62.1-50.5 112.6-112.6 112.6s-112.6-50.5-112.6-112.6v-1z",fill:e}},{tag:"path",attrs:{d:"M512 734.2c61.9 0 112.3-50.2 112.6-112.1v-.5c0-62.1-50.5-112.6-112.6-112.6s-112.6 50.5-112.6 112.6v.5c.3 61.9 50.7 112.1 112.6 112.1zm0-160.9c26.6 0 48.2 21.6 48.2 48.3 0 26.6-21.6 48.3-48.2 48.3s-48.2-21.6-48.2-48.3c0-26.6 21.6-48.3 48.2-48.3z",fill:t}},{tag:"path",attrs:{d:"M188.5 865c1.1 7.9 7.9 14 16 14h615.1c8 0 14.9-6 15.9-14l76.4-580.6v-.5c.3-6.4-6.7-10.8-12.3-7.4L705 396.4 518.4 147.5a8.06 8.06 0 00-12.9 0L319 396.4 124.3 276.5c-5.5-3.4-12.6.9-12.2 7.3v.6L188.5 865zm147.8-377.7L512 252.9l175.7 234.4 139.8-86.1-53.9 409.4H250.3l-53.8-409.4 139.8 86.1z",fill:t}}]}},name:"crown",theme:"twotone"},o=a(33058);function r(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?Object(arguments[e]):{},i=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(a).filter((function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})))),i.forEach((function(e){n(t,e,a[e])}))}return t}function n(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var l=function(t,e){var a=r({},t,e.attrs);return(0,i.Wm)(o.Z,r({},a,{icon:s}),null)};l.displayName="CrownTwoTone",l.inheritAttrs=!1;var d=l},77682:function(t,e,a){a.d(e,{Z:function(){return d}});var i=a(66252),s={icon:function(t,e){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 632h128v192H696zm-496 0h128v192H200z",fill:e}},{tag:"path",attrs:{d:"M512 128c-212.1 0-384 171.9-384 384v360c0 13.3 10.7 24 24 24h184c35.3 0 64-28.7 64-64V624c0-35.3-28.7-64-64-64H200v-48c0-172.3 139.7-312 312-312s312 139.7 312 312v48H688c-35.3 0-64 28.7-64 64v208c0 35.3 28.7 64 64 64h184c13.3 0 24-10.7 24-24V512c0-212.1-171.9-384-384-384zM328 632v192H200V632h128zm496 192H696V632h128v192z",fill:t}}]}},name:"customer-service",theme:"twotone"},o=a(33058);function r(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?Object(arguments[e]):{},i=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(a).filter((function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})))),i.forEach((function(e){n(t,e,a[e])}))}return t}function n(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var l=function(t,e){var a=r({},t,e.attrs);return(0,i.Wm)(o.Z,r({},a,{icon:s}),null)};l.displayName="CustomerServiceTwoTone",l.inheritAttrs=!1;var d=l},38046:function(t,e,a){a.d(e,{Z:function(){return d}});var i=a(66252),s={icon:function(t,e){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 632H136V232h752v560z",fill:t}},{tag:"path",attrs:{d:"M136 792h752V232H136v560zm472-372c0-4.4 1-8 2.3-8h123.4c1.3 0 2.3 3.6 2.3 8v48c0 4.4-1 8-2.3 8H610.3c-1.3 0-2.3-3.6-2.3-8v-48zm0 144c0-4.4 3.2-8 7.1-8h185.7c3.9 0 7.1 3.6 7.1 8v48c0 4.4-3.2 8-7.1 8H615.1c-3.9 0-7.1-3.6-7.1-8v-48zM216.2 664.6c2.8-53.3 31.9-99.6 74.6-126.1-18.1-20-29.1-46.4-29.1-75.5 0-61.9 49.9-112 111.4-112s111.4 50.1 111.4 112c0 29.1-11 55.6-29.1 75.5 42.6 26.4 71.8 72.8 74.6 126.1a8 8 0 01-8 8.4h-43.9c-4.2 0-7.6-3.3-7.9-7.5-3.8-50.5-46-90.5-97.2-90.5s-93.4 40-97.2 90.5c-.3 4.2-3.7 7.5-7.9 7.5H224c-4.6 0-8.2-3.8-7.8-8.4z",fill:e}},{tag:"path",attrs:{d:"M321.3 463a51.7 52 0 10103.4 0 51.7 52 0 10-103.4 0z",fill:e}},{tag:"path",attrs:{d:"M610.3 476h123.4c1.3 0 2.3-3.6 2.3-8v-48c0-4.4-1-8-2.3-8H610.3c-1.3 0-2.3 3.6-2.3 8v48c0 4.4 1 8 2.3 8zm4.8 144h185.7c3.9 0 7.1-3.6 7.1-8v-48c0-4.4-3.2-8-7.1-8H615.1c-3.9 0-7.1 3.6-7.1 8v48c0 4.4 3.2 8 7.1 8zM224 673h43.9c4.2 0 7.6-3.3 7.9-7.5 3.8-50.5 46-90.5 97.2-90.5s93.4 40 97.2 90.5c.3 4.2 3.7 7.5 7.9 7.5H522a8 8 0 008-8.4c-2.8-53.3-32-99.7-74.6-126.1a111.8 111.8 0 0029.1-75.5c0-61.9-49.9-112-111.4-112s-111.4 50.1-111.4 112c0 29.1 11 55.5 29.1 75.5a158.09 158.09 0 00-74.6 126.1c-.4 4.6 3.2 8.4 7.8 8.4zm149-262c28.5 0 51.7 23.3 51.7 52s-23.2 52-51.7 52-51.7-23.3-51.7-52 23.2-52 51.7-52z",fill:t}}]}},name:"idcard",theme:"twotone"},o=a(33058);function r(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?Object(arguments[e]):{},i=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(a).filter((function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})))),i.forEach((function(e){n(t,e,a[e])}))}return t}function n(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var l=function(t,e){var a=r({},t,e.attrs);return(0,i.Wm)(o.Z,r({},a,{icon:s}),null)};l.displayName="IdcardTwoTone",l.inheritAttrs=!1;var d=l},10711:function(t,e,a){a.d(e,{Z:function(){return f}});var i=a(66252),s=a(3577);const o={key:0,class:"permission-card-body"},r={key:1,class:"permission-card-body"},n={key:0},l={class:"inline-block"},d={class:"inline-block relative",style:{left:"10px",top:"-7px"}},c={key:1},u={class:"inline-block"},p=(t=>((0,i.dD)("data-v-21a71ec4"),t=t(),(0,i.Cn)(),t))((()=>(0,i._)("div",{class:"inline-block relative",style:{left:"10px",top:"-7px"}},null,-1)));var h=a(75255),m=a(54367),g={name:"PermissionCard",components:{CheckOutlined:h.Z,CloseOutlined:m.Z},props:["resources"],i18n:a(89234),data(){return{}},computed:{maxResources(){let t=0;return this.resources.forEach((e=>{t=t>e.actions.length?t:e.actions.length})),t}},created(){},mounted(){},methods:{}};var f=(0,a(83744).Z)(g,[["render",function(t,e,a,h,m,g){const f=(0,i.up)("a-card-grid"),v=(0,i.up)("CheckOutlined"),w=(0,i.up)("CloseOutlined"),z=(0,i.up)("a-card");return(0,i.wg)(),(0,i.j4)(z,{class:"grid-menu nopd small-grid-menu",bordered:!1},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.resources,((e,h)=>((0,i.wg)(),(0,i.iD)("div",{key:h},["project"!=e.type||0!=h&&a.resources[h-1].project?.id==e.project.id?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",o,(0,s.zw)(t.$t("Project"))+":"+(0,s.zw)(e.project.name),1)),"organization"!=e.type||0!=h&&a.resources[h-1].organization?.id==e.organization.id?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",r,(0,s.zw)(t.$t("Organization"))+":"+(0,s.zw)(e.organization.name),1)),(0,i.Wm)(f,{class:"flex-item permission-card-resource",style:(0,s.j5)("width:"+Math.floor(1e3/(g.maxResources+1))/10+"%")},{default:(0,i.w5)((()=>[(0,i._)("b",null,(0,s.zw)(t.$t(e.name)),1)])),_:2},1032,["style"]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(g.maxResources,((a,o)=>((0,i.wg)(),(0,i.j4)(f,{key:o,class:"flex-item permission-card-action",style:(0,s.j5)("width:"+Math.floor(1e3/(g.maxResources+1))/10+"%")},{default:(0,i.w5)((()=>[e.actions.length>o?((0,i.wg)(),(0,i.iD)("div",n,[(0,i._)("div",l,[e.actions[o].enabled?((0,i.wg)(),(0,i.j4)(v,{key:0,class:"success"})):((0,i.wg)(),(0,i.j4)(w,{key:1,class:"danger"}))]),(0,i._)("div",d,(0,s.zw)(t.$t(e.actions[o].name)),1)])):((0,i.wg)(),(0,i.iD)("div",c,[(0,i._)("div",u,[(0,i.Wm)(w,{class:"danger",style:{opacity:"0"}})]),p]))])),_:2},1032,["style"])))),128))])))),128))])),_:1})}],["__scopeId","data-v-21a71ec4"]])},1299:function(t,e,a){a.d(e,{Z:function(){return n}});var i=a(66252),s=a(3577);const o={key:0,class:"title"};var r={name:"DetailList",props:{title:{type:String,required:!1,default:""},col:{type:Number,required:!1,default:3},size:{type:String,required:!1,default:"large"},layout:{type:String,required:!1,default:"horizontal"}}};var n=(0,a(83744).Z)(r,[["render",function(t,e,a,r,n,l){const d=(0,i.up)("a-row");return(0,i.wg)(),(0,i.iD)("div",{class:(0,s.C_)(["detail-list","small"===a.size?"small":"large","vertical"===a.layout?"vertical":"horizontal"]),style:(0,s.j5)("flex-"+a.col)},[a.title?((0,i.wg)(),(0,i.iD)("div",o,(0,s.zw)(a.title),1)):(0,i.kq)("",!0),(0,i.Wm)(d,null,{default:(0,i.w5)((()=>[(0,i.WI)(t.$slots,"default")])),_:3})],6)}]])},13589:function(t,e,a){a.d(e,{Z:function(){return l}});var i=a(66252),s=a(3577);const o={class:"detail-content"};const r={1:{xs:24},2:{xs:24,sm:12},3:{xs:24,sm:12,md:8},4:{xs:24,sm:12,md:6}};var n={name:"DetailListItem",i18n:a(39945),props:{name:{type:String,required:!1,default:""},rules:{type:Array,required:!1,default(){return[]}},term:{type:String,required:!1,default:""},termTop:{type:Boolean}},data(){return{col:2,responsive:r}},computed:{getRules(){return this.rules.map((t=>(t.message=this.$t(t.message),t))),this.rules}},created(){this.$parent&&this.$parent.$parent&&this.$parent.$parent.col>0&&(this.col=this.$parent.$parent.col)},methods:{}};var l=(0,a(83744).Z)(n,[["render",function(t,e,a,r,n,l){const d=(0,i.up)("a-form-item"),c=(0,i.up)("a-col");return(0,i.wg)(),(0,i.j4)(c,(0,i.dG)({class:"detail-list-content flex"},n.responsive[n.col]),{default:(0,i.w5)((()=>[(0,i._)("div",{class:(0,s.C_)(a.termTop?"term top":"term")},(0,s.zw)(a.term),3),(0,i._)("div",o,[a.rules?((0,i.wg)(),(0,i.j4)(d,{key:0,name:a.name,rules:l.getRules},{default:(0,i.w5)((()=>[(0,i.WI)(t.$slots,"default")])),_:3},8,["name","rules"])):(0,i.WI)(t.$slots,"default",{key:1})])])),_:3},16)}]])},87484:function(t,e,a){a.d(e,{Z:function(){return y}});var i=a(66252),s=a(3577);const o={class:"role-name"};a(57658);var r=a(38046),n=a(44924),l=a(33601),d=a(1299),c=a(13589),u=a(61103),p=a(34531),h=a(96486),m=a.n(h),g=a(85263),f=a(33907),v=a(93099),w=a(10711),z={name:"ProjectBaseDetail",components:{DetailListItem:c.Z,DetailList:d.Z,PageLayout:u.Z,CardSelector:p.Z,PermissionCard:w.Z,IdcardTwoTone:r.Z,UserOutlined:n.Z,FolderTwoTone:l.Z},i18n:a(89234),props:["pid"],data(){return{activeKey:"1",FolderTwoTone:l.Z,orgs:[],selectUsers:null,isEdit:!1,detail:{users:[],id:"",name:"",organization:null},bindTarget:{},editorIsCreate:!0,workload:[],loading:!0,activities:[],config:{},teams:[],subApis:[],projectRoles:[],userOrganizationRoles:[],userOrganizationRolesMap:[],permissionPayload:{userOrganizationRole:null},permissionUser:null,projectVisible:!1,resources:[],simpleImage:g.Z.PRESENTED_IMAGE_SIMPLE,UserOutlined:n.Z}},computed:{...(0,f.rn)("rules",["rules"])},created(){this.pid?(this.isEdit=!0,this.loaddata()):(this.isEdit=!1,this.loading=!1,this.detail={users:[],id:"",name:"",organization:null},this.$gql.query("myOrganizations{data{id,attributes{name}}}").then((t=>{this.orgs=t.data})),this.$emit("getDetail",{detail:this.detail,loading:this.loading}))},activated(){},methods:{showProjectRole(t){this.permissionUser=t,this.setPermissionPayload(t.id,this.detail.organization,this.pid),this.projectVisible=!0},deleteUserOrganizationRoles(){let t=this.userOrganizationRolesMap[`project-${this.pid}-${this.permissionUser.id}`].id;this.$gql.mutation(`deleteUserOrganizationRole(id:${t}){data{id}}`).then((()=>{this.$message.success(this.$t("Deleted successfully"),3),this.loadRoles()}))},setPermissionPayload(t,e,a){let i="project";this.permissionPayload.userOrganizationRole=null,this.resources=[],this.userOrganizationRolesMap[`${i}-${a}-${t}`]&&(this.permissionPayload.userOrganizationRole=this.userOrganizationRolesMap[`${i}-${a}-${t}`].role.id),this.setDefaultResources()},setDefaultResources(){if(this.permissionPayload.userOrganizationRole){let t=this.permissionPayload.userOrganizationRole;(0,v.Yj)({id:t}).then((t=>{this.resources=t.permissions}))}},loadRoles(){this.projectRoles=[],this.$gql.query('usersPermissionsRoles(filters:{type:{eq:"project"}}){data{id,attributes{name,type}}}').then((t=>{this.projectRoles=t.data})),this.userOrganizationRoles=[],this.userOrganizationRolesMap={};const t=this.detail.organization;this.$gql.query(`userOrganizationRoles(pagination:{limit: ${this.$DFT_LIMIT}},filters:{organization:{id:{eq:${t}}}}){data{id,attributes{\n\t\t\t\t\t\ttype,\n\t\t\t\t\t\tproject{data{id,attributes{name}}},\n\t\t\t\t\t\tuser{data{id,attributes{username}}},\n\t\t\t\t\t\trole{data{id,attributes{name}}}\n\t\t\t\t\t}}}`).then((t=>{this.userOrganizationRoles=t.data,t.data.forEach((t=>{"organization"==t.type&&t.user?this.userOrganizationRolesMap[`organization-${t.user.id}`]=t:"project"==t.type&&t.user&&(this.userOrganizationRolesMap[`project-${this.pid}-${t.user.id}`]=t)})),this.detail.users.forEach((t=>{t.role=this.userOrganizationRolesMap[`project-${this.pid}-${t.id}`]?.role})),this.loading=!1,this.$emit("getDetail",{detail:this.detail,loading:this.loading})}))},saveUserOrganizationRoles(){let t=!1,e=this.permissionUser.id,a=this.detail.organization,i=this.pid,s="project",o={user:e,organization:a,role:this.permissionPayload.userOrganizationRole,type:s};if(o.project=i,this.userOrganizationRolesMap[`${s}-${i}-${e}`]&&(t=!0,o.id=this.userOrganizationRolesMap[`${s}-${i}-${e}`].id),t){const t=o.id;delete o.id,this.$gql.mutation(`updateUserOrganizationRole(id:${t}, data: $data){data{id}}`,{data:o},{data:"UserOrganizationRoleInput!"}).then((()=>{this.$message.success(this.$t("Modified successfully"),3),this.permissionPayload.userOrganizationRole=null,this.permissionUser=null,this.resources=[],this.projectVisible=!1,this.loadRoles()}))}else delete o.id,this.$gql.mutation("createUserOrganizationRole(data: $data){data{id}}",{data:o},{data:"UserOrganizationRoleInput!"}).then((()=>{this.$message.success(this.$t("Modified successfully"),3),this.permissionPayload.userOrganizationRole=null,this.permissionUser=null,this.resources=[],this.projectVisible=!1,this.loadRoles()}))},addUser(){let t=[];this.detail.users.forEach((e=>{t.push(e.id)})),t.push(this.selectUsers),this.selectUsers=null,this.updateProjectUser(this.pid,t)},delProjectUser(t){let e=[],a=[];this.detail.users.forEach((i=>{t!=i.id&&(e.push(i),a.push(i.id))})),this.detail.users=e,this.updateProjectUser(this.pid,a)},updateProjectUser(t,e){let a={users:e};this.$gql.mutation(`updateProject(id:${t}, data: $data){data{id}}`,{data:a},{data:"ProjectInput!"}).then((()=>{this.loaddata(!0)}))},getSample(){this.custom=this.customSample},validate(){this.$refs.layout.$refs.form.validateFields().then((()=>{this.save()})).catch((()=>{}))},save(){let t=m().cloneDeep(this.detail);if(t.organization||delete t.organization,delete t.users,this.isEdit){const e=t.id;delete t.id,delete t.apis,delete t.applications,this.$gql.mutation(`updateProject(id:${e}, data: $data){data{id}}`,{data:t},{data:"ProjectInput!"}).then((()=>{this.$message.success(this.$t("Modified successfully"),3),this.loaddata()}))}else delete t.id,this.$gql.mutation("createProject(data: $data){data{id}}",{data:t},{data:"ProjectInput!"}).then((t=>{this.$message.success(this.$t("Created successfully"),3),this.$emit("update:pid",t.data.id),this.isEdit=!0,setTimeout((()=>{this.loaddata()}),1e3)}))},remove(t,e,a){this.$gql.mutation(`deleteProject(id:${a.id}){data{id}}`).then((()=>{this.$message.success(this.$t("Deleted successfully"),3),this.loaddata()}))},getTimeLabel(t){return new Date(t[0]).toLocaleDateString()+"~"+new Date(t[1]).toLocaleDateString()},search(t,e){t&&(this.pageNo=t,this.pageSize=e),this.loaddata()},loaddata(){this.loading=!0,this.$gql.query(`project(id: ${this.pid}){data{id,attributes{\n\t\t\t\t\t\tname,\n\t\t\t\t\t\torganization{data{id,attributes{\n\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\tusers{data{id,attributes{\n\t\t\t\t\t\t\t\tusername,\n\t\t\t\t\t\t\t\ttype,\n\t\t\t\t\t\t\t\trole{data{id,attributes{name}}},\n\t\t\t\t\t\t\t\tuserProjects{data{id}}\n\t\t\t\t\t\t\t}}},\n\t\t\t\t\t\t}}},\n\t\t\t\t\t\tusers{data{id,attributes{username,role{data{id,attributes{name}}},phone,email,type}}},\n\t\t\t\t\t\tcontent\n\t\t\t\t\t}}}`).then((t=>{let e=t.data;this.detail=e,this.users=e.organization.users,this.detail.organization=e.organization?e.organization.id?e.organization.id:e.organization:null,this.loadRoles()})),this.$gql.query("myOrganizations{data{id,attributes{name}}}").then((t=>{this.orgs=t.data}))}}};var y=(0,a(83744).Z)(z,[["render",function(t,e,a,r,n,l){const d=(0,i.up)("a-input"),c=(0,i.up)("DetailListItem"),u=(0,i.up)("a-select-option"),p=(0,i.up)("a-select"),h=(0,i.up)("DetailList"),m=(0,i.up)("a-button"),g=(0,i.up)("CardSelector"),f=(0,i.up)("a-space"),v=(0,i.up)("a-col"),w=(0,i.up)("a-row"),z=((0,i.up)("FolderTwoTone"),(0,i.up)("IdcardTwoTone")),y=(0,i.up)("PermissionCard"),$=(0,i.up)("a-modal"),j=((0,i.up)("UserOutlined"),(0,i.up)("PageLayout")),b=(0,i.Q2)("permission");return(0,i.wg)(),(0,i.j4)(j,{"form-state":n.detail,ref:"layout"},{headerContent:(0,i.w5)((()=>[(0,i.Wm)(h,{size:"small",col:1},{default:(0,i.w5)((()=>[t.embed?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(c,{key:0,term:t.$t("as"),rules:t.rules.uniqueName("projects",{id:a.pid,organization:n.detail.organization}),name:"name"},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{placeholder:t.$t("unset"),value:n.detail.name,"onUpdate:value":e[0]||(e[0]=t=>n.detail.name=t),class:"width-200"},null,8,["placeholder","value"])])),_:1},8,["term","rules"])),(0,i.Wm)(c,{term:t.$t("Organization"),rules:t.rules.required,name:"organization"},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{placeholder:t.$t("unset"),value:n.detail.organization,"onUpdate:value":e[1]||(e[1]=t=>n.detail.organization=t),class:"width-180",ref:"select"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.orgs,((t,e)=>((0,i.wg)(),(0,i.j4)(u,{value:t.id,key:e},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(t.name),1)])),_:2},1032,["value"])))),128))])),_:1},8,["placeholder","value"])])),_:1},8,["term","rules"])])),_:1})])),action:(0,i.w5)((()=>[(0,i.Wm)(f,null,{default:(0,i.w5)((()=>[(0,i.WI)(t.$slots,"action",{},void 0,!0),(0,i.Wm)(g,{search:!0,icon:n.UserOutlined,onSelect:l.addUser,disabled:t=>{let e=!1;return(t.userProjects||[]).forEach((t=>{e=t.id==a.pid||e})),e},options:t.users,value:n.selectUsers,"onUpdate:value":e[2]||(e[2]=t=>n.selectUsers=t)},{default:(0,i.w5)((()=>[(0,i.wy)(((0,i.wg)(),(0,i.j4)(m,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(t.$t("Add members")),1)])),_:1})),[[b,[n.detail.organization?"project:update:organization:"+n.detail.organization:"project:update"]]])])),_:1},8,["icon","onSelect","disabled","options","value"]),""!=a.pid?(0,i.wy)(((0,i.wg)(),(0,i.j4)(m,{key:0,type:"primary",onClick:l.validate},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(t.$t("save")),1)])),_:1},8,["onClick"])),[[b,[n.detail.organization?"project:update:organization:"+n.detail.organization:"project:update"]]]):(0,i.wy)(((0,i.wg)(),(0,i.j4)(m,{key:1,type:"primary",onClick:l.validate},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(t.$t("create")),1)])),_:1},8,["onClick"])),[[b,[n.detail.organization?"project:create:organization:"+n.detail.organization:"project:create"]]])])),_:3})])),default:(0,i.w5)((()=>[(0,i.Wm)(w,{class:"row-mg"},{default:(0,i.w5)((()=>[(0,i.Wm)(v,{class:"col-pd",xl:24,lg:24,md:24,sm:24,xs:24},{default:(0,i.w5)((()=>[(0,i.WI)(t.$slots,"tabs",{},void 0,!0)])),_:3})])),_:3}),(0,i.kq)("",!0),(0,i.Wm)($,{width:"80%",visible:n.projectVisible,"onUpdate:visible":e[4]||(e[4]=t=>n.projectVisible=t),title:t.$t("Project Role"),"cancel-text":t.$t("Remove Role"),"ok-text":t.$t("Save"),onCancel:l.deleteUserOrganizationRoles,onOk:l.saveUserOrganizationRoles},{default:(0,i.w5)((()=>[(0,i._)("p",null,[(0,i.Wm)(p,{placeholder:t.$t("unset"),class:"width-500",value:n.permissionPayload.userOrganizationRole,"onUpdate:value":e[3]||(e[3]=t=>n.permissionPayload.userOrganizationRole=t),onChange:l.setDefaultResources},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.projectRoles,((t,e)=>((0,i.wg)(),(0,i.j4)(u,{key:e,value:t.id},{default:(0,i.w5)((()=>[(0,i._)("span",null,[(0,i.Wm)(z,{"two-tone-color":"#00adef",class:"font-30"}),(0,i._)("span",o,(0,s.zw)(t.name),1)])])),_:2},1032,["value"])))),128))])),_:1},8,["placeholder","value","onChange"])]),(0,i._)("p",null,[n.resources.length>0?((0,i.wg)(),(0,i.j4)(y,{key:0,resources:n.resources,style:{width:"1200px"}},null,8,["resources"])):(0,i.kq)("",!0)])])),_:1},8,["visible","title","cancel-text","ok-text","onCancel","onOk"]),(0,i.kq)("",!0)])),_:3},8,["form-state"])}],["__scopeId","data-v-0b15ce21"]])},38189:function(t,e,a){a.d(e,{Z:function(){return u}});var i=a(66252),s=a(3577);const o={class:"mb-3"},r={class:"meta-content"};var n=a(38046),l=a(62967),d=a(77682),c={name:"UsersResults",components:{CardList:a(69596).Z,IdcardTwoTone:n.Z,CrownTwoTone:l.Z,CustomerServiceTwoTone:d.Z},i18n:a(89234),props:["users","total","pageNo","pageSize","loading","actions","noAction"],data(){return{pageNoVal:0}},computed:{},watch:{pageNoVal:{deep:!0,handler(){this.$emit("update:pageNo",this.pageNoVal)}}},mounted(){this.pageNoVal=this.pageNo},methods:{search(t,e,a){this.$emit("search",t,e,a)},remove(t,e,a){this.$emit("remove",t,e,a)},setting(t,e,a){this.$emit("setting",t,e,a)}}};var u=(0,a(83744).Z)(c,[["render",function(t,e,a,n,l,d){const c=(0,i.up)("a-tag"),u=(0,i.up)("CrownTwoTone"),p=(0,i.up)("CustomerServiceTwoTone"),h=(0,i.up)("IdcardTwoTone"),m=(0,i.up)("a-card-meta"),g=(0,i.up)("CardList"),f=(0,i.up)("a-pagination");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(g,{"hide-action-title":!0,loading:a.loading,"data-source":a.users,type:"component",actions:a.noAction?null:a.actions?a.actions:[{icon:"EditOutlined",text:t.$t("edit"),call:d.setting,permission:["user:update"]},{icon:"CloseOutlined",hide:!0,text:t.$t("delete"),call:d.remove,permission:["user:delete"]}]},{default:(0,i.w5)((({item:e})=>[(0,i.Wm)(m,null,{title:(0,i.w5)((()=>[(0,i._)("div",o,[(0,i.Uk)((0,s.zw)(e.username)+" ",1),e.role?((0,i.wg)(),(0,i.j4)(c,{key:0,color:"blue",class:"ml-10"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(e.role.name),1)])),_:2},1024)):(0,i.kq)("",!0)])])),avatar:(0,i.w5)((()=>[e.role&&"Authenticated"==e.role.name?((0,i.wg)(),(0,i.j4)(u,{key:0,"two-tone-color":"#00adef",class:"font-50"})):e.role&&"Public"==e.role.name?((0,i.wg)(),(0,i.j4)(p,{key:1,"two-tone-color":"#00adef",class:"font-50"})):((0,i.wg)(),(0,i.j4)(h,{key:2,"two-tone-color":"#00adef",class:"font-50"}))])),description:(0,i.w5)((()=>[(0,i._)("div",r,(0,s.zw)(t.$t("Email"))+"："+(0,s.zw)(e.email||t.$t("unset")),1)])),_:2},1024)])),_:1},8,["loading","data-source","actions"]),l.pageNoVal>=0?((0,i.wg)(),(0,i.j4)(f,{key:0,onChange:d.search,current:l.pageNoVal,"onUpdate:current":e[0]||(e[0]=t=>l.pageNoVal=t),total:a.total,"page-size":a.pageSize,"show-less-items":""},null,8,["onChange","current","total","page-size"])):(0,i.kq)("",!0)])}],["__scopeId","data-v-2057c1d0"]])}}]);