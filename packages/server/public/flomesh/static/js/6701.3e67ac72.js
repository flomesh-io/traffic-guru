"use strict";(self.webpackChunkflomesh_load_balancer=self.webpackChunkflomesh_load_balancer||[]).push([[6701],{10711:function(e,t,a){a.d(t,{Z:function(){return w}});var i=a(66252),s=a(3577);const l={key:0,class:"permission-card-body"},o={key:1,class:"permission-card-body"},n={key:0},r={class:"inline-block"},c={class:"inline-block relative",style:{left:"10px",top:"-7px"}},d={key:1},u={class:"inline-block"},p=(e=>((0,i.dD)("data-v-21a71ec4"),e=e(),(0,i.Cn)(),e))((()=>(0,i._)("div",{class:"inline-block relative",style:{left:"10px",top:"-7px"}},null,-1)));var m=a(75255),h=a(54367),g={name:"PermissionCard",components:{CheckOutlined:m.Z,CloseOutlined:h.Z},props:["resources"],i18n:a(89234),data(){return{}},computed:{maxResources(){let e=0;return this.resources.forEach((t=>{e=e>t.actions.length?e:t.actions.length})),e}},created(){},mounted(){},methods:{}};var w=(0,a(83744).Z)(g,[["render",function(e,t,a,m,h,g){const w=(0,i.up)("a-card-grid"),f=(0,i.up)("CheckOutlined"),y=(0,i.up)("CloseOutlined"),b=(0,i.up)("a-card");return(0,i.wg)(),(0,i.j4)(b,{class:"grid-menu nopd small-grid-menu",bordered:!1},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.resources,((t,m)=>((0,i.wg)(),(0,i.iD)("div",{key:m},["project"!=t.type||0!=m&&a.resources[m-1].project?.id==t.project.id?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",l,(0,s.zw)(e.$t("Project"))+":"+(0,s.zw)(t.project.name),1)),"organization"!=t.type||0!=m&&a.resources[m-1].organization?.id==t.organization.id?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",o,(0,s.zw)(e.$t("Organization"))+":"+(0,s.zw)(t.organization.name),1)),(0,i.Wm)(w,{class:"flex-item permission-card-resource",style:(0,s.j5)("width:"+Math.floor(1e3/(g.maxResources+1))/10+"%")},{default:(0,i.w5)((()=>[(0,i._)("b",null,(0,s.zw)(e.$t(t.name)),1)])),_:2},1032,["style"]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(g.maxResources,((a,l)=>((0,i.wg)(),(0,i.j4)(w,{key:l,class:"flex-item permission-card-action",style:(0,s.j5)("width:"+Math.floor(1e3/(g.maxResources+1))/10+"%")},{default:(0,i.w5)((()=>[t.actions.length>l?((0,i.wg)(),(0,i.iD)("div",n,[(0,i._)("div",r,[t.actions[l].enabled?((0,i.wg)(),(0,i.j4)(f,{key:0,class:"success"})):((0,i.wg)(),(0,i.j4)(y,{key:1,class:"danger"}))]),(0,i._)("div",c,(0,s.zw)(e.$t(t.actions[l].name)),1)])):((0,i.wg)(),(0,i.iD)("div",d,[(0,i._)("div",u,[(0,i.Wm)(y,{class:"danger",style:{opacity:"0"}})]),p]))])),_:2},1032,["style"])))),128))])))),128))])),_:1})}],["__scopeId","data-v-21a71ec4"]])},71900:function(e,t,a){a.d(t,{Z:function(){return n}});var i=a(66252),s=a(3577);const l={class:"head-info"};var o={name:"HeadInfo",props:["title","content"]};var n=(0,a(83744).Z)(o,[["render",function(e,t,a,o,n,r){return(0,i.wg)(),(0,i.iD)("div",l,[(0,i._)("span",null,(0,s.zw)(a.title),1),(0,i._)("p",null,[(0,i.Uk)((0,s.zw)(a.content),1),(0,i.WI)(e.$slots,"body",{},void 0,!0)])])}],["__scopeId","data-v-00006846"]])},96701:function(e,t,a){a.r(t),a.d(t,{default:function(){return x}});var i=a(66252),s=a(3577);const l={class:"title"},o={class:"userinfo-description"},n={key:0},r={class:"userinfo-description"},c={key:0},d={key:0},u={key:0},p=["onClick"],m={class:"capitalize"},h={class:"pd-20"};a(57658);var g=a(94107),w=a(72424),f=a(61103),y=a(71900),b=a(10711),v=a(93099),k=a(33907),_={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M865.3 244.7c-.3-.3-61.1 59.8-182.1 180.6l-84.9-84.9 180.9-180.9c-95.2-57.3-217.5-42.6-296.8 36.7A244.42 244.42 0 00419 432l1.8 6.7-283.5 283.4c-6.2 6.2-6.2 16.4 0 22.6l141.4 141.4c6.2 6.2 16.4 6.2 22.6 0l283.3-283.3 6.7 1.8c83.7 22.3 173.6-.9 236-63.3 79.4-79.3 94.1-201.6 38-296.6z"}}]},name:"tool",theme:"filled"},z=a(33058);function j(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?Object(arguments[t]):{},i=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),i.forEach((function(t){$(e,t,a[t])}))}return e}function $(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var W=function(e,t){var a=j({},e,t.attrs);return(0,i.Wm)(z.Z,j({},a,{icon:_}),null)};W.displayName="ToolFilled",W.inheritAttrs=!1;var O=W,P={name:"UserInfo",components:{HeadInfo:y.Z,PageLayout:f.Z,ToolFilled:O,PermissionCard:b.Z,ForgetForm:w.Z},i18n:a(89234),data(){return{visible:!1,resources:{},loading:!0,oldphone:"",activeKey:"system",tabs:[],detail:{phone:"",email:"",role:{name:""}},welcome:{timeFix:(new Date).toLocaleString(),message:"Welcome Flomesh"}}},computed:{...(0,k.rn)("account",{currUser:"user"})},watch:{},created(){this.$isPro?this.tabs=[{type:"system",title:"System Role"},{type:"organization",title:"Organization Role"},{type:"project",title:"Project Role"}]:this.tabs=[{type:"system",title:"System Role"},{type:"organization",title:"Organization Role"}]},mounted(){this.search()},methods:{forget(){this.$refs.forget.validate((e=>{e&&(this.visible=!1)}))},goProject(e){this.$router.push({path:"/system/projects/detail/"+e})},showModal(){this.visible=!0},search(){this.loading=!0,(0,v.bG)().then((e=>{this.detail=e.data,this.detail.phone=this.detail.phone||"",this.oldphone=this.detail.phone||"",this.detail.email=this.detail.email||"",this.initroles(),this.loading=!1}))},saveEmail(){this.loading||(this.loading=!0,(0,v.ic)({id:this.detail.id,email:this.detail.email}).then((()=>{this.loading=!1,this.$message.success(this.$t("Email replacement succeeded"),3)})))},initroles(){this.changeRes()},changeRes(){this.resources=[];g.Z.getters["account/roles"].permissions.forEach((e=>{"system"!=this.activeKey||e.type&&e.type!=this.activeKey?"system"!=this.activeKey&&e.type==this.activeKey&&this.resources.push(e):this.resources.push(e)}))},savePhone(){if(!this.loading){if(this.loading=!0,isNaN(1*this.detail.phone))return this.$message.error(this.$t("Wrong phone number format"),3),void setTimeout((()=>{this.detail.phone=this.oldphone}),300);(0,v.ic)({id:this.detail.id,phone:this.detail.phone}).then((()=>{this.loading=!1,this.oldphone=this.detail.phone,this.$message.success(this.$t("Mobile phone number changed successfully"),3)}))}}}};var x=(0,a(83744).Z)(P,[["render",function(e,t,g,w,f,y){const b=(0,i.up)("ToolFilled"),v=(0,i.up)("HeadInfo"),k=(0,i.up)("a-descriptions-item"),_=(0,i.up)("a-typography-paragraph"),z=(0,i.up)("a-tag"),j=(0,i.up)("a-badge"),$=(0,i.up)("a-descriptions"),W=(0,i.up)("a-card"),O=(0,i.up)("a-tab-pane"),P=(0,i.up)("PermissionCard"),x=(0,i.up)("a-tabs"),D=(0,i.up)("a-col"),C=(0,i.up)("a-row"),K=(0,i.up)("ForgetForm"),R=(0,i.up)("a-modal"),Z=(0,i.up)("PageLayout");return(0,i.wg)(),(0,i.j4)(Z,{avatar:a(61006)},{headerContent:(0,i.w5)((()=>[(0,i._)("div",null,[(0,i._)("div",l,(0,s.zw)(e.$t("Hello")+" ")+" "+(0,s.zw)(e.currUser.name+" ")+"ï¼Œ"+(0,s.zw)(e.$t(f.welcome.message)),1),(0,i._)("div",null,(0,s.zw)(e.$t("Last Login"))+" : "+(0,s.zw)(f.welcome.timeFix),1)])])),extra:(0,i.w5)((()=>[(0,i.Wm)(v,{class:"split-right",title:e.$t("Change Password")},{body:(0,i.w5)((()=>[(0,i.Wm)(b,{onClick:y.showModal,class:"font-primary icon-menu rotate-icon"},null,8,["onClick"])])),_:1},8,["title"])])),default:(0,i.w5)((()=>[(0,i.Wm)(C,{class:"row-mg"},{default:(0,i.w5)((()=>[(0,i.Wm)(D,{class:"col-pd",xl:24,lg:24,md:24,sm:24,xs:24},{default:(0,i.w5)((()=>[(0,i.Wm)(x,{type:"card"},{default:(0,i.w5)((()=>[(0,i.Wm)(O,{key:"1",tab:e.$t("Overview")},{default:(0,i.w5)((()=>[(0,i.Wm)(W,{class:"card mb-20 nopd",bordered:!1},{default:(0,i.w5)((()=>[(0,i.Wm)($,{bordered:"",size:"small"},{default:(0,i.w5)((()=>[(0,i.Wm)(k,{label:e.$t("as"),span:1},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(f.detail.username),1)])),_:1},8,["label"]),e.$isPro?((0,i.wg)(),(0,i.j4)(k,{key:0,label:e.$t("Mobile"),span:2},{default:(0,i.w5)((()=>[(0,i._)("div",o,[f.detail.phone?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("span",n,"-")),(0,i.Wm)(_,{class:"inline-block",content:f.detail.phone,"onUpdate:content":t[0]||(t[0]=e=>f.detail.phone=e),editable:{onEnd:y.savePhone}},null,8,["content","editable"])])])),_:1},8,["label"])):(0,i.kq)("",!0),(0,i.Wm)(k,{label:e.$t("Roles"),span:1},{default:(0,i.w5)((()=>[(0,i.Wm)(z,{color:"blue"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(e.$t(f.detail.role.name)),1)])),_:1})])),_:1},8,["label"]),(0,i.Wm)(k,{label:e.$t("Email"),span:2},{default:(0,i.w5)((()=>[(0,i._)("div",r,[f.detail.email?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("span",c,"-")),(0,i.Wm)(_,{class:"inline-block",content:f.detail.email,"onUpdate:content":t[1]||(t[1]=e=>f.detail.email=e)},null,8,["content"])])])),_:1},8,["label"]),(0,i.Wm)(k,{label:e.$t("Organization"),span:1},{default:(0,i.w5)((()=>[f.detail.userOrganizations&&0!=f.detail.userOrganizations.length?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("span",d,"-")),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(f.detail.userOrganizations,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{key:t,style:(0,s.j5)(0==t?"":"margin-top: 5px;")},[(0,i.Wm)(z,{color:"orange"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(e.name),1)])),_:2},1024)],4)))),128))])),_:1},8,["label"]),(0,i.Wm)(k,{label:e.$t("Project"),span:2},{default:(0,i.w5)((()=>[f.detail.userProjects&&0!=f.detail.userProjects.length?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("span",u,"-")),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(f.detail.userProjects,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{key:t,style:(0,s.j5)(0==t?"":"margin-top: 5px;"),onClick:t=>y.goProject(e.id)},[(0,i.Wm)(j,{text:e.name,status:"processing"},null,8,["text"])],12,p)))),128))])),_:1},8,["label"])])),_:1})])),_:1})])),_:1},8,["tab"]),(0,i.Wm)(O,{key:"2",tab:e.$t("Authority")},{default:(0,i.w5)((()=>[(0,i.Wm)(x,{"tab-position":"left",type:"line",activeKey:f.activeKey,"onUpdate:activeKey":t[2]||(t[2]=e=>f.activeKey=e),onChange:y.changeRes},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(f.tabs,(t=>((0,i.wg)(),(0,i.j4)(O,{key:t.type},{tab:(0,i.w5)((()=>[(0,i._)("div",m,(0,s.zw)(e.$t(t.title)),1)])),default:(0,i.w5)((()=>[f.resources.length>0?((0,i.wg)(),(0,i.j4)(P,{key:0,resources:f.resources},null,8,["resources"])):(0,i.kq)("",!0)])),_:2},1024)))),128))])),_:1},8,["activeKey","onChange"])])),_:1},8,["tab"])])),_:1})])),_:1})])),_:1}),(0,i.Wm)(R,{visible:f.visible,"onUpdate:visible":t[3]||(t[3]=e=>f.visible=e),title:e.$t("Change Password"),width:"25%","ok-text":e.$t("Reset"),onOk:y.forget},{default:(0,i.w5)((()=>[(0,i._)("div",h,[(0,i.Wm)(K,{ref:"forget",nofoot:!0,"user-name":f.detail.email},null,8,["user-name"])])])),_:1},8,["visible","title","ok-text","onOk"])])),_:1},8,["avatar"])}],["__scopeId","data-v-61f79d51"]])}}]);