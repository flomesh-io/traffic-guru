"use strict";(self.webpackChunkflomesh_load_balancer=self.webpackChunkflomesh_load_balancer||[]).push([[9198],{62967:function(t,e,a){a.d(e,{Z:function(){return c}});var n=a(66252),i={icon:function(t,e){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M911.9 283.9v.5L835.5 865c-1 8-7.9 14-15.9 14H204.5c-8.1 0-14.9-6.1-16-14l-76.4-580.6v-.6 1.6L188.5 866c1.1 7.9 7.9 14 16 14h615.1c8 0 14.9-6 15.9-14l76.4-580.6c.1-.5.1-1 0-1.5z",fill:e}},{tag:"path",attrs:{d:"M773.6 810.6l53.9-409.4-139.8 86.1L512 252.9 336.3 487.3l-139.8-86.1 53.8 409.4h523.3zm-374.2-189c0-62.1 50.5-112.6 112.6-112.6s112.6 50.5 112.6 112.6v1c0 62.1-50.5 112.6-112.6 112.6s-112.6-50.5-112.6-112.6v-1z",fill:e}},{tag:"path",attrs:{d:"M512 734.2c61.9 0 112.3-50.2 112.6-112.1v-.5c0-62.1-50.5-112.6-112.6-112.6s-112.6 50.5-112.6 112.6v.5c.3 61.9 50.7 112.1 112.6 112.1zm0-160.9c26.6 0 48.2 21.6 48.2 48.3 0 26.6-21.6 48.3-48.2 48.3s-48.2-21.6-48.2-48.3c0-26.6 21.6-48.3 48.2-48.3z",fill:t}},{tag:"path",attrs:{d:"M188.5 865c1.1 7.9 7.9 14 16 14h615.1c8 0 14.9-6 15.9-14l76.4-580.6v-.5c.3-6.4-6.7-10.8-12.3-7.4L705 396.4 518.4 147.5a8.06 8.06 0 00-12.9 0L319 396.4 124.3 276.5c-5.5-3.4-12.6.9-12.2 7.3v.6L188.5 865zm147.8-377.7L512 252.9l175.7 234.4 139.8-86.1-53.9 409.4H250.3l-53.8-409.4 139.8 86.1z",fill:t}}]}},name:"crown",theme:"twotone"},o=a(33058);function r(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?Object(arguments[e]):{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})))),n.forEach((function(e){s(t,e,a[e])}))}return t}function s(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var l=function(t,e){var a=r({},t,e.attrs);return(0,n.Wm)(o.Z,r({},a,{icon:i}),null)};l.displayName="CrownTwoTone",l.inheritAttrs=!1;var c=l},77682:function(t,e,a){a.d(e,{Z:function(){return c}});var n=a(66252),i={icon:function(t,e){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 632h128v192H696zm-496 0h128v192H200z",fill:e}},{tag:"path",attrs:{d:"M512 128c-212.1 0-384 171.9-384 384v360c0 13.3 10.7 24 24 24h184c35.3 0 64-28.7 64-64V624c0-35.3-28.7-64-64-64H200v-48c0-172.3 139.7-312 312-312s312 139.7 312 312v48H688c-35.3 0-64 28.7-64 64v208c0 35.3 28.7 64 64 64h184c13.3 0 24-10.7 24-24V512c0-212.1-171.9-384-384-384zM328 632v192H200V632h128zm496 192H696V632h128v192z",fill:t}}]}},name:"customer-service",theme:"twotone"},o=a(33058);function r(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?Object(arguments[e]):{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})))),n.forEach((function(e){s(t,e,a[e])}))}return t}function s(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var l=function(t,e){var a=r({},t,e.attrs);return(0,n.Wm)(o.Z,r({},a,{icon:i}),null)};l.displayName="CustomerServiceTwoTone",l.inheritAttrs=!1;var c=l},38046:function(t,e,a){a.d(e,{Z:function(){return c}});var n=a(66252),i={icon:function(t,e){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 632H136V232h752v560z",fill:t}},{tag:"path",attrs:{d:"M136 792h752V232H136v560zm472-372c0-4.4 1-8 2.3-8h123.4c1.3 0 2.3 3.6 2.3 8v48c0 4.4-1 8-2.3 8H610.3c-1.3 0-2.3-3.6-2.3-8v-48zm0 144c0-4.4 3.2-8 7.1-8h185.7c3.9 0 7.1 3.6 7.1 8v48c0 4.4-3.2 8-7.1 8H615.1c-3.9 0-7.1-3.6-7.1-8v-48zM216.2 664.6c2.8-53.3 31.9-99.6 74.6-126.1-18.1-20-29.1-46.4-29.1-75.5 0-61.9 49.9-112 111.4-112s111.4 50.1 111.4 112c0 29.1-11 55.6-29.1 75.5 42.6 26.4 71.8 72.8 74.6 126.1a8 8 0 01-8 8.4h-43.9c-4.2 0-7.6-3.3-7.9-7.5-3.8-50.5-46-90.5-97.2-90.5s-93.4 40-97.2 90.5c-.3 4.2-3.7 7.5-7.9 7.5H224c-4.6 0-8.2-3.8-7.8-8.4z",fill:e}},{tag:"path",attrs:{d:"M321.3 463a51.7 52 0 10103.4 0 51.7 52 0 10-103.4 0z",fill:e}},{tag:"path",attrs:{d:"M610.3 476h123.4c1.3 0 2.3-3.6 2.3-8v-48c0-4.4-1-8-2.3-8H610.3c-1.3 0-2.3 3.6-2.3 8v48c0 4.4 1 8 2.3 8zm4.8 144h185.7c3.9 0 7.1-3.6 7.1-8v-48c0-4.4-3.2-8-7.1-8H615.1c-3.9 0-7.1 3.6-7.1 8v48c0 4.4 3.2 8 7.1 8zM224 673h43.9c4.2 0 7.6-3.3 7.9-7.5 3.8-50.5 46-90.5 97.2-90.5s93.4 40 97.2 90.5c.3 4.2 3.7 7.5 7.9 7.5H522a8 8 0 008-8.4c-2.8-53.3-32-99.7-74.6-126.1a111.8 111.8 0 0029.1-75.5c0-61.9-49.9-112-111.4-112s-111.4 50.1-111.4 112c0 29.1 11 55.5 29.1 75.5a158.09 158.09 0 00-74.6 126.1c-.4 4.6 3.2 8.4 7.8 8.4zm149-262c28.5 0 51.7 23.3 51.7 52s-23.2 52-51.7 52-51.7-23.3-51.7-52 23.2-52 51.7-52z",fill:t}}]}},name:"idcard",theme:"twotone"},o=a(33058);function r(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?Object(arguments[e]):{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})))),n.forEach((function(e){s(t,e,a[e])}))}return t}function s(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var l=function(t,e){var a=r({},t,e.attrs);return(0,n.Wm)(o.Z,r({},a,{icon:i}),null)};l.displayName="IdcardTwoTone",l.inheritAttrs=!1;var c=l},10711:function(t,e,a){a.d(e,{Z:function(){return h}});a(68309);var n=a(66252),i=a(3577),o={key:0,class:"permission-card-body"},r={key:1,class:"permission-card-body"},s={key:0},l={class:"inline-block"},c={class:"inline-block relative",style:{left:"10px",top:"-7px"}},u={key:1},d={class:"inline-block"},p=function(t){return(0,n.dD)("data-v-21a71ec4"),t=t(),(0,n.Cn)(),t}((function(){return(0,n._)("div",{class:"inline-block relative",style:{left:"10px",top:"-7px"}},null,-1)}));a(41539),a(54747);var f=a(75255),m=a(54367),g={name:"PermissionCard",components:{CheckOutlined:f.Z,CloseOutlined:m.Z},props:["resources"],i18n:a(89234),data:function(){return{}},computed:{maxResources:function(){var t=0;return this.resources.forEach((function(e){t=t>e.actions.length?t:e.actions.length})),t}},created:function(){},mounted:function(){},methods:{}};var h=(0,a(83744).Z)(g,[["render",function(t,e,a,f,m,g){var h=(0,n.up)("a-card-grid"),v=(0,n.up)("CheckOutlined"),w=(0,n.up)("CloseOutlined"),z=(0,n.up)("a-card");return(0,n.wg)(),(0,n.j4)(z,{class:"grid-menu nopd small-grid-menu",bordered:!1},{default:(0,n.w5)((function(){return[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.resources,(function(e,f){var m,z;return(0,n.wg)(),(0,n.iD)("div",{key:f},["project"!=e.type||0!=f&&(null===(m=a.resources[f-1].project)||void 0===m?void 0:m.id)==e.project.id?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",o,(0,i.zw)(t.$t("Project"))+":"+(0,i.zw)(e.project.name),1)),"organization"!=e.type||0!=f&&(null===(z=a.resources[f-1].organization)||void 0===z?void 0:z.id)==e.organization.id?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",r,(0,i.zw)(t.$t("Organization"))+":"+(0,i.zw)(e.organization.name),1)),(0,n.Wm)(h,{class:"flex-item permission-card-resource",style:(0,i.j5)("width:"+Math.floor(1e3/(g.maxResources+1))/10+"%")},{default:(0,n.w5)((function(){return[(0,n._)("b",null,(0,i.zw)(t.$t(e.name)),1)]})),_:2},1032,["style"]),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(g.maxResources,(function(a,o){return(0,n.wg)(),(0,n.j4)(h,{key:o,class:"flex-item permission-card-action",style:(0,i.j5)("width:"+Math.floor(1e3/(g.maxResources+1))/10+"%")},{default:(0,n.w5)((function(){return[e.actions.length>o?((0,n.wg)(),(0,n.iD)("div",s,[(0,n._)("div",l,[e.actions[o].enabled?((0,n.wg)(),(0,n.j4)(v,{key:0,class:"success"})):((0,n.wg)(),(0,n.j4)(w,{key:1,class:"danger"}))]),(0,n._)("div",c,(0,i.zw)(t.$t(e.actions[o].name)),1)])):((0,n.wg)(),(0,n.iD)("div",u,[(0,n._)("div",d,[(0,n.Wm)(w,{class:"danger",style:{opacity:"0"}})]),p]))]})),_:2},1032,["style"])})),128))])})),128))]})),_:1})}],["__scopeId","data-v-21a71ec4"]])},1299:function(t,e,a){a.d(e,{Z:function(){return s}});var n=a(66252),i=a(3577),o={key:0,class:"title"};a(9653);var r={name:"DetailList",props:{title:{type:String,required:!1,default:""},col:{type:Number,required:!1,default:3},size:{type:String,required:!1,default:"large"},layout:{type:String,required:!1,default:"horizontal"}}};var s=(0,a(83744).Z)(r,[["render",function(t,e,a,r,s,l){var c=(0,n.up)("a-row");return(0,n.wg)(),(0,n.iD)("div",{class:(0,i.C_)(["detail-list","small"===a.size?"small":"large","vertical"===a.layout?"vertical":"horizontal"]),style:(0,i.j5)("flex-"+a.col)},[a.title?((0,n.wg)(),(0,n.iD)("div",o,(0,i.zw)(a.title),1)):(0,n.kq)("",!0),(0,n.Wm)(c,null,{default:(0,n.w5)((function(){return[(0,n.WI)(t.$slots,"default")]})),_:3})],6)}]])},13589:function(t,e,a){a.d(e,{Z:function(){return l}});a(68309);var n=a(66252),i=a(3577),o={class:"detail-content"};a(21249);var r={1:{xs:24},2:{xs:24,sm:12},3:{xs:24,sm:12,md:8},4:{xs:24,sm:12,md:6}},s={name:"DetailListItem",i18n:a(39945),props:{name:{type:String,required:!1,default:""},rules:{type:Array,required:!1,default:function(){return[]}},term:{type:String,required:!1,default:""},termTop:{type:Boolean}},data:function(){return{col:2,responsive:r}},computed:{getRules:function(){var t=this;return this.rules.map((function(e){return e.message=t.$t(e.message),e})),this.rules}},created:function(){this.$parent&&this.$parent.$parent&&this.$parent.$parent.col>0&&(this.col=this.$parent.$parent.col)},methods:{}};var l=(0,a(83744).Z)(s,[["render",function(t,e,a,r,s,l){var c=(0,n.up)("a-form-item"),u=(0,n.up)("a-col");return(0,n.wg)(),(0,n.j4)(u,(0,n.dG)({class:"detail-list-content flex"},s.responsive[s.col]),{default:(0,n.w5)((function(){return[(0,n._)("div",{class:(0,i.C_)(a.termTop?"term top":"term")},(0,i.zw)(a.term),3),(0,n._)("div",o,[a.rules?((0,n.wg)(),(0,n.j4)(c,{key:0,name:a.name,rules:l.getRules},{default:(0,n.w5)((function(){return[(0,n.WI)(t.$slots,"default")]})),_:3},8,["name","rules"])):(0,n.WI)(t.$slots,"default",{key:1})])]})),_:3},16)}]])},87484:function(t,e,a){a.d(e,{Z:function(){return j}});a(68309),a(41539),a(54747);var n=a(66252),i=a(3577),o={class:"role-name"};var r=a(95082),s=(a(92222),a(57658),a(38046)),l=a(44924),c=a(33601),u=a(1299),d=a(13589),p=a(61103),f=a(34531),m=a(96486),g=a.n(m),h=a(85263),v=a(33907),w=a(93099),z=a(10711),y={name:"ProjectBaseDetail",components:{DetailListItem:d.Z,DetailList:u.Z,PageLayout:p.Z,CardSelector:f.Z,PermissionCard:z.Z,IdcardTwoTone:s.Z,UserOutlined:l.Z,FolderTwoTone:c.Z},i18n:a(89234),props:["pid"],data:function(){return{activeKey:"1",FolderTwoTone:c.Z,orgs:[],selectUsers:null,isEdit:!1,detail:{users:[],id:"",name:"",organization:null},bindTarget:{},editorIsCreate:!0,workload:[],loading:!0,activities:[],config:{},teams:[],subApis:[],projectRoles:[],userOrganizationRoles:[],userOrganizationRolesMap:[],permissionPayload:{userOrganizationRole:null},permissionUser:null,projectVisible:!1,resources:[],simpleImage:h.Z.PRESENTED_IMAGE_SIMPLE,UserOutlined:l.Z}},computed:(0,r.Z)({},(0,v.rn)("rules",["rules"])),created:function(){var t=this;this.pid?(this.isEdit=!0,this.loaddata()):(this.isEdit=!1,this.loading=!1,this.detail={users:[],id:"",name:"",organization:null},this.$gql.query("myOrganizations{data{id,attributes{name}}}").then((function(e){t.orgs=e.data})),this.$emit("getDetail",{detail:this.detail,loading:this.loading}))},activated:function(){},methods:{showProjectRole:function(t){this.permissionUser=t,this.setPermissionPayload(t.id,this.detail.organization,this.pid),this.projectVisible=!0},deleteUserOrganizationRoles:function(){var t=this,e=this.userOrganizationRolesMap["project-".concat(this.pid,"-").concat(this.permissionUser.id)].id;this.$gql.mutation("deleteUserOrganizationRole(id:".concat(e,"){data{id}}")).then((function(){t.$message.success(t.$t("Deleted successfully"),3),t.loadRoles()}))},setPermissionPayload:function(t,e,a){var n="project";this.permissionPayload.userOrganizationRole=null,this.resources=[],this.userOrganizationRolesMap["".concat(n,"-").concat(a,"-").concat(t)]&&(this.permissionPayload.userOrganizationRole=this.userOrganizationRolesMap["".concat(n,"-").concat(a,"-").concat(t)].role.id),this.setDefaultResources()},setDefaultResources:function(){var t=this;if(this.permissionPayload.userOrganizationRole){var e=this.permissionPayload.userOrganizationRole;(0,w.Yj)({id:e}).then((function(e){t.resources=e.permissions}))}},loadRoles:function(){var t=this;this.projectRoles=[],this.$gql.query('usersPermissionsRoles(filters:{type:{eq:"project"}}){data{id,attributes{name,type}}}').then((function(e){t.projectRoles=e.data})),this.userOrganizationRoles=[],this.userOrganizationRolesMap={};var e=this.detail.organization;this.$gql.query("userOrganizationRoles(pagination:{limit: ".concat(this.$DFT_LIMIT,"},filters:{organization:{id:{eq:").concat(e,"}}}){data{id,attributes{\n\t\t\t\t\t\ttype,\n\t\t\t\t\t\tproject{data{id,attributes{name}}},\n\t\t\t\t\t\tuser{data{id,attributes{username}}},\n\t\t\t\t\t\trole{data{id,attributes{name}}}\n\t\t\t\t\t}}}")).then((function(e){t.userOrganizationRoles=e.data,e.data.forEach((function(e){"organization"==e.type&&e.user?t.userOrganizationRolesMap["organization-".concat(e.user.id)]=e:"project"==e.type&&e.user&&(t.userOrganizationRolesMap["project-".concat(t.pid,"-").concat(e.user.id)]=e)})),t.detail.users.forEach((function(e){var a;e.role=null===(a=t.userOrganizationRolesMap["project-".concat(t.pid,"-").concat(e.id)])||void 0===a?void 0:a.role})),t.loading=!1,t.$emit("getDetail",{detail:t.detail,loading:t.loading})}))},saveUserOrganizationRoles:function(){var t=this,e=!1,a=this.permissionUser.id,n=this.detail.organization,i=this.pid,o="project",r={user:a,organization:n,role:this.permissionPayload.userOrganizationRole,type:o};if(r.project=i,this.userOrganizationRolesMap["".concat(o,"-").concat(i,"-").concat(a)]&&(e=!0,r.id=this.userOrganizationRolesMap["".concat(o,"-").concat(i,"-").concat(a)].id),e){var s=r.id;delete r.id,this.$gql.mutation("updateUserOrganizationRole(id:".concat(s,", data: $data){data{id}}"),{data:r},{data:"UserOrganizationRoleInput!"}).then((function(){t.$message.success(t.$t("Modified successfully"),3),t.permissionPayload.userOrganizationRole=null,t.permissionUser=null,t.resources=[],t.projectVisible=!1,t.loadRoles()}))}else delete r.id,this.$gql.mutation("createUserOrganizationRole(data: $data){data{id}}",{data:r},{data:"UserOrganizationRoleInput!"}).then((function(){t.$message.success(t.$t("Modified successfully"),3),t.permissionPayload.userOrganizationRole=null,t.permissionUser=null,t.resources=[],t.projectVisible=!1,t.loadRoles()}))},addUser:function(){var t=[];this.detail.users.forEach((function(e){t.push(e.id)})),t.push(this.selectUsers),this.selectUsers=null,this.updateProjectUser(this.pid,t)},delProjectUser:function(t){var e=[],a=[];this.detail.users.forEach((function(n){t!=n.id&&(e.push(n),a.push(n.id))})),this.detail.users=e,this.updateProjectUser(this.pid,a)},updateProjectUser:function(t,e){var a=this,n={users:e};this.$gql.mutation("updateProject(id:".concat(t,", data: $data){data{id}}"),{data:n},{data:"ProjectInput!"}).then((function(){a.loaddata(!0)}))},getSample:function(){this.custom=this.customSample},validate:function(){var t=this;this.$refs.layout.$refs.form.validateFields().then((function(){t.save()})).catch((function(){}))},save:function(){var t=this,e=g().cloneDeep(this.detail);if(e.organization||delete e.organization,delete e.users,this.isEdit){var a=e.id;delete e.id,delete e.apis,delete e.applications,this.$gql.mutation("updateProject(id:".concat(a,", data: $data){data{id}}"),{data:e},{data:"ProjectInput!"}).then((function(){t.$message.success(t.$t("Modified successfully"),3),t.loaddata()}))}else delete e.id,this.$gql.mutation("createProject(data: $data){data{id}}",{data:e},{data:"ProjectInput!"}).then((function(e){t.$message.success(t.$t("Created successfully"),3),t.$emit("update:pid",e.data.id),t.isEdit=!0,setTimeout((function(){t.loaddata()}),1e3)}))},remove:function(t,e,a){var n=this;this.$gql.mutation("deleteProject(id:".concat(a.id,"){data{id}}")).then((function(){n.$message.success(n.$t("Deleted successfully"),3),n.loaddata()}))},getTimeLabel:function(t){return new Date(t[0]).toLocaleDateString()+"~"+new Date(t[1]).toLocaleDateString()},search:function(t,e){t&&(this.pageNo=t,this.pageSize=e),this.loaddata()},loaddata:function(){var t=this;this.loading=!0,this.$gql.query("project(id: ".concat(this.pid,"){data{id,attributes{\n\t\t\t\t\t\tname,\n\t\t\t\t\t\torganization{data{id,attributes{\n\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\tusers{data{id,attributes{\n\t\t\t\t\t\t\t\tusername,\n\t\t\t\t\t\t\t\ttype,\n\t\t\t\t\t\t\t\trole{data{id,attributes{name}}},\n\t\t\t\t\t\t\t\tuserProjects{data{id}}\n\t\t\t\t\t\t\t}}},\n\t\t\t\t\t\t}}},\n\t\t\t\t\t\tusers{data{id,attributes{username,role{data{id,attributes{name}}},phone,email,type}}},\n\t\t\t\t\t\tcontent\n\t\t\t\t\t}}}")).then((function(e){var a=e.data;t.detail=a,t.users=a.organization.users,t.detail.organization=a.organization?a.organization.id?a.organization.id:a.organization:null,t.loadRoles()})),this.$gql.query("myOrganizations{data{id,attributes{name}}}").then((function(e){t.orgs=e.data}))}}};var j=(0,a(83744).Z)(y,[["render",function(t,e,a,r,s,l){var c=(0,n.up)("a-input"),u=(0,n.up)("DetailListItem"),d=(0,n.up)("a-select-option"),p=(0,n.up)("a-select"),f=(0,n.up)("DetailList"),m=(0,n.up)("a-button"),g=(0,n.up)("CardSelector"),h=(0,n.up)("a-space"),v=(0,n.up)("a-col"),w=(0,n.up)("a-row"),z=((0,n.up)("FolderTwoTone"),(0,n.up)("IdcardTwoTone")),y=(0,n.up)("PermissionCard"),j=(0,n.up)("a-modal"),b=((0,n.up)("UserOutlined"),(0,n.up)("PageLayout")),O=(0,n.Q2)("permission");return(0,n.wg)(),(0,n.j4)(b,{"form-state":s.detail,ref:"layout"},{headerContent:(0,n.w5)((function(){return[(0,n.Wm)(f,{size:"small",col:1},{default:(0,n.w5)((function(){return[t.embed?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(u,{key:0,term:t.$t("as"),rules:t.rules.uniqueName("projects",{id:a.pid,organization:s.detail.organization}),name:"name"},{default:(0,n.w5)((function(){return[(0,n.Wm)(c,{placeholder:t.$t("unset"),value:s.detail.name,"onUpdate:value":e[0]||(e[0]=function(t){return s.detail.name=t}),class:"width-200"},null,8,["placeholder","value"])]})),_:1},8,["term","rules"])),(0,n.Wm)(u,{term:t.$t("Organization"),rules:t.rules.required,name:"organization"},{default:(0,n.w5)((function(){return[(0,n.Wm)(p,{placeholder:t.$t("unset"),value:s.detail.organization,"onUpdate:value":e[1]||(e[1]=function(t){return s.detail.organization=t}),class:"width-180",ref:"select"},{default:(0,n.w5)((function(){return[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.orgs,(function(t,e){return(0,n.wg)(),(0,n.j4)(d,{value:t.id,key:e},{default:(0,n.w5)((function(){return[(0,n.Uk)((0,i.zw)(t.name),1)]})),_:2},1032,["value"])})),128))]})),_:1},8,["placeholder","value"])]})),_:1},8,["term","rules"])]})),_:1})]})),action:(0,n.w5)((function(){return[(0,n.Wm)(h,null,{default:(0,n.w5)((function(){return[(0,n.WI)(t.$slots,"action",{},void 0,!0),(0,n.Wm)(g,{search:!0,icon:s.UserOutlined,onSelect:l.addUser,disabled:function(t){var e=!1;return(t.userProjects||[]).forEach((function(t){e=t.id==a.pid||e})),e},options:t.users,value:s.selectUsers,"onUpdate:value":e[2]||(e[2]=function(t){return s.selectUsers=t})},{default:(0,n.w5)((function(){return[(0,n.wy)(((0,n.wg)(),(0,n.j4)(m,null,{default:(0,n.w5)((function(){return[(0,n.Uk)((0,i.zw)(t.$t("Add members")),1)]})),_:1})),[[O,[s.detail.organization?"project:update:organization:"+s.detail.organization:"project:update"]]])]})),_:1},8,["icon","onSelect","disabled","options","value"]),""!=a.pid?(0,n.wy)(((0,n.wg)(),(0,n.j4)(m,{key:0,type:"primary",onClick:l.validate},{default:(0,n.w5)((function(){return[(0,n.Uk)((0,i.zw)(t.$t("save")),1)]})),_:1},8,["onClick"])),[[O,[s.detail.organization?"project:update:organization:"+s.detail.organization:"project:update"]]]):(0,n.wy)(((0,n.wg)(),(0,n.j4)(m,{key:1,type:"primary",onClick:l.validate},{default:(0,n.w5)((function(){return[(0,n.Uk)((0,i.zw)(t.$t("create")),1)]})),_:1},8,["onClick"])),[[O,[s.detail.organization?"project:create:organization:"+s.detail.organization:"project:create"]]])]})),_:3})]})),default:(0,n.w5)((function(){return[(0,n.Wm)(w,{class:"row-mg"},{default:(0,n.w5)((function(){return[(0,n.Wm)(v,{class:"col-pd",xl:24,lg:24,md:24,sm:24,xs:24},{default:(0,n.w5)((function(){return[(0,n.WI)(t.$slots,"tabs",{},void 0,!0)]})),_:3})]})),_:3}),(0,n.kq)("",!0),(0,n.Wm)(j,{width:"80%",visible:s.projectVisible,"onUpdate:visible":e[4]||(e[4]=function(t){return s.projectVisible=t}),title:t.$t("Project Role"),"cancel-text":t.$t("Remove Role"),"ok-text":t.$t("Save"),onCancel:l.deleteUserOrganizationRoles,onOk:l.saveUserOrganizationRoles},{default:(0,n.w5)((function(){return[(0,n._)("p",null,[(0,n.Wm)(p,{placeholder:t.$t("unset"),class:"width-500",value:s.permissionPayload.userOrganizationRole,"onUpdate:value":e[3]||(e[3]=function(t){return s.permissionPayload.userOrganizationRole=t}),onChange:l.setDefaultResources},{default:(0,n.w5)((function(){return[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.projectRoles,(function(t,e){return(0,n.wg)(),(0,n.j4)(d,{key:e,value:t.id},{default:(0,n.w5)((function(){return[(0,n._)("span",null,[(0,n.Wm)(z,{"two-tone-color":"#00adef",class:"font-30"}),(0,n._)("span",o,(0,i.zw)(t.name),1)])]})),_:2},1032,["value"])})),128))]})),_:1},8,["placeholder","value","onChange"])]),(0,n._)("p",null,[s.resources.length>0?((0,n.wg)(),(0,n.j4)(y,{key:0,resources:s.resources,style:{width:"1200px"}},null,8,["resources"])):(0,n.kq)("",!0)])]})),_:1},8,["visible","title","cancel-text","ok-text","onCancel","onOk"]),(0,n.kq)("",!0)]})),_:3},8,["form-state"])}],["__scopeId","data-v-0b15ce21"]])},38189:function(t,e,a){a.d(e,{Z:function(){return d}});a(68309),a(74916),a(64765);var n=a(66252),i=a(3577),o={class:"mb-3"},r={class:"meta-content"};var s=a(38046),l=a(62967),c=a(77682),u={name:"UsersResults",components:{CardList:a(69596).Z,IdcardTwoTone:s.Z,CrownTwoTone:l.Z,CustomerServiceTwoTone:c.Z},i18n:a(89234),props:["users","total","pageNo","pageSize","loading","actions","noAction"],data:function(){return{pageNoVal:0}},computed:{},watch:{pageNoVal:{deep:!0,handler:function(){this.$emit("update:pageNo",this.pageNoVal)}}},mounted:function(){this.pageNoVal=this.pageNo},methods:{search:function(t,e,a){this.$emit("search",t,e,a)},remove:function(t,e,a){this.$emit("remove",t,e,a)},setting:function(t,e,a){this.$emit("setting",t,e,a)}}};var d=(0,a(83744).Z)(u,[["render",function(t,e,a,s,l,c){var u=(0,n.up)("a-tag"),d=(0,n.up)("CrownTwoTone"),p=(0,n.up)("CustomerServiceTwoTone"),f=(0,n.up)("IdcardTwoTone"),m=(0,n.up)("a-card-meta"),g=(0,n.up)("CardList"),h=(0,n.up)("a-pagination");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(g,{"hide-action-title":!0,loading:a.loading,"data-source":a.users,type:"component",actions:a.noAction?null:a.actions?a.actions:[{icon:"EditOutlined",text:t.$t("edit"),call:c.setting,permission:["user:update"]},{icon:"CloseOutlined",hide:!0,text:t.$t("delete"),call:c.remove,permission:["user:delete"]}]},{default:(0,n.w5)((function(e){var a=e.item;return[(0,n.Wm)(m,null,{title:(0,n.w5)((function(){return[(0,n._)("div",o,[(0,n.Uk)((0,i.zw)(a.username)+" ",1),a.role?((0,n.wg)(),(0,n.j4)(u,{key:0,color:"blue",class:"ml-10"},{default:(0,n.w5)((function(){return[(0,n.Uk)((0,i.zw)(a.role.name),1)]})),_:2},1024)):(0,n.kq)("",!0)])]})),avatar:(0,n.w5)((function(){return[a.role&&"Authenticated"==a.role.name?((0,n.wg)(),(0,n.j4)(d,{key:0,"two-tone-color":"#00adef",class:"font-50"})):a.role&&"Public"==a.role.name?((0,n.wg)(),(0,n.j4)(p,{key:1,"two-tone-color":"#00adef",class:"font-50"})):((0,n.wg)(),(0,n.j4)(f,{key:2,"two-tone-color":"#00adef",class:"font-50"}))]})),description:(0,n.w5)((function(){return[(0,n._)("div",r,(0,i.zw)(t.$t("Email"))+"："+(0,i.zw)(a.email||t.$t("unset")),1)]})),_:2},1024)]})),_:1},8,["loading","data-source","actions"]),l.pageNoVal>=0?((0,n.wg)(),(0,n.j4)(h,{key:0,onChange:c.search,current:l.pageNoVal,"onUpdate:current":e[0]||(e[0]=function(t){return l.pageNoVal=t}),total:a.total,"page-size":a.pageSize,"show-less-items":""},null,8,["onChange","current","total","page-size"])):(0,n.kq)("",!0)])}],["__scopeId","data-v-2057c1d0"]])}}]);