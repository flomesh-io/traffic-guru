"use strict";(self.webpackChunkflomesh_load_balancer=self.webpackChunkflomesh_load_balancer||[]).push([[8367],{79821:function(t,a,e){e.r(a),e.d(a,{default:function(){return g}});var s=e(66252);var n=e(13504),d=e(7141),i=e(14766),l=e(61103),o=e(33907),r=e(39176),u=e(67554),c=e(44044),p=e(54140),m={name:"CronJobsDetail",i18n:e(89234),components:{PageLayout:l.Z,EventList:n.Z,StatusList:d.Z,JobList:i.Z,RollingUpdateCard:r.Z,PodStatusCard:c.Z,DetailHeader:p.Z,ResourceInfoCard:u.Z},data(){return{detail:{spec:{updateStrategy:{rollingUpdate:{}},template:{spec:{containers:[]}}},metadata:{labels:{},annotations:{}},typeMeta:{},jobStatus:{},podInfo:{},containerImages:[],selector:{},statusInfo:{},conditions:[],rollingUpdateStrategy:{}},loading:!0,pid:"",namespace:"",isMounted:!1,metrics:[],params:{key:"",pageNo:1,pageSize:10,total:0}}},computed:{...(0,o.rn)("setting",["isMobile"])},created(){this.pid=this.$route.params.id||"",this.namespace=this.$route.params.namespace||localStorage.getItem("NAMESPACE")},mounted(){this.isMounted=!0,""!=this.pid?this.search():(this.detail={spec:{updateStrategy:{rollingUpdate:{}},template:{spec:{containers:[]}}},metadata:{labels:{},annotations:{}},typeMeta:{},jobStatus:{},podInfo:{},containerImages:[],selector:{},statusInfo:{},conditions:[],rollingUpdateStrategy:{}},this.loading=!1)},methods:{onTabChange(t){},search(){this.loading=!0,this.$request(this.URL(),this.$METHOD.GET).then((t=>{this.detail=t.data,this.loading=!1}))},URL(){let t="/"+this.pid;return this.$REST.K8S.encode(this.$REST.K8S.CRONJOB,t,this.namespace)},valid(){return!0},save(){this.valid()&&(""!=this.pid?(this.$message.success(this.$t("Save successfully"),3),this.$closePage(this.$route)):(this.$message.success(this.$t("Created successfully"),3),this.$closePage(this.$route)))},handleChange(){}}};var g=(0,e(83744).Z)(m,[["render",function(t,a,e,n,d,i){const l=(0,s.up)("DetailHeader"),o=(0,s.up)("ResourceInfoCard"),r=(0,s.up)("RollingUpdateCard"),u=(0,s.up)("PodStatusCard"),c=(0,s.up)("a-tab-pane"),p=(0,s.up)("JobList"),m=(0,s.up)("a-card"),g=(0,s.up)("StatusList"),h=(0,s.up)("EventList"),b=(0,s.up)("a-tabs"),f=(0,s.up)("a-col"),S=(0,s.up)("a-row"),y=(0,s.up)("PageLayout");return(0,s.wg)(),(0,s.j4)(y,{title:t.$t("Cron Jobs")},{headerContent:(0,s.w5)((()=>[(0,s.Wm)(l,{d:d.detail},null,8,["d"])])),action:(0,s.w5)((()=>[])),default:(0,s.w5)((()=>[(0,s.Wm)(S,{class:"row-mg"},{default:(0,s.w5)((()=>[(0,s.Wm)(f,{class:"col-pd",xl:24,lg:24,md:24,sm:24,xs:24},{default:(0,s.w5)((()=>[(0,s.Wm)(b,{type:"card"},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{key:"1",tab:t.$t("Overview")},{default:(0,s.w5)((()=>[(0,s.Wm)(o,{loading:d.loading,d:d.detail},null,8,["loading","d"]),(0,s.Wm)(r,{loading:d.loading,d:d.detail.spec?.updateStrategy},null,8,["loading","d"]),(0,s.Wm)(u,{loading:d.loading,d:d.detail.podInfo},null,8,["loading","d"])])),_:1},8,["tab"]),(0,s.Wm)(c,{key:"2",tab:t.$t("Jobs")},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{class:"card nopd",bordered:!1,loading:d.loading},{default:(0,s.w5)((()=>[(0,s.Wm)(p,{title:t.$t("Active Jobs"),embed:!0,unactive:!1,"has-search":!1,d:d.detail.active},null,8,["title","d"])])),_:1},8,["loading"]),(0,s.Wm)(m,{class:"card mt-10 nopd",bordered:!1,loading:d.loading},{default:(0,s.w5)((()=>[(0,s.Wm)(p,{title:t.$t("Not Working Jobs"),embed:!0,unactive:!0,"has-search":!1,d:d.detail.notWorking},null,8,["title","d"])])),_:1},8,["loading"])])),_:1},8,["tab"]),d.detail.jobStatus?((0,s.wg)(),(0,s.j4)(c,{key:"3",tab:t.$t("Status")},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{class:"card nopd",bordered:!1,loading:d.loading},{default:(0,s.w5)((()=>[(0,s.Wm)(g,{d:d.detail.jobStatus.conditions||[]},null,8,["d"])])),_:1},8,["loading"])])),_:1},8,["tab"])):(0,s.kq)("",!0),(0,s.Wm)(c,{key:"4",tab:t.$t("Events")},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{class:"card nopd",bordered:!1,loading:d.loading},{default:(0,s.w5)((()=>[(0,s.Wm)(h,{namespace:d.namespace,"has-search":!1,url:t.$REST.K8S.CRONJOB+"/"+d.pid+"/event"},null,8,["namespace","url"])])),_:1},8,["loading"])])),_:1},8,["tab"])])),_:1})])),_:1})])),_:1})])),_:1},8,["title"])}]])},7141:function(t,a,e){e.d(a,{Z:function(){return i}});var s=e(66252);const n=[{key:"Type",dataIndex:"type"},{key:"Status",dataIndex:"status"},{key:"Last Probe Time",dataIndex:"lastProbeTime"},{key:"Last Transition Time",dataIndex:"lastTransitionTime"},{key:"Reason",dataIndex:"reason"},{key:"Message",dataIndex:"message"}];var d={name:"StatusList",components:{},props:["d"],i18n:e(89234),data(){return{columns:n,loading:!1,list:[]}},computed:{dataColumns(){return this.columns.map((t=>(t.title=this.$t(t.key),t)))}},created(){this.search()},methods:{search(){this.list=this.reset(this.d)},reset(t){for(let a=0;a<t.length;a++)t[a].lastProbeTime=new Date(t[a].lastProbeTime).toLocaleString(),t[a].lastTransitionTime=new Date(t[a].lastTransitionTime).toLocaleString();return t}}};var i=(0,e(83744).Z)(d,[["render",function(t,a,e,n,d,i){const l=(0,s.up)("a-table"),o=(0,s.up)("a-card");return(0,s.wg)(),(0,s.j4)(o,{class:"card nopd",title:t.$t("Status"),loading:d.loading},{default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s.Wm)(l,{columns:i.dataColumns,"data-source":d.list},null,8,["columns","data-source"])])])),_:1},8,["title","loading"])}],["__scopeId","data-v-1d5ee6b5"]])}}]);