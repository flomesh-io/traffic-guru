"use strict";(self.webpackChunkflomesh_load_balancer=self.webpackChunkflomesh_load_balancer||[]).push([[9530],{89530:function(t,n,e){e.r(n),e.d(n,{default:function(){return g}});e(74916),e(64765),e(92222),e(68309);var a=e(66252),i=e(3577),r=["onClick"],u={key:0},l=["onClick"],o={class:"list-content"},c={class:"list-content-item"},s={class:"list-content-item"},p={key:0},d={key:1};e(57658);var f=e(2692),m=e(99684),w=e(65421),h={name:"AlarmList",i18n:e(89234),components:{MoreOutlined:f.Z,PlusCircleTwoTone:m.Z,WarningOutlined:w.Z},data:function(){return{key:"",pageSize:10,pageNo:1,total:0,loading:!0,list:[]}},computed:{start:function(){return(this.pageNo-1)*this.pageSize}},created:function(){this.search()},methods:{remove:function(t){var n=this;this.$gql.mutation("deleteAlarm(id:".concat(t,"){data{id}}")).then((function(){n.$message.success(n.$t("Deleted successfully"),3),n.search()}))},newLb:function(){this.$router.push({path:"/ops-center/alarm/create"})},detail:function(t){this.$router.push({path:"/ops-center/alarm/detail/"+t})},search:function(t,n){var e=this;t&&(this.pageNo=t,this.pageSize=n),this.loading=!0;var a={name:{contains:this.key}};this.$gql.query("alarms(filters: $filters, pagination:{start: ".concat(this.start,", limit: ").concat(this.pageSize,"}){\n\t\t\t\t\t\tdata{id,attributes{\n\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\tcontent,\n\t\t\t\t\t\t\tscope,\n\t\t\t\t\t\t\tchannels,\n\t\t\t\t\t\t\tusers{data{id,attributes{\n\t\t\t\t\t\t\t\tusername,\n\t\t\t\t\t\t\t\tphone,\n\t\t\t\t\t\t\t\temail,\n\t\t\t\t\t\t\t\ttype,\n\t\t\t\t\t\t\t\trole{data{id,attributes{\n\t\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\t\ttype\n\t\t\t\t\t\t\t\t}}}\n\t\t\t\t\t\t\t}}},\n\t\t\t\t\t\t\tserviceTargets{data{id,attributes{name}}},\n\t\t\t\t\t\t\tapiTargets{data{id,attributes{name}}},\n\t\t\t\t\t\t}},\n\t\t\t\t\t\tmeta{pagination{total}}\n\t\t\t\t\t}"),{filters:a},{filters:"AlarmFiltersInput"}).then((function(t){e.list=t.data,e.total=t.pagination.total,e.loading=!1}))}}};var g=(0,e(83744).Z)(h,[["render",function(t,n,e,f,m,w){var h=(0,a.up)("a-input-search"),g=(0,a.up)("a-divider"),_=(0,a.up)("PlusCircleTwoTone"),k=(0,a.up)("a-button"),v=(0,a.up)("WarningOutlined"),z=(0,a.up)("a-list-item-meta"),y=(0,a.up)("a-menu-item"),$=(0,a.up)("a-popconfirm"),W=(0,a.up)("a-menu"),C=(0,a.up)("MoreOutlined"),b=(0,a.up)("a-dropdown"),D=(0,a.up)("a-tag"),S=(0,a.up)("a-list-item"),T=(0,a.up)("a-list"),A=(0,a.up)("a-card");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(A,{bordered:!1,title:t.$t("Alarm"),loading:m.loading},{extra:(0,a.w5)((function(){return[(0,a._)("div",null,[(0,a.Wm)(h,{value:m.key,"onUpdate:value":n[0]||(n[0]=function(t){return m.key=t}),onSearch:n[1]||(n[1]=function(t){return w.search()}),class:"right-search-input",placeholder:t.$t("search")},null,8,["value","placeholder"]),(0,a.Wm)(g,{type:"vertical"}),(0,a.Wm)(k,{type:"link",shape:"circle",onClick:w.newLb},{icon:(0,a.w5)((function(){return[(0,a.Wm)(_,{class:"font-20 icon-menu-sm rotate-icon"})]})),_:1},8,["onClick"])])]})),default:(0,a.w5)((function(){return[(0,a.Wm)(T,{size:"large",pagination:{showSizeChanger:!0,showQuickJumper:!1,onShowSizeChange:w.search,onChange:w.search,current:m.pageNo,pageSize:m.pageSize,showTotal:function(n,e){return"".concat(t.$t("Total")," ").concat(n)},total:m.total}},{default:(0,a.w5)((function(){return[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(m.list,(function(n,e){return(0,a.wg)(),(0,a.j4)(S,{key:e},{actions:(0,a.w5)((function(){return[(0,a._)("div",null,[(0,a.Wm)(b,null,{overlay:(0,a.w5)((function(){return[(0,a.Wm)(W,null,{default:(0,a.w5)((function(){return[(0,a.Wm)(y,null,{default:(0,a.w5)((function(){return[(0,a._)("a",{onClick:function(t){return w.detail(n.id)}},(0,i.zw)(t.$t("edit")),9,l)]})),_:2},1024),(0,a.Wm)(y,null,{default:(0,a.w5)((function(){return[(0,a.Wm)($,{placement:"topLeft","ok-text":t.$t("Yes"),"cancel-text":t.$t("No"),onConfirm:function(t){return w.remove(n.id)}},{title:(0,a.w5)((function(){return[(0,a._)("p",null,(0,i.zw)(t.$t("Tip")),1),(0,a._)("p",null,(0,i.zw)(t.$t("Are you sure to delete this?")),1)]})),default:(0,a.w5)((function(){return[(0,a._)("a",null,(0,i.zw)(t.$t("delete")),1)]})),_:2},1032,["ok-text","cancel-text","onConfirm"])]})),_:2},1024)]})),_:2},1024)]})),default:(0,a.w5)((function(){return[(0,a._)("a",null,[(0,a.Wm)(C)])]})),_:2},1024)])]})),default:(0,a.w5)((function(){return[(0,a.Wm)(z,null,{avatar:(0,a.w5)((function(){return[(0,a.Wm)(v,{class:"WarningOutlined"})]})),title:(0,a.w5)((function(){return[(0,a._)("a",{onClick:function(t){return w.detail(n.id)}},(0,i.zw)(n.name?n.name:"Unnamed"),9,r)]})),description:(0,a.w5)((function(){return[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.content.rules,(function(t,n){return(0,a.wg)(),(0,a.iD)("span",{key:n},[n>0?((0,a.wg)(),(0,a.iD)("span",u,"/")):(0,a.kq)("",!0),(0,a.Uk)(" "+(0,i.zw)(t.col)+" "+(0,i.zw)(t.opt)+" "+(0,i.zw)(t.value),1)])})),128))]})),_:2},1024),(0,a._)("div",o,[(0,a._)("div",c,[(0,a._)("span",null,(0,i.zw)(t.$t("Channels")),1),(0,a._)("p",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.channels,(function(n,e){return(0,a.wg)(),(0,a.j4)(D,{key:e},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,i.zw)(t.$t(n+" notify")),1)]})),_:2},1024)})),128))])]),(0,a._)("div",s,[(0,a._)("span",null,(0,i.zw)({global:t.$t("Global monitor"),service:t.$t("Service monitor"),api:t.$t("Api monitor")}[n.scope]),1),"service"==n.scope?((0,a.wg)(),(0,a.iD)("p",p,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.serviceTargets,(function(t,n){return(0,a.wg)(),(0,a.j4)(D,{key:n},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,i.zw)(t.name),1)]})),_:2},1024)})),128))])):"api"==n.scope?((0,a.wg)(),(0,a.iD)("p",d,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.apiTargets,(function(t,n){return(0,a.wg)(),(0,a.j4)(D,{key:n},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,i.zw)(t.name),1)]})),_:2},1024)})),128))])):(0,a.kq)("",!0)])])]})),_:2},1024)})),128))]})),_:1},8,["pagination"])]})),_:1},8,["title","loading"])])}],["__scopeId","data-v-32497562"]])}}]);