"use strict";(self.webpackChunkflomesh_load_balancer=self.webpackChunkflomesh_load_balancer||[]).push([[750],{1299:function(e,t,a){a.d(t,{Z:function(){return r}});var s=a(66252),i=a(3577);const l={key:0,class:"title"};var n={name:"DetailList",props:{title:{type:String,required:!1,default:""},col:{type:Number,required:!1,default:3},size:{type:String,required:!1,default:"large"},layout:{type:String,required:!1,default:"horizontal"}}};var r=(0,a(83744).Z)(n,[["render",function(e,t,a,n,r,d){const o=(0,s.up)("a-row");return(0,s.wg)(),(0,s.iD)("div",{class:(0,i.C_)(["detail-list","small"===a.size?"small":"large","vertical"===a.layout?"vertical":"horizontal"]),style:(0,i.j5)("flex-"+a.col)},[a.title?((0,s.wg)(),(0,s.iD)("div",l,(0,i.zw)(a.title),1)):(0,s.kq)("",!0),(0,s.Wm)(o,null,{default:(0,s.w5)((()=>[(0,s.WI)(e.$slots,"default")])),_:3})],6)}]])},13589:function(e,t,a){a.d(t,{Z:function(){return d}});var s=a(66252),i=a(3577);const l={class:"detail-content"};const n={1:{xs:24},2:{xs:24,sm:12},3:{xs:24,sm:12,md:8},4:{xs:24,sm:12,md:6}};var r={name:"DetailListItem",i18n:a(39945),props:{name:{type:String,required:!1,default:""},rules:{type:Array,required:!1,default(){return[]}},term:{type:String,required:!1,default:""},termTop:{type:Boolean}},data(){return{col:2,responsive:n}},computed:{getRules(){return this.rules.map((e=>(e.message=this.$t(e.message),e))),this.rules}},created(){this.$parent&&this.$parent.$parent&&this.$parent.$parent.col>0&&(this.col=this.$parent.$parent.col)},methods:{}};var d=(0,a(83744).Z)(r,[["render",function(e,t,a,n,r,d){const o=(0,s.up)("a-form-item"),c=(0,s.up)("a-col");return(0,s.wg)(),(0,s.j4)(c,(0,s.dG)({class:"detail-list-content flex"},r.responsive[r.col]),{default:(0,s.w5)((()=>[(0,s._)("div",{class:(0,i.C_)(a.termTop?"term top":"term")},(0,i.zw)(a.term),3),(0,s._)("div",l,[a.rules?((0,s.wg)(),(0,s.j4)(o,{key:0,name:a.name,rules:d.getRules},{default:(0,s.w5)((()=>[(0,s.WI)(e.$slots,"default")])),_:3},8,["name","rules"])):(0,s.WI)(e.$slots,"default",{key:1})])])),_:3},16)}]])},70927:function(e,t,a){a.r(t),a.d(t,{default:function(){return u}});var s=a(66252),i=a(3577),l=a(87932);const n=(0,s._)("img",{src:l,style:{width:"200px"}},null,-1);a(57658);var r=a(93327),d=a(33907),o=a(13554),c={name:"RegistryDetail",i18n:a(89234),components:{ServiceList:o.Z,RegistryBaseDetail:r.Z},data(){return{selectedKeys:[],selectedNS:[],namespaces:[],detail:{organization:null,type:"k8s",name:"",content:{domain:"",credit:"",autoUpstream:!1,autoApplication:!1,isGateway:!0,gatewayPath:"",gatewayPort:0},address:""},types:[{name:"k8s"}],orgs:[],pjsConfig:"",pid:"",json:'{ "":"" }',config:"",noTitleKey:""}},computed:{...(0,d.rn)("setting",["isMobile"]),namespaceTabs(){let e=[];return this.namespaces.forEach((t=>{e.push({key:t.id,tab:t.name,services:t.services.length})})),e}},created(){this.pid=this.$route.params.id||""},methods:{enabledChange(e){this.$gql.mutation(`updateServiceSync(id: ${e.id}, data: $data){data{id}}`,{data:{deleted:!e.enabled}},{data:"ServiceInput!"}).then((()=>{this.$message.success(this.$t("Save successfully"),3)}))},getDetail(e){this.detail=e.detail,this.namespaces=e.namespaces,this.selectedKeys=e.selectedKeys,this.selectedNS=e.selectedNS||[]},selectNS(e){this.selectedNS={services:[]},this.detail.namespaces.forEach((t=>{t.id==e&&(this.selectedNS=t)}))},handleChange(){}}};var u=(0,a(83744).Z)(c,[["render",function(e,t,a,l,r,d){const o=(0,s.up)("a-result"),c=(0,s.up)("a-select-option"),u=(0,s.up)("a-select"),p=(0,s.up)("a-button"),m=(0,s.up)("ServiceList"),g=(0,s.up)("a-col"),h=(0,s.up)("a-row"),y=(0,s.up)("a-tab-pane"),f=(0,s.up)("a-tabs"),w=(0,s.up)("RegistryBaseDetail");return(0,s.wg)(),(0,s.j4)(w,{ref:"RegistryBaseDetail",pid:r.pid,types:r.types,onGetDetail:d.getDetail},{tabs:(0,s.w5)((()=>[(0,s.Wm)(f,{type:"card",onChange:e.cardchange},{default:(0,s.w5)((()=>[(0,s.Wm)(y,{key:"1",tab:e.$t("Namespace")},{default:(0,s.w5)((()=>[""==r.pid?((0,s.wg)(),(0,s.j4)(o,{key:0,"sub-title":e.$t("Please save the registration certificate first")},{icon:(0,s.w5)((()=>[n])),_:1},8,["sub-title"])):(0,s.kq)("",!0),""!=r.pid?((0,s.wg)(),(0,s.j4)(h,{key:1,class:"row-mg"},{default:(0,s.w5)((()=>[(0,s.Wm)(g,{class:"col-pd",xl:24,lg:24,md:24,sm:24,xs:24},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{mode:"registry","embed-services":r.selectedNS.services,"tab-list":d.namespaceTabs,tabKey:r.selectedKeys,"onUpdate:tabKey":t[1]||(t[1]=e=>r.selectedKeys=e),embed:!0,metric:!1,"has-search":!1,onNsChange:d.selectNS,onEnabledChange:d.enabledChange},(0,s.Nv)({organization:(0,s.w5)((({item:t})=>[t.organization?((0,s.wg)(),(0,s.j4)(u,{key:0,placeholder:e.$t("unset"),value:t.organization.id,"onUpdate:value":e=>t.organization.id=e,onChange:a=>e.assignOrganizationByItem(t.id,t.organization.id),class:"width-180",ref:"select"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.orgs,((e,t)=>((0,s.wg)(),(0,s.j4)(c,{value:e.id,key:t},{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(e.name),1)])),_:2},1032,["value"])))),128))])),_:2},1032,["placeholder","value","onUpdate:value","onChange"])):(0,s.kq)("",!0)])),_:2},[e.$isPro?{name:"extra",fn:(0,s.w5)((()=>[(0,s.Wm)(u,{placeholder:e.$t("unset"),value:r.selectedNS.organizationId,"onUpdate:value":t[0]||(t[0]=e=>r.selectedNS.organizationId=e),class:"width-180",ref:"select"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.orgs,((e,t)=>((0,s.wg)(),(0,s.j4)(c,{value:e.id,key:t},{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(e.name),1)])),_:2},1032,["value"])))),128))])),_:1},8,["placeholder","value"]),(0,s.Wm)(p,{class:"ml-10",type:"primary",onClick:e.assignOrganization},{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(e.$t("Assign Organization")),1)])),_:1},8,["onClick"])])),key:"0"}:void 0]),1032,["embed-services","tab-list","tabKey","onNsChange","onEnabledChange"])])),_:1})])),_:1})):(0,s.kq)("",!0)])),_:1},8,["tab"])])),_:1},8,["onChange"])])),_:1},8,["pid","types","onGetDetail"])}]])}}]);