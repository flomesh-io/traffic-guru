"use strict";(self.webpackChunkflomesh_load_balancer=self.webpackChunkflomesh_load_balancer||[]).push([[2021],{33601:function(t,e,a){a.d(e,{Z:function(){return l}});var n=a(66252),s={icon:function(t,e){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z",fill:t}},{tag:"path",attrs:{d:"M372.5 256H184v512h656V370.4H492.1z",fill:e}}]}},name:"folder",theme:"twotone"},o=a(33058);function d(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?Object(arguments[e]):{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})))),n.forEach((function(e){r(t,e,a[e])}))}return t}function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var i=function(t,e){var a=d({},t,e.attrs);return(0,n.Wm)(o.Z,d({},a,{icon:s}),null)};i.displayName="FolderTwoTone",i.inheritAttrs=!1;var l=i},47556:function(t,e,a){a.d(e,{Bl:function(){return d},Cb:function(){return S},DB:function(){return b},Gm:function(){return l},IJ:function(){return g},MZ:function(){return T},O7:function(){return u},Ru:function(){return y},Tf:function(){return _},US:function(){return E},ZC:function(){return i},eb:function(){return O},k5:function(){return r},l1:function(){return h},lr:function(){return o},q8:function(){return s},qF:function(){return f},sl:function(){return v},ud:function(){return p},vC:function(){return c},zN:function(){return m}});var n=a(6199);const s="system.common.ORGANIZATION_TOTAL,system.common.PROJECT_TOTAL,system.common.Space,system.common.Space,workload.dashboard.DEPLOYMENT,workload.dashboard.STATEFULSET,workload.dashboard.JOB,workload.dashboard.POD",o="flb.dashboard.TOTAL,flb.dashboard.ADDRESSPOOL,flb.dashboard.BYTES,flb.dashboard.PROCESS_MEMORY,flb.dashboard.CONNECTIONS,flb.dashboard.INACT_CONNECTIONS,flb.dashboard.FAIL_CONNECTIONS,flb.dashboard.TIME_WAIT,flb.dashboard.FREE_CPU,flb.dashboard.PROCESS_CPU,flb.dashboard.FULL_CONN_OVERFLOW_ERROR,flb.dashboard.HALF_CONN_OVERFLOW_ERROR,flb.dashboard.UNHEALTHY_UPSTREAM,flb.dashboard.RANKING,flb.dashboard.SANKEY",d="fsm.dashboard.REGISTRY_TOTAL,fsm.dashboard.NAMESPACE_TOTAL,fsm.dashboard.SERVICE_TOTAL,system.common.Space,fsm.dashboard.SERVICE_HEALTHCHECK,fsm.dashboard.SERVICE_STATUS,fsm.dashboard.INGRESS_STATUS,fsm.dashboard.MCS_TOPOLOGY",r="fsm.dashboard.NAMESPACE_MESH_TOTAL,fsm.dashboard.SERVICE_MESH_TOTAL,system.common.Space,system.common.Space,system.common.TPS_MESH,system.common.ERROR_RATE_MESH,system.common.LATENCY_MESH,workload.dashboard.POD,fsm.dashboard.TOPOLOGY",i="fsm.dashboard.TPS_ERROR,fsm.dashboard.BPS,fsm.dashboard.LATENCY,fsm.dashboard.LOAD_STATUS,fsm.dashboard.TOPOLOGY,fsm.dashboard.QOS",l="workload.dashboard.CRONJOB,workload.dashboard.DAEMONSET,workload.dashboard.DEPLOYMENT,workload.dashboard.JOB,workload.dashboard.POD,workload.dashboard.REPLICASET,workload.dashboard.REPLICATIONCONTROLLER,workload.dashboard.STATEFULSET",c="openapi.dashboard.API_TOTAL,openapi.dashboard.APP_TOTAL,system.common.ORGANIZATION_TOTAL,system.common.PROJECT_TOTAL,system.common.LATENCY,system.common.USER_AGENT,system.common.QPS,system.common.ERROR_RATE,openapi.dashboard.API_STATUS,openapi.dashboard.API_METRIC_WEEK,openapi.dashboard.API_METRIC_MONTH,system.common.Space,system.common.RANKING",u="openapi.dashboard.API_TOTAL,openapi.dashboard.APP_TOTAL,system.common.Space,system.common.Space,fsm.dashboard.QOS,fsm.dashboard.LATENCY,fsm.dashboard.LOAD_STATUS,fsm.dashboard.TPS_ERROR,fsm.dashboard.BPS,openapi.dashboard.API_STATUS,openapi.dashboard.API_METRIC_WEEK,openapi.dashboard.API_METRIC_MONTH",m="fsm.dashboard.TPS_ERROR,fsm.dashboard.BPS,fsm.dashboard.LATENCY,fsm.dashboard.LOAD_STATUS,openapi.dashboard.TOPOLOGY,fsm.dashboard.QOS,openapi.dashboard.API_METRIC_WEEK,openapi.dashboard.API_METRIC_MONTH";async function h(t){return(0,n.IO)(`dashboard(id:${t}){data{id,attributes{name,content,apply}}}`)}async function p(t){return(0,n.IO)(`dashboards(filters:{apply:{eq:"${t}"}}){data{id,attributes{name,content,apply}}}`)}async function f(t,e){let a={},s="";return e.subscribes&&(s=e.subscribes.join(","),a.content={widget:s}),e.name&&e.name.length>0&&(a.name=e.name),null!=e.apply&&(a.apply=e.apply),(0,n.QF)(`updateDashboard(id:${t}, data: $data){data{id}}`,{data:a},{data:"DashboardInput!"})}async function b(t){let e={};return null!=t.widget&&(e.content={widget:t.widget}),t.name&&t.name.length>0&&(e.name=t.name),null!=t.apply&&(e.apply=t.apply),(0,n.QF)("createDashboard(data: $data){data{id}}",{data:e},{data:"DashboardInput!"})}async function T(t){const e={content:t,name:t.id,shared:0};return(0,n.QF)("createWidget(data: $data){data{id}}",{data:e},{data:"WidgetInput!"})}async function g(t,e){delete e.uid;const a={content:e,name:e.id};return(0,n.QF)(`updateWidget(id:${t}, data: $data){data{id}}`,{data:a},{data:"WidgetInput!"})}async function O(t){return(0,n.QF)(`deleteWidget(id:${t}){data{id}}`)}async function E(){return(0,n.IO)("widgets{data{id,attributes{name,shared,user_id,content}}}")}async function S(t){return(0,n.IO)(`widget(id:${t}){data{id,attributes{name,shared,user_id,content}}}`)}const _={id:"TEST-CUSTOM",title:"A Sample",tag:{name:"Gauge"},service:{type:"rest",path:"hk.flomesh.cn:8090/kube-dashboard/?url=%2Fapi%2Fv1%2Fjob%2Fdefault%3FitemsPerPage%3D0%26page%3D1%26sortBy%3Dd%2CcreationTimestamp",method:"GET",payload:"{}",clickhouseSQL:"",prometheusSQL:""},col:6,data:"res => {\n\tlet _data = res.data;\n\tfunction getPercentage(current,status){\n\t\tlet per = (status.running+status.succeeded+status.failed);\n\t\treturn per ==0 ?0 :Math.round(current*100/per);\n\t}\n\treturn {\n\t\tid:'WP-CUSTOM',\n\t\tvals:[\n\t\t\tgetPercentage(_data.status.running,_data.status),\n\t\t\tgetPercentage(_data.status.succeeded,_data.status),\n\t\t\tgetPercentage(_data.status.failed,_data.status)\n\t\t]\n\t}\n}"},y={id:"CLICKHOUSE-TEST-CUSTOM",title:"A Clickhouse Datasource Sample",tag:{name:"MiniSector"},service:{type:"clickhouse",path:"",method:"GET",payload:"{}",clickhouseSQL:"select count() as count,res.status from log where res.status>'0' group by res.status order by res.status",prometheusSQL:""},col:6,data:"res => {\n\tlet dv = [];\n\tres.map((item) => {\n\t\t\tdv.push({type:item[1],value:item[0],name:item[1]});\n\t});\n\treturn {\n\t\tcolors:['#8bd4a1','#fac858','#fb9690'],\n\t\tdv:dv\n\t}\n}"},v={id:"PROMETHEUS-TEST-CUSTOM",title:"A Prometheus Datasource Sample",tag:{name:"MiniArea"},service:{type:"prometheus",path:"",method:"GET",payload:"{}",clickhouseSQL:"",prometheusSQL:"sum(pipy_chunk_size)"},col:6,data:"res => {\n\tlet dv = [];\n\tif(res.data?.result){\n\t\tres.data.result.forEach((result,i) => {\n\t\t\tresult.values.forEach((value,j) => {\n\t\t\t\tif(value[1]){\n\t\t\t\t\tdv.push({\n\t\t\t\t\t\ttype:'item'+i,\n\t\t\t\t\t\tvalue:(value[1]*1).toFixed(2),\n\t\t\t\t\t\tdate:new Date(value[0]*1000).toISOString().split('.')[0].replace('T',' ')\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n\t\t})\n\t}\n\treturn {\n\t\tid: 'Test-Prometheus-MiniArea',\n\t\tcolors: ['#8bd4a1', '#fb9690'],\n\t\theight: 240,\n\t\tpadding: [0, 0, 0, 0],\n\t\taxis: false,\n\t\tunit: 'unitge',\n\t\tshowy: false,\n\t\tdv\n\t}\n}"}},34531:function(t,e,a){a.d(e,{Z:function(){return f}});var n=a(66252),s=a(3577);const o={key:0,class:"flex pd-10"},d={key:0,class:"flex-item"},r={class:"flex-item"},i={class:"pl-10"},l=["xlink:href"],c={class:"card-selector-title"};var u=a(85263),m=a(75255),h=a(60459),p={name:"CardSelector",components:{CheckOutlined:m.Z,EnvSelector:h.Z},props:["loading","envFilter","search","options","icon","placement","disabled","value","getTag","svg","col","width","multiple"],emits:["envChange","select"],data(){return{simpleImage:u.Z.PRESENTED_IMAGE_SIMPLE,visible:!1,key:""}},i18n:a(89234),computed:{multipleSelectNum(){let t=0;return this.options.forEach((e=>{e.checked&&t++})),t},filterOptions(){if(this.key){let t=this.options.filter((t=>(t.name||t.username||"").indexOf(this.key)>=0));return t.map((t=>{null==t.checked&&(t.checked=!1)})),t}{let t=this.options;return t.map((t=>{null==t.checked&&(t.checked=!1)})),t}}},watch:{value:{handler(){this.multiple&&this.options.forEach((t=>{t.checked=!!this.value.find((e=>t.id==e.id))}))},deep:!0}},methods:{envChange(t){this.$emit("envChange",t)},multipleSelect(){this.visible=!1;let t=this.options.filter((t=>t.checked));this.$emit("select",t),this.$emit("update:value",t)},select(t){this.multiple?this.options.forEach((e=>{e.id==t.id&&(e.checked=!e.checked)})):(this.visible=!1,this.$emit("update:value",t.id),this.$emit("select",t))}}};var f=(0,a(83744).Z)(p,[["render",function(t,e,a,u,m,h){const p=(0,n.up)("EnvSelector"),f=(0,n.up)("a-input-search"),b=(0,n.up)("a-button"),T=(0,n.up)("a-empty"),g=(0,n.up)("a-skeleton"),O=(0,n.up)("a-card-grid"),E=(0,n.up)("a-card"),S=(0,n.up)("CheckOutlined"),_=(0,n.up)("a-tag"),y=(0,n.up)("a-popover");return(0,n.wg)(),(0,n.j4)(y,{placement:a.placement||"bottom","overlay-class-name":"selector-popover",visible:m.visible,"onUpdate:visible":e[1]||(e[1]=t=>m.visible=t),trigger:"click"},{content:(0,n.w5)((()=>[a.search?((0,n.wg)(),(0,n.iD)("div",o,[a.envFilter?((0,n.wg)(),(0,n.iD)("div",d,[(0,n.Wm)(p,{"no-all":!0,"is-filter":!0,onEnvChange:h.envChange},null,8,["onEnvChange"])])):(0,n.kq)("",!0),(0,n._)("div",r,[(0,n.Wm)(f,{value:m.key,"onUpdate:value":e[0]||(e[0]=t=>m.key=t),class:"full",placeholder:t.$t("search")},null,8,["value","placeholder"])]),(0,n._)("div",i,[a.multiple?((0,n.wg)(),(0,n.j4)(b,{key:0,type:"primary",onClick:h.multipleSelect,disabled:0==h.multipleSelectNum},{default:(0,n.w5)((()=>[(0,n.Uk)((0,s.zw)(t.$t("Ok")),1)])),_:1},8,["onClick","disabled"])):(0,n.kq)("",!0)])])):(0,n.kq)("",!0),a.loading||0!=h.filterOptions.length?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(T,{key:1,image:m.simpleImage},null,8,["image"])),(0,n._)("div",{class:"overflow-auto scrollbar",style:(0,s.j5)("max-height:"+90*(t.rows||5)+"px")},[a.loading?((0,n.wg)(),(0,n.j4)(E,{key:0,class:"grid-menu",style:(0,s.j5)("width: "+(a.width?a.width:300)+"px")},{default:(0,n.w5)((()=>[(0,n.Wm)(O,{class:"selector-item",style:{width:"100%",padding:"15px"}},{default:(0,n.w5)((()=>[(0,n.Wm)(g,{avatar:"",paragraph:{rows:2}})])),_:1})])),_:1},8,["style"])):((0,n.wg)(),(0,n.j4)(E,{key:1,class:"grid-menu",style:(0,s.j5)("width: "+(a.width?a.width:300)+"px")},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(h.filterOptions,((t,e)=>((0,n.wg)(),(0,n.j4)(O,{class:(0,s.C_)(["selector-item",(a.value==t.id?"selected":"")+(a.disabled&&a.disabled(t)?" disabled":"")]),key:e,value:t.id,style:(0,s.j5)(a.col?"width:"+100/a.col+"%":a.options.length>=3?"width: 33%;":2==a.options.length?"width:50%;":"width:100%;"),onClick:e=>h.select(t)},{default:(0,n.w5)((()=>[t.checked?((0,n.wg)(),(0,n.j4)(S,{key:0,class:"CheckOutlined"})):(0,n.kq)("",!0),(0,n._)("div",{class:(0,s.C_)(a.getTag?"mt-15":"")},[a.icon?((0,n.wg)(),(0,n.j4)((0,n.LL)(a.icon),{key:0,"two-tone-color":"#00adef"})):a.svg?((0,n.wg)(),(0,n.iD)("svg",{key:1,class:(0,s.C_)([a.getTag?"mt-20":"","card-avatar icon"]),"aria-hidden":"true"},[(0,n._)("use",{"xlink:href":a.svg},null,8,l)],2)):(0,n.kq)("",!0),(0,n._)("div",c,(0,s.zw)(t.name||t.username),1)],2),a.getTag&&a.getTag(t)?((0,n.wg)(),(0,n.j4)(_,{key:1,class:"ribbon",color:"#f5f5f5"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,s.zw)(a.getTag(t)),1)])),_:2},1024)):(0,n.kq)("",!0)])),_:2},1032,["class","value","style","onClick"])))),128))])),_:1},8,["style"]))],4)])),default:(0,n.w5)((()=>[(0,n.WI)(t.$slots,"default",{},void 0,!0)])),_:3},8,["placement","visible"])}],["__scopeId","data-v-30bb0bbf"]])},90806:function(t,e,a){a.r(e),a.d(e,{default:function(){return r}});var n=a(66252);var s=a(47556),o=a(87484),d={name:"ProjectDetail",components:{UsersResults:a(38189).Z,ProjectBaseDetail:o.Z},i18n:a(89234),data(){return{DEFAULT_PROJECT:s.O7,activeKey:"1",pid:"",detail:{users:[],id:"",name:"",organization:null},loading:!0}},computed:{},created(){this.pid=this.$route.params.id||""},methods:{remove(t,e,a){this.$refs.projectBase.delProjectUser(a.id)},setting(t,e,a){this.$refs.projectBase.showProjectRole(a)},getDetail(t){this.detail=t.detail,this.loading=t.loading}}};var r=(0,a(83744).Z)(d,[["render",function(t,e,a,s,o,d){const r=(0,n.up)("UsersResults"),i=(0,n.up)("a-tab-pane"),l=(0,n.up)("a-tabs"),c=(0,n.up)("ProjectBaseDetail");return(0,n.wg)(),(0,n.j4)(c,{pid:o.pid,"onUpdate:pid":e[1]||(e[1]=t=>o.pid=t),onGetDetail:d.getDetail},{tabs:(0,n.w5)((()=>[(0,n.Wm)(l,{type:"card",activeKey:o.activeKey,"onUpdate:activeKey":e[0]||(e[0]=t=>o.activeKey=t)},{default:(0,n.w5)((()=>[(0,n.Wm)(i,{key:"1",tab:t.$t("Project members")},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{loading:o.loading,actions:[{icon:"EditOutlined",text:t.$t("Set Project Role"),call:d.setting,permission:[o.detail.organization?"project:update:organization:"+o.detail.organization:"project:update"]},{icon:"CloseOutlined",hide:!0,text:t.$t("Remove"),call:d.remove,permission:[o.detail.organization?"project:update:organization:"+o.detail.organization:"project:update"]}],users:o.detail.users},null,8,["loading","actions","users"])])),_:1},8,["tab"])])),_:1},8,["activeKey"])])),_:1},8,["pid","onGetDetail"])}]])}}]);