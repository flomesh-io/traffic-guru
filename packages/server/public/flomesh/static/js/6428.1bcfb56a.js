"use strict";(self.webpackChunkflomesh_load_balancer=self.webpackChunkflomesh_load_balancer||[]).push([[6428],{16428:function(t,e,a){a.r(e),a.d(e,{default:function(){return _}});var n=a(66252),i=a(3577);const l=["onClick"],o=["onClick"],s={class:"list-content"},r={class:"list-content-item"},u={class:"list-content-item"};a(57658);var d=a(2692),c=a(99684),p={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 289.1a362.49 362.49 0 00-79.9-115.7 370.83 370.83 0 00-118.2-77.8C610.7 76.6 562.1 67 512 67c-50.1 0-98.7 9.6-144.5 28.5-44.3 18.3-84 44.5-118.2 77.8A363.6 363.6 0 00169.4 289c-19.5 45-29.4 92.8-29.4 142 0 70.6 16.9 140.9 50.1 208.7 26.7 54.5 64 107.6 111 158.1 80.3 86.2 164.5 138.9 188.4 153a43.9 43.9 0 0022.4 6.1c7.8 0 15.5-2 22.4-6.1 23.9-14.1 108.1-66.8 188.4-153 47-50.4 84.3-103.6 111-158.1C867.1 572 884 501.8 884 431.1c0-49.2-9.9-97-29.4-142zM512 880.2c-65.9-41.9-300-207.8-300-449.1 0-77.9 31.1-151.1 87.6-206.3C356.3 169.5 431.7 139 512 139s155.7 30.5 212.4 85.9C780.9 280 812 353.2 812 431.1c0 241.3-234.1 407.2-300 449.1zm0-617.2c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm79.2 255.2A111.6 111.6 0 01512 551c-29.9 0-58-11.7-79.2-32.8A111.6 111.6 0 01400 439c0-29.9 11.7-58 32.8-79.2C454 338.6 482.1 327 512 327c29.9 0 58 11.6 79.2 32.8C612.4 381 624 409.1 624 439c0 29.9-11.6 58-32.8 79.2z"}}]},name:"environment",theme:"outlined"},h=a(33058);function m(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?Object(arguments[e]):{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})))),n.forEach((function(e){w(t,e,a[e])}))}return t}function w(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var f=function(t,e){var a=m({},t,e.attrs);return(0,n.Wm)(h.Z,m({},a,{icon:p}),null)};f.displayName="EnvironmentOutlined",f.inheritAttrs=!1;var g=f,v={name:"List",i18n:a(89234),components:{MoreOutlined:d.Z,PlusCircleTwoTone:c.Z,EnvironmentOutlined:g},data(){return{key:"",loading:!1,pools:[],pageSize:10,pageNo:1,total:0}},computed:{start(){return(this.pageNo-1)*this.pageSize}},created(){this.search()},methods:{remove(t){this.$gql.mutation(`deleteAddressPool(id:${t}){data{id,attributes{name, organization{data{id}}}}}`).then((()=>{this.$message.success(this.$t("Deleted successfully"),3),this.search()}))},detail(t){this.$router.push({path:"/flb/address/detail/"+t})},newPool(){this.$router.push({path:"/flb/address/create"})},search(t,e){t&&(this.pageNo=t,this.pageSize=e),this.loading=!0;let a={name:{contains:this.key}};this.$gql.query(`myAddressPools(filters: $filters, pagination:{start: ${this.start}, limit: ${this.pageSize}}){\n\t\t\t\t\t\tdata{id,attributes{name,content,total, addresses{data{id,attributes{ip}}}}},\n\t\t\t\t\t\tmeta{pagination{total}}\n\t\t\t\t\t}`,{filters:a},{filters:"AddressPoolFiltersInput"}).then((t=>{for(const e of t.data){const t=new Map,a=e.addresses.filter((e=>!t.has(e.ip)&&t.set(e.ip,1)));e.addressesCount=a.length}this.pools=t.data,this.total=t.pagination.total,this.loading=!1}))}}};var _=(0,a(83744).Z)(v,[["render",function(t,e,a,d,c,p){const h=(0,n.up)("a-input-search"),m=(0,n.up)("a-divider"),w=(0,n.up)("PlusCircleTwoTone"),f=(0,n.up)("a-button"),g=(0,n.up)("EnvironmentOutlined"),v=(0,n.up)("a-list-item-meta"),_=(0,n.up)("a-menu-item"),b=(0,n.up)("a-popconfirm"),y=(0,n.up)("a-menu"),C=(0,n.up)("MoreOutlined"),z=(0,n.up)("a-dropdown"),$=(0,n.up)("a-list-item"),k=(0,n.up)("a-list"),O=(0,n.up)("a-card"),W=(0,n.Q2)("permission");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(O,{bordered:!1,title:t.$t("addressPool")+t.$t("list"),loading:c.loading},{extra:(0,n.w5)((()=>[(0,n._)("div",null,[(0,n.Wm)(h,{value:c.key,"onUpdate:value":e[0]||(e[0]=t=>c.key=t),class:"right-search-input",onSearch:e[1]||(e[1]=t=>p.search()),placeholder:t.$t("search")},null,8,["value","placeholder"]),(0,n.Wm)(m,{type:"vertical"}),(0,n.wy)(((0,n.wg)(),(0,n.j4)(f,{type:"link",shape:"circle",onClick:p.newPool},{icon:(0,n.w5)((()=>[(0,n.Wm)(w,{class:"font-20 icon-menu-sm rotate-icon"})])),_:1},8,["onClick"])),[[W,["address-pool:create"]]])])])),default:(0,n.w5)((()=>[(0,n.Wm)(k,{size:"large",pagination:{showSizeChanger:!0,showQuickJumper:!1,onShowSizeChange:p.search,onChange:p.search,current:c.pageNo,pageSize:c.pageSize,showTotal:(e,a)=>`${t.$t("Total")} ${e}`,total:c.total}},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(c.pools,((e,a)=>((0,n.wg)(),(0,n.j4)($,{key:a},{actions:(0,n.w5)((()=>[(0,n._)("div",null,[(0,n.Wm)(z,null,{overlay:(0,n.w5)((()=>[(0,n.Wm)(y,null,{default:(0,n.w5)((()=>[(0,n.Wm)(_,null,{default:(0,n.w5)((()=>[(0,n.wy)(((0,n.wg)(),(0,n.iD)("a",{onClick:t=>p.detail(e.id)},[(0,n.Uk)((0,i.zw)(t.$t("edit")),1)],8,o)),[[W,["address-pool:update"]]])])),_:2},1024),(0,n.Wm)(_,null,{default:(0,n.w5)((()=>[(0,n.Wm)(b,{placement:"topLeft","ok-text":t.$t("Yes"),"cancel-text":t.$t("No"),onConfirm:t=>p.remove(e.id)},{title:(0,n.w5)((()=>[(0,n._)("p",null,(0,i.zw)(t.$t("Tip")),1),(0,n._)("p",null,(0,i.zw)(t.$t("Are you sure to delete this?")),1)])),default:(0,n.w5)((()=>[(0,n.wy)(((0,n.wg)(),(0,n.iD)("a",null,[(0,n.Uk)((0,i.zw)(t.$t("delete")),1)])),[[W,["address-pool:delete"]]])])),_:2},1032,["ok-text","cancel-text","onConfirm"])])),_:2},1024)])),_:2},1024)])),default:(0,n.w5)((()=>[(0,n._)("a",null,[(0,n.Wm)(C)])])),_:2},1024)])])),default:(0,n.w5)((()=>[(0,n.Wm)(v,{description:"ID:"+e.id},{title:(0,n.w5)((()=>[(0,n._)("a",{onClick:t=>p.detail(e.id)},(0,i.zw)(e.name),9,l)])),avatar:(0,n.w5)((()=>[(0,n.Wm)(g,{class:"font-20 primary"})])),_:2},1032,["description"]),(0,n._)("div",s,[(0,n._)("div",r,[(0,n._)("span",null,(0,i.zw)(e.ip),1),(0,n._)("p",null,(0,i.zw)(e.port),1)]),(0,n._)("div",u,[(0,n._)("span",null,(0,i.zw)(t.$t("IP Count")),1),(0,n._)("p",null,(0,i.zw)(e.addressesCount),1)])])])),_:2},1024)))),128))])),_:1},8,["pagination"])])),_:1},8,["title","loading"])])}],["__scopeId","data-v-24389abf"]])}}]);