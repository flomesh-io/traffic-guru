"use strict";(self.webpackChunkflomesh_load_balancer=self.webpackChunkflomesh_load_balancer||[]).push([[8562],{62967:function(t,e,n){n.d(e,{Z:function(){return c}});var a=n(66252),i={icon:function(t,e){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M911.9 283.9v.5L835.5 865c-1 8-7.9 14-15.9 14H204.5c-8.1 0-14.9-6.1-16-14l-76.4-580.6v-.6 1.6L188.5 866c1.1 7.9 7.9 14 16 14h615.1c8 0 14.9-6 15.9-14l76.4-580.6c.1-.5.1-1 0-1.5z",fill:e}},{tag:"path",attrs:{d:"M773.6 810.6l53.9-409.4-139.8 86.1L512 252.9 336.3 487.3l-139.8-86.1 53.8 409.4h523.3zm-374.2-189c0-62.1 50.5-112.6 112.6-112.6s112.6 50.5 112.6 112.6v1c0 62.1-50.5 112.6-112.6 112.6s-112.6-50.5-112.6-112.6v-1z",fill:e}},{tag:"path",attrs:{d:"M512 734.2c61.9 0 112.3-50.2 112.6-112.1v-.5c0-62.1-50.5-112.6-112.6-112.6s-112.6 50.5-112.6 112.6v.5c.3 61.9 50.7 112.1 112.6 112.1zm0-160.9c26.6 0 48.2 21.6 48.2 48.3 0 26.6-21.6 48.3-48.2 48.3s-48.2-21.6-48.2-48.3c0-26.6 21.6-48.3 48.2-48.3z",fill:t}},{tag:"path",attrs:{d:"M188.5 865c1.1 7.9 7.9 14 16 14h615.1c8 0 14.9-6 15.9-14l76.4-580.6v-.5c.3-6.4-6.7-10.8-12.3-7.4L705 396.4 518.4 147.5a8.06 8.06 0 00-12.9 0L319 396.4 124.3 276.5c-5.5-3.4-12.6.9-12.2 7.3v.6L188.5 865zm147.8-377.7L512 252.9l175.7 234.4 139.8-86.1-53.9 409.4H250.3l-53.8-409.4 139.8 86.1z",fill:t}}]}},name:"crown",theme:"twotone"},o=n(33058);function r(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?Object(arguments[e]):{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),a.forEach((function(e){s(t,e,n[e])}))}return t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var l=function(t,e){var n=r({},t,e.attrs);return(0,a.Wm)(o.Z,r({},n,{icon:i}),null)};l.displayName="CrownTwoTone",l.inheritAttrs=!1;var c=l},77682:function(t,e,n){n.d(e,{Z:function(){return c}});var a=n(66252),i={icon:function(t,e){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 632h128v192H696zm-496 0h128v192H200z",fill:e}},{tag:"path",attrs:{d:"M512 128c-212.1 0-384 171.9-384 384v360c0 13.3 10.7 24 24 24h184c35.3 0 64-28.7 64-64V624c0-35.3-28.7-64-64-64H200v-48c0-172.3 139.7-312 312-312s312 139.7 312 312v48H688c-35.3 0-64 28.7-64 64v208c0 35.3 28.7 64 64 64h184c13.3 0 24-10.7 24-24V512c0-212.1-171.9-384-384-384zM328 632v192H200V632h128zm496 192H696V632h128v192z",fill:t}}]}},name:"customer-service",theme:"twotone"},o=n(33058);function r(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?Object(arguments[e]):{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),a.forEach((function(e){s(t,e,n[e])}))}return t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var l=function(t,e){var n=r({},t,e.attrs);return(0,a.Wm)(o.Z,r({},n,{icon:i}),null)};l.displayName="CustomerServiceTwoTone",l.inheritAttrs=!1;var c=l},38046:function(t,e,n){n.d(e,{Z:function(){return c}});var a=n(66252),i={icon:function(t,e){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 632H136V232h752v560z",fill:t}},{tag:"path",attrs:{d:"M136 792h752V232H136v560zm472-372c0-4.4 1-8 2.3-8h123.4c1.3 0 2.3 3.6 2.3 8v48c0 4.4-1 8-2.3 8H610.3c-1.3 0-2.3-3.6-2.3-8v-48zm0 144c0-4.4 3.2-8 7.1-8h185.7c3.9 0 7.1 3.6 7.1 8v48c0 4.4-3.2 8-7.1 8H615.1c-3.9 0-7.1-3.6-7.1-8v-48zM216.2 664.6c2.8-53.3 31.9-99.6 74.6-126.1-18.1-20-29.1-46.4-29.1-75.5 0-61.9 49.9-112 111.4-112s111.4 50.1 111.4 112c0 29.1-11 55.6-29.1 75.5 42.6 26.4 71.8 72.8 74.6 126.1a8 8 0 01-8 8.4h-43.9c-4.2 0-7.6-3.3-7.9-7.5-3.8-50.5-46-90.5-97.2-90.5s-93.4 40-97.2 90.5c-.3 4.2-3.7 7.5-7.9 7.5H224c-4.6 0-8.2-3.8-7.8-8.4z",fill:e}},{tag:"path",attrs:{d:"M321.3 463a51.7 52 0 10103.4 0 51.7 52 0 10-103.4 0z",fill:e}},{tag:"path",attrs:{d:"M610.3 476h123.4c1.3 0 2.3-3.6 2.3-8v-48c0-4.4-1-8-2.3-8H610.3c-1.3 0-2.3 3.6-2.3 8v48c0 4.4 1 8 2.3 8zm4.8 144h185.7c3.9 0 7.1-3.6 7.1-8v-48c0-4.4-3.2-8-7.1-8H615.1c-3.9 0-7.1 3.6-7.1 8v48c0 4.4 3.2 8 7.1 8zM224 673h43.9c4.2 0 7.6-3.3 7.9-7.5 3.8-50.5 46-90.5 97.2-90.5s93.4 40 97.2 90.5c.3 4.2 3.7 7.5 7.9 7.5H522a8 8 0 008-8.4c-2.8-53.3-32-99.7-74.6-126.1a111.8 111.8 0 0029.1-75.5c0-61.9-49.9-112-111.4-112s-111.4 50.1-111.4 112c0 29.1 11 55.5 29.1 75.5a158.09 158.09 0 00-74.6 126.1c-.4 4.6 3.2 8.4 7.8 8.4zm149-262c28.5 0 51.7 23.3 51.7 52s-23.2 52-51.7 52-51.7-23.3-51.7-52 23.2-52 51.7-52z",fill:t}}]}},name:"idcard",theme:"twotone"},o=n(33058);function r(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?Object(arguments[e]):{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),a.forEach((function(e){s(t,e,n[e])}))}return t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var l=function(t,e){var n=r({},t,e.attrs);return(0,a.Wm)(o.Z,r({},n,{icon:i}),null)};l.displayName="IdcardTwoTone",l.inheritAttrs=!1;var c=l},71900:function(t,e,n){n.d(e,{Z:function(){return s}});var a=n(66252),i=n(3577),o={class:"head-info"};var r={name:"HeadInfo",props:["title","content"]};var s=(0,n(83744).Z)(r,[["render",function(t,e,n,r,s,l){return(0,a.wg)(),(0,a.iD)("div",o,[(0,a._)("span",null,(0,i.zw)(n.title),1),(0,a._)("p",null,[(0,a.Uk)((0,i.zw)(n.content),1),(0,a.WI)(t.$slots,"body",{},void 0,!0)])])}],["__scopeId","data-v-00006846"]])},48562:function(t,e,n){n.r(e),n.d(e,{default:function(){return _}});n(68309);var a=n(66252),i=n(3577),o=n(49963),r=function(t){return(0,a.dD)("data-v-8e56e4dc"),t=t(),(0,a.Cn)(),t}((function(){return(0,a._)("div",null,null,-1)})),s={class:"capitalize"},l={class:"capitalize"},c={class:"font-left width-100"};var u=n(95082),d=(n(41539),n(54747),n(99684)),f=n(44924),p=n(38046),m=n(62967),v=n(77682),h=n(98110),y=n(61103),w=n(71900),g=n(69596),b=n(76754),k=n(93099),z=n(96486),O=n.n(z),j=n(33907),C={name:"Roles",components:{HeadInfo:w.Z,PageLayout:y.Z,CardList:g.Z,PlusCircleTwoTone:d.Z,UserOutlined:f.Z,IdcardTwoTone:p.Z,CrownTwoTone:m.Z,CustomerServiceTwoTone:v.Z,CustomerServiceOutlined:h.Z,FormItem:b.Z},i18n:n(89234),data:function(){return{activeKey:"system",tabs:[{type:"system",title:"System Role"},{type:"organization",title:"Organization Role"},{type:"project",title:"Project Role"}],CustomerServiceOutlined:h.Z,isEdit:!1,roles:[],visible:!1,payload:{id:"",name:"",type:"system",permissions:[]},defaultPermissions:{},permissions:{},bindTarget:{},editorIsCreate:!0,workload:[],projects:[],pageSize:10,pageNo:1,total:0,loading:!0,saving:!1,activities:[],config:{},teams:[]}},computed:(0,u.Z)({},(0,j.rn)("rules",["rules"])),created:function(){this.$isPro||(this.tabs=[{type:"system",title:"System Role"},{type:"organization",title:"Organization Role"}]),this.loaddata(),this.initResource()},methods:{togglePermissions:function(t,e){"find"!=t.name&&t.enabled?e.forEach((function(t){"find"==t.name&&(t.enabled=!0)})):"find"!=t.name||t.enabled||e.forEach((function(t){t.enabled=!1}))},add:function(){this.isEdit=!1,this.payload={name:"",type:"system",permissions:[]},this.permissions=this.defaultPermissions[this.payload.type],this.showModal()},getSample:function(){this.custom=this.customSample},showModal:function(){this.visible=!0},renderCallback:function(){this.permissions=this.defaultPermissions[this.payload.type]},valid:function(){var t=this;this.$refs.form.validateFields().then((function(){t.handleOk()})).catch((function(){}))},handleOk:function(){var t=this,e=O().cloneDeep(this.permissions),n={name:this.payload.name,type:this.payload.type,permissions:(0,k.zE)(e)};this.saving=!0,this.isEdit?this.$gql.mutation("updateRoleResourcePermission(id: ".concat(this.payload.id,", data: $data)"),{data:n},{data:"RolePermissionInput"}).then((function(){t.saving=!1,t.visible=!1,t.$message.success(t.$t("Save successfully"),3),t.loaddata()})):this.$gql.mutation("createRoleResourcePermission(data: $data)",{data:n},{data:"RolePermissionInput"}).then((function(){t.saving=!1,t.visible=!1,t.$message.success(t.$t("Created successfully"),3),t.loaddata()}))},remove:function(t,e,n){var a=this;this.$gql.mutation("deleteUsersPermissionsRole(id: ".concat(n.id,"){ok}")).then((function(){a.$message.success(a.$t("Deleted successfully"),3),a.loaddata()}))},setting:function(t,e,n){var a=this;this.payload=n,(0,k.Yj)({id:n.id}).then((function(t){a.permissions=t.permissions,a.isEdit=!0,a.showModal()}))},initResource:function(){var t=this;this.tabs.forEach((function(e){(0,k.Yj)({type:e.type}).then((function(n){t.defaultPermissions[e.type]=n.permissions}))}))},loaddata:function(){var t=this;this.roles=[],this.loading=!0;var e=this.activeKey;this.$gql.query('usersPermissionsRoles(filters:{type:{eq:"'.concat(e,'"}}){\n\t\t\t\t\t\tdata{id,attributes{\n\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\ttype,\n\t\t\t\t\t\t\tusers{data{id}},\n\t\t\t\t\t\t\tuserOrganizationRoles{data{id}}\n\t\t\t\t\t\t}}\n\t\t\t\t\t}')).then((function(e){t.roles=e.data,t.loading=!1}))}}};var _=(0,n(83744).Z)(C,[["render",function(t,e,n,u,d,f){var p=(0,a.up)("PlusCircleTwoTone"),m=(0,a.up)("HeadInfo"),v=(0,a.up)("CrownTwoTone"),h=(0,a.up)("CustomerServiceTwoTone"),y=(0,a.up)("IdcardTwoTone"),w=(0,a.up)("UserOutlined"),g=(0,a.up)("a-card-meta"),b=(0,a.up)("CardList"),k=(0,a.up)("a-tab-pane"),z=(0,a.up)("a-tabs"),O=(0,a.up)("a-button"),j=(0,a.up)("a-select-option"),C=(0,a.up)("a-select"),_=(0,a.up)("a-descriptions-item"),P=(0,a.up)("a-input"),$=(0,a.up)("FormItem"),H=(0,a.up)("a-checkbox"),T=(0,a.up)("a-descriptions"),R=(0,a.up)("a-form"),Z=(0,a.up)("a-modal"),W=((0,a.up)("CustomerServiceOutlined"),(0,a.up)("PageLayout")),S=(0,a.Q2)("permission");return(0,a.wg)(),(0,a.j4)(W,{avatar:d.CustomerServiceOutlined},{headerContent:(0,a.w5)((function(){return[r]})),extra:(0,a.w5)((function(){return[(0,a.wy)(((0,a.wg)(),(0,a.j4)(m,{class:"split-right",title:t.$t("Create role")},{body:(0,a.w5)((function(){return[(0,a._)("div",null,[(0,a.Wm)(p,{onClick:f.add,class:"font-primary icon-menu rotate-icon"},null,8,["onClick"])])]})),_:1},8,["title"])),[[S,["role:create"]]])]})),default:(0,a.w5)((function(){return[(0,a.Wm)(z,{type:"card",activeKey:d.activeKey,"onUpdate:activeKey":e[0]||(e[0]=function(t){return d.activeKey=t}),onChange:f.loaddata},{default:(0,a.w5)((function(){return[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(d.tabs,(function(e){return(0,a.wg)(),(0,a.j4)(k,{key:e.type},{tab:(0,a.w5)((function(){return[(0,a._)("div",s,(0,i.zw)(t.$t(e.title)),1)]})),default:(0,a.w5)((function(){return[(0,a.Wm)(b,{loading:d.loading,"hide-action-title":!0,"data-source":d.roles,"result-empty":{},type:"component",actions:[{icon:"EditOutlined",text:t.$t("edit"),call:f.setting,permission:["role:update"]},{icon:"CloseOutlined",hide:!0,text:t.$t("delete"),call:f.remove,permission:["role:delete"]}]},{default:(0,a.w5)((function(e){var n=e.item;return[(0,a.Wm)(g,null,{title:(0,a.w5)((function(){return[(0,a._)("div",l,(0,i.zw)(t.$t(n.name)),1)]})),avatar:(0,a.w5)((function(){return["Authenticated"==n.name?((0,a.wg)(),(0,a.j4)(v,{key:0,"two-tone-color":"#00adef",class:"font-50"})):"Public"==n.name?((0,a.wg)(),(0,a.j4)(h,{key:1,"two-tone-color":"#00adef",class:"font-50"})):((0,a.wg)(),(0,a.j4)(y,{key:2,"two-tone-color":"#00adef",class:"font-50"}))]})),description:(0,a.w5)((function(){var t,e;return[(0,a.Uk)((0,i.zw)((null===(t=n.users)||void 0===t?void 0:t.length)+(null===(e=n.userOrganizationRoles)||void 0===e?void 0:e.length)||"0")+" ",1),(0,a.Wm)(w,{class:"font-14 font-primary"})]})),_:2},1024)]})),_:1},8,["loading","data-source","actions"])]})),_:2},1024)})),128))]})),_:1},8,["activeKey","onChange"]),(0,a.Wm)(Z,{visible:d.visible,"onUpdate:visible":e[3]||(e[3]=function(t){return d.visible=t}),title:t.$t("Role"),width:"70%"},{footer:(0,a.w5)((function(){return[d.isEdit?(0,a.wy)(((0,a.wg)(),(0,a.j4)(O,{key:0,loading:d.saving,type:"primary",onClick:f.valid},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,i.zw)(t.$t("save")),1)]})),_:1},8,["loading","onClick"])),[[S,["role:update"]]]):(0,a.wy)(((0,a.wg)(),(0,a.j4)(O,{key:1,loading:d.saving,type:"primary",onClick:f.valid},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,i.zw)(t.$t("create")),1)]})),_:1},8,["loading","onClick"])),[[S,["role:create"]]])]})),default:(0,a.w5)((function(){return[(0,a.Wm)(R,{model:d.payload,"wrapper-col":{span:24},ref:"form"},{default:(0,a.w5)((function(){return[(0,a.Wm)(T,{bordered:""},{default:(0,a.w5)((function(){return[(0,a.Wm)(_,{label:t.$t("Type"),span:3},{default:(0,a.w5)((function(){return[(0,a.Wm)(C,{disabled:d.isEdit,placeholder:t.$t("Unselect"),class:"width-200",value:d.payload.type,"onUpdate:value":e[1]||(e[1]=function(t){return d.payload.type=t}),onChange:f.renderCallback},{default:(0,a.w5)((function(){return[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(d.tabs,(function(e,n){return(0,a.wg)(),(0,a.j4)(j,{key:n,value:e.type},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,i.zw)(t.$t(e.title)),1)]})),_:2},1032,["value"])})),128))]})),_:1},8,["disabled","placeholder","value","onChange"])]})),_:1},8,["label"]),(0,a.Wm)(_,{label:t.$t("Avatar"),span:3},{default:(0,a.w5)((function(){return["Authenticated"==d.payload.name?((0,a.wg)(),(0,a.j4)(v,{key:0,"two-tone-color":"#00adef",class:"font-50"})):"Public"==d.payload.name?((0,a.wg)(),(0,a.j4)(h,{key:1,"two-tone-color":"#00adef",class:"font-50"})):((0,a.wg)(),(0,a.j4)(y,{key:2,"two-tone-color":"#00adef",class:"font-50"}))]})),_:1},8,["label"]),(0,a.Wm)(_,{label:t.$t("Role Name"),span:3},{default:(0,a.w5)((function(){return[(0,a.Wm)($,{name:"name",rules:t.rules.uniqueName("usersPermissionsRoles",{id:d.payload.id,type:d.payload.type})},{default:(0,a.w5)((function(){return[(0,a.Wm)(P,{maxlength:10,placeholder:t.$t("unset"),value:d.payload.name,"onUpdate:value":e[2]||(e[2]=function(t){return d.payload.name=t})},{prefix:(0,a.w5)((function(){return[(0,a.Wm)(w,{type:"user"})]})),_:1},8,["placeholder","value"])]})),_:1},8,["rules"])]})),_:1},8,["label"]),d.permissions&&d.permissions.length>0?((0,a.wg)(),(0,a.j4)(_,{key:0,label:t.$t("Resources"),span:3},{default:(0,a.w5)((function(){return[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(d.permissions,(function(e,n){return(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",{class:"flex",key:n},[(0,a._)("div",c,(0,i.zw)(t.$t(e.name)),1),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.actions,(function(n,o){return(0,a.wg)(),(0,a.iD)("div",{class:"font-center width-100",key:o},[(0,a.Wm)(H,{onChange:function(t){return f.togglePermissions(n,e.actions)},checked:n.enabled,"onUpdate:checked":function(t){return n.enabled=t}},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,i.zw)(t.$t(n.name)),1)]})),_:2},1032,["onChange","checked","onUpdate:checked"])])})),128))])),[[o.F8,e]])})),128))]})),_:1},8,["label"])):(0,a.kq)("",!0)]})),_:1})]})),_:1},8,["model"])]})),_:1},8,["visible","title"]),(0,a.kq)("",!0)]})),_:1},8,["avatar"])}],["__scopeId","data-v-8e56e4dc"]])}}]);