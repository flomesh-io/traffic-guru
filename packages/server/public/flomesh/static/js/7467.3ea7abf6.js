"use strict";(self.webpackChunkflomesh_load_balancer=self.webpackChunkflomesh_load_balancer||[]).push([[7467],{62967:function(e,t,a){a.d(t,{Z:function(){return c}});var i=a(66252),l={icon:function(e,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M911.9 283.9v.5L835.5 865c-1 8-7.9 14-15.9 14H204.5c-8.1 0-14.9-6.1-16-14l-76.4-580.6v-.6 1.6L188.5 866c1.1 7.9 7.9 14 16 14h615.1c8 0 14.9-6 15.9-14l76.4-580.6c.1-.5.1-1 0-1.5z",fill:t}},{tag:"path",attrs:{d:"M773.6 810.6l53.9-409.4-139.8 86.1L512 252.9 336.3 487.3l-139.8-86.1 53.8 409.4h523.3zm-374.2-189c0-62.1 50.5-112.6 112.6-112.6s112.6 50.5 112.6 112.6v1c0 62.1-50.5 112.6-112.6 112.6s-112.6-50.5-112.6-112.6v-1z",fill:t}},{tag:"path",attrs:{d:"M512 734.2c61.9 0 112.3-50.2 112.6-112.1v-.5c0-62.1-50.5-112.6-112.6-112.6s-112.6 50.5-112.6 112.6v.5c.3 61.9 50.7 112.1 112.6 112.1zm0-160.9c26.6 0 48.2 21.6 48.2 48.3 0 26.6-21.6 48.3-48.2 48.3s-48.2-21.6-48.2-48.3c0-26.6 21.6-48.3 48.2-48.3z",fill:e}},{tag:"path",attrs:{d:"M188.5 865c1.1 7.9 7.9 14 16 14h615.1c8 0 14.9-6 15.9-14l76.4-580.6v-.5c.3-6.4-6.7-10.8-12.3-7.4L705 396.4 518.4 147.5a8.06 8.06 0 00-12.9 0L319 396.4 124.3 276.5c-5.5-3.4-12.6.9-12.2 7.3v.6L188.5 865zm147.8-377.7L512 252.9l175.7 234.4 139.8-86.1-53.9 409.4H250.3l-53.8-409.4 139.8 86.1z",fill:e}}]}},name:"crown",theme:"twotone"},s=a(33058);function n(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?Object(arguments[t]):{},i=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),i.forEach((function(t){r(e,t,a[t])}))}return e}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var o=function(e,t){var a=n({},e,t.attrs);return(0,i.Wm)(s.Z,n({},a,{icon:l}),null)};o.displayName="CrownTwoTone",o.inheritAttrs=!1;var c=o},77682:function(e,t,a){a.d(t,{Z:function(){return c}});var i=a(66252),l={icon:function(e,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 632h128v192H696zm-496 0h128v192H200z",fill:t}},{tag:"path",attrs:{d:"M512 128c-212.1 0-384 171.9-384 384v360c0 13.3 10.7 24 24 24h184c35.3 0 64-28.7 64-64V624c0-35.3-28.7-64-64-64H200v-48c0-172.3 139.7-312 312-312s312 139.7 312 312v48H688c-35.3 0-64 28.7-64 64v208c0 35.3 28.7 64 64 64h184c13.3 0 24-10.7 24-24V512c0-212.1-171.9-384-384-384zM328 632v192H200V632h128zm496 192H696V632h128v192z",fill:e}}]}},name:"customer-service",theme:"twotone"},s=a(33058);function n(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?Object(arguments[t]):{},i=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),i.forEach((function(t){r(e,t,a[t])}))}return e}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var o=function(e,t){var a=n({},e,t.attrs);return(0,i.Wm)(s.Z,n({},a,{icon:l}),null)};o.displayName="CustomerServiceTwoTone",o.inheritAttrs=!1;var c=o},38046:function(e,t,a){a.d(t,{Z:function(){return c}});var i=a(66252),l={icon:function(e,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 632H136V232h752v560z",fill:e}},{tag:"path",attrs:{d:"M136 792h752V232H136v560zm472-372c0-4.4 1-8 2.3-8h123.4c1.3 0 2.3 3.6 2.3 8v48c0 4.4-1 8-2.3 8H610.3c-1.3 0-2.3-3.6-2.3-8v-48zm0 144c0-4.4 3.2-8 7.1-8h185.7c3.9 0 7.1 3.6 7.1 8v48c0 4.4-3.2 8-7.1 8H615.1c-3.9 0-7.1-3.6-7.1-8v-48zM216.2 664.6c2.8-53.3 31.9-99.6 74.6-126.1-18.1-20-29.1-46.4-29.1-75.5 0-61.9 49.9-112 111.4-112s111.4 50.1 111.4 112c0 29.1-11 55.6-29.1 75.5 42.6 26.4 71.8 72.8 74.6 126.1a8 8 0 01-8 8.4h-43.9c-4.2 0-7.6-3.3-7.9-7.5-3.8-50.5-46-90.5-97.2-90.5s-93.4 40-97.2 90.5c-.3 4.2-3.7 7.5-7.9 7.5H224c-4.6 0-8.2-3.8-7.8-8.4z",fill:t}},{tag:"path",attrs:{d:"M321.3 463a51.7 52 0 10103.4 0 51.7 52 0 10-103.4 0z",fill:t}},{tag:"path",attrs:{d:"M610.3 476h123.4c1.3 0 2.3-3.6 2.3-8v-48c0-4.4-1-8-2.3-8H610.3c-1.3 0-2.3 3.6-2.3 8v48c0 4.4 1 8 2.3 8zm4.8 144h185.7c3.9 0 7.1-3.6 7.1-8v-48c0-4.4-3.2-8-7.1-8H615.1c-3.9 0-7.1 3.6-7.1 8v48c0 4.4 3.2 8 7.1 8zM224 673h43.9c4.2 0 7.6-3.3 7.9-7.5 3.8-50.5 46-90.5 97.2-90.5s93.4 40 97.2 90.5c.3 4.2 3.7 7.5 7.9 7.5H522a8 8 0 008-8.4c-2.8-53.3-32-99.7-74.6-126.1a111.8 111.8 0 0029.1-75.5c0-61.9-49.9-112-111.4-112s-111.4 50.1-111.4 112c0 29.1 11 55.5 29.1 75.5a158.09 158.09 0 00-74.6 126.1c-.4 4.6 3.2 8.4 7.8 8.4zm149-262c28.5 0 51.7 23.3 51.7 52s-23.2 52-51.7 52-51.7-23.3-51.7-52 23.2-52 51.7-52z",fill:e}}]}},name:"idcard",theme:"twotone"},s=a(33058);function n(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?Object(arguments[t]):{},i=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),i.forEach((function(t){r(e,t,a[t])}))}return e}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var o=function(e,t){var a=n({},e,t.attrs);return(0,i.Wm)(s.Z,n({},a,{icon:l}),null)};o.displayName="IdcardTwoTone",o.inheritAttrs=!1;var c=o},64137:function(e,t,a){a.d(t,{Z:function(){return c}});var i=a(66252),l={icon:function(e,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",fill:e}},{tag:"path",attrs:{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm192 396c0 4.4-3.6 8-8 8H328c-4.4 0-8-3.6-8-8v-48c0-4.4 3.6-8 8-8h368c4.4 0 8 3.6 8 8v48z",fill:t}},{tag:"path",attrs:{d:"M696 480H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z",fill:e}}]}},name:"minus-circle",theme:"twotone"},s=a(33058);function n(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?Object(arguments[t]):{},i=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),i.forEach((function(t){r(e,t,a[t])}))}return e}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var o=function(e,t){var a=n({},e,t.attrs);return(0,i.Wm)(s.Z,n({},a,{icon:l}),null)};o.displayName="MinusCircleTwoTone",o.inheritAttrs=!1;var c=o},34531:function(e,t,a){a.d(t,{Z:function(){return m}});var i=a(66252),l=a(3577);const s={key:0,class:"flex pd-10"},n={key:0,class:"flex-item"},r={class:"flex-item"},o={class:"pl-10"},c=["xlink:href"],d={class:"card-selector-title"};var u=a(85263),p=a(75255),h=a(60459),g={name:"CardSelector",components:{CheckOutlined:p.Z,EnvSelector:h.Z},props:["loading","envFilter","search","options","icon","placement","disabled","value","getTag","svg","col","width","multiple"],emits:["envChange","select"],data(){return{simpleImage:u.Z.PRESENTED_IMAGE_SIMPLE,visible:!1,key:""}},i18n:a(89234),computed:{multipleSelectNum(){let e=0;return this.options.forEach((t=>{t.checked&&e++})),e},filterOptions(){if(this.key){let e=this.options.filter((e=>(e.name||e.username||"").indexOf(this.key)>=0));return e.map((e=>{null==e.checked&&(e.checked=!1)})),e}{let e=this.options;return e.map((e=>{null==e.checked&&(e.checked=!1)})),e}}},watch:{value:{handler(){this.multiple&&this.options.forEach((e=>{e.checked=!!this.value.find((t=>e.id==t.id))}))},deep:!0}},methods:{envChange(e){this.$emit("envChange",e)},multipleSelect(){this.visible=!1;let e=this.options.filter((e=>e.checked));this.$emit("select",e),this.$emit("update:value",e)},select(e){this.multiple?this.options.forEach((t=>{t.id==e.id&&(t.checked=!t.checked)})):(this.visible=!1,this.$emit("update:value",e.id),this.$emit("select",e))}}};var m=(0,a(83744).Z)(g,[["render",function(e,t,a,u,p,h){const g=(0,i.up)("EnvSelector"),m=(0,i.up)("a-input-search"),v=(0,i.up)("a-button"),f=(0,i.up)("a-empty"),w=(0,i.up)("a-skeleton"),y=(0,i.up)("a-card-grid"),b=(0,i.up)("a-card"),k=(0,i.up)("CheckOutlined"),$=(0,i.up)("a-tag"),T=(0,i.up)("a-popover");return(0,i.wg)(),(0,i.j4)(T,{placement:a.placement||"bottom","overlay-class-name":"selector-popover",visible:p.visible,"onUpdate:visible":t[1]||(t[1]=e=>p.visible=e),trigger:"click"},{content:(0,i.w5)((()=>[a.search?((0,i.wg)(),(0,i.iD)("div",s,[a.envFilter?((0,i.wg)(),(0,i.iD)("div",n,[(0,i.Wm)(g,{"no-all":!0,"is-filter":!0,onEnvChange:h.envChange},null,8,["onEnvChange"])])):(0,i.kq)("",!0),(0,i._)("div",r,[(0,i.Wm)(m,{value:p.key,"onUpdate:value":t[0]||(t[0]=e=>p.key=e),class:"full",placeholder:e.$t("search")},null,8,["value","placeholder"])]),(0,i._)("div",o,[a.multiple?((0,i.wg)(),(0,i.j4)(v,{key:0,type:"primary",onClick:h.multipleSelect,disabled:0==h.multipleSelectNum},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(e.$t("Ok")),1)])),_:1},8,["onClick","disabled"])):(0,i.kq)("",!0)])])):(0,i.kq)("",!0),a.loading||0!=h.filterOptions.length?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(f,{key:1,image:p.simpleImage},null,8,["image"])),(0,i._)("div",{class:"overflow-auto scrollbar",style:(0,l.j5)("max-height:"+90*(e.rows||5)+"px")},[a.loading?((0,i.wg)(),(0,i.j4)(b,{key:0,class:"grid-menu",style:(0,l.j5)("width: "+(a.width?a.width:300)+"px")},{default:(0,i.w5)((()=>[(0,i.Wm)(y,{class:"selector-item",style:{width:"100%",padding:"15px"}},{default:(0,i.w5)((()=>[(0,i.Wm)(w,{avatar:"",paragraph:{rows:2}})])),_:1})])),_:1},8,["style"])):((0,i.wg)(),(0,i.j4)(b,{key:1,class:"grid-menu",style:(0,l.j5)("width: "+(a.width?a.width:300)+"px")},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(h.filterOptions,((e,t)=>((0,i.wg)(),(0,i.j4)(y,{class:(0,l.C_)(["selector-item",(a.value==e.id?"selected":"")+(a.disabled&&a.disabled(e)?" disabled":"")]),key:t,value:e.id,style:(0,l.j5)(a.col?"width:"+100/a.col+"%":a.options.length>=3?"width: 33%;":2==a.options.length?"width:50%;":"width:100%;"),onClick:t=>h.select(e)},{default:(0,i.w5)((()=>[e.checked?((0,i.wg)(),(0,i.j4)(k,{key:0,class:"CheckOutlined"})):(0,i.kq)("",!0),(0,i._)("div",{class:(0,l.C_)(a.getTag?"mt-15":"")},[a.icon?((0,i.wg)(),(0,i.j4)((0,i.LL)(a.icon),{key:0,"two-tone-color":"#00adef"})):a.svg?((0,i.wg)(),(0,i.iD)("svg",{key:1,class:(0,l.C_)([a.getTag?"mt-20":"","card-avatar icon"]),"aria-hidden":"true"},[(0,i._)("use",{"xlink:href":a.svg},null,8,c)],2)):(0,i.kq)("",!0),(0,i._)("div",d,(0,l.zw)(e.name||e.username),1)],2),a.getTag&&a.getTag(e)?((0,i.wg)(),(0,i.j4)($,{key:1,class:"ribbon",color:"#f5f5f5"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(a.getTag(e)),1)])),_:2},1024)):(0,i.kq)("",!0)])),_:2},1032,["class","value","style","onClick"])))),128))])),_:1},8,["style"]))],4)])),default:(0,i.w5)((()=>[(0,i.WI)(e.$slots,"default",{},void 0,!0)])),_:3},8,["placement","visible"])}],["__scopeId","data-v-30bb0bbf"]])},37671:function(e,t,a){a.d(t,{Z:function(){return d}});var i=a(66252),l=a(3577);const s={class:"flex-item"},n={class:"width-100"};a(57658);var r=a(64137),o=a(99684),c={name:"InputList",components:{MinusCircleTwoTone:r.Z,PlusCircleTwoTone:o.Z},props:["d","attrs","width"],data(){return{}},created(){0==this.d.length&&this.add()},methods:{remove(e){let t=this.d.indexOf(e);-1!==t&&this.d.splice(t,1)},add(){this.d.push(JSON.parse(JSON.stringify(this.attrs))||{})}}};var d=(0,a(83744).Z)(c,[["render",function(e,t,a,r,o,c){const d=(0,i.up)("MinusCircleTwoTone"),u=(0,i.up)("PlusCircleTwoTone");return(0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.d,((t,r)=>((0,i.wg)(),(0,i.iD)("div",{key:r},[(0,i._)("div",{class:"flex",style:(0,l.j5)(a.width?`max-width:${a.width}px`:"")},[(0,i._)("div",s,[(0,i.WI)(e.$slots,"default",{item:t},void 0,!0)]),(0,i._)("div",n,[a.d.length>1?((0,i.wg)(),(0,i.j4)(d,{key:0,class:"icon-menu two-tone",disabled:1===a.d.length,onClick:e=>c.remove(t),"two-tone-color":"#00adef"},null,8,["disabled","onClick"])):(0,i.kq)("",!0),a.d.length-1==r?((0,i.wg)(),(0,i.j4)(u,{key:1,class:"icon-menu two-tone",onClick:c.add,"two-tone-color":"#00adef"},null,8,["onClick"])):(0,i.kq)("",!0)])],4)])))),128)}],["__scopeId","data-v-7e6d4cc2"]])},1299:function(e,t,a){a.d(t,{Z:function(){return r}});var i=a(66252),l=a(3577);const s={key:0,class:"title"};var n={name:"DetailList",props:{title:{type:String,required:!1,default:""},col:{type:Number,required:!1,default:3},size:{type:String,required:!1,default:"large"},layout:{type:String,required:!1,default:"horizontal"}}};var r=(0,a(83744).Z)(n,[["render",function(e,t,a,n,r,o){const c=(0,i.up)("a-row");return(0,i.wg)(),(0,i.iD)("div",{class:(0,l.C_)(["detail-list","small"===a.size?"small":"large","vertical"===a.layout?"vertical":"horizontal"]),style:(0,l.j5)("flex-"+a.col)},[a.title?((0,i.wg)(),(0,i.iD)("div",s,(0,l.zw)(a.title),1)):(0,i.kq)("",!0),(0,i.Wm)(c,null,{default:(0,i.w5)((()=>[(0,i.WI)(e.$slots,"default")])),_:3})],6)}]])},13589:function(e,t,a){a.d(t,{Z:function(){return o}});var i=a(66252),l=a(3577);const s={class:"detail-content"};const n={1:{xs:24},2:{xs:24,sm:12},3:{xs:24,sm:12,md:8},4:{xs:24,sm:12,md:6}};var r={name:"DetailListItem",i18n:a(39945),props:{name:{type:String,required:!1,default:""},rules:{type:Array,required:!1,default(){return[]}},term:{type:String,required:!1,default:""},termTop:{type:Boolean}},data(){return{col:2,responsive:n}},computed:{getRules(){return this.rules.map((e=>(e.message=this.$t(e.message),e))),this.rules}},created(){this.$parent&&this.$parent.$parent&&this.$parent.$parent.col>0&&(this.col=this.$parent.$parent.col)},methods:{}};var o=(0,a(83744).Z)(r,[["render",function(e,t,a,n,r,o){const c=(0,i.up)("a-form-item"),d=(0,i.up)("a-col");return(0,i.wg)(),(0,i.j4)(d,(0,i.dG)({class:"detail-list-content flex"},r.responsive[r.col]),{default:(0,i.w5)((()=>[(0,i._)("div",{class:(0,l.C_)(a.termTop?"term top":"term")},(0,l.zw)(a.term),3),(0,i._)("div",s,[a.rules?((0,i.wg)(),(0,i.j4)(c,{key:0,name:a.name,rules:o.getRules},{default:(0,i.w5)((()=>[(0,i.WI)(e.$slots,"default")])),_:3},8,["name","rules"])):(0,i.WI)(e.$slots,"default",{key:1})])])),_:3},16)}]])},77467:function(e,t,a){a.r(t),a.d(t,{default:function(){return w}});var i=a(66252),l=a(3577);const s={class:"relative",style:{top:"2px","padding-right":"10px"}};a(57658);var n=a(56872),r=a(44924),o=a(61103),c=a(1299),d=a(33907),u=a(13589),p=a(38189),h=a(37671),g=a(34531);const m=[],v=[];var f={name:"AlarmDetail",i18n:a(89234),components:{DetailListItem:u.Z,DetailList:c.Z,PageLayout:o.Z,UsersResults:p.Z,CardSelector:g.Z,ExclamationOutlined:n.Z,UserOutlined:r.Z,InputList:h.Z},data(){return{UserOutlined:r.Z,channels:[{key:"System",value:"System"},{key:"Email",value:"Email"}],loading:!0,activeKey:"1",selectUsers:null,global:!1,levels:["error","warning"],columns:["resSize","res.status","latency"],opts:[">",">=","=","<=","<","in"],service:{list:[],key:"",pageSize:10,pageNo:1,total:0,loading:!0},api:{list:[],key:"",pageSize:10,pageNo:1,total:0,loading:!0},newRule:{col:null,opt:null,limit:"",value:""},users:[],receivers:[],targetTabKey:"Service Targets",targetTabs:[{key:"Service Targets",tab:"Service Targets"},{key:"API Targets",tab:"API Targets"}],detail:{name:null,channels:["System","Email"],users:[],content:{rules:[],targets:[]}},leftColumns:m,rightColumns:v}},computed:{...(0,d.rn)("setting",["isMobile"]),apiStart(){return(this.api.pageNo-1)*this.api.pageSize},serviceStart(){return(this.service.pageNo-1)*this.service.pageSize},dataChannels(){return this.channels.map((e=>(e.label=this.$t(e.key),e)))},dataleftColumns(){return[{dataIndex:"name",title:this.$t("Name")}]},datarightColumns(){return[{dataIndex:"name",title:this.$t("Name")}]}},created(){this.pid=this.$route.params.id||"",this.loadusers(),this.loadservice(),this.loadapi(),""!=this.pid?(this.loading=!0,this.$gql.query(`alarm(id: ${this.pid}){\n\t\t\t\tdata{id,attributes{\n\t\t\t\t\tname,\n\t\t\t\t\tcontent,\n\t\t\t\t\tscope,\n\t\t\t\t\tchannels,\n\t\t\t\t\tusers{data{id,attributes{\n\t\t\t\t\t\tusername,\n\t\t\t\t\t\tphone,\n\t\t\t\t\t\temail,\n\t\t\t\t\t\ttype,\n\t\t\t\t\t\trole{data{id,attributes{\n\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\ttype\n\t\t\t\t\t\t}}}\n\t\t\t\t\t}}},\n\t\t\t\t\tserviceTargets{data{id,attributes{name}}},\n\t\t\t\t\tapiTargets{data{id,attributes{name}}},\n\t\t\t\t}}\n\t\t\t}`).then((e=>{this.detail.name=e.data.name,this.detail.scope=e.data.scope,this.detail.channels=e.data.channels,this.detail.content=e.data.content,this.receivers=e.data.users,this.detail.serviceTargets=[],this.detail.apiTargets=[],e.data.serviceTargets.forEach((e=>{this.detail.serviceTargets.push(e.id)})),e.data.apiTargets.forEach((e=>{this.detail.apiTargets.push(e.id)})),"global"==this.detail.scope?this.global=!0:"service"==this.detail.scope?this.targetTabKey="Service Targets":"api"==this.detail.scope&&(this.targetTabKey="Api Targets"),this.loading=!1}))):(this.detail={name:"",users:[],channels:["System","Email"],content:{rules:[{col:null,opt:null,limit:"",value:""}],targets:[]}},this.loading=!1)},methods:{onTabChange(e){this.targetTabKey=e},loadusers(){this.$gql.query("usersPermissionsUsers(pagination: {start: 0, limit: 1000}){\n\t\t\t\t\t\tdata{id,attributes{\n\t\t\t\t\t\t\tusername,\n\t\t\t\t\t\t\tphone,\n\t\t\t\t\t\t\temail,\n\t\t\t\t\t\t\ttype,\n\t\t\t\t\t\t\trole{data{id,attributes{\n\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\ttype\n\t\t\t\t\t\t\t}}}\n\t\t\t\t\t\t}}\n\t\t\t\t\t}").then((e=>{this.users=e.data}))},valid(){return""!=this.detail.name||(this.$message.error(this.$t("The name cannot be empty"),3),!1)},save(){if(!this.valid())return;this.global?this.detail.scope="global":"Service Targets"==this.targetTabKey?this.detail.scope="service":"Api Targets"==this.targetTabKey&&(this.detail.scope="api"),this.detail.users=[],this.receivers.forEach((e=>{this.detail.users.push(e.id)}));const e={name:this.detail.name,scope:this.detail.scope,users:this.detail.users,channels:this.detail.channels,apiTargets:"global"==this.detail.scope?[]:this.detail.apiTargets,serviceTargets:"global"==this.detail.scope?[]:this.detail.serviceTargets,content:this.detail.content};""!=this.pid?this.$gql.mutation(`updateAlarm(id:${this.pid}, data: $data){data{id}}`,{data:e},{data:"AlarmInput!"}).then((()=>{this.$message.success(this.$t("Save successfully"),3),this.$closePage(this.$route)})):this.$gql.mutation("createAlarm(data: $data){data{id,attributes{name}}}",{data:e},{data:"AlarmInput!"}).then((e=>{this.pid=e.data.id,this.$message.success(this.$t("Created successfully"),3),this.$closePage(this.$route)}))},addUser(){this.receivers.push(this.users.find((e=>e.id==this.selectUsers))),this.selectUsers=null,this.activeKey="2"},delUser(e,t,a){let i=[];this.receivers.forEach((e=>{a.id!=e.id&&i.push(e)})),this.receivers=i},handleChange(){},hide(){this.visible=!1,this.save()},onServiceChange(e){this.detail.serviceTargets=e},onApiChange(e){this.detail.apiTargets=e},getRowSelection(e,t,a,i){return{getCheckboxProps:t=>({disabled:e||t.disabled}),onSelectAll(e,t){const i=t.filter((e=>!e.disabled)).map((({key:e})=>e));a(i,e)},onSelect(e,t){i(e.key,t)},selectedRowKeys:t}},apiSearch(e,t){"left"==e&&(this.api.key=t,this.loadapi())},serviceSearch(e,t){"left"==e&&(this.service.key=t,this.loadservice())},apiPagging(e,t){this.api.pageNo=e,this.api.pageSize=t},servicePagging(e,t){this.service.pageNo=e,this.service.pageSize=t},loadapi(e,t){e&&(this.api.pageNo=e,this.api.pageSize=t),this.api.loading=!0;const a={name:{contains:this.api.key}};this.$gql.query(`apis(filters: $filters, pagination:{start: ${this.apiStart}, limit: 9999}){\n\t\t\t\tdata{id,attributes{name}},meta{pagination{total}}\n\t\t\t}`,{filters:a},{filters:"ApiFiltersInput"}).then((e=>{this.api.list=e.data,this.api.list.forEach((e=>{e.key=`${e.id}`})),this.api.total=e.pagination.total,this.api.loading=!1}))},loadservice(e,t){e&&(this.service.pageNo=e,this.service.pageSize=t),this.service.loading=!0;const a={name:{contains:this.service.key}};this.$gql.query(`services(filters: $filters, pagination:{start: ${this.serviceStart}, limit: 9999}){\n\t\t\t\tdata{id,attributes{name}},meta{pagination{total}}\n\t\t\t}`,{filters:a},{filters:"ServiceFiltersInput"}).then((e=>{this.service.list=e.data,this.service.list.forEach((e=>{e.key=`${e.id}`})),this.service.total=e.pagination.total,this.service.loading=!1}))}}};var w=(0,a(83744).Z)(f,[["render",function(e,t,a,n,r,o){const c=(0,i.up)("a-input"),d=(0,i.up)("DetailListItem"),u=(0,i.up)("ExclamationOutlined"),p=(0,i.up)("a-select-option"),h=(0,i.up)("a-select"),g=(0,i.up)("InputList"),m=(0,i.up)("a-checkbox-group"),v=(0,i.up)("DetailList"),f=(0,i.up)("a-button"),w=(0,i.up)("CardSelector"),y=(0,i.up)("a-space"),b=(0,i.up)("a-switch"),k=(0,i.up)("a-table"),$=(0,i.up)("a-transfer"),T=(0,i.up)("a-card"),S=(0,i.up)("a-tab-pane"),C=(0,i.up)("UsersResults"),_=(0,i.up)("a-tabs"),z=(0,i.up)("a-col"),O=(0,i.up)("a-row"),j=((0,i.up)("UserOutlined"),(0,i.up)("PageLayout"));return(0,i.wg)(),(0,i.j4)(j,{title:r.detail.name?r.detail.name:e.$t("Alarm")},{headerContent:(0,i.w5)((()=>[(0,i.Wm)(v,{size:"small",col:1},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{term:e.$t("as")},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{placeholder:e.$t("unset"),value:r.detail.name,"onUpdate:value":t[0]||(t[0]=e=>r.detail.name=e),class:"width-200"},null,8,["placeholder","value"])])),_:1},8,["term"]),(0,i.Wm)(d,{term:e.$t("Rules")},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{width:600,d:r.detail.content.rules,attrs:r.newRule},{default:(0,i.w5)((({item:t})=>[(0,i.Wm)(h,{placeholder:e.$t("Level"),value:t.level,"onUpdate:value":e=>t.level=e,class:"width-80"},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{value:"error"},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{class:"exclamation-error"})])),_:1}),(0,i.Wm)(p,{value:"warning"},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{class:"exclamation-warning"})])),_:1})])),_:2},1032,["placeholder","value","onUpdate:value"]),(0,i.Wm)(h,{placeholder:e.$t("Column"),value:t.col,"onUpdate:value":e=>t.col=e,class:"width-120"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.columns,((e,t)=>((0,i.wg)(),(0,i.j4)(p,{value:e,key:t},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(e),1)])),_:2},1032,["value"])))),128))])),_:2},1032,["placeholder","value","onUpdate:value"]),(0,i.Wm)(h,{placeholder:e.$t("Operator"),value:t.opt,"onUpdate:value":e=>t.opt=e,class:"width-80"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.opts,((e,t)=>((0,i.wg)(),(0,i.j4)(p,{value:e,key:t},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(e),1)])),_:2},1032,["value"])))),128))])),_:2},1032,["placeholder","value","onUpdate:value"]),(0,i.Wm)(c,{value:t.value,"onUpdate:value":e=>t.value=e,placeholder:e.$t("Value"),class:"width-100"},null,8,["value","onUpdate:value","placeholder"]),(0,i.Wm)(c,{value:t.limit,"onUpdate:value":e=>t.limit=e,placeholder:e.$t("Limit"),class:"width-100"},null,8,["value","onUpdate:value","placeholder"])])),_:1},8,["d","attrs"])])),_:1},8,["term"]),(0,i.Wm)(d,{term:e.$t("Channels")},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{value:r.detail.channels,"onUpdate:value":t[1]||(t[1]=e=>r.detail.channels=e),name:"checkboxgroup",options:o.dataChannels},null,8,["value","options"])])),_:1},8,["term"])])),_:1})])),action:(0,i.w5)((()=>[(0,i.Wm)(y,null,{default:(0,i.w5)((()=>[(0,i.Wm)(w,{search:!0,icon:r.UserOutlined,onSelect:o.addUser,disabled:e=>{let t=!1;return(r.detail.users||[]).forEach((a=>{t=a.id==e.id||t})),t},options:r.users,value:r.selectUsers,"onUpdate:value":t[2]||(t[2]=e=>r.selectUsers=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(f,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(e.$t("Add Receiver")),1)])),_:1})])),_:1},8,["icon","onSelect","disabled","options","value"]),(0,i.Wm)(f,{type:"primary",onClick:o.save},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(""!=e.pid?e.$t("save"):e.$t("create")),1)])),_:1},8,["onClick"])])),_:1})])),default:(0,i.w5)((()=>[(0,i.Wm)(O,{class:"row-mg"},{default:(0,i.w5)((()=>[(0,i.Wm)(z,{class:"col-pd",xl:24,lg:24,md:24,sm:24,xs:24},{default:(0,i.w5)((()=>[(0,i.Wm)(_,{type:"card",activeKey:r.activeKey,"onUpdate:activeKey":t[7]||(t[7]=e=>r.activeKey=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(S,{key:"1",tab:e.$t("Scope")},{default:(0,i.w5)((()=>[(0,i.Wm)(T,{"tab-list":r.targetTabs,"active-tab-key":r.targetTabKey,onTabChange:t[6]||(t[6]=e=>o.onTabChange(e))},{customTab:(0,i.w5)((t=>[(0,i.Uk)((0,l.zw)(e.$t(t.key)),1)])),tabBarExtraContent:(0,i.w5)((()=>[(0,i._)("span",s,(0,l.zw)(e.$t("Global Apply")),1),(0,i.Uk)(),(0,i.Wm)(b,{checked:r.global,"onUpdate:checked":t[3]||(t[3]=e=>r.global=e)},null,8,["checked"])])),default:(0,i.w5)((()=>["Service Targets"==r.targetTabKey?((0,i.wg)(),(0,i.j4)($,{key:0,class:(0,l.C_)(r.global?"btn-disabled":""),titles:[" "+e.$t("target")," "+e.$t("Added")],"data-source":r.service.list,"target-keys":r.detail.serviceTargets,"onUpdate:target-keys":t[4]||(t[4]=e=>r.detail.serviceTargets=e),"show-search":!0,"filter-option":(e,t)=>-1!==t.name.indexOf(e),"show-select-all":!1,onSearch:o.serviceSearch,onChange:o.onServiceChange},{children:(0,i.w5)((({direction:t,filteredItems:a,selectedKeys:s,disabled:n,onItemSelectAll:c,onItemSelect:d})=>[(0,i.Wm)(k,{"row-selection":o.getRowSelection(n,s,c,d),columns:"left"===t?o.dataleftColumns:o.datarightColumns,"data-source":a,size:"small",pagination:"left"===t&&{onChange:o.servicePagging,current:r.service.pageNo,pageSize:r.service.pageSize,showTotal:(t,a)=>`${e.$t("Total")} ${t}`,total:e.total},style:(0,l.j5)({pointerEvents:n?"none":null}),"custom-row":({key:e,disabled:t})=>({onClick:()=>{t||n||d(e,!s.includes(e))}})},null,8,["row-selection","columns","data-source","pagination","style","custom-row"])])),_:1},8,["class","titles","data-source","target-keys","filter-option","onSearch","onChange"])):"API Targets"==r.targetTabKey?((0,i.wg)(),(0,i.j4)($,{key:1,class:(0,l.C_)(r.global?"btn-disabled":""),titles:[" "+e.$t("target")," "+e.$t("Added")],"data-source":r.api.list,"target-keys":r.detail.apiTargets,"onUpdate:target-keys":t[5]||(t[5]=e=>r.detail.apiTargets=e),"show-search":!0,"filter-option":(e,t)=>-1!==t.name.indexOf(e),"show-select-all":!1,onSearch:o.apiSearch,onChange:o.onApiChange},{children:(0,i.w5)((({direction:t,filteredItems:a,selectedKeys:s,disabled:n,onItemSelectAll:c,onItemSelect:d})=>[(0,i.Wm)(k,{"row-selection":o.getRowSelection(n,s,c,d),columns:"left"===t?o.dataleftColumns:o.datarightColumns,"data-source":a,size:"small",pagination:"left"===t&&{onChange:o.apiPagging,current:r.api.pageNo,pageSize:r.api.pageSize,showTotal:(t,a)=>`${e.$t("Total")} ${t}`,total:e.total},style:(0,l.j5)({pointerEvents:n?"none":null}),"custom-row":({key:e,disabled:t})=>({onClick:()=>{t||n||d(e,!s.includes(e))}})},null,8,["row-selection","columns","data-source","pagination","style","custom-row"])])),_:1},8,["class","titles","data-source","target-keys","filter-option","onSearch","onChange"])):(0,i.kq)("",!0)])),_:1},8,["tab-list","active-tab-key"])])),_:1},8,["tab"]),(0,i.Wm)(S,{key:"2",tab:e.$t("Receivers")},{default:(0,i.w5)((()=>[(0,i.Wm)(C,{loading:r.loading,actions:[{icon:"CloseOutlined",hide:!0,text:e.$t("Remove"),call:o.delUser}],users:r.receivers},null,8,["loading","actions","users"])])),_:1},8,["tab"])])),_:1},8,["activeKey"])])),_:1})])),_:1}),(0,i.kq)("",!0)])),_:1},8,["title"])}],["__scopeId","data-v-2516db32"]])},38189:function(e,t,a){a.d(t,{Z:function(){return u}});var i=a(66252),l=a(3577);const s={class:"mb-3"},n={class:"meta-content"};var r=a(38046),o=a(62967),c=a(77682),d={name:"UsersResults",components:{CardList:a(69596).Z,IdcardTwoTone:r.Z,CrownTwoTone:o.Z,CustomerServiceTwoTone:c.Z},i18n:a(89234),props:["users","total","pageNo","pageSize","loading","actions","noAction"],data(){return{pageNoVal:0}},computed:{},watch:{pageNoVal:{deep:!0,handler(){this.$emit("update:pageNo",this.pageNoVal)}}},mounted(){this.pageNoVal=this.pageNo},methods:{search(e,t,a){this.$emit("search",e,t,a)},remove(e,t,a){this.$emit("remove",e,t,a)},setting(e,t,a){this.$emit("setting",e,t,a)}}};var u=(0,a(83744).Z)(d,[["render",function(e,t,a,r,o,c){const d=(0,i.up)("a-tag"),u=(0,i.up)("CrownTwoTone"),p=(0,i.up)("CustomerServiceTwoTone"),h=(0,i.up)("IdcardTwoTone"),g=(0,i.up)("a-card-meta"),m=(0,i.up)("CardList"),v=(0,i.up)("a-pagination");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(m,{"hide-action-title":!0,loading:a.loading,"data-source":a.users,type:"component",actions:a.noAction?null:a.actions?a.actions:[{icon:"EditOutlined",text:e.$t("edit"),call:c.setting,permission:["user:update"]},{icon:"CloseOutlined",hide:!0,text:e.$t("delete"),call:c.remove,permission:["user:delete"]}]},{default:(0,i.w5)((({item:t})=>[(0,i.Wm)(g,null,{title:(0,i.w5)((()=>[(0,i._)("div",s,[(0,i.Uk)((0,l.zw)(t.username)+" ",1),t.role?((0,i.wg)(),(0,i.j4)(d,{key:0,color:"blue",class:"ml-10"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(t.role.name),1)])),_:2},1024)):(0,i.kq)("",!0)])])),avatar:(0,i.w5)((()=>[t.role&&"Authenticated"==t.role.name?((0,i.wg)(),(0,i.j4)(u,{key:0,"two-tone-color":"#00adef",class:"font-50"})):t.role&&"Public"==t.role.name?((0,i.wg)(),(0,i.j4)(p,{key:1,"two-tone-color":"#00adef",class:"font-50"})):((0,i.wg)(),(0,i.j4)(h,{key:2,"two-tone-color":"#00adef",class:"font-50"}))])),description:(0,i.w5)((()=>[(0,i._)("div",n,(0,l.zw)(e.$t("Email"))+"："+(0,l.zw)(t.email||e.$t("unset")),1)])),_:2},1024)])),_:1},8,["loading","data-source","actions"]),o.pageNoVal>=0?((0,i.wg)(),(0,i.j4)(v,{key:0,onChange:c.search,current:o.pageNoVal,"onUpdate:current":t[0]||(t[0]=e=>o.pageNoVal=e),total:a.total,"page-size":a.pageSize,"show-less-items":""},null,8,["onChange","current","total","page-size"])):(0,i.kq)("",!0)])}],["__scopeId","data-v-2057c1d0"]])}}]);