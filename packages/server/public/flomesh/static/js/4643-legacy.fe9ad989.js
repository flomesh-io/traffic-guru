(self.webpackChunkflomesh_load_balancer=self.webpackChunkflomesh_load_balancer||[]).push([[4643],{69098:function(t,e,n){"use strict";n(77710)("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),n(95631))},51532:function(t,e,n){n(69098)},79797:function(t,e,n){!function(){"use strict";var e=n(17536).typeOf;t.exports.stringify=function(t){var n,a="";return"---"+(n={undefined:function(){return"null"},null:function(){return"null"},number:function(t){return t},boolean:function(t){return t?"true":"false"},string:function(t){return JSON.stringify(t)},array:function(t){var i="";return 0===t.length?i+="[]":(a=a.replace(/$/,"  "),t.forEach((function(t){var r=n[e(t)];if(!r)throw new Error("what the crap: "+e(t));i+="\n"+a+"- "+r(t)})),a=a.replace(/  /,""),i)},object:function(t){var i="";return 0===Object.keys(t).length?i+="{}":(a=a.replace(/$/,"  "),Object.keys(t).forEach((function(r){var o=t[r],l=n[e(o)];if(void 0!==o){if(!l)throw new Error("what the crap: "+e(o));i+="\n"+a+r+": "+l(o)}})),a=a.replace(/  /,""),i)},function:function(){return"[object Function]"}})[e(t)](t)+"\n"}}()},17536:function(t){!function(){"use strict";var e,n,a=Function("return this")(),i="Boolean Number String Function Array Date RegExp Object".split(" "),r={};for(e in i)i.hasOwnProperty(e)&&(n=i[e],r["[object "+n+"]"]=n.toLowerCase());function o(t){return null==t?String(t):r[Object.prototype.toString.call(t)]||"object"}function l(t){var e,n;if("object"===o(t))for(e in t)if(void 0!==(n=t[e])&&"function"!==o(n))return!1;return!0}String.prototype.entityify||(String.prototype.entityify=function(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}),String.prototype.quote||(String.prototype.quote=function(){var t,e,n=this.length,a='"';for(e=0;e<n;e+=1)if((t=this.charAt(e))>=" ")"\\"!==t&&'"'!==t||(a+="\\"),a+=t;else switch(t){case"\b":a+="\\b";break;case"\f":a+="\\f";break;case"\n":a+="\\n";break;case"\r":a+="\\r";break;case"\t":a+="\\t";break;default:t=t.charCodeAt(),a+="\\u00"+Math.floor(t/16).toString(16)+(t%16).toString(16)}return a+'"'}),String.prototype.supplant||(String.prototype.supplant=function(t){return this.replace(/{([^{}]*)}/g,(function(e,n){var a=t[n];return"string"==typeof a||"number"==typeof a?a:e}))}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s*(\S*(?:\s+\S+)*)\s*$/,"$1")}),t.exports={typeOf:o,isEmpty:l},a.typeOf=a.typeOf||o,a.isEmpty=a.isEmpty||l}()},44107:function(t,e,n){"use strict";n.d(e,{Z:function(){return c}});var a=n(66252),i=n(3577);var r=n(3336),o=(n(38862),n(41539),n(21936)),l=n(8333),s=n(79797),u=n(93320),d={name:"Json2YamlCard",components:{JsonEditor:o.Z,YamlEditor:l.Z},props:["jsonVal","isCreate","height","isReadonly","url","isPop"],i18n:n(89234),data:function(){return{configTab:[{key:"YAML",tab:"YAML"},{key:"JSON",tab:"JSON"}],configKey:"YAML",json:"{}",yaml:""}},watch:{json:function(t,e){t!=e&&this.jsonInput(t)},yaml:function(t,e){t!=e&&this.yamlInput(t)},jsonVal:{handler:function(t,e){if("{}"!=t&&""!=t||(t='{"key":"value"}'),t!=e){var n=JSON.parse(t);"object"==(0,r.Z)(n)&&(this.json=t)}},immediate:!0}},created:function(){},mounted:function(){this.init()},methods:{onTabChange:function(t,e){this[e]=t},jsonInput:function(t){try{var e=JSON.parse(t);"object"==(0,r.Z)(e)&&(this.yaml=this.convertToYaml(t),this.$emit("update:jsonVal",this.json),this.$emit("change",this.json))}catch(t){}},yamlInput:function(t){var e=u.load(t),n=JSON.stringify(e,null,"  "),a=JSON.parse(n);"object"==(0,r.Z)(a)&&(this.$emit("update:jsonVal",n),this.$emit("change",n))},getDefaultYamlConfig:function(){var t=this;if(!this.url)return this.yaml=this.convertToYaml(this.jsonVal),void this.yamlInput(this.yaml);fetch(this.url).then((function(t){return t.text()})).then((function(e){t.url.indexOf(".yaml");var n=u.load(e),a=JSON.stringify(n,null,"  "),i=JSON.parse(a);i.spec&&i.spec.namespace&&(i.spec.namespace="_all"==localStorage.getItem("NAMESPACE")?"default":localStorage.getItem("NAMESPACE"));var r=JSON.stringify(i);t.yaml=t.convertToYaml(r),setTimeout((function(){t.yamlInput(t.yaml)}),2e3)})).catch((function(){}))},convertToYaml:function(t){if(""==t)return"";var e=JSON.parse(t);return s.stringify(e)},init:function(){this.isCreate?this.getDefaultYamlConfig():(this.yaml=this.convertToYaml(this.jsonVal),this.yamlInput(this.yaml))}}};var c=(0,n(83744).Z)(d,[["render",function(t,e,n,r,o,l){var s=(0,a.up)("YamlEditor"),u=(0,a.up)("JsonEditor"),d=(0,a.up)("a-button"),c=(0,a.up)("a-card");return(0,a.wg)(),(0,a.j4)(c,{class:(0,i.C_)(["card nopd",n.isPop?"isPop":""]),"tab-list":o.configTab,"active-tab-key":o.configKey,onTabChange:e[2]||(e[2]=function(t){return l.onTabChange(t,"configKey")}),bordered:!1},{tabBarExtraContent:(0,a.w5)((function(){return[n.url?((0,a.wg)(),(0,a.j4)(d,{key:0,type:"dashed",onClick:l.getDefaultYamlConfig},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,i.zw)(t.$t("reset")),1)]})),_:1},8,["onClick"])):(0,a.kq)("",!0)]})),default:(0,a.w5)((function(){return["YAML"==o.configKey?((0,a.wg)(),(0,a.j4)(s,{key:0,height:n.height,"is-readonly":n.isReadonly,value:o.yaml,"onUpdate:value":e[0]||(e[0]=function(t){return o.yaml=t})},null,8,["height","is-readonly","value"])):(0,a.kq)("",!0),"JSON"==o.configKey?((0,a.wg)(),(0,a.j4)(u,{key:1,height:n.height,"is-readonly":n.isReadonly,"is-json":!0,noreset:!n.isReadonly,value:o.json,"onUpdate:value":e[1]||(e[1]=function(t){return o.json=t})},null,8,["height","is-readonly","noreset","value"])):(0,a.kq)("",!0)]})),_:1},8,["class","tab-list","active-tab-key"])}]])},990:function(t,e,n){"use strict";n.d(e,{Z:function(){return l}});var a=n(66252),i={class:"DashboardCore"};var r=n(56912),o={name:"Dashboard",i18n:n(89234),components:{DashboardCore:r.Z},props:["pageId","prometheus","apply","params","hideAdd","init","defaultWidget"],data:function(){return{prometheusVal:null}},computed:{},watch:{prometheus:function(t){this.prometheusVal=t}},created:function(){},mounted:function(){this.prometheusVal=this.prometheus},methods:{prometheusChange:function(){this.$emit("update:prometheus",this.prometheusVal),this.$emit("prometheusChange",this.prometheusVal)}}};var l=(0,n(83744).Z)(o,[["render",function(t,e,n,r,o,l){var s=(0,a.up)("DashboardCore");return(0,a.wg)(),(0,a.iD)("div",i,[(0,a.Wm)(s,{"hide-add":n.hideAdd,init:n.init,"hide-head":!0,"page-id":n.pageId,params:n.params,kind:n.apply,prometheus:o.prometheusVal,"onUpdate:prometheus":e[0]||(e[0]=function(t){return o.prometheusVal=t}),onPrometheusChange:l.prometheusChange,apply:n.apply+"."+n.pageId,embed:!0,"default-widget":n.defaultWidget},null,8,["hide-add","init","page-id","params","kind","prometheus","onPrometheusChange","apply","default-widget"])])}]])},69384:function(t,e,n){"use strict";n.d(e,{Z:function(){return _}});n(68309),n(47941);var a=n(66252),i=n(3577),r=n(49963),o={key:0,class:"width-180"},l={key:0},s={class:"font-primary",href:"javascript:void(0)"},u={key:1},d={class:"font-primary",href:"javascript:void(0)"},c={key:2};var p=n(66347),f=n(95082),m=(n(74916),n(64765),n(69600),n(57658),n(92222),n(57327),n(41539),n(51532),n(78783),n(33948),n(69826),n(54747),n(38862),n(73210),n(21249),n(96486)),h=n.n(m),g=n(60459),v=n(21936),w=n(61103),y=n(1299),b=n(13589),k=n(33907),$=n(44218),S={name:"ServicesBaseDetail",i18n:n(89234),components:{JsonEditor:v.Z,DetailListItem:b.Z,DetailList:y.Z,PageLayout:w.Z,PlusOutlined:$.Z,EnvSelector:g.Z},props:["loading","pid","namespace","contentString","detail","registry","extend","hasExport","blacklistServices","whitelistServices","subscribeServices","subscribeServicesTo","subscribeServicesAll"],data:function(){return{orgs:[],sidecars:[],ns:null,visibleAP:!1,dialTestings:[],whiteAddress:[],blackAddress:[],visible:!1,aclKey:"2",labelVisible:!1,labelValue:"",annotationVisible:!1,creationTimestamp:"-",annotationValue:"",certificates:[],organization:{id:null},sidecar:null,isGateway:null,gatewayPath:null,upstreamVersion:null,isMounted:!1}},computed:(0,f.Z)({},(0,k.rn)({rules:function(t){return t.rules.rules},isMobile:function(t){return t.setting.isMobile}})),created:function(){},mounted:function(){var t=this;if(this.isMounted=!0,this.$gql.query("organizations{data{id,attributes{name}}}").then((function(e){t.orgs=e.data})),this.$gql.query('fleets(filters:{type:{eq:"sidecar"}}){data{id,attributes{name}}}').then((function(e){t.sidecars=e.data})),""!=this.pid)this.search();else{var e={endpoints:[],spec:{type:"",clusterIP:"",sessionAffinity:"",ports:[]},metadata:{name:"",namespace:this.namespace,labels:{},annotations:{}},typeMeta:{},podInfo:{},containerImages:[],selector:{},statusInfo:{},conditions:[],rollingUpdateStrategy:{maxUnavailable:"",maxSurge:""}};this.$emit("update:detail",e),this.$emit("update:extend",{certificates:[],identitys:{},log:{level:"None"},plugins:[]}),this.$emit("update:loading",!1)}},methods:{envChange:function(t){var e=this.detail;e.metadata.namespace=t.namespace,this.ns=t.namespaceId,this.$emit("update:registry",{id:t.registerId,name:t.registerName}),this.$emit("update:detail",e)},handleClose:function(t,e){delete t[e];var n=this.detail;this.$emit("update:detail",n)},labelShowInput:function(){var t=this;this.labelVisible=!0,this.$nextTick().then((function(){t.$refs.labelRef.focus()}))},labelInputConfirm:function(){if(""!=this.labelValue){var t=this.labelValue.split(":");if(t.length<2)this.$message.error({content:this.$t("Please enter the format of [key]:[value]")});else{var e=this.detail;e.metadata.labels=e.metadata.labels||{},e.metadata.labels[t.shift()]=t.join(":"),this.labelValue="",this.labelVisible=!1,this.$emit("update:detail",e)}}else this.labelVisible=!1},annotationShowInput:function(){var t=this;this.annotationVisible=!0,this.$nextTick().then((function(){t.$refs.annotationRef.focus()}))},annotationInputConfirm:function(){if(""!=this.annotationValue){var t=this.annotationValue.split(":");if(t.length<2)this.$message.error({content:this.$t("Please enter the format of [key]:[value]")});else{var e=this.detail;e.metadata.annotations=e.metadata.annotations||{},e.metadata.annotations[t.shift()]=t.join(":"),this.annotationValue="",this.annotationVisible=!1,this.$emit("update:detail",e)}}else this.annotationVisible=!1},k8sDetail:function(){this.$router.push({path:"/ops-center/registry/detail/"+this.registry.id})},search:function(){var t=this;this.$emit("update:loading",!0),this.$gql.query("getService(id: ".concat(this.pid,"){data{id,attributes{\n\t\t\t\t\t\tserviceExport{data{id}},\n\t\t\t\t\t\tpods,\n\t\t\t\t\t\tcontent,\n\t\t\t\t\t\tns{data{id,attributes{name}}},\n\t\t\t\t\t\tisGateway,\n\t\t\t\t\t\tgatewayPath,\n            upstreamVersion,\n\t\t\t\t\t\torganization{data{id,attributes{\n\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\twhiteOrgs{data{id,attributes{\n\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\tservices{data{id,attributes{\n\t\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\t\tcontent,\n\t\t\t\t\t\t\t\t\torganization{data{id,attributes{name}}},\n\t\t\t\t\t\t\t\t\tregistry{data{id,attributes{type,name,content}}},\n\t\t\t\t\t\t\t\t\tnamespace,\n\t\t\t\t\t\t\t\t\tblacklistServices{data{id}},\n                  updatedAt\n\t\t\t\t\t\t\t\t}}}\n\t\t\t\t\t\t\t}}},\n\t\t\t\t\t\t\twhiteOrgsBack{data{id,attributes{\n\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\tservices{data{id,attributes{\n\t\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\t\tcontent,\n\t\t\t\t\t\t\t\t\torganization{data{id,attributes{name}}},\n\t\t\t\t\t\t\t\t\tregistry{data{id,attributes{type,name,content}}},\n\t\t\t\t\t\t\t\t\tnamespace,\n\t\t\t\t\t\t\t\t\tblacklistServices{data{id}},\n                  updatedAt\n\t\t\t\t\t\t\t\t}}}\n\t\t\t\t\t\t\t}}},\n\t\t\t\t\t\t\tservices{data{id,attributes{\n\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\tcontent,\n\t\t\t\t\t\t\t\torganization{data{id,attributes{name}}},\n\t\t\t\t\t\t\t\tregistry{data{id,attributes{type,name,content}}},\n\t\t\t\t\t\t\t\tnamespace,\n\t\t\t\t\t\t\t\tblacklistServices{data{id}},\n                updatedAt\n\t\t\t\t\t\t\t}}},\n\t\t\t\t\t\t\tsubscribeServices{data{id,attributes{\n\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\tcontent,\n\t\t\t\t\t\t\t\torganization{data{id,attributes{name}}},\n\t\t\t\t\t\t\t\tregistry{data{id,attributes{type,name,content}}},\n\t\t\t\t\t\t\t\tnamespace,\n\t\t\t\t\t\t\t\tblacklistServices{data{id}},\n                updatedAt\n\t\t\t\t\t\t\t}}}\n\t\t\t\t\t\t}}},\n\t\t\t\t\t\textend,\n\t\t\t\t\t\tcertificates{data{id,attributes{name,content}}},\n\t\t\t\t\t\tuid,\n\t\t\t\t\t\tname,\n\t\t\t\t\t\tfleet{data{id,attributes{name}}},\n\t\t\t\t\t\tregistry{data{id,attributes{type,name,content}}},\n\t\t\t\t\t\tcreatedAt, \n\t\t\t\t\t\tsubscribeOrgs{data{id,attributes{\n\t\t\t\t\t\t\tservices{data{id,attributes{\n\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\tcontent,\n\t\t\t\t\t\t\t\torganization{data{id,attributes{name}}},\n\t\t\t\t\t\t\t\tregistry{data{id,attributes{type,name,content}}},\n\t\t\t\t\t\t\t\tnamespace\n\t\t\t\t\t\t\t}}}\n\t\t\t\t\t\t}}},\n\t\t\t\t\t\twhitelistServices{data{id,attributes{name,namespace,registry{data{id,attributes{type,name}}}}}},\n\t\t\t\t\t\tblacklistServices{data{id,attributes{name,namespace,registry{data{id,attributes{type,name}}}}}},\n\t\t\t\t\t\tsidecar{data{id,attributes{name}}}\n\t\t\t\t\t}}}")).then((function(e){var n=e.data,a=[],i=[];if(n.organization&&n.organization.services&&n.organization.services.length>0&&(i=(a=a.concat(n.organization.services.filter((function(e){return e.id!=t.pid})))).concat(n.organization.services.filter((function(e){return e.id!=t.pid})))),n.subscribeOrgs&&n.subscribeOrgs.length){var r,o=(0,p.Z)(n.subscribeOrgs);try{for(o.s();!(r=o.n()).done;){var l=r.value;l.services&&l.services.length&&(a=a.concat(l.services))}}catch(t){o.e(t)}finally{o.f()}}if(n.organization&&n.organization.whiteOrgs&&n.organization.whiteOrgs.length){var s,u=(0,p.Z)(n.organization.whiteOrgs);try{for(u.s();!(s=u.n()).done;){var d=s.value;d.services&&d.services.length&&(a=a.concat(d.services))}}catch(t){u.e(t)}finally{u.f()}}n.content.whiteExcludedPath||(n.content.whiteExcludedPath={}),n.content.blackExcludedPath||(n.content.blackExcludedPath={});var c,f=(0,p.Z)(a);try{for(f.s();!(c=f.n()).done;){var m=c.value;n.content.whiteExcludedPath[m.id]||(n.content.whiteExcludedPath[m.id]=""),n.content.blackExcludedPath[m.id]||(n.content.blackExcludedPath[m.id]="")}}catch(t){f.e(t)}finally{f.f()}var g=new Map,v=n.whitelistServices?n.whitelistServices:[],w=n.blacklistServices?n.blacklistServices:[];a=a.filter((function(t){return!g.has(t.id)&&g.set(t.id,1)}));var y=h().cloneDeep(a);if(a=a.filter((function(t){return!v.concat(w).find((function(e){return e.id==t.id}))})),n.organization&&n.organization.subscribeServices&&(i=a.concat(n.organization.subscribeServices.filter((function(e){return e.id!=t.pid})))),n.organization&&n.organization.whiteOrgsBack&&n.organization.whiteOrgsBack.length){var b,k=(0,p.Z)(n.organization.whiteOrgsBack);try{for(k.s();!(b=k.n()).done;){var $=b.value;$.services&&$.services.length&&(i=a.concat($.services))}}catch(t){k.e(t)}finally{k.f()}}g=new Map,i=(i=i.filter((function(t){return!g.has(t.id)&&g.set(t.id,1)}))).filter((function(e){return!(e.blacklistServices&&e.blacklistServices.find((function(e){return e.id==t.pid})))})),t.creationTimestamp=new Date(n.createdAt).toLocaleString();var S=n.extend||{},_=n.content;_.spec||(_.spec={ports:[]}),_.endpoints||(_.endpoints=[]);var x=n.registry,C=n.ns;t.organization=n.organization?n.organization:{id:null},t.sidecar=n.sidecar?n.sidecar.id:null,t.isGateway=n.isGateway,t.gatewayPath=n.gatewayPath,t.upstreamVersion=n.upstreamVersion,_.endpoints&&_.endpoints.forEach((function(t){t.isedit=!1,t.port_val=t.ports?h().reduce(t.ports,(function(t,e){var n=e.name+"/"+e.port+"/"+e.protocol;return t?t+"\n"+n:n}),0):""})),S.identitys||(S.identitys={}),S.plugins||(S.plugins=[]),S.certificates||(S.certificates=[]),n.certificates&&n.certificates.length>0&&S.certificates.forEach((function(t){n.certificates.forEach((function(e){t.id==e.id&&(t.name=e.name,t.content=e.content)}))})),S.log||(S.log={}),S.log.level||(S.log.level="None"),t.$emit("update:contentString",JSON.stringify(_)),t.$emit("update:detail",_),t.$emit("update:extend",S),t.$emit("update:registry",x),t.$emit("update:ns",C),t.$emit("update:pods",n.pods||[]),t.$emit("update:whitelistServices",v),t.$emit("update:blacklistServices",w),t.$emit("update:subscribeServicesAll",y),t.$emit("update:subscribeServicesTo",i),t.$emit("update:subscribeServices",a),t.$emit("update:loading",!1),t.$emit("update:hasExport",!!n.serviceExport)}))},valid:function(){return""!=this.detail.metadata.name||(this.$message.error(this.$t("The name cannot be empty"),3),!1)},saveLogLevel:function(t){this.extend.log.level=t.logLevel,this.save(!0)},getSaveData:function(){var t=h().cloneDeep(this.detail);return t.endpoints&&t.endpoints.forEach((function(t){delete t.isedit,t.ports=[],t.port_val.trim().split("\n").forEach((function(e){var n=e.split("/");t.ports.push({name:n[0],port:n[1],protocol:n[2]})})),delete t.port_val})),t.spec.ports&&t.spec.ports.forEach((function(t){delete t.isedit,t.port=1*t.port})),this.$emit("update:contentString",JSON.stringify(t)),t},setSaveData:function(){var t=JSON.parse(this.contentString);this.$emit("update:detail",t)},save:function(t){var e,n=this;if(this.valid()){var a=this.getSaveData(),i=h().cloneDeep(this.extend),r=[];i.certificates&&i.certificates.length>0&&(r=[],i.certificates.forEach((function(t){r.push(t.id)})));var o={name:this.detail.metadata.name,organization:null===(e=this.organization)||void 0===e?void 0:e.id,isGateway:this.isGateway,gatewayPath:this.gatewayPath,upstreamVersion:this.upstreamVersion,sidecar:this.sidecar||null,content:a,certificates:r,extend:i,whitelistServices:this.whitelistServices.map((function(t){return t.id})),blacklistServices:this.blacklistServices.map((function(t){return t.id}))};""!=this.pid?this.$gql.mutation("updateServiceSync(id: ".concat(this.pid,", data: $data){data{id}}"),{data:o},{data:"ServiceInput!"}).then((function(){n.$message.success(n.$t("Save successfully"),3),1!=t&&n.$closePage(n.$route)})):(o.namespace=this.detail.metadata.namespace,o.registry=this.registry.id,this.$gql.mutation("createServiceSync(data: $data){data{id}}",{data:o},{data:"ServiceInput!"}).then((function(t){n.$emit("update:pid",t.data.id),n.$message.success(n.$t("Created successfully"),3),n.$closePage(n.$route)})))}},validate:function(){var t=this;this.$refs.layout.$refs.form.validateFields().then((function(){t.save()})).catch((function(){}))}}};var _=(0,n(83744).Z)(S,[["render",function(t,e,n,p,f,m){var h=(0,a.up)("DetailListItem"),g=(0,a.up)("a-input"),v=(0,a.up)("EnvSelector"),w=(0,a.up)("a-tag"),y=(0,a.up)("a-select-option"),b=(0,a.up)("a-select"),k=(0,a.up)("a-switch"),$=(0,a.up)("DetailList"),S=(0,a.up)("PlusOutlined"),_=(0,a.up)("a-tooltip"),x=(0,a.up)("JsonEditor"),C=(0,a.up)("a-popover"),j=(0,a.up)("a-button"),z=(0,a.up)("a-space"),W=(0,a.up)("a-col"),D=(0,a.up)("a-row"),U=(0,a.up)("PageLayout"),I=(0,a.Q2)("permission");return(0,a.wg)(),(0,a.j4)(U,{title:t.$t("Service"),"form-state":n.detail,ref:"layout"},{headerContent:(0,a.w5)((function(){return[(0,a.Wm)($,{size:"small",col:1},{default:(0,a.w5)((function(){return[""!=n.pid?((0,a.wg)(),(0,a.j4)(h,{key:0,term:t.$t("UID")},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,i.zw)(n.detail.metadata.uid),1)]})),_:1},8,["term"])):(0,a.kq)("",!0),""!=n.pid?((0,a.wg)(),(0,a.j4)(h,{key:1,term:t.$t("as")},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,i.zw)(n.detail.metadata.name),1)]})),_:1},8,["term"])):((0,a.wg)(),(0,a.j4)(h,{key:2,term:t.$t("as"),rules:t.rules.uniqueName("services",{ns:f.ns,id:n.pid}),name:["metadata","name"]},{default:(0,a.w5)((function(){return[(0,a.Wm)(g,{placeholder:t.$t("unset"),value:n.detail.metadata.name,"onUpdate:value":e[0]||(e[0]=function(t){return n.detail.metadata.name=t}),class:"bold width-300"},null,8,["placeholder","value"])]})),_:1},8,["term","rules"])),""==n.pid?((0,a.wg)(),(0,a.j4)(h,{key:3,term:t.$t("Registry")+" / "+t.$t("Namespace")},{default:(0,a.w5)((function(){return[(0,a.Wm)(v,{"no-all":!0,"is-filter":!0,onEnvChange:m.envChange},null,8,["onEnvChange"])]})),_:1},8,["term"])):(0,a.kq)("",!0),""!=n.pid?((0,a.wg)(),(0,a.j4)(h,{key:4,term:t.$t("Registry Center")},{default:(0,a.w5)((function(){return[(0,a.Wm)(w,{class:"click-icon",onClick:m.k8sDetail,closable:!1},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,i.zw)(n.registry.name),1)]})),_:1},8,["onClick"])]})),_:1},8,["term"])):(0,a.kq)("",!0),""!=n.pid?((0,a.wg)(),(0,a.j4)(h,{key:5,term:t.$t("Namespace")},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,i.zw)(n.detail.metadata.namespace||"default"),1)]})),_:1},8,["term"])):(0,a.kq)("",!0),t.$isPro?((0,a.wg)(),(0,a.j4)(h,{key:6,term:t.$t("Organization"),name:"organization"},{default:(0,a.w5)((function(){return[(0,a.wy)(((0,a.wg)(),(0,a.j4)(b,{placeholder:t.$t("unset"),value:f.organization.id,"onUpdate:value":e[1]||(e[1]=function(t){return f.organization.id=t}),class:"width-180",ref:"select"},{default:(0,a.w5)((function(){return[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(f.orgs,(function(t,e){return(0,a.wg)(),(0,a.j4)(y,{value:t.id,key:e},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,i.zw)(t.name),1)]})),_:2},1032,["value"])})),128))]})),_:1},8,["placeholder","value"])),[[I,n.pid?["admin"]:""]]),n.pid?((0,a.wg)(),(0,a.iD)("div",o,[(0,a.wy)(((0,a.wg)(),(0,a.j4)(w,null,{default:(0,a.w5)((function(){var t;return[(0,a.Uk)((0,i.zw)(null===(t=f.organization)||void 0===t?void 0:t.name),1)]})),_:1})),[[I,["!admin"]]])])):(0,a.kq)("",!0)]})),_:1},8,["term"])):(0,a.kq)("",!0),t.$isPro?((0,a.wg)(),(0,a.j4)(h,{key:7,term:t.$t("Sidecar")},{default:(0,a.w5)((function(){return[(0,a.Wm)(b,{placeholder:t.$t("unset"),value:f.sidecar,"onUpdate:value":e[2]||(e[2]=function(t){return f.sidecar=t}),class:"width-180",ref:"select","allow-clear":""},{default:(0,a.w5)((function(){return[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(f.sidecars,(function(t,e){return(0,a.wg)(),(0,a.j4)(y,{value:t.id,key:e},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,i.zw)(t.name),1)]})),_:2},1032,["value"])})),128))]})),_:1},8,["placeholder","value"])]})),_:1},8,["term"])):(0,a.kq)("",!0),t.$isPro?((0,a.wg)(),(0,a.j4)(h,{key:8,term:t.$t("Gateway Path")},{default:(0,a.w5)((function(){return[(0,a.Wm)(g,{placeholder:t.$t("unset"),value:f.gatewayPath,"onUpdate:value":e[3]||(e[3]=function(t){return f.gatewayPath=t}),class:"width-300"},null,8,["placeholder","value"])]})),_:1},8,["term"])):(0,a.kq)("",!0),t.$isPro?((0,a.wg)(),(0,a.j4)(h,{key:9,term:t.$t("Upstream Version")},{default:(0,a.w5)((function(){return[(0,a.Wm)(g,{placeholder:t.$t("unset"),value:f.upstreamVersion,"onUpdate:value":e[4]||(e[4]=function(t){return f.upstreamVersion=t}),class:"width-300"},null,8,["placeholder","value"])]})),_:1},8,["term"])):(0,a.kq)("",!0),t.$isPro?((0,a.wg)(),(0,a.j4)(h,{key:10,term:t.$t("Is Gateway")},{default:(0,a.w5)((function(){return[(0,a.Wm)(k,{checked:f.isGateway,"onUpdate:checked":e[5]||(e[5]=function(t){return f.isGateway=t})},null,8,["checked"])]})),_:1},8,["term"])):(0,a.kq)("",!0)]})),_:1}),(0,a.Wm)($,{size:"small",col:1},{default:(0,a.w5)((function(){return[(0,a.Wm)(h,{term:t.$t("Labels")},{default:(0,a.w5)((function(){return[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(Object.keys(n.detail.metadata.labels||[]),(function(t,e){return(0,a.wg)(),(0,a.j4)(w,{key:e,onClose:function(e){return m.handleClose(n.detail.metadata.labels,t)},closable:!0},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,i.zw)(t)+":"+(0,i.zw)(n.detail.metadata.labels[t]),1)]})),_:2},1032,["onClose"])})),128)),(0,a.wy)((0,a.Wm)(g,{ref:"labelRef",type:"text",size:"small",class:"width-100",placeholder:"[KEY:VALUE]",value:f.labelValue,"onUpdate:value":e[6]||(e[6]=function(t){return f.labelValue=t}),onBlur:m.labelInputConfirm,onKeyup:(0,r.D2)(m.labelInputConfirm,["enter"])},null,8,["value","onBlur","onKeyup"]),[[r.F8,f.labelVisible]]),f.labelVisible?(0,a.kq)("",!0):(0,a.wy)(((0,a.wg)(),(0,a.j4)(w,{key:0,onClick:m.labelShowInput,class:"dashed-tag"},{default:(0,a.w5)((function(){return[(0,a.Wm)(S),(0,a.Uk)(" "+(0,i.zw)(t.$t("add")),1)]})),_:1},8,["onClick"])),[[I,["service:update"]]])]})),_:1},8,["term"]),(0,a.Wm)(h,{term:t.$t("Annotations")},{default:(0,a.w5)((function(){return[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(Object.keys(n.detail.metadata.annotations||[]),(function(t,e){return(0,a.wg)(),(0,a.j4)(w,{key:e,onClose:function(e){return m.handleClose(n.detail.metadata.annotations,t)},closable:!0,class:"mb-5"},{default:(0,a.w5)((function(){return["objectset.rio.cattle.io/applied"==t?((0,a.wg)(),(0,a.iD)("span",l,[(0,a.Wm)(_,{placement:"topLeft",title:n.detail.metadata.annotations[t]},{default:(0,a.w5)((function(){return[(0,a._)("a",s,(0,i.zw)(t),1)]})),_:2},1032,["title"])])):"kubectl.kubernetes.io/last-applied-configuration"==t?((0,a.wg)(),(0,a.iD)("span",u,[(0,a.Wm)(C,{trigger:"click",title:t},{content:(0,a.w5)((function(){return[(0,a.Wm)(x,{"is-json":!0,value:n.detail.metadata.annotations[t]},null,8,["value"])]})),default:(0,a.w5)((function(){return[(0,a._)("a",d,(0,i.zw)(t),1)]})),_:2},1032,["title"])])):((0,a.wg)(),(0,a.iD)("span",c,(0,i.zw)(t)+":"+(0,i.zw)(n.detail.metadata.annotations[t]),1))]})),_:2},1032,["onClose"])})),128)),(0,a.wy)((0,a.Wm)(g,{ref:"annotationRef",type:"text",size:"small",class:"width-100",placeholder:"[KEY:VALUE]",value:f.annotationValue,"onUpdate:value":e[7]||(e[7]=function(t){return f.annotationValue=t}),onBlur:m.annotationInputConfirm,onKeyup:(0,r.D2)(m.annotationInputConfirm,["enter"])},null,8,["value","onBlur","onKeyup"]),[[r.F8,f.annotationVisible]]),f.annotationVisible?(0,a.kq)("",!0):(0,a.wy)(((0,a.wg)(),(0,a.j4)(w,{key:0,onClick:m.annotationShowInput,class:"dashed-tag"},{default:(0,a.w5)((function(){return[(0,a.Wm)(S),(0,a.Uk)(" "+(0,i.zw)(t.$t("add")),1)]})),_:1},8,["onClick"])),[[I,["service:update"]]])]})),_:1},8,["term"]),""!=n.pid?((0,a.wg)(),(0,a.j4)(h,{key:0,term:t.$t("Creation Timestamp")},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,i.zw)(f.creationTimestamp),1)]})),_:1},8,["term"])):(0,a.kq)("",!0)]})),_:1})]})),extra:(0,a.w5)((function(){return[(0,a.WI)(t.$slots,"extra",{},void 0,!0)]})),action:(0,a.w5)((function(){return[(0,a.Wm)(z,null,{default:(0,a.w5)((function(){return[(0,a.WI)(t.$slots,"action",{},void 0,!0),""!=n.pid?(0,a.wy)(((0,a.wg)(),(0,a.j4)(j,{key:0,type:"primary",onClick:m.validate},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,i.zw)(t.$t("save")),1)]})),_:1},8,["onClick"])),[[I,["service:update"]]]):(0,a.wy)(((0,a.wg)(),(0,a.j4)(j,{key:1,type:"primary",onClick:m.validate},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,i.zw)(t.$t("create")),1)]})),_:1},8,["onClick"])),[[I,["service:create"]]])]})),_:3})]})),default:(0,a.w5)((function(){return[(0,a.Wm)(D,{class:"row-mg"},{default:(0,a.w5)((function(){return[(0,a.Wm)(W,{class:"col-pd",xl:24,lg:24,md:24,sm:24,xs:24},{default:(0,a.w5)((function(){return[(0,a.WI)(t.$slots,"tabs",{},void 0,!0)]})),_:3})]})),_:3})]})),_:3},8,["title","form-state"])}],["__scopeId","data-v-0be2eb84"]])},9112:function(t,e,n){"use strict";n.d(e,{Z:function(){return h}});var a=n(66252),i=n(3577);var r=n(96486),o=n.n(r),l=n(75523);var s=n(95082),u=n(76754),d=n(33907),c={name:"ServiceExportForm",i18n:n(89234),components:{FormItem:u.Z},props:["d","ports"],data:function(){return{payload:{content:{portNumber:null,path:""}}}},computed:(0,s.Z)({},(0,d.rn)("rules",["rules"])),watch:{d:{deep:!0,immediate:!0,handler:function(t){this.payload=t}}},created:function(){},methods:{}},p=n(83744);var f=(0,p.Z)(c,[["render",function(t,e,n,r,o,l){var s=(0,a.up)("a-input"),u=(0,a.up)("FormItem"),d=(0,a.up)("a-descriptions-item"),c=(0,a.up)("a-select-option"),p=(0,a.up)("a-select"),f=(0,a.up)("a-descriptions");return n.d?((0,a.wg)(),(0,a.j4)(f,{key:0,bordered:"",class:"bg-white"},{default:(0,a.w5)((function(){return[(0,a.Wm)(d,{label:t.$t("path"),span:3},{default:(0,a.w5)((function(){return[(0,a.Wm)(u,{name:["content","path"],rules:t.rules.path},{default:(0,a.w5)((function(){return[(0,a.Wm)(s,{value:n.d.content.path,"onUpdate:value":e[0]||(e[0]=function(t){return n.d.content.path=t}),placeholder:t.$t("unset")},null,8,["value","placeholder"])]})),_:1},8,["rules"])]})),_:1},8,["label"]),(0,a.Wm)(d,{label:t.$t("Port"),span:3},{default:(0,a.w5)((function(){return[(0,a.Wm)(u,{name:["content","portNumber"],rules:t.rules.numberRequired},{default:(0,a.w5)((function(){return[(0,a.Wm)(p,{placeholder:t.$t("unset"),value:n.d.content.portNumber,"onUpdate:value":e[1]||(e[1]=function(t){return n.d.content.portNumber=t}),class:"width-180",ref:"select","allow-clear":""},{default:(0,a.w5)((function(){return[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.ports,(function(t,e){return(0,a.wg)(),(0,a.j4)(c,{value:t.port,key:e},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,i.zw)(t.port),1)]})),_:2},1032,["value"])})),128))]})),_:1},8,["placeholder","value"])]})),_:1},8,["rules"])]})),_:1},8,["label"])]})),_:1})):(0,a.kq)("",!0)}]]),m={name:"ServiceExportCard",i18n:n(89234),components:{ServiceImportList:l.Z,ServiceExportForm:f},props:["modal","sid","isEdit","ports"],data:function(){return{visible:!1,loading:!0,saveLoading:!1,pid:null,payload:{content:{portNumber:0,path:""}}}},watch:{modal:{deep:!0,immediate:!0,handler:function(t){this.visible=t}}},created:function(){this.visible=this.modal,this.loadData()},methods:{loadData:function(){var t=this;this.loading=!0;var e={service:{id:{eq:this.sid}}};this.$gql.query("serviceExports(filters: $filters, pagination:{ start: 0, limit: ".concat(this.$DFT_LIMIT," }){\n\t\t\t\t\t\tdata{id,attributes{\n\t\t\t\t\t\t  service{data{id,attributes{name}}},\n\t\t\t\t\t\t\tcontent\n\t\t\t\t\t\t}}\n\t\t\t\t\t}"),{filters:e},{filters:"ServiceExportFiltersInput"}).then((function(e){t.loading=!1,e.data&&e.data.length>0?(t.payload=e.data[0],t.pid=e.data[0].id,t.$emit("update:isEdit",!0)):(t.ports.length>0&&(t.payload.content.portNumber=t.ports[0].port),t.$emit("update:isEdit",!1))}))},createValid:function(){var t=this;this.$refs.createForm.validateFields().then((function(){t.save()})).catch((function(){}))},saveValid:function(){var t=this;this.$refs.updateForm.validateFields().then((function(){t.save()})).catch((function(){}))},remove:function(){var t=this;this.$gql.mutation("deleteServiceExport(id:".concat(this.pid,"){data{id}}")).then((function(){t.$message.success(t.$t("Deleted successfully"),3),t.$emit("update:isEdit",!1),t.pid=null,t.loadData()}))},save:function(){var t=this;this.$emit("start"),this.$emit("update:modal",!1),this.saveLoading=!0;var e=o().cloneDeep(this.payload);delete e.id,e.service=this.sid,this.pid?this.$gql.mutation("updateServiceExport(id:".concat(this.pid,", data: $data){data{id}}"),{data:e},{data:"ServiceExportInput!"}).then((function(){t.$emit("save"),t.saveLoading=!1,t.$message.success(t.$t("Save successfully"),3)})):this.$gql.mutation("createServiceExport(data: $data){data{id}}",{data:e},{data:"ServiceExportInput!"}).then((function(){t.$emit("save"),t.saveLoading=!1,t.$message.success(t.$t("Created successfully"),3),t.loadData()}))},openExport:function(){this.$emit("export",!1),this.$emit("update:modal",!0)},cancel:function(){this.$emit("update:modal",!1)}}};var h=(0,p.Z)(m,[["render",function(t,e,n,r,o,l){var s=(0,a.up)("a-button"),u=(0,a.up)("a-result"),d=(0,a.up)("a-popconfirm"),c=(0,a.up)("a-space"),p=(0,a.up)("ServiceExportForm"),f=(0,a.up)("a-form"),m=(0,a.up)("a-card"),h=(0,a.up)("a-col"),g=(0,a.up)("ServiceImportList"),v=(0,a.up)("a-row"),w=(0,a.up)("a-modal"),y=(0,a.Q2)("permission");return(0,a.wg)(),(0,a.iD)(a.HY,null,[n.isEdit||o.loading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(u,{key:0,status:"404",title:t.$t("Not Service Export")},{extra:(0,a.w5)((function(){return[(0,a.Wm)(s,{loading:o.saveLoading,onClick:l.openExport,type:"primary"},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,i.zw)(t.$t("Export")),1)]})),_:1},8,["loading","onClick"])]})),_:1},8,["title"])),o.pid?((0,a.wg)(),(0,a.j4)(v,{key:1,class:"row-mg"},{default:(0,a.w5)((function(){return[(0,a.Wm)(h,{class:"col-pd",xl:10,lg:24,md:24,sm:24,xs:24},{default:(0,a.w5)((function(){return[(0,a.Wm)(m,{class:"card mb-20 nopd",bordered:!1,loading:o.loading,title:t.$t("Service Export")},{extra:(0,a.w5)((function(){return[(0,a.Wm)(c,null,{default:(0,a.w5)((function(){return[(0,a.Wm)(d,{"ok-text":t.$t("Yes"),"cancel-text":t.$t("No"),onConfirm:l.remove},{title:(0,a.w5)((function(){return[(0,a._)("p",null,(0,i.zw)(t.$t("Tip")),1),(0,a._)("p",null,(0,i.zw)(t.$t("Are you sure to delete this?")),1)]})),default:(0,a.w5)((function(){return[(0,a.wy)(((0,a.wg)(),(0,a.j4)(s,{loading:o.saveLoading},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,i.zw)(t.$t("Clear")),1)]})),_:1},8,["loading"])),[[y,["service:update"]]])]})),_:1},8,["ok-text","cancel-text","onConfirm"]),(0,a.wy)(((0,a.wg)(),(0,a.j4)(s,{loading:o.saveLoading,type:"primary",onClick:l.saveValid},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,i.zw)(t.$t("Save")),1)]})),_:1},8,["loading","onClick"])),[[y,["service:update"]]])]})),_:1})]})),default:(0,a.w5)((function(){return[(0,a.Wm)(f,{model:o.payload,"wrapper-col":{span:24},ref:"updateForm"},{default:(0,a.w5)((function(){return[(0,a.Wm)(p,{ports:n.ports,d:o.payload,"onUpdate:d":e[0]||(e[0]=function(t){return o.payload=t})},null,8,["ports","d"])]})),_:1},8,["model"])]})),_:1},8,["loading","title"])]})),_:1}),(0,a.Wm)(h,{class:"col-pd",xl:14,lg:24,md:24,sm:24,xs:24},{default:(0,a.w5)((function(){return[(0,a.Wm)(g,{embed:!0,"service-export":o.pid},null,8,["service-export"])]})),_:1})]})),_:1})):(0,a.kq)("",!0),(0,a.Wm)(w,{visible:o.visible,"onUpdate:visible":e[2]||(e[2]=function(t){return o.visible=t}),title:t.$t("Service Export"),onOk:l.createValid,onCancel:l.cancel,width:"50%","ok-text":t.$t("Start")},{default:(0,a.w5)((function(){return[(0,a.Wm)(f,{model:o.payload,"wrapper-col":{span:24},ref:"createForm"},{default:(0,a.w5)((function(){return[(0,a.Wm)(p,{ports:n.ports,d:o.payload,"onUpdate:d":e[1]||(e[1]=function(t){return o.payload=t})},null,8,["ports","d"])]})),_:1},8,["model"])]})),_:1},8,["visible","title","onOk","onCancel","ok-text"])],64)}]])},88711:function(t,e,n){"use strict";n.d(e,{Z:function(){return L}});n(47941),n(68309),n(73210);var a=n(66252),i=n(3577),r={key:1},o={key:1},l={key:1},s={key:1},u={key:4,class:"editable-row-operations"},d={key:0},c=["onClick"],p={key:1},f=["onClick"],m=["onClick"],h={key:1},g=["href"],v={key:0},w={class:"textarea-tip"},y={key:1},b={key:1},k={key:1},$={key:4,class:"editable-row-operations"},S={key:0},_=["onClick"],x={key:1},C=["onClick"];var j=n(95082),z=(n(21249),n(40561),n(57658),n(99684)),W=n(54367),D=n(75255),U=n(46981),I=n(1299),E=n(13589),P=n(76754),q=n(33907),O=[{key:"as",dataIndex:"name"},{key:"Port",dataIndex:"port"},{key:"Protocol",dataIndex:"protocol"},{key:"Target Port",dataIndex:"targetPort"},{key:"Action",width:140,dataIndex:"action"}],V=[{key:"Host",dataIndex:"host"},{key:"Ports(Name/Port/Protocol)",dataIndex:"ports"},{key:"node",dataIndex:"nodeName"},{key:"Ready",dataIndex:"ready"},{key:"Action",width:140,dataIndex:"action"}],N={name:"ServicesDetail",i18n:n(89234),components:{PlusCircleTwoTone:z.Z,CloseOutlined:W.Z,CheckOutlined:D.Z,EditOutlined:U.Z,DetailList:I.Z,DetailListItem:E.Z,FormItem:P.Z},props:["detail","registry"],data:function(){return{port_columns:O,ep_columns:V}},computed:(0,j.Z)((0,j.Z)({},(0,q.rn)("rules",["rules"])),{},{epDataColumns:function(){var t=this;return this.ep_columns.map((function(e){return e.title=t.$t(e.key),e}))},portDataColumns:function(){var t=this;return this.port_columns.map((function(e){return e.title=t.$t(e.key),e}))}}),created:function(){},methods:{removePort:function(t){this.detail.spec.ports.splice(t,1),this.$emit("update:detail",this.detail)},removeEndpoint:function(t){this.detail.endpoints.splice(t,1),this.$emit("update:detail",this.detail)},cancel:function(t){t.isedit=!1,this.$emit("update:detail",this.detail)},edit:function(t){t.isedit=!0,this.$emit("update:detail",this.detail)},addEndpoints:function(){this.detail.endpoints=this.detail.endpoints||[],this.detail.endpoints.push({isedit:!0,host:"",port_val:"",nodeName:"",ready:""}),this.$emit("update:detail",this.detail)},addPort:function(){this.detail.spec.ports=this.detail.spec.ports||[],this.detail.spec.ports.push({isedit:!0,name:"",port:8080,protocol:"TCP",targetPort:""}),this.$emit("update:detail",this.detail)}}};const Z=(0,n(83744).Z)(N,[["render",function(t,e,n,j,z,W){var D=(0,a.up)("a-input"),U=(0,a.up)("DetailListItem"),I=(0,a.up)("DetailList"),E=(0,a.up)("a-tag"),P=(0,a.up)("a-card"),q=(0,a.up)("PlusCircleTwoTone"),O=(0,a.up)("a-input-number"),V=(0,a.up)("FormItem"),N=(0,a.up)("a-select-option"),Z=(0,a.up)("a-select"),L=(0,a.up)("CheckOutlined"),A=(0,a.up)("EditOutlined"),T=(0,a.up)("CloseOutlined"),Y=(0,a.up)("a-table"),F=(0,a.up)("a-textarea"),K=(0,a.up)("a-col"),J=(0,a.up)("a-row"),H=(0,a.Q2)("permission");return(0,a.wg)(),(0,a.j4)(J,{class:"row-mg"},{default:(0,a.w5)((function(){return[(0,a.Wm)(K,{class:"col-pd",xl:""!=t.pid&&t.$isPro?16:24,lg:24,md:24,sm:24,xs:24},{default:(0,a.w5)((function(){return["k8s"==n.registry.type?((0,a.wg)(),(0,a.j4)(P,{key:0,class:"card mb-20",bordered:!1,loading:t.loading,title:t.$t("Resource Info")},{default:(0,a.w5)((function(){return[(0,a.Wm)(I,{size:"small",col:3},{default:(0,a.w5)((function(){return[(0,a.Wm)(U,{term:t.$t("Type")},{default:(0,a.w5)((function(){return[(0,a.Wm)(D,{placeholder:t.$t("unset"),value:n.detail.spec.type,"onUpdate:value":e[0]||(e[0]=function(t){return n.detail.spec.type=t})},null,8,["placeholder","value"])]})),_:1},8,["term"]),(0,a.Wm)(U,{term:t.$t("Cluster IP")},{default:(0,a.w5)((function(){return[(0,a.Wm)(D,{placeholder:t.$t("unset"),value:n.detail.spec.clusterIP,"onUpdate:value":e[1]||(e[1]=function(t){return n.detail.spec.clusterIP=t})},null,8,["placeholder","value"])]})),_:1},8,["term"]),(0,a.Wm)(U,{term:t.$t("Session Affinity")},{default:(0,a.w5)((function(){return[(0,a.Wm)(D,{placeholder:t.$t("unset"),value:n.detail.spec.sessionAffinity,"onUpdate:value":e[2]||(e[2]=function(t){return n.detail.spec.sessionAffinity=t})},null,8,["placeholder","value"])]})),_:1},8,["term"])]})),_:1}),(0,a.Wm)(I,{size:"small",col:1},{default:(0,a.w5)((function(){return[n.detail.spec.containerImages?((0,a.wg)(),(0,a.j4)(U,{key:0,term:t.$t("Container Images")},{default:(0,a.w5)((function(){return[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.detail.containerImages,(function(t,e){return(0,a.wg)(),(0,a.j4)(E,{key:e,closable:!1},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,i.zw)(t),1)]})),_:2},1024)})),128))]})),_:1},8,["term"])):(0,a.kq)("",!0),n.detail.spec.selector?((0,a.wg)(),(0,a.j4)(U,{key:1,term:t.$t("Selector")},{default:(0,a.w5)((function(){return[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(Object.keys(n.detail.spec.selector),(function(t,e){return(0,a.wg)(),(0,a.j4)(E,{key:e,closable:!1},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,i.zw)(t)+":"+(0,i.zw)(n.detail.spec.selector[t]),1)]})),_:2},1024)})),128))]})),_:1},8,["term"])):(0,a.kq)("",!0),n.detail.spec.labelSelector&&n.detail.spec.labelSelector.matchLabels?((0,a.wg)(),(0,a.j4)(U,{key:2,term:t.$t("Selector")},{default:(0,a.w5)((function(){return[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(Object.keys(n.detail.spec.labelSelector.matchLabels),(function(t,e){return(0,a.wg)(),(0,a.j4)(E,{key:e,closable:!1},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,i.zw)(t)+":"+(0,i.zw)(n.detail.spec.labelSelector.matchLabels[t]),1)]})),_:2},1024)})),128))]})),_:1},8,["term"])):(0,a.kq)("",!0)]})),_:1})]})),_:1},8,["loading","title"])):(0,a.kq)("",!0),"eureka"==n.registry.type?((0,a.wg)(),(0,a.j4)(P,{key:1,class:"card mb-20",bordered:!1,loading:t.loading,title:t.$t("Resource Info")},{default:(0,a.w5)((function(){return[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.detail.instance,(function(e,n){return(0,a.wg)(),(0,a.j4)(I,{size:"small",col:3,key:n},{default:(0,a.w5)((function(){return[(0,a.Wm)(U,{term:t.$t("Name")},{default:(0,a.w5)((function(){return[(0,a.Wm)(E,null,{default:(0,a.w5)((function(){return[(0,a.Uk)((0,i.zw)(e.app),1)]})),_:2},1024)]})),_:2},1032,["term"]),(0,a.Wm)(U,{term:t.$t("Status")},{default:(0,a.w5)((function(){return[(0,a.Wm)(E,null,{default:(0,a.w5)((function(){return[(0,a.Uk)((0,i.zw)(e.status),1)]})),_:2},1024)]})),_:2},1032,["term"]),(0,a.Wm)(U,{term:t.$t("Host")},{default:(0,a.w5)((function(){return[(0,a.Wm)(E,null,{default:(0,a.w5)((function(){return[(0,a.Uk)((0,i.zw)(e.hostName),1)]})),_:2},1024)]})),_:2},1032,["term"]),(0,a.Wm)(U,{term:t.$t("IP")},{default:(0,a.w5)((function(){return[(0,a.Wm)(E,null,{default:(0,a.w5)((function(){return[(0,a.Uk)((0,i.zw)(e.ipAddr),1)]})),_:2},1024)]})),_:2},1032,["term"]),(0,a.Wm)(U,{term:t.$t("Port")},{default:(0,a.w5)((function(){return[(0,a.Wm)(E,null,{default:(0,a.w5)((function(){return[(0,a.Uk)((0,i.zw)(e.port.$),1)]})),_:2},1024)]})),_:2},1032,["term"])]})),_:2},1024)})),128))]})),_:1},8,["loading","title"])):(0,a.kq)("",!0),(0,a.Wm)(P,{class:"card mb-20",bordered:!1,loading:t.loading,title:t.$t("Ports")},{extra:(0,a.w5)((function(){return[(0,a.wy)(((0,a.wg)(),(0,a.iD)("a",{onClick:e[3]||(e[3]=function(){return W.addPort&&W.addPort.apply(W,arguments)}),href:"javascript:void(0)"},[(0,a.Wm)(q,{class:"font-20"})])),[[H,["service:update"]]])]})),default:(0,a.w5)((function(){return[(0,a.Wm)(Y,{pagination:!1,columns:W.portDataColumns,"data-source":n.detail.spec.ports,loading:t.loading,class:"bg-white"},{bodyCell:(0,a.w5)((function(e){var h=e.column,g=e.record,v=e.index;return["name"===h.dataIndex?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[g.isedit?((0,a.wg)(),(0,a.j4)(D,{key:0,value:g.name,"onUpdate:value":function(t){return g.name=t},class:"edit-input"},null,8,["value","onUpdate:value"])):((0,a.wg)(),(0,a.iD)("div",r,(0,i.zw)(g.name||"-"),1))],64)):(0,a.kq)("",!0),"port"===h.dataIndex?((0,a.wg)(),(0,a.j4)(V,{key:1,name:["spec","ports",v,"port"],rules:t.rules.numberRequired},{default:(0,a.w5)((function(){return[g.isedit?((0,a.wg)(),(0,a.j4)(O,{key:0,min:0,value:g.port,"onUpdate:value":function(t){return g.port=t},class:"edit-input"},null,8,["value","onUpdate:value"])):((0,a.wg)(),(0,a.iD)("div",o,(0,i.zw)(g.port||"-"),1))]})),_:2},1032,["name","rules"])):(0,a.kq)("",!0),"protocol"===h.dataIndex?((0,a.wg)(),(0,a.iD)(a.HY,{key:2},[g.isedit?((0,a.wg)(),(0,a.j4)(Z,{key:0,value:g.protocol,"onUpdate:value":function(t){return g.protocol=t},class:"edit-input width-90"},{default:(0,a.w5)((function(){return[(0,a.Wm)(N,{value:"TCP"},{default:(0,a.w5)((function(){return[(0,a.Uk)(" TCP ")]})),_:1}),(0,a.Wm)(N,{value:"SCTP"},{default:(0,a.w5)((function(){return[(0,a.Uk)(" SCTP ")]})),_:1}),(0,a.Wm)(N,{value:"UDP"},{default:(0,a.w5)((function(){return[(0,a.Uk)(" UDP ")]})),_:1})]})),_:2},1032,["value","onUpdate:value"])):((0,a.wg)(),(0,a.iD)("div",l,(0,i.zw)(g.protocol||"-"),1))],64)):(0,a.kq)("",!0),"targetPort"===h.dataIndex?((0,a.wg)(),(0,a.j4)(V,{key:3,name:["spec","ports",v,"targetPort"],rules:t.rules.numberRequired},{default:(0,a.w5)((function(){return[g.isedit?((0,a.wg)(),(0,a.j4)(O,{key:0,min:0,value:g.targetPort,"onUpdate:value":function(t){return g.targetPort=t},class:"edit-input"},null,8,["value","onUpdate:value"])):((0,a.wg)(),(0,a.iD)("div",s,(0,i.zw)(g.targetPort||"-"),1))]})),_:2},1032,["name","rules"])):"action"===h.dataIndex?((0,a.wg)(),(0,a.iD)("div",u,[g.isedit?((0,a.wg)(),(0,a.iD)("span",d,[(0,a._)("a",{onClick:function(t){return W.cancel(g)}},[(0,a.Wm)(L,{class:"icon-menu"})],8,c)])):((0,a.wg)(),(0,a.iD)("span",p,[(0,a.wy)(((0,a.wg)(),(0,a.iD)("a",{onClick:function(t){return W.edit(g)}},[(0,a.Wm)(A,{class:"icon-menu"})],8,f)),[[H,["service:update"]]])])),n.detail.spec.ports.length>1?((0,a.wg)(),(0,a.iD)("a",{key:2,onClick:function(t){return W.removePort(v)}},[(0,a.Wm)(T,{class:"icon-menu"})],8,m)):(0,a.kq)("",!0)])):(0,a.kq)("",!0)]})),_:1},8,["columns","data-source","loading"])]})),_:1},8,["loading","title"]),(0,a.Wm)(P,{class:"card mb-20",bordered:!1,loading:t.loading,title:t.$t("Endpoints")},{extra:(0,a.w5)((function(){return[(0,a.wy)(((0,a.wg)(),(0,a.iD)("a",{onClick:e[4]||(e[4]=function(){return W.addEndpoints&&W.addEndpoints.apply(W,arguments)}),href:"javascript:void(0)"},[(0,a.Wm)(q,{class:"font-20"})])),[[H,["service:update"]]])]})),default:(0,a.w5)((function(){return[(0,a.Wm)(Y,{pagination:!1,columns:W.epDataColumns,"data-source":n.detail.endpoints,loading:t.loading,class:"bg-white"},{bodyCell:(0,a.w5)((function(e){var n=e.column,r=e.record;return["host"===n.dataIndex?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[r.isedit?((0,a.wg)(),(0,a.j4)(D,{key:0,value:r.host,"onUpdate:value":function(t){return r.host=t},class:"edit-input"},null,8,["value","onUpdate:value"])):((0,a.wg)(),(0,a.iD)("div",h,[(0,a._)("a",{href:"http://"+r.host,target:"_blank"},(0,i.zw)(r.host||"-"),9,g)]))],64)):"ports"===n.dataIndex?((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[r.isedit?((0,a.wg)(),(0,a.iD)("div",v,[(0,a.Wm)(F,{value:r.port_val,"onUpdate:value":function(t){return r.port_val=t},placeholder:"","allow-clear":""},null,8,["value","onUpdate:value"]),(0,a._)("div",w,(0,i.zw)(t.$t("List of name/port/protocol")),1)])):((0,a.wg)(),(0,a.iD)("div",y,[(0,a._)("pre",null,(0,i.zw)(r.port_val.trim()||"-"),1)]))],64)):"nodeName"===n.dataIndex?((0,a.wg)(),(0,a.iD)(a.HY,{key:2},[r.isedit?((0,a.wg)(),(0,a.j4)(D,{key:0,value:r.nodeName,"onUpdate:value":function(t){return r.nodeName=t},class:"edit-input"},null,8,["value","onUpdate:value"])):((0,a.wg)(),(0,a.iD)("div",b,(0,i.zw)(r.nodeName||"-"),1))],64)):"ready"===n.dataIndex?((0,a.wg)(),(0,a.iD)(a.HY,{key:3},[r.isedit?((0,a.wg)(),(0,a.j4)(D,{key:0,value:r.ready,"onUpdate:value":function(t){return r.ready=t},class:"edit-input"},null,8,["value","onUpdate:value"])):((0,a.wg)(),(0,a.iD)("div",k,(0,i.zw)(r.ready||"-"),1))],64)):"action"===n.dataIndex?((0,a.wg)(),(0,a.iD)("div",$,[r.isedit?((0,a.wg)(),(0,a.iD)("span",S,[(0,a._)("a",{onClick:function(t){return W.cancel(r)}},[(0,a.Wm)(L)],8,_)])):((0,a.wg)(),(0,a.iD)("span",x,[(0,a.wy)(((0,a.wg)(),(0,a.iD)("a",{onClick:function(t){return W.edit(r)}},[(0,a.Wm)(A)],8,C)),[[H,["service:update"]]])]))])):(0,a.kq)("",!0)]})),_:1},8,["columns","data-source","loading"])]})),_:1},8,["loading","title"]),n.detail.rollingUpdateStrategy&&"k8s"==n.registry.type?((0,a.wg)(),(0,a.j4)(P,{key:2,class:"card mb-20",bordered:!1,loading:t.loading,title:t.$t("Rolling Update Strategy")},{default:(0,a.w5)((function(){return[(0,a.Wm)(I,{size:"small",col:3},{default:(0,a.w5)((function(){return[(0,a.Wm)(U,{term:t.$t("Max Surge")},{default:(0,a.w5)((function(){return[(0,a.Wm)(D,{placeholder:t.$t("unset"),value:n.detail.rollingUpdateStrategy.maxSurge,"onUpdate:value":e[5]||(e[5]=function(t){return n.detail.rollingUpdateStrategy.maxSurge=t})},null,8,["placeholder","value"])]})),_:1},8,["term"]),(0,a.Wm)(U,{term:t.$t("Max Unavailable")},{default:(0,a.w5)((function(){return[(0,a.Wm)(D,{placeholder:t.$t("unset"),value:n.detail.rollingUpdateStrategy.maxUnavailable,"onUpdate:value":e[6]||(e[6]=function(t){return n.detail.rollingUpdateStrategy.maxUnavailable=t})},null,8,["placeholder","value"])]})),_:1},8,["term"])]})),_:1})]})),_:1},8,["loading","title"])):(0,a.kq)("",!0)]})),_:1},8,["xl"]),(0,a.WI)(t.$slots,"right")]})),_:3})}]]);var L=Z}}]);