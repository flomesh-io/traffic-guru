"use strict";(self.webpackChunkflomesh_load_balancer=self.webpackChunkflomesh_load_balancer||[]).push([[3265],{71900:function(t,e,a){a.d(e,{Z:function(){return i}});var l=a(66252),n=a(3577);const s={class:"head-info"};var o={name:"HeadInfo",props:["title","content"]};var i=(0,a(83744).Z)(o,[["render",function(t,e,a,o,i,d){return(0,l.wg)(),(0,l.iD)("div",s,[(0,l._)("span",null,(0,n.zw)(a.title),1),(0,l._)("p",null,[(0,l.Uk)((0,n.zw)(a.content),1),(0,l.WI)(t.$slots,"body",{},void 0,!0)])])}],["__scopeId","data-v-00006846"]])},13265:function(t,e,a){a.r(e),a.d(e,{default:function(){return C}});var l=a(66252),n=a(3577);const s=(t=>((0,l.dD)("data-v-3ccc44c5"),t=t(),(0,l.Cn)(),t))((()=>(0,l._)("div",null,null,-1))),o={key:0},i={key:1},d={key:0,class:"blockquote"},r={class:"mr-20 nowrap"};var c=a(99684),p=a(52928),u={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 140H96c-17.7 0-32 14.3-32 32v496c0 17.7 14.3 32 32 32h380v112H304c-8.8 0-16 7.2-16 16v48c0 4.4 3.6 8 8 8h432c4.4 0 8-3.6 8-8v-48c0-8.8-7.2-16-16-16H548V700h380c17.7 0 32-14.3 32-32V172c0-17.7-14.3-32-32-32zm-40 488H136V212h752v416z"}}]},name:"desktop",theme:"outlined"},h=a(33058);function m(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?Object(arguments[e]):{},l=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(a).filter((function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})))),l.forEach((function(e){g(t,e,a[e])}))}return t}function g(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var y=function(t,e){var a=m({},t,e.attrs);return(0,l.Wm)(h.Z,m({},a,{icon:u}),null)};y.displayName="DesktopOutlined",y.inheritAttrs=!1;var v=y,f=a(61103),w=a(71900),b=a(69596),$=a(96486),_=a.n($),k=a(85263),S=a(79332),W=a(33907),O={name:"TestTargets",components:{HeadInfo:w.Z,PageLayout:f.Z,CardList:b.Z,PlusCircleTwoTone:c.Z,ApartmentOutlined:p.Z,DesktopOutlined:v,FormItem:S.Z},i18n:a(89234),data(){return{ApartmentOutlined:p.Z,isEdit:!1,visible:!1,payload:{content:{os:"generic_linux",arch:"loongarch64",pipy_version:"nightly-202205110231",host:"",port:"",path:"",status:""}},targets:[],pageSize:12,pageNo:1,total:0,loading:!0,simpleImage:k.Z.PRESENTED_IMAGE_SIMPLE}},computed:{...(0,W.rn)("rules",["rules"]),start(){return(this.pageNo-1)*this.pageSize}},created(){this.loaddata()},activated(){},methods:{add(){this.isEdit=!1,this.payload={content:{os:"generic_linux",arch:"loongarch64",pipy_version:"nightly-202205110231",host:"",port:"",path:"",status:""}},this.showModal()},showModal(){this.visible=!0},valid(){this.$refs.form.validateFields().then((()=>{this.handleOk()})).catch((()=>{}))},handleOk(t){let e=_().cloneDeep(this.payload);if(e.content.status=t||"activated",e.type="TestcaseURL",this.isEdit){const t=e.id;delete e.id,this.$gql.mutation(`updateSystemSetting(id:${t}, data: $data){data{id}}`,{data:e},{data:"SystemSettingInput"}).then((()=>{this.visible=!1,this.$message.success(this.$t("Modified successfully"),3),this.loaddata()}))}else delete e.id,this.$gql.mutation("createSystemSetting(data: $data){data{id}}",{data:e},{data:"SystemSettingInput"}).then((()=>{this.visible=!1,this.$message.success(this.$t("Created successfully"),3),this.loaddata()}))},remove(t,e,a){this.$gql.mutation(`deleteSystemSetting(id:${a.id}){data{id}}`).then((()=>{this.$message.success(this.$t("Deleted successfully"),3),this.loaddata()}))},deploy(t,e,a){this.payload=_().cloneDeep(a),this.isEdit=!0,this.changeStatus("deploy",this.payload.id),this.handleOk("deploy")},stop(t,e,a){this.payload=_().cloneDeep(a),this.isEdit=!0,this.changeStatus("stop",this.payload.id),this.handleOk("stop")},changeStatus(t,e){this.$gql.mutation(`${t}TestTarget(testTarget:${e})`).then((()=>{}))},setting(t,e,a){this.payload=_().cloneDeep(a),this.isEdit=!0,this.showModal()},edit(){},search(t,e){t&&(this.pageNo=t,this.pageSize=e),this.loaddata()},loaddata(){this.loading=!0,this.$gql.query(`systemSettings(sort: ""createdAt:desc", filters: $filters, pagination:{start: ${this.start}, limit: ${this.pageSize}}){\n\t\t\t\t\t\tdata{id,attributes{content}},\n\t\t\t\t\t\tmeta{pagination{total}}\n\t\t\t\t\t}`,{filters:{type:{eq:"TestcaseURL"}}},{filters:"SystemSettingFiltersInput"}).then((t=>{this.targets=t.data,this.total=t.pagination.total,this.loading=!1}))}}};var C=(0,a(83744).Z)(O,[["render",function(t,e,a,c,p,u){const h=(0,l.up)("PlusCircleTwoTone"),m=(0,l.up)("HeadInfo"),g=(0,l.up)("DesktopOutlined"),y=(0,l.up)("a-badge"),v=(0,l.up)("a-card-meta"),f=(0,l.up)("CardList"),w=(0,l.up)("a-pagination"),b=(0,l.up)("a-button"),$=(0,l.up)("a-input"),_=(0,l.up)("FormItem"),k=(0,l.up)("a-descriptions-item"),S=(0,l.up)("a-descriptions"),W=(0,l.up)("a-form"),O=(0,l.up)("a-modal"),C=((0,l.up)("ApartmentOutlined"),(0,l.up)("PageLayout"));return(0,l.wg)(),(0,l.j4)(C,{avatar:p.ApartmentOutlined},{headerContent:(0,l.w5)((()=>[s])),extra:(0,l.w5)((()=>[(0,l.Wm)(m,{class:"split-right",title:t.$t("Create Target")},{body:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l.Wm)(h,{onClick:u.add,class:"font-primary icon-menu rotate-icon"},null,8,["onClick"])])])),_:1},8,["title"])])),default:(0,l.w5)((()=>[(0,l.Wm)(f,{"hide-action-title":!0,"data-source":p.targets,loading:p.loading,type:"component",actions:[{svg:"#icon-play",text:t.$t("Deploy"),call:u.deploy},{svg:"#icon-stop",text:t.$t("Stop"),call:u.stop},{icon:"EditOutlined",text:t.$t("edit"),call:u.setting},{icon:"CloseOutlined",hide:!0,text:t.$t("delete"),call:u.remove}]},{default:(0,l.w5)((({item:t})=>[(0,l.Wm)(v,null,{title:(0,l.w5)((()=>[(0,l._)("div",null,[t.content.displayName?((0,l.wg)(),(0,l.iD)("span",o,(0,n.zw)(t.content.displayName),1)):((0,l.wg)(),(0,l.iD)("span",i,(0,n.zw)(t.name),1))])])),avatar:(0,l.w5)((()=>[(0,l.Wm)(g,{class:"font-30 primary"})])),description:(0,l.w5)((()=>[t.content&&t.content.host?((0,l.wg)(),(0,l.iD)("blockquote",d,[(0,l._)("div",r,[t.content.status?((0,l.wg)(),(0,l.j4)(y,{key:0,status:{deploy:"processing",activated:"green",stop:"red"}[t.content.status]},null,8,["status"])):(0,l.kq)("",!0),(0,l.Uk)(" "+(0,n.zw)(t.content.host)+":"+(0,n.zw)(t.content.port),1),(0,l._)("span",null,(0,n.zw)(t.content.path),1)])])):(0,l.kq)("",!0)])),_:2},1024)])),_:1},8,["data-source","loading","actions"]),(0,l.Wm)(w,{onChange:u.search,current:p.pageNo,"onUpdate:current":e[0]||(e[0]=t=>p.pageNo=t),total:p.total,"page-size":p.pageSize,"show-less-items":""},null,8,["onChange","current","total","page-size"]),(0,l.Wm)(O,{visible:p.visible,"onUpdate:visible":e[8]||(e[8]=t=>p.visible=t),title:t.$t("Target"),width:"60%"},{footer:(0,l.w5)((()=>[p.isEdit?((0,l.wg)(),(0,l.j4)(b,{key:0,type:"primary",onClick:u.valid},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(t.$t("save")),1)])),_:1},8,["onClick"])):((0,l.wg)(),(0,l.j4)(b,{key:1,type:"primary",onClick:u.valid},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(t.$t("create")),1)])),_:1},8,["onClick"]))])),default:(0,l.w5)((()=>[(0,l.Wm)(W,{model:p.payload.content,"wrapper-col":{span:24},ref:"form"},{default:(0,l.w5)((()=>[(0,l.Wm)(S,{bordered:""},{default:(0,l.w5)((()=>[(0,l.Wm)(k,{label:t.$t("as"),span:3},{default:(0,l.w5)((()=>[(0,l.Wm)(_,{name:"displayName",rules:t.rules.required},{default:(0,l.w5)((()=>[(0,l.Wm)($,{placeholder:t.$t("unset"),value:p.payload.content.displayName,"onUpdate:value":e[1]||(e[1]=t=>p.payload.content.displayName=t)},null,8,["placeholder","value"])])),_:1},8,["rules"])])),_:1},8,["label"]),(0,l.Wm)(k,{label:t.$t("Host"),span:2},{default:(0,l.w5)((()=>[(0,l.Wm)(_,{name:"host",rules:t.rules.required},{default:(0,l.w5)((()=>[(0,l.Wm)($,{placeholder:t.$t("unset"),value:p.payload.content.host,"onUpdate:value":e[2]||(e[2]=t=>p.payload.content.host=t)},null,8,["placeholder","value"])])),_:1},8,["rules"])])),_:1},8,["label"]),(0,l.Wm)(k,{label:t.$t("Port"),span:1},{default:(0,l.w5)((()=>[(0,l.Wm)($,{placeholder:t.$t("unset"),value:p.payload.content.port,"onUpdate:value":e[3]||(e[3]=t=>p.payload.content.port=t)},null,8,["placeholder","value"])])),_:1},8,["label"]),(0,l.Wm)(k,{label:t.$t("Path"),span:3},{default:(0,l.w5)((()=>[(0,l.Wm)($,{placeholder:t.$t("unset"),value:p.payload.content.path,"onUpdate:value":e[4]||(e[4]=t=>p.payload.content.path=t)},null,8,["placeholder","value"])])),_:1},8,["label"]),(0,l.Wm)(k,{label:t.$t("OS"),span:1},{default:(0,l.w5)((()=>[(0,l.Wm)($,{placeholder:t.$t("unset"),value:p.payload.content.os,"onUpdate:value":e[5]||(e[5]=t=>p.payload.content.os=t)},null,8,["placeholder","value"])])),_:1},8,["label"]),(0,l.Wm)(k,{label:t.$t("Arch"),span:1},{default:(0,l.w5)((()=>[(0,l.Wm)($,{placeholder:t.$t("unset"),value:p.payload.content.arch,"onUpdate:value":e[6]||(e[6]=t=>p.payload.content.arch=t)},null,8,["placeholder","value"])])),_:1},8,["label"]),(0,l.Wm)(k,{label:t.$t("Pipy Version"),span:1},{default:(0,l.w5)((()=>[(0,l.Wm)($,{placeholder:t.$t("unset"),value:p.payload.content.pipy_version,"onUpdate:value":e[7]||(e[7]=t=>p.payload.content.pipy_version=t)},null,8,["placeholder","value"])])),_:1},8,["label"])])),_:1})])),_:1},8,["model"])])),_:1},8,["visible","title"]),(0,l.kq)("",!0)])),_:1},8,["avatar"])}],["__scopeId","data-v-3ccc44c5"]])}}]);