"use strict";(self.webpackChunkflomesh_load_balancer=self.webpackChunkflomesh_load_balancer||[]).push([[5755],{990:function(e,t,n){n.d(t,{Z:function(){return u}});var a=n(66252),i={class:"DashboardCore"};var l=n(56912),r={name:"Dashboard",i18n:n(89234),components:{DashboardCore:l.Z},props:["pageId","prometheus","apply","params","hideAdd","init","defaultWidget"],data:function(){return{prometheusVal:null}},computed:{},watch:{prometheus:function(e){this.prometheusVal=e}},created:function(){},mounted:function(){this.prometheusVal=this.prometheus},methods:{prometheusChange:function(){this.$emit("update:prometheus",this.prometheusVal),this.$emit("prometheusChange",this.prometheusVal)}}};var u=(0,n(83744).Z)(r,[["render",function(e,t,n,l,r,u){var o=(0,a.up)("DashboardCore");return(0,a.wg)(),(0,a.iD)("div",i,[(0,a.Wm)(o,{"hide-add":n.hideAdd,init:n.init,"hide-head":!0,"page-id":n.pageId,params:n.params,kind:n.apply,prometheus:r.prometheusVal,"onUpdate:prometheus":t[0]||(t[0]=function(e){return r.prometheusVal=e}),onPrometheusChange:u.prometheusChange,apply:n.apply+"."+n.pageId,embed:!0,"default-widget":n.defaultWidget},null,8,["hide-add","init","page-id","params","kind","prometheus","onPrometheusChange","apply","default-widget"])])}]])},573:function(e,t,n){n.d(t,{Z:function(){return o}});n(68309);var a=n(66252),i=n(3577),l=n(49963);var r=n(88478),u=(n(57327),n(41539),n(92222),{name:"TagList",components:{PlusOutlined:n(44218).Z},props:["placeholder","name","list","type"],i18n:n(89234),data:function(){return{value:"",visible:!1}},methods:{showInput:function(){var e=this;this.visible=!0,this.$nextTick().then((function(){e.$refs[e.name].focus()}))},handleClose:function(e){var t=this.list.filter((function(t){return t!==e}));this.$emit("update:list",t),this.$emit("change",t)},inputConfirm:function(){if(""!=this.value){var e=[].concat((0,r.Z)(this.list),[this.value]);this.value="",this.visible=!1,this.$emit("update:list",e),this.$emit("change",e)}else this.visible=!1}}});var o=(0,n(83744).Z)(u,[["render",function(e,t,n,r,u,o){var s=(0,a.up)("a-tag"),c=(0,a.up)("a-input-number"),d=(0,a.up)("a-input"),f=(0,a.up)("PlusOutlined");return(0,a.wg)(),(0,a.iD)(a.HY,null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.list,(function(e,t){return(0,a.wg)(),(0,a.j4)(s,{key:t,onClose:function(t){return o.handleClose(e)},closable:!0},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,i.zw)(e),1)]})),_:2},1032,["onClose"])})),128)),"number"==n.type?(0,a.wy)(((0,a.wg)(),(0,a.j4)(c,{key:0,min:0,ref:n.name,size:"small",class:"width-100",placeholder:n.placeholder,value:u.value,"onUpdate:value":t[0]||(t[0]=function(e){return u.value=e}),onBlur:o.inputConfirm,onKeyup:(0,l.D2)(o.inputConfirm,["enter"])},null,8,["placeholder","value","onBlur","onKeyup"])),[[l.F8,u.visible]]):(0,a.wy)(((0,a.wg)(),(0,a.j4)(d,{key:1,ref:n.name,type:"text",size:"small",class:"width-100",placeholder:n.placeholder,value:u.value,"onUpdate:value":t[1]||(t[1]=function(e){return u.value=e}),onBlur:o.inputConfirm,onKeyup:(0,l.D2)(o.inputConfirm,["enter"])},null,8,["placeholder","value","onBlur","onKeyup"])),[[l.F8,u.visible]]),u.visible?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(s,{key:2,onClick:o.showInput,class:"dashed-tag"},{default:(0,a.w5)((function(){return[(0,a.Wm)(f),(0,a.Uk)(" "+(0,i.zw)(e.$t("add")),1)]})),_:1},8,["onClick"]))],64)}]])},1299:function(e,t,n){n.d(t,{Z:function(){return u}});var a=n(66252),i=n(3577),l={key:0,class:"title"};n(9653);var r={name:"DetailList",props:{title:{type:String,required:!1,default:""},col:{type:Number,required:!1,default:3},size:{type:String,required:!1,default:"large"},layout:{type:String,required:!1,default:"horizontal"}}};var u=(0,n(83744).Z)(r,[["render",function(e,t,n,r,u,o){var s=(0,a.up)("a-row");return(0,a.wg)(),(0,a.iD)("div",{class:(0,i.C_)(["detail-list","small"===n.size?"small":"large","vertical"===n.layout?"vertical":"horizontal"]),style:(0,i.j5)("flex-"+n.col)},[n.title?((0,a.wg)(),(0,a.iD)("div",l,(0,i.zw)(n.title),1)):(0,a.kq)("",!0),(0,a.Wm)(s,null,{default:(0,a.w5)((function(){return[(0,a.WI)(e.$slots,"default")]})),_:3})],6)}]])},13589:function(e,t,n){n.d(t,{Z:function(){return o}});n(68309);var a=n(66252),i=n(3577),l={class:"detail-content"};n(21249);var r={1:{xs:24},2:{xs:24,sm:12},3:{xs:24,sm:12,md:8},4:{xs:24,sm:12,md:6}},u={name:"DetailListItem",i18n:n(39945),props:{name:{type:String,required:!1,default:""},rules:{type:Array,required:!1,default:function(){return[]}},term:{type:String,required:!1,default:""},termTop:{type:Boolean}},data:function(){return{col:2,responsive:r}},computed:{getRules:function(){var e=this;return this.rules.map((function(t){return t.message=e.$t(t.message),t})),this.rules}},created:function(){this.$parent&&this.$parent.$parent&&this.$parent.$parent.col>0&&(this.col=this.$parent.$parent.col)},methods:{}};var o=(0,n(83744).Z)(u,[["render",function(e,t,n,r,u,o){var s=(0,a.up)("a-form-item"),c=(0,a.up)("a-col");return(0,a.wg)(),(0,a.j4)(c,(0,a.dG)({class:"detail-list-content flex"},u.responsive[u.col]),{default:(0,a.w5)((function(){return[(0,a._)("div",{class:(0,i.C_)(n.termTop?"term top":"term")},(0,i.zw)(n.term),3),(0,a._)("div",l,[n.rules?((0,a.wg)(),(0,a.j4)(s,{key:0,name:n.name,rules:o.getRules},{default:(0,a.w5)((function(){return[(0,a.WI)(e.$slots,"default")]})),_:3},8,["name","rules"])):(0,a.WI)(e.$slots,"default",{key:1})])]})),_:3},16)}]])},19077:function(e,t,n){n.r(t),n.d(t,{default:function(){return T}});n(68309),n(74916),n(64765);var a=n(66252),i=n(3577),l={class:"absolute",style:{left:"30px","margin-top":"-10px"}};var r=n(95082),u=n(990),o=(n(92222),{href:"#"}),s={class:"breakall"},c={class:"list-content"},d={class:"list-content-item"},f={key:0},p={class:"list-content-item"};var m=n(66347),h=(n(57658),n(84471)),g=n(2692),v=n(99684),b=n(22159),w={name:"NamespaceList",i18n:n(89234),components:{MoreOutlined:g.Z,PlusCircleTwoTone:v.Z,BorderOutlined:b.Z},props:["bindMesh","registry"],data:function(){return{key:"",pageSize:10,pageNo:1,total:0,addBindVal:[],loading:!0,list:[],allNamespaces:[]}},computed:{start:function(){return(this.pageNo-1)*this.pageSize}},created:function(){this.loadAll(),this.search()},methods:{addBind:function(){var e,t=this;if(null!==(e=this.addBindVal)&&void 0!==e&&e.length){var n,a=[],i=(0,m.Z)(this.addBindVal);try{for(i.s();!(n=i.n()).done;){var l=n.value,r=this.$gql.mutation("updateNamespace(id:".concat(l,", data:{bindMesh: ").concat(this.bindMesh,"}){data{id}}"));a.push(r)}}catch(e){i.e(e)}finally{i.f()}(0,h.TS)(a).then((0,h.hw)((function(){t.addBindVal=[],t.$message.success(t.$t("Bind successfully"),3),t.$emit("change",{}),t.search(),t.loadAll()})))}},remove:function(e){var t=this;this.$gql.mutation("updateNamespace(id:".concat(e,",data:{bindMesh:null}){data{id}}")).then((function(){t.$message.success(t.$t("Unbind successfully"),3),t.$emit("change",{}),t.search(),t.loadAll()}))},newLb:function(){this.$router.push({path:"/flb/4lb/create"})},detail:function(e){this.$router.push({path:"/flb/4lb/detail/"+e})},search:function(e,t){var n=this;e&&(this.pageNo=e,this.pageSize=t);var a={start:this.start,limit:this.pageSize};this.loading=!0;var i={name:{contains:this.key},bindMesh:{id:{eq:this.bindMesh}},registry:{id:{eq:this.registry}}};this.$gql.query("namespaces(filters: $filters, pagination: $pagination){\n\t\t\t\t\t\tdata{id,attributes{\n\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\tregistry{data{id,attributes{name}}},\n\t\t\t\t\t\t\torganization{data{id,attributes{name}}},\n\t\t\t\t\t\t\tupdatedAt, \n\t\t\t\t\t\t\tmesh{data{id,attributes{name}}}, \n\t\t\t\t\t\t\tbindMesh{data{id,attributes{name}}}\n\t\t\t\t\t\t}},\n\t\t\t\t\t\tmeta{pagination{total}}\n\t\t\t\t\t}",{filters:i,pagination:a},{filters:"NamespaceFiltersInput",pagination:"PaginationArg"}).then((function(e){n.list=e.data,n.total=e.pagination.total,n.loading=!1}))},loadAll:function(){var e=this;this.loading=!0;var t={bindMesh:{id:{null:!0}},registry:{id:{eq:this.registry}}};this.$gql.query("namespaces( filters: $filters, pagination: {start: 0, limit: ".concat(this.$DFT_LIMIT,"} ){\n\t\t\t\t\t\tdata{id,attributes{\n\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\tregistry{data{id,attributes{name}}},\n\t\t\t\t\t\t\torganization{data{id,attributes{name}}},\n\t\t\t\t\t\t\tupdatedAt, \n\t\t\t\t\t\t\tmesh{data{id,attributes{name}}}, \n\t\t\t\t\t\t\tbindMesh{data{id,attributes{name}}}\n\t\t\t\t\t\t}},\n\t\t\t\t\t\tmeta{pagination{total}}\n\t\t\t\t\t}"),{filters:t},{filters:"NamespaceFiltersInput"}).then((function(t){e.allNamespaces=t.data}))}}},y=n(83744);var k=(0,y.Z)(w,[["render",function(e,t,n,l,r,u){var m=(0,a.up)("a-input-search"),h=(0,a.up)("a-divider"),g=(0,a.up)("a-select-option"),v=(0,a.up)("a-select"),b=(0,a.up)("PlusCircleTwoTone"),w=(0,a.up)("a-popconfirm"),y=(0,a.up)("BorderOutlined"),k=(0,a.up)("a-list-item-meta"),$=(0,a.up)("a-menu-item"),_=(0,a.up)("a-menu"),W=(0,a.up)("MoreOutlined"),P=(0,a.up)("a-dropdown"),C=(0,a.up)("a-tag"),x=(0,a.up)("a-list-item"),U=(0,a.up)("a-list"),M=(0,a.up)("a-card"),S=(0,a.Q2)("permission");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(M,{bordered:!1,title:e.$t("Namespace"),loading:r.loading},{extra:(0,a.w5)((function(){return[(0,a._)("div",null,[(0,a.Wm)(m,{value:r.key,"onUpdate:value":t[0]||(t[0]=function(e){return r.key=e}),onSearch:t[1]||(t[1]=function(e){return u.search()}),class:"right-search-input",placeholder:e.$t("search")},null,8,["value","placeholder"]),(0,a.Wm)(h,{type:"vertical"}),(0,a.Wm)(w,{"ok-text":e.$t("Add Bind"),onConfirm:u.addBind},{title:(0,a.w5)((function(){return[(0,a._)("p",null,(0,i.zw)(e.$t("Please select namespace")),1),(0,a.Wm)(v,{class:"width-220",mode:"multiple","show-search":!1,value:r.addBindVal,"onUpdate:value":t[2]||(t[2]=function(e){return r.addBindVal=e}),ref:"select"},{default:(0,a.w5)((function(){return[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.allNamespaces,(function(e,t){return(0,a.wg)(),(0,a.j4)(g,{value:e.id,key:t},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,i.zw)(e.name),1)]})),_:2},1032,["value"])})),128))]})),_:1},8,["value"])]})),default:(0,a.w5)((function(){return[(0,a.wy)(((0,a.wg)(),(0,a.iD)("a",o,[(0,a.Wm)(b,{class:"font-20 icon-menu-sm rotate-icon"})])),[[S,["mesh:update"]]])]})),_:1},8,["ok-text","onConfirm"])])]})),default:(0,a.w5)((function(){return[(0,a.Wm)(U,{size:"large",pagination:{showQuickJumper:!1,onChange:u.search,current:r.pageNo,pageSize:r.pageSize,showTotal:function(t,n){return"".concat(e.$t("Total")," ").concat(t)},total:r.total}},{default:(0,a.w5)((function(){return[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.list,(function(t,n){return(0,a.wg)(),(0,a.j4)(x,{key:n},{actions:(0,a.w5)((function(){return[(0,a._)("div",null,[(0,a.Wm)(P,null,{overlay:(0,a.w5)((function(){return[(0,a.Wm)(_,null,{default:(0,a.w5)((function(){return[(0,a.Wm)($,null,{default:(0,a.w5)((function(){return[(0,a.Wm)(w,{placement:"topLeft","ok-text":e.$t("Yes"),"cancel-text":e.$t("No"),onConfirm:function(e){return u.remove(t.id)}},{title:(0,a.w5)((function(){return[(0,a._)("p",null,(0,i.zw)(e.$t("Tip")),1),(0,a._)("p",null,(0,i.zw)(e.$t("Are you sure to delete this?")),1)]})),default:(0,a.w5)((function(){return[(0,a.wy)(((0,a.wg)(),(0,a.iD)("a",null,[(0,a.Uk)((0,i.zw)(e.$t("Unbind")),1)])),[[S,["mesh:update"]]])]})),_:2},1032,["ok-text","cancel-text","onConfirm"])]})),_:2},1024)]})),_:2},1024)]})),default:(0,a.w5)((function(){return[(0,a._)("a",null,[(0,a.Wm)(W)])]})),_:2},1024)])]})),default:(0,a.w5)((function(){var n;return[(0,a.Wm)(k,{description:null===(n=t.registry)||void 0===n?void 0:n.name},{avatar:(0,a.w5)((function(){return[(0,a.Wm)(y,{class:"font-24 font-primary"})]})),title:(0,a.w5)((function(){return[(0,a._)("span",s,(0,i.zw)(t.name?t.name:"Unnamed"),1)]})),_:2},1032,["description"]),(0,a._)("div",c,[(0,a._)("div",d,[t.bindMesh?((0,a.wg)(),(0,a.iD)("span",f,[(0,a.Wm)(C,null,{default:(0,a.w5)((function(){var e;return[(0,a.Uk)("Mesh:"+(0,i.zw)(null===(e=t.bindMesh)||void 0===e?void 0:e.name),1)]})),_:2},1024)])):(0,a.kq)("",!0)]),(0,a._)("div",p,[(0,a._)("span",null,(0,i.zw)(e.$t("updTime")),1),(0,a._)("p",null,(0,i.zw)(new Date(t.updatedAt).toLocaleString()),1)])])]})),_:2},1024)})),128))]})),_:1},8,["pagination"])]})),_:1},8,["title","loading"])])}],["__scopeId","data-v-0c609d04"]]),$=n(13554),_=n(96486),W=n.n(_),P=n(61103),C=n(1299),x=n(13589),U=n(573),M=(n(47941),n(21249),n(49963));n(69600);var S={name:"TagMap",components:{PlusOutlined:n(44218).Z},props:["placeholder","name","map"],i18n:n(89234),data:function(){return{value:"",visible:!1}},methods:{showInput:function(){var e=this;this.visible=!0,this.$nextTick().then((function(){e.$refs[e.name].focus()}))},handleClose:function(e){var t=this.map;delete t[e],this.$emit("update:map",t),this.$emit("change",t)},inputConfirm:function(){if(""!=this.value){var e=this.value.split(":");if(e.length<2)this.$message.error({content:this.$t("Please enter the format of [key]:[value]")});else{var t=this.map||{};t[e.shift()]=e.join(":"),this.value="",this.visible=!1,this.$emit("update:map",t),this.$emit("change",t)}}else this.visible=!1}}};var z=(0,y.Z)(S,[["render",function(e,t,n,l,r,u){var o=(0,a.up)("a-tag"),s=(0,a.up)("a-input"),c=(0,a.up)("PlusOutlined");return(0,a.wg)(),(0,a.iD)(a.HY,null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(Object.keys(n.map||[]),(function(e,t){return(0,a.wg)(),(0,a.j4)(o,{key:t,onClose:function(t){return u.handleClose(e)},closable:!0},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,i.zw)(e)+":"+(0,i.zw)(n.map[e]),1)]})),_:2},1032,["onClose"])})),128)),(0,a.wy)((0,a.Wm)(s,{ref:n.name,type:"text",size:"small",class:"width-100",placeholder:n.placeholder,value:r.value,"onUpdate:value":t[0]||(t[0]=function(e){return r.value=e}),onBlur:u.inputConfirm,onKeyup:(0,M.D2)(u.inputConfirm,["enter"])},null,8,["placeholder","value","onBlur","onKeyup"]),[[M.F8,r.visible]]),r.visible?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(o,{key:0,onClick:u.showInput,class:"dashed-tag"},{default:(0,a.w5)((function(){return[(0,a.Wm)(c),(0,a.Uk)(" "+(0,i.zw)(e.$t("add")),1)]})),_:1},8,["onClick"]))],64)}]]),L=n(33907),D=n(47556),I=n(49702),E=n(16822),A={name:"MeshDetail",i18n:n(89234),components:{ServiceList:$.Z,NamespaceList:k,PageLayout:P.Z,DetailList:C.Z,DetailListItem:x.Z,LogViewer:I.Z,TagList:U.Z,TagMap:z,EmbedDashboard:u.Z,Status:E.Z},data:function(){return{DEFAULT_MESH_DETAIL:D.k5,activeKey:"1",detail:{name:"",prometheus:{id:null}},isEdit:!1,loading:!0,pid:""}},computed:(0,r.Z)({},(0,L.rn)({rules:function(e){return e.rules.rules},isMobile:function(e){return e.setting.isMobile}})),created:function(){this.pid=this.$route.params.id||"",this.namespace=this.$route.params.namespace||""},mounted:function(){""!=this.pid?this.search():(this.detail={name:"",prometheus:{id:null},switchType:0,virtualServices:[]},this.loading=!1)},methods:{search:function(){var e=this;this.loading=!0,this.$gql.query("mesh(id:".concat(this.pid,"){data{id,attributes{\n\t\t\t\t\t\tconfig,\n\t\t\t\t\t\tfsmMessage,\n\t\t\t\t\t\tprometheus{data{id,attributes{name}}},\n\t\t\t\t\t\tnamespace{data{id,attributes{\n\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\tregistry{data{id,attributes{name}}}\n\t\t\t\t\t\t}}},\n\t\t\t\t\t\tstatus,\n\t\t\t\t\t\tname,\n\t\t\t\t\t\tbindNamespaces{data{id,attributes{name}}},\n\t\t\t\t\t\tcreatedAt\n\t\t\t\t\t}}}")).then((function(t){e.detail=t.data,e.detail.prometheus=e.detail.prometheus||{id:null},e.loading=!1}))},prometheusChange:function(){var e,t=this;""!=this.pid&&this.$gql.mutation("updateMesh(id:".concat(this.pid,", data: $data){data{id}}"),{data:{prometheus:null===(e=this.detail.prometheus)||void 0===e?void 0:e.id}},{data:"MeshInput!"}).then((function(){t.$message.success(t.$t("Save successfully"),3)}))},save:function(){var e=this,t=W().cloneDeep(this.detail);""!=this.pid&&this.$gql.mutation("updateMesh(id:".concat(this.pid,", data: $data){data{id}}"),{data:{config:t.config}},{data:"MeshInput!"}).then((function(){e.$message.success(e.$t("Save successfully"),3),e.search()}))},validate:function(){var e=this;this.$refs.layout.$refs.form.validateFields().then((function(){e.save()})).catch((function(){}))}}};var T=(0,y.Z)(A,[["render",function(e,t,n,r,u,o){var s=(0,a.up)("DetailListItem"),c=(0,a.up)("Status"),d=(0,a.up)("DetailList"),f=(0,a.up)("EmbedDashboard"),p=(0,a.up)("a-tab-pane"),m=(0,a.up)("NamespaceList"),h=(0,a.up)("ServiceList"),g=(0,a.up)("a-switch"),v=(0,a.up)("a-descriptions-item"),b=(0,a.up)("a-descriptions"),w=(0,a.up)("a-card"),y=(0,a.up)("a-input-number"),k=(0,a.up)("TagList"),$=(0,a.up)("a-col"),_=(0,a.up)("a-radio"),W=(0,a.up)("a-radio-group"),P=(0,a.up)("a-row"),C=(0,a.up)("a-input"),x=(0,a.up)("TagMap"),U=(0,a.up)("LogViewer"),M=(0,a.up)("a-button"),S=(0,a.up)("a-tabs"),z=(0,a.up)("PageLayout"),L=(0,a.Q2)("permission");return(0,a.wg)(),(0,a.j4)(z,{title:e.$t("Mesh Detail"),"form-state":u.detail,ref:"layout"},{headerContent:(0,a.w5)((function(){return[(0,a.Wm)(d,{size:"small",col:1},{default:(0,a.w5)((function(){var t;return[u.detail.name?((0,a.wg)(),(0,a.j4)(s,{key:0,term:e.$t("Mesh")},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,i.zw)(u.detail.name),1)]})),_:1},8,["term"])):(0,a.kq)("",!0),(0,a.Wm)(s,{term:e.$t("Mesh Config")},{default:(0,a.w5)((function(){var e,t;return[(0,a.Uk)((0,i.zw)(null===(e=u.detail.config)||void 0===e||null===(t=e.metadata)||void 0===t?void 0:t.name),1)]})),_:1},8,["term"]),(0,a.Wm)(s,{term:e.$t("Namespace")},{default:(0,a.w5)((function(){var e,t,n;return[(0,a.Uk)((0,i.zw)(u.detail.namespace?(null===(e=u.detail.namespace)||void 0===e||null===(t=e.registry)||void 0===t?void 0:t.name)+"/"+(null===(n=u.detail.namespace)||void 0===n?void 0:n.name):"-"),1)]})),_:1},8,["term"]),null!==(t=u.detail.status)&&void 0!==t&&t.mcs?((0,a.wg)(),(0,a.j4)(s,{key:1,term:e.$t("MCS")},{default:(0,a.w5)((function(){var e;return[(0,a.Wm)(c,{d:{status:null===(e=u.detail.status)||void 0===e?void 0:e.mcs,message:u.detail.fsmMessage}},null,8,["d"])]})),_:1},8,["term"])):(0,a.kq)("",!0),(0,a.Wm)(s,{term:e.$t("Creation Timestamp")},{default:(0,a.w5)((function(){var e,t;return[(0,a.Uk)((0,i.zw)(new Date(null===(e=u.detail.config)||void 0===e||null===(t=e.metadata)||void 0===t?void 0:t.creationTimestamp).toLocaleString()),1)]})),_:1},8,["term"])]})),_:1})]})),action:(0,a.w5)((function(){return[]})),default:(0,a.w5)((function(){return[(0,a.Wm)(P,{class:"row-mg"},{default:(0,a.w5)((function(){return[(0,a.Wm)($,{class:"col-pd",xl:24,lg:24,md:24,sm:24,xs:24},{default:(0,a.w5)((function(){return[""!=u.pid&&u.detail.namespace?((0,a.wg)(),(0,a.j4)(S,{key:0,type:"card",activeKey:u.activeKey,"onUpdate:activeKey":t[29]||(t[29]=function(e){return u.activeKey=e})},{rightExtra:(0,a.w5)((function(){return[""!=u.pid&&"4"==u.activeKey?(0,a.wy)(((0,a.wg)(),(0,a.j4)(M,{key:0,type:"primary",onClick:o.validate},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,i.zw)(e.$t("save")),1)]})),_:1},8,["onClick"])),[[L,["mesh:update"]]]):(0,a.kq)("",!0)]})),default:(0,a.w5)((function(){return[(0,a.Wm)(p,{key:"1",tab:e.$t("Dashboard")},{default:(0,a.w5)((function(){var e,n,i,l;return[(0,a.Wm)(f,{init:!1,"page-id":(null===(e=u.detail.namespace)||void 0===e?void 0:e.name)+"-"+u.pid,apply:"mesh",params:{name:u.detail.name,where:"",mesh:u.pid,namespace:null===(n=u.detail.namespace)||void 0===n?void 0:n.name,namespaceId:null===(i=u.detail.namespace)||void 0===i?void 0:i.id,namespaces:u.detail.bindNamespaces,registry:null===(l=u.detail.namespace)||void 0===l?void 0:l.registry.id},"default-widget":u.DEFAULT_MESH_DETAIL,"hide-add":"1"!=u.activeKey,prometheus:u.detail.prometheus.id,"onUpdate:prometheus":t[0]||(t[0]=function(e){return u.detail.prometheus.id=e}),onPrometheusChange:o.prometheusChange},null,8,["page-id","params","default-widget","hide-add","prometheus","onPrometheusChange"])]})),_:1},8,["tab"]),(0,a.Wm)(p,{key:"2",tab:e.$t("Bind Namespaces")},{default:(0,a.w5)((function(){return[(0,a.Wm)(m,{registry:u.detail.namespace.registry.id,"bind-mesh":u.pid,onChange:o.search},null,8,["registry","bind-mesh","onChange"])]})),_:1},8,["tab"]),(0,a.Wm)(p,{key:"3",tab:e.$t("Services")},{default:(0,a.w5)((function(){return[(0,a.Wm)(h,{mode:"mesh",namespaces:u.detail.bindNamespaces,embed:!0,metric:!1,"has-search":!1},{extra:(0,a.w5)((function(){return[]})),_:1},8,["namespaces"])]})),_:1},8,["tab"]),(0,a.Wm)(p,{key:"4",tab:e.$t("Mesh Config")},{default:(0,a.w5)((function(){return[u.detail.config?((0,a.wg)(),(0,a.j4)(w,{key:0,title:e.$t("Feature Flags"),class:"card nopd"},{default:(0,a.w5)((function(){return[(0,a.Wm)(b,{bordered:""},{default:(0,a.w5)((function(){return[(0,a.Wm)(v,{label:e.$t("Async Proxy Service Mapping"),span:1},{default:(0,a.w5)((function(){return[(0,a.Wm)(g,{checked:u.detail.config.spec.featureFlags.enableAsyncProxyServiceMapping,"onUpdate:checked":t[1]||(t[1]=function(e){return u.detail.config.spec.featureFlags.enableAsyncProxyServiceMapping=e})},null,8,["checked"])]})),_:1},8,["label"]),(0,a.Wm)(v,{label:e.$t("Egress Policy"),span:1},{default:(0,a.w5)((function(){return[(0,a.Wm)(g,{checked:u.detail.config.spec.featureFlags.enableEgressPolicy,"onUpdate:checked":t[2]||(t[2]=function(e){return u.detail.config.spec.featureFlags.enableEgressPolicy=e})},null,8,["checked"])]})),_:1},8,["label"]),(0,a.Wm)(v,{label:e.$t("Sidecar Active Health Checks"),span:1},{default:(0,a.w5)((function(){return[(0,a.Wm)(g,{checked:u.detail.config.spec.featureFlags.enableSidecarActiveHealthChecks,"onUpdate:checked":t[3]||(t[3]=function(e){return u.detail.config.spec.featureFlags.enableSidecarActiveHealthChecks=e})},null,8,["checked"])]})),_:1},8,["label"]),(0,a.Wm)(v,{label:e.$t("Ingress Backend Policy"),span:1},{default:(0,a.w5)((function(){return[(0,a.Wm)(g,{checked:u.detail.config.spec.featureFlags.enableIngressBackendPolicy,"onUpdate:checked":t[4]||(t[4]=function(e){return u.detail.config.spec.featureFlags.enableIngressBackendPolicy=e})},null,8,["checked"])]})),_:1},8,["label"]),(0,a.Wm)(v,{label:e.$t("Retry Policy"),span:1},{default:(0,a.w5)((function(){return[(0,a.Wm)(g,{checked:u.detail.config.spec.featureFlags.enableRetryPolicy,"onUpdate:checked":t[5]||(t[5]=function(e){return u.detail.config.spec.featureFlags.enableRetryPolicy=e})},null,8,["checked"])]})),_:1},8,["label"]),(0,a.Wm)(v,{label:e.$t("Snapshot Cache Mode"),span:1},{default:(0,a.w5)((function(){return[(0,a.Wm)(g,{checked:u.detail.config.spec.featureFlags.enableSnapshotCacheMode,"onUpdate:checked":t[6]||(t[6]=function(e){return u.detail.config.spec.featureFlags.enableSnapshotCacheMode=e})},null,8,["checked"])]})),_:1},8,["label"]),(0,a.Wm)(v,{label:e.$t("WASM Stats"),span:1},{default:(0,a.w5)((function(){return[(0,a.Wm)(g,{checked:u.detail.config.spec.featureFlags.enableWASMStats,"onUpdate:checked":t[7]||(t[7]=function(e){return u.detail.config.spec.featureFlags.enableWASMStats=e})},null,8,["checked"])]})),_:1},8,["label"])]})),_:1})]})),_:1},8,["title"])):(0,a.kq)("",!0),u.detail.config?((0,a.wg)(),(0,a.j4)(w,{key:1,title:e.$t("Traffic"),class:"card mt-15 nopd"},{default:(0,a.w5)((function(){return[(0,a.Wm)(b,{bordered:""},{default:(0,a.w5)((function(){return[(0,a.Wm)(v,{label:e.$t("Egress"),span:2},{default:(0,a.w5)((function(){return[(0,a.Wm)(g,{checked:u.detail.config.spec.traffic.enableEgress,"onUpdate:checked":t[8]||(t[8]=function(e){return u.detail.config.spec.traffic.enableEgress=e})},null,8,["checked"])]})),_:1},8,["label"]),(0,a.Wm)(v,{label:e.$t("Permissive Traffic Policy Mode"),span:1},{default:(0,a.w5)((function(){return[(0,a.Wm)(g,{checked:u.detail.config.spec.traffic.enablePermissiveTrafficPolicyMode,"onUpdate:checked":t[9]||(t[9]=function(e){return u.detail.config.spec.traffic.enablePermissiveTrafficPolicyMode=e})},null,8,["checked"])]})),_:1},8,["label"]),(0,a.Wm)(v,{span:3},{default:(0,a.w5)((function(){return[(0,a._)("span",l,(0,i.zw)(e.$t("Inbound External Authorization")),1)]})),_:1}),(0,a.Wm)(v,{label:e.$t("Enabled"),span:2},{default:(0,a.w5)((function(){return[(0,a.Wm)(g,{checked:u.detail.config.spec.traffic.inboundExternalAuthorization.enable,"onUpdate:checked":t[10]||(t[10]=function(e){return u.detail.config.spec.traffic.inboundExternalAuthorization.enable=e})},null,8,["checked"])]})),_:1},8,["label"]),(0,a.Wm)(v,{label:e.$t("Failure Mode Allow"),span:1},{default:(0,a.w5)((function(){return[(0,a.Wm)(g,{checked:u.detail.config.spec.traffic.inboundExternalAuthorization.failureModeAllow,"onUpdate:checked":t[11]||(t[11]=function(e){return u.detail.config.spec.traffic.inboundExternalAuthorization.failureModeAllow=e})},null,8,["checked"])]})),_:1},8,["label"]),(0,a.Wm)(v,{label:e.$t("Stat Prefix"),span:2},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,i.zw)(u.detail.config.spec.traffic.inboundExternalAuthorization.statPrefix),1)]})),_:1},8,["label"]),(0,a.Wm)(v,{label:e.$t("Timeout")+"(s)",span:1},{default:(0,a.w5)((function(){return[(0,a.Wm)(y,{min:0,value:u.detail.config.spec.traffic.inboundExternalAuthorization.timeout,"onUpdate:value":t[12]||(t[12]=function(e){return u.detail.config.spec.traffic.inboundExternalAuthorization.timeout=e}),placeholder:e.$t("unset")},null,8,["value","placeholder"])]})),_:1},8,["label"]),(0,a.Wm)(v,{label:e.$t("Inbound Port (Exclusion)"),span:2},{default:(0,a.w5)((function(){return[(0,a.Wm)(k,{list:u.detail.config.spec.traffic.inboundPortExclusionList,"onUpdate:list":t[13]||(t[13]=function(e){return u.detail.config.spec.traffic.inboundPortExclusionList=e}),name:"inboundPortExclusionList",placeholder:"Port"},null,8,["list"])]})),_:1},8,["label"]),(0,a.Wm)(v,{label:e.$t("Outbound Port (Exclusion)"),span:1},{default:(0,a.w5)((function(){return[(0,a.Wm)(k,{list:u.detail.config.spec.traffic.outboundPortExclusionList,"onUpdate:list":t[14]||(t[14]=function(e){return u.detail.config.spec.traffic.outboundPortExclusionList=e}),name:"outboundPortExclusionList",placeholder:"Port"},null,8,["list"])]})),_:1},8,["label"]),(0,a.Wm)(v,{label:e.$t("Outbound IP Range (Exclusion)"),span:2},{default:(0,a.w5)((function(){return[(0,a.Wm)(k,{list:u.detail.config.spec.traffic.outboundIPRangeExclusionList,"onUpdate:list":t[15]||(t[15]=function(e){return u.detail.config.spec.traffic.outboundIPRangeExclusionList=e}),name:"outboundIPRangeExclusionList",placeholder:"0.0.0.0/n"},null,8,["list"])]})),_:1},8,["label"]),(0,a.Wm)(v,{label:e.$t("Outbound IP Range (Inclusion)"),span:1},{default:(0,a.w5)((function(){return[(0,a.Wm)(k,{list:u.detail.config.spec.traffic.outboundIPRangeInclusionList,"onUpdate:list":t[16]||(t[16]=function(e){return u.detail.config.spec.traffic.outboundIPRangeInclusionList=e}),name:"outboundIPRangeInclusionList",placeholder:"0.0.0.0/n"},null,8,["list"])]})),_:1},8,["label"])]})),_:1})]})),_:1},8,["title"])):(0,a.kq)("",!0),(0,a.Wm)(P,{class:"row-mg"},{default:(0,a.w5)((function(){return[(0,a.Wm)($,{class:"col-pd",xl:12,lg:24,md:24,sm:24,xs:24},{default:(0,a.w5)((function(){return[u.detail.config?((0,a.wg)(),(0,a.j4)(w,{key:0,title:e.$t("Certificate"),class:"card mt-15 nopd"},{default:(0,a.w5)((function(){return[(0,a.Wm)(b,{bordered:""},{default:(0,a.w5)((function(){return[(0,a.Wm)(v,{label:e.$t("Cert Key Bit Size"),span:3},{default:(0,a.w5)((function(){return[(0,a.Wm)(y,{min:0,value:u.detail.config.spec.certificate.certKeyBitSize,"onUpdate:value":t[17]||(t[17]=function(e){return u.detail.config.spec.certificate.certKeyBitSize=e}),placeholder:"Bit"},null,8,["value"])]})),_:1},8,["label"]),(0,a.Wm)(v,{label:e.$t("Service Cert Validity Duration")+"(h)",span:3},{default:(0,a.w5)((function(){return[(0,a.Wm)(y,{min:0,value:u.detail.config.spec.certificate.serviceCertValidityDuration,"onUpdate:value":t[18]||(t[18]=function(e){return u.detail.config.spec.certificate.serviceCertValidityDuration=e}),placeholder:"h"},null,8,["value"])]})),_:1},8,["label"])]})),_:1})]})),_:1},8,["title"])):(0,a.kq)("",!0)]})),_:1}),(0,a.Wm)($,{class:"col-pd",xl:12,lg:24,md:24,sm:24,xs:24},{default:(0,a.w5)((function(){return[u.detail.config?((0,a.wg)(),(0,a.j4)(w,{key:0,title:e.$t("Observability"),class:"card mt-15 nopd"},{default:(0,a.w5)((function(){return[(0,a.Wm)(b,{bordered:""},{default:(0,a.w5)((function(){return[(0,a.Wm)(v,{label:e.$t("Log Level"),span:3},{default:(0,a.w5)((function(){return[(0,a.Wm)(W,{value:u.detail.config.spec.observability.osmLogLevel,"onUpdate:value":t[19]||(t[19]=function(e){return u.detail.config.spec.observability.osmLogLevel=e}),name:"radioGroup"},{default:(0,a.w5)((function(){return[(0,a.Wm)(_,{value:"error"},{default:(0,a.w5)((function(){return[(0,a.Uk)(" Error ")]})),_:1}),(0,a.Wm)(_,{value:"info"},{default:(0,a.w5)((function(){return[(0,a.Uk)(" Info ")]})),_:1})]})),_:1},8,["value"])]})),_:1},8,["label"]),(0,a.Wm)(v,{label:e.$t("Debug Server"),span:1},{default:(0,a.w5)((function(){return[(0,a.Wm)(g,{checked:u.detail.config.spec.observability.enableDebugServer,"onUpdate:checked":t[20]||(t[20]=function(e){return u.detail.config.spec.observability.enableDebugServer=e})},null,8,["checked"])]})),_:1},8,["label"]),(0,a.Wm)(v,{label:e.$t("Tracing"),span:2},{default:(0,a.w5)((function(){return[(0,a.Wm)(g,{checked:u.detail.config.spec.observability.tracing.enable,"onUpdate:checked":t[21]||(t[21]=function(e){return u.detail.config.spec.observability.tracing.enable=e})},null,8,["checked"])]})),_:1},8,["label"])]})),_:1})]})),_:1},8,["title"])):(0,a.kq)("",!0)]})),_:1})]})),_:1}),u.detail.config?((0,a.wg)(),(0,a.j4)(w,{key:2,title:e.$t("Sidecar"),class:"card mt-15 nopd"},{default:(0,a.w5)((function(){return[(0,a.Wm)(b,{bordered:""},{default:(0,a.w5)((function(){return[(0,a.Wm)(v,{label:e.$t("Log Level"),span:1},{default:(0,a.w5)((function(){return[(0,a.Wm)(W,{value:u.detail.config.spec.sidecar.logLevel,"onUpdate:value":t[22]||(t[22]=function(e){return u.detail.config.spec.sidecar.logLevel=e}),name:"radioGroup"},{default:(0,a.w5)((function(){return[(0,a.Wm)(_,{value:"error"},{default:(0,a.w5)((function(){return[(0,a.Uk)(" Error ")]})),_:1}),(0,a.Wm)(_,{value:"info"},{default:(0,a.w5)((function(){return[(0,a.Uk)(" Info ")]})),_:1})]})),_:1},8,["value"])]})),_:1},8,["label"]),u.detail.config.spec.sidecar.localProxyMode?((0,a.wg)(),(0,a.j4)(v,{key:0,label:e.$t("Local Proxy Mode"),span:1},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,i.zw)(u.detail.config.spec.sidecar.localProxyMode),1)]})),_:1},8,["label"])):(0,a.kq)("",!0),(0,a.Wm)(v,{label:e.$t("Privileged Init Container"),span:1},{default:(0,a.w5)((function(){return[(0,a.Wm)(g,{checked:u.detail.config.spec.sidecar.enablePrivilegedInitContainer,"onUpdate:checked":t[23]||(t[23]=function(e){return u.detail.config.spec.sidecar.enablePrivilegedInitContainer=e})},null,8,["checked"])]})),_:1},8,["label"]),(0,a.Wm)(v,{label:e.$t("Config Resync Interval")+"(s)",span:1},{default:(0,a.w5)((function(){return[(0,a.Wm)(y,{min:0,value:u.detail.config.spec.sidecar.configResyncInterval,"onUpdate:value":t[24]||(t[24]=function(e){return u.detail.config.spec.sidecar.configResyncInterval=e}),placeholder:e.$t("unset")},null,8,["value","placeholder"])]})),_:1},8,["label"]),(0,a.Wm)(v,{label:e.$t("Tls Protocol Version (Min)"),span:1},{default:(0,a.w5)((function(){return[(0,a.Wm)(C,{value:u.detail.config.spec.sidecar.tlsMinProtocolVersion,"onUpdate:value":t[25]||(t[25]=function(e){return u.detail.config.spec.sidecar.tlsMinProtocolVersion=e}),placeholder:e.$t("unset")},null,8,["value","placeholder"])]})),_:1},8,["label"]),(0,a.Wm)(v,{label:e.$t("Tls Protocol Version (Max)"),span:1},{default:(0,a.w5)((function(){return[(0,a.Wm)(C,{value:u.detail.config.spec.sidecar.tlsMaxProtocolVersion,"onUpdate:value":t[26]||(t[26]=function(e){return u.detail.config.spec.sidecar.tlsMaxProtocolVersion=e}),placeholder:e.$t("unset")},null,8,["value","placeholder"])]})),_:1},8,["label"]),(0,a.Wm)(v,{label:e.$t("Local DNS Proxy"),span:1},{default:(0,a.w5)((function(){return[(0,a.Wm)(g,{checked:u.detail.config.spec.sidecar.localDNSProxy.enable,"onUpdate:checked":t[27]||(t[27]=function(e){return u.detail.config.spec.sidecar.localDNSProxy.enable=e})},null,8,["checked"])]})),_:1},8,["label"]),(0,a.Wm)(v,{label:e.$t("Resources"),span:2},{default:(0,a.w5)((function(){return[(0,a.Wm)(x,{map:u.detail.config.spec.sidecar.resources,"onUpdate:map":t[28]||(t[28]=function(e){return u.detail.config.spec.sidecar.resources=e}),name:"resources",placeholder:"[key]:[value]"},null,8,["map"])]})),_:1},8,["label"])]})),_:1})]})),_:1},8,["title"])):(0,a.kq)("",!0)]})),_:1},8,["tab"]),""!=u.pid?((0,a.wg)(),(0,a.j4)(p,{key:"13",tab:e.$t("log")},{default:(0,a.w5)((function(){return[(0,a.Wm)(U,{uid:u.pid,params:{name:u.detail.name},type:"mesh"},null,8,["uid","params"])]})),_:1},8,["tab"])):(0,a.kq)("",!0)]})),_:1},8,["activeKey"])):(0,a.kq)("",!0)]})),_:1})]})),_:1})]})),_:1},8,["title","form-state"])}]])}}]);