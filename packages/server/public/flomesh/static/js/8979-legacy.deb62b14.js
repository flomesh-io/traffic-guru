"use strict";(self.webpackChunkflomesh_load_balancer=self.webpackChunkflomesh_load_balancer||[]).push([[8979],{97764:function(e,t,a){a.r(t),a.d(t,{default:function(){return W}});a(68309),a(47941);var n=a(66252),i=a(3577);var s=a(95082),l=(a(74916),a(64765),a(57658),a(92222),a(77469)),r=a(7141),o=a(19373),d={key:0},u=["onClick"];a(21249);var c=a(2692),m=[{key:"as",dataIndex:"name"},{key:"Namespace",width:130,dataIndex:"namespace"},{key:"Min Replicas",dataIndex:"minReplicas"},{key:"Max Replicas",dataIndex:"maxReplicas"},{key:"Ref",dataIndex:"ref"},{key:"Creation Timestamp",dataIndex:"creationTimestamp"},{key:"Action",width:130,dataIndex:"action"}],p={name:"ServiceList",components:{MoreOutlined:c.Z},props:["embed","d","url","namespace"],i18n:a(89234),data:function(){return{params:{pageNo:1,pageSize:10,total:0},columns:m,loading:!1,list:[]}},computed:{dataColumns:function(){var e=this;return this.columns.map((function(t){return t.title=e.$t(t.key),t}))}},created:function(){this.embed?(this.list=this.reset(this.d),this.params.total=this.d.length,this.loading=!1):this.search()},methods:{detail:function(e,t){this.$router.push({path:"/fsm/service/detail/".concat(t,"/").concat(e)})},MakeUrl:function(){var e=this.$REST.K8S.append(this.params.pageSize,this.params.pageNo,"d,creationTimestamp");return this.$REST.K8S.encode(this.url,e,this.namespace)},search:function(e,t){var a=this;e&&(this.params.pageNo=e,this.params.pageSize=t),this.loading=!0,this.$request(this.MakeUrl(),this.$METHOD.GET).then((function(e){var t=e.data;a.list=a.reset(t.items),a.params.total=t.count,a.loading=!1}))},reset:function(e){for(var t=0;t<e.length;t++)e[t].uid=e[t].metadata.uid,e[t].name=e[t].metadata.name,e[t].namespace=e[t].metadata.namespace,e[t].minReplicas=e[t].spec.minReplicas,e[t].maxReplicas=e[t].spec.maxReplicas,e[t].ref=e[t].spec.scaleTargetRef?e[t].spec.scaleTargetRef.kind+"/"+e[t].spec.scaleTargetRef.name:"-",e[t].creationTimestamp=new Date(e[t].metadata.creationTimestamp).toLocaleString();return e}}},f=a(83744);var g=(0,f.Z)(p,[["render",function(e,t,a,s,l,r){var o=(0,n.up)("a-menu-item"),c=(0,n.up)("a-popconfirm"),m=(0,n.up)("a-menu"),p=(0,n.up)("MoreOutlined"),f=(0,n.up)("a-dropdown"),g=(0,n.up)("a-table"),h=(0,n.up)("a-card");return(0,n.wg)(),(0,n.j4)(h,{class:"card nopd",title:e.$t("Pod Horizontal Auto Scaler"),loading:l.loading},{default:(0,n.w5)((function(){return[(0,n._)("div",null,[(0,n.Wm)(g,{pagination:{showSizeChanger:!1,showQuickJumper:!1,onShowSizeChange:r.search,onChange:r.search,current:l.params.pageNo,pageSize:l.params.pageSize,showTotal:function(t,a){return"".concat(e.$t("Total")," ").concat(t)},total:l.params.total},columns:r.dataColumns,"data-source":l.list,class:"bg-white"},{bodyCell:(0,n.w5)((function(a){var s=a.column,l=a.record;return["action"===s.dataIndex?((0,n.wg)(),(0,n.iD)("div",d,[(0,n.Wm)(f,null,{overlay:(0,n.w5)((function(){return[(0,n.Wm)(m,null,{default:(0,n.w5)((function(){return[(0,n.Wm)(o,null,{default:(0,n.w5)((function(){return[(0,n._)("a",{onClick:function(e){return r.detail(l.name,l.namespace)}},(0,i.zw)(e.$t("edit")),9,u)]})),_:2},1024),(0,n.Wm)(o,null,{default:(0,n.w5)((function(){return[(0,n.Wm)(c,{placement:"topLeft","ok-text":e.$t("Yes"),"cancel-text":e.$t("No"),onConfirm:t[0]||(t[0]=function(t){return e.remove(e.item.id)})},{title:(0,n.w5)((function(){return[(0,n._)("p",null,(0,i.zw)(e.$t("Tip")),1),(0,n._)("p",null,(0,i.zw)(e.$t("Are you sure to delete this?")),1)]})),default:(0,n.w5)((function(){return[(0,n._)("a",null,(0,i.zw)(e.$t("delete")),1)]})),_:1},8,["ok-text","cancel-text"])]})),_:1})]})),_:2},1024)]})),default:(0,n.w5)((function(){return[(0,n._)("a",null,[(0,n.Wm)(p)])]})),_:2},1024)])):(0,n.kq)("",!0)]})),_:1},8,["pagination","columns","data-source"])])]})),_:1},8,["title","loading"])}],["__scopeId","data-v-290ec034"]]),h=a(61103),w=a(1299),k=a(33907),S=a(13589),v=a(39176),y=a(44044),$=a(51461),_=a(54140),T=a(38251),b=a(5966),I={name:"DeploymentsDetail",i18n:a(89234),components:{DetailListItem:S.Z,DetailList:w.Z,PageLayout:h.Z,StatusList:r.Z,EventList:l.Z,HozScalerList:g,ReplicaSetList:o.Z,RollingUpdateCard:v.Z,PodStatusCard:y.Z,ImageTags:$.Z,DetailHeader:_.Z,PodStatusTags:b.Z,ResourceInfoCard:T.Z},data:function(){return{detail:{metadata:{labels:{},annotations:{}},typeMeta:{},pods:{},containerImages:[],selector:{},statusInfo:{},conditions:[],rollingUpdateStrategy:{}},loading:!0,pid:"",namespace:"",isMounted:!1,metrics:[],params:{key:"",pageNo:1,pageSize:10,total:0}}},computed:(0,s.Z)({},(0,k.rn)("setting",["isMobile"])),created:function(){this.pid=this.$route.params.id||"",this.namespace=this.$route.params.namespace||localStorage.getItem("NAMESPACE")},mounted:function(){this.isMounted=!0,""!=this.pid?this.search():(this.detail={metadata:{labels:{},annotations:{}},typeMeta:{},pods:{},containerImages:[],selector:{},statusInfo:{},conditions:[],rollingUpdateStrategy:{}},this.loading=!1)},methods:{onTabChange:function(e){},search:function(){var e=this;this.loading=!0,this.$request(this.URL(),this.$METHOD.GET).then((function(t){e.detail=t.data,e.loading=!1}))},URL:function(){var e="/"+this.pid;return this.$REST.K8S.encode(this.$REST.K8S.DEPLOYMENT,e,this.namespace)},valid:function(){return!0},save:function(){this.valid()&&(""!=this.pid?(this.$message.success(this.$t("Save successfully"),3),this.$closePage(this.$route)):(this.$message.success(this.$t("Created successfully"),3),this.$closePage(this.$route)))},handleChange:function(){},newreplicasetDetail:function(e,t){this.$router.push({path:"/workload/replicaset/detail/".concat(t,"/").concat(e)})}}};var W=(0,f.Z)(I,[["render",function(e,t,a,s,l,r){var o=(0,n.up)("DetailHeader"),d=(0,n.up)("ResourceInfoCard"),u=(0,n.up)("RollingUpdateCard"),c=(0,n.up)("PodStatusCard"),m=(0,n.up)("DetailListItem"),p=(0,n.up)("PodStatusTags"),f=(0,n.up)("DetailList"),g=(0,n.up)("a-tag"),h=(0,n.up)("ImageTags"),w=(0,n.up)("a-card"),k=(0,n.up)("ReplicaSetList"),S=(0,n.up)("HozScalerList"),v=(0,n.up)("a-tab-pane"),y=(0,n.up)("StatusList"),$=(0,n.up)("EventList"),_=(0,n.up)("a-tabs"),T=(0,n.up)("a-col"),b=(0,n.up)("a-row"),I=(0,n.up)("PageLayout");return(0,n.wg)(),(0,n.j4)(I,{title:e.$t("Deployments")},{headerContent:(0,n.w5)((function(){return[(0,n.Wm)(o,{d:l.detail},null,8,["d"])]})),action:(0,n.w5)((function(){return[]})),default:(0,n.w5)((function(){return[(0,n.Wm)(b,{class:"row-mg"},{default:(0,n.w5)((function(){return[(0,n.Wm)(T,{class:"col-pd",xl:24,lg:24,md:24,sm:24,xs:24},{default:(0,n.w5)((function(){return[(0,n.Wm)(_,{type:"card"},{default:(0,n.w5)((function(){return[(0,n.Wm)(v,{key:"1",tab:e.$t("Overview")},{default:(0,n.w5)((function(){var a,s;return[(0,n.Wm)(d,{loading:l.loading,d:l.detail},null,8,["loading","d"]),(0,n.Wm)(u,{loading:l.loading,d:null===(a=l.detail.spec)||void 0===a?void 0:a.updateStrategy},null,8,["loading","d"]),(0,n.Wm)(u,{title:e.$t("Strategy"),loading:l.loading,d:null===(s=l.detail.spec)||void 0===s?void 0:s.strategy},null,8,["title","loading","d"]),(0,n.Wm)(c,{loading:l.loading,d:l.detail.statusInfo},null,8,["loading","d"]),l.detail.newreplicaset&&l.detail.newreplicaset.metadata?((0,n.wg)(),(0,n.j4)(w,{key:0,class:"card mb-20",bordered:!1,loading:l.loading,title:e.$t("New Replica Set")},{default:(0,n.w5)((function(){return[(0,n.Wm)(f,{size:"small",col:4},{default:(0,n.w5)((function(){return[(0,n.Wm)(m,{term:e.$t("as")},{default:(0,n.w5)((function(){return[(0,n._)("a",{href:"javascript:void(0)",onClick:t[0]||(t[0]=function(e){return r.newreplicasetDetail(l.detail.newreplicaset.metadata.name,l.detail.newreplicaset.metadata.namespace)})},(0,i.zw)(l.detail.newreplicaset.metadata.name),1)]})),_:1},8,["term"]),(0,n.Wm)(m,{term:e.$t("Namespace")},{default:(0,n.w5)((function(){return[(0,n.Uk)((0,i.zw)(l.detail.newreplicaset.metadata.namespace),1)]})),_:1},8,["term"]),(0,n.Wm)(m,{term:e.$t("Creation Timestamp")},{default:(0,n.w5)((function(){return[(0,n.Uk)((0,i.zw)(new Date(l.detail.newreplicaset.metadata.creationTimestamp).toLocaleString()),1)]})),_:1},8,["term"]),l.detail.newreplicaset.podInfo?((0,n.wg)(),(0,n.j4)(m,{key:0,term:e.$t("Pods")},{default:(0,n.w5)((function(){return[(0,n.Wm)(p,{d:l.detail.newreplicaset.podInfo},null,8,["d"])]})),_:1},8,["term"])):(0,n.kq)("",!0)]})),_:1}),(0,n.Wm)(f,{size:"small",col:1},{default:(0,n.w5)((function(){return[l.detail.newreplicaset.metadata.labels?((0,n.wg)(),(0,n.j4)(m,{key:0,term:e.$t("Labels")},{default:(0,n.w5)((function(){return[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(Object.keys(l.detail.newreplicaset.metadata.labels||[]),(function(e,t){return(0,n.wg)(),(0,n.j4)(g,{key:t,closable:!1},{default:(0,n.w5)((function(){return[(0,n.Uk)((0,i.zw)(e)+":"+(0,i.zw)(l.detail.newreplicaset.metadata.labels[e]),1)]})),_:2},1024)})),128))]})),_:1},8,["term"])):(0,n.kq)("",!0),l.detail.newreplicaset?((0,n.wg)(),(0,n.j4)(m,{key:1,term:e.$t("Container Images")},{default:(0,n.w5)((function(){return[(0,n.Wm)(h,{d:l.detail.newreplicaset},null,8,["d"])]})),_:1},8,["term"])):(0,n.kq)("",!0)]})),_:1})]})),_:1},8,["loading","title"])):(0,n.kq)("",!0),l.loading?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(k,{key:1,namespace:l.namespace,class:"mb-20",d:l.detail.oldreplicaset||[],embed:!0,title:e.$t("Old Replica Sets"),metric:!1,"has-search":!1},null,8,["namespace","d","title"])),l.loading?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(S,{key:2,embed:!0,namespace:l.namespace,d:l.detail.horizontalpodautoscaler||[]},null,8,["namespace","d"]))]})),_:1},8,["tab"]),(0,n.Wm)(v,{key:"2",tab:e.$t("Status")},{default:(0,n.w5)((function(){return[(0,n.Wm)(w,{class:"card nopd",bordered:!1,loading:l.loading},{default:(0,n.w5)((function(){return[(0,n.Wm)(y,{d:l.detail.status.conditions||[]},null,8,["d"])]})),_:1},8,["loading"])]})),_:1},8,["tab"]),(0,n.Wm)(v,{key:"4",tab:e.$t("Events")},{default:(0,n.w5)((function(){return[(0,n.Wm)(w,{class:"card nopd",bordered:!1,loading:l.loading},{default:(0,n.w5)((function(){return[(0,n.Wm)($,{namespace:l.namespace,"has-search":!1,url:e.$REST.K8S.DEPLOYMENT+"/"+l.pid+"/event"},null,8,["namespace","url"])]})),_:1},8,["loading"])]})),_:1},8,["tab"])]})),_:1})]})),_:1})]})),_:1})]})),_:1},8,["title"])}]])},7141:function(e,t,a){a.d(t,{Z:function(){return l}});var n=a(66252);a(21249),a(74916),a(64765);var i=[{key:"Type",dataIndex:"type"},{key:"Status",dataIndex:"status"},{key:"Last Probe Time",dataIndex:"lastProbeTime"},{key:"Last Transition Time",dataIndex:"lastTransitionTime"},{key:"Reason",dataIndex:"reason"},{key:"Message",dataIndex:"message"}],s={name:"StatusList",components:{},props:["d"],i18n:a(89234),data:function(){return{columns:i,loading:!1,list:[]}},computed:{dataColumns:function(){var e=this;return this.columns.map((function(t){return t.title=e.$t(t.key),t}))}},created:function(){this.search()},methods:{search:function(){this.list=this.reset(this.d)},reset:function(e){for(var t=0;t<e.length;t++)e[t].lastProbeTime=new Date(e[t].lastProbeTime).toLocaleString(),e[t].lastTransitionTime=new Date(e[t].lastTransitionTime).toLocaleString();return e}}};var l=(0,a(83744).Z)(s,[["render",function(e,t,a,i,s,l){var r=(0,n.up)("a-table"),o=(0,n.up)("a-card");return(0,n.wg)(),(0,n.j4)(o,{class:"card nopd",title:e.$t("Status"),loading:s.loading},{default:(0,n.w5)((function(){return[(0,n._)("div",null,[(0,n.Wm)(r,{columns:l.dataColumns,"data-source":s.list},null,8,["columns","data-source"])])]})),_:1},8,["title","loading"])}],["__scopeId","data-v-1d5ee6b5"]])}}]);